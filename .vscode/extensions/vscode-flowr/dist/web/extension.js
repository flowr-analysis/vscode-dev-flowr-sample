/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={136:(e,t,n)=>{"use strict";const{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:o}=n(74641),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),u=o("nodejs.stream.writable"),c=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise"),f=o("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function _(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!=r&&r.destroyed)}function v(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function w(e,t){if(!p(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&p(e)&&e.readable&&!w(e)}function S(e){return e&&null!=e[u]?e[u]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&h(e)&&e.writable&&!v(e)}function x(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function R(e){return"boolean"==typeof e._sent100&&x(e)}e.exports={isDestroyed:b,kIsDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,n,r,i,o,s,l,u,c,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(u=e._writableState)||void 0===u?void 0:u.errorEmitted)&&void 0!==n?n:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:a,isReadable:E,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:f,kIsWritable:u,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&x(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!(!b(e)&&(!1!==(null==t?void 0:t.readable)&&E(e)||!1!==(null==t?void 0:t.writable)&&S(e))):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[i]:"function"==typeof e[r]||"function"==typeof e[i])},isReadableNodeStream:p,isReadableStream:g,isReadableEnded:function(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:w,isReadableErrored:function(e){var t,n;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||_(e)||y(e)},isWritable:S,isWritableNodeStream:h,isWritableStream:_,isWritableEnded:v,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:R,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&R(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:y}},251:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*m}},270:(e,t,n)=>{const r=n(53908),i=n(78311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},676:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LessThanOrEqualOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"}}t.LessThanOrEqualOperation=i},833:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizedAstToJson=function(e){return JSON.stringify({...e.ast,idMap:void 0},((e,t)=>{if("fullLexeme"!==e)return(0,r.jsonReplacer)(e,t)}))},t.normalizedAstToQuads=function(e,t){return(0,i.serialize2quads)(e.ast,t)},t.printNormalizedAstToMermaid=function(e){return(0,o.normalizedAstToMermaid)(e.ast)},t.printNormalizedAstToMermaidUrl=function(e){return(0,o.normalizedAstToMermaidUrl)(e.ast)};const r=n(91884),i=n(78936),o=n(67820)},1284:(e,t,n)=>{"use strict";const r=globalThis.AbortController||n(25568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:l}=n(68526),{validateAbortSignal:u,validateInteger:c,validateObject:d}=n(2224),f=n(74641).Symbol("kWeak"),p=n(74641).Symbol("kResistStopPropagation"),{finished:h}=n(89365),m=n(8489),{addAbortSignalNoValidate:g}=n(30810),{isWritable:_,isNodeStream:y}=n(136),{deprecate:b}=n(56017),{ArrayPrototypePush:v,Boolean:w,MathFloor:E,Number:S,NumberIsNaN:x,Promise:R,PromiseReject:T,PromiseResolve:A,PromisePrototypeThen:O,Symbol:I}=n(74641),N=I("kEmpty"),P=I("kEof");function $(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=E(t.concurrency));let i=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=E(t.highWaterMark)),c(r,"options.concurrency",1),c(i,"options.highWaterMark",0),i+=r,async function*(){const o=n(56017).AbortSignalAny([null==t?void 0:t.signal].filter(w)),s=this,a=[],u={signal:o};let c,d,f=!1,p=0;function h(){f=!0,m()}function m(){p-=1,g()}function g(){d&&!f&&p<r&&a.length<i&&(d(),d=null)}!async function(){try{for await(let t of s){if(f)return;if(o.aborted)throw new l;try{if(t=e(t,u),t===N)continue;t=A(t)}catch(e){t=T(e)}p+=1,O(t,m,h),a.push(t),c&&(c(),c=null),!f&&(a.length>=i||p>=r)&&await new R((e=>{d=e}))}a.push(P)}catch(e){const t=T(e);O(t,m,h),a.push(t)}finally{f=!0,c&&(c(),c=null)}}();try{for(;;){for(;a.length>0;){const e=await a[0];if(e===P)return;if(o.aborted)throw new l;e!==N&&(yield e),a.shift(),g()}await new R((e=>{c=e}))}}finally{f=!0,d&&(d(),d=null)}}.call(this)}async function C(e,t=void 0){for await(const n of M.call(this,e,t))return!0;return!1}function M(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return $.call(this,(async function(t,n){return await e(t,n)?t:N}),t)}class k extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function j(e){if(e=S(e),x(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b((function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l({cause:e.signal.reason});yield[t++,r]}}.call(this)}),"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=j(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;e--<=0&&(yield n)}}.call(this)},filter:M,flatMap:function(e,t){const n=$.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:$,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=j(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;if(e-- >0&&(yield n),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),y(e)&&!_(e))throw new i("stream",e,"must be writable");const n=m(this,e);return null!=t&&t.signal&&g(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await C.call(this,(async(...t)=>!await e(...t)),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const n of $.call(this,(async function(t,n){return await e(t,n),N}),t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&u(n.signal,"options.signal");let s=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){const e=new l(void 0,{cause:n.signal.reason});throw this.once("error",(()=>{})),await h(this.destroy(e)),e}const a=new r,c=a.signal;if(null!=n&&n.signal){const e={once:!0,[f]:this,[p]:!0};n.signal.addEventListener("abort",(()=>a.abort()),e)}let m=!1;try{for await(const r of this){var g;if(m=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new l;s?t=await e(t,r,{signal:c}):(t=r,s=!0)}if(!m&&!s)throw new k}finally{a.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l(void 0,{cause:e.signal.reason});v(t,r)}return t},some:C,find:async function(e,t){for await(const n of M.call(this,e,t))return n}}},1611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedVirtualQueries=void 0;const r=n(52093);t.SupportedVirtualQueries={compound:r.executeCompoundQueries}},1726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathEvaluatorImpl=void 0;const r=n(55959),i=n(40318),o=n(20518),s=n(86136),a=n(69093);t.XPathEvaluatorImpl=class{functionResolver;variableResolver;namespaceResolver;parser;constructor({fr:e,vr:t,p:n}){this.functionResolver=e,this.variableResolver=t,this.parser=n}createExpression(e,t){try{return new s.XPathExpressionImpl(e,{fr:this.functionResolver,nr:null==t?this.namespaceResolver:new a.XPathNSResolverWrapper(t),vr:this.variableResolver,p:this.parser})}catch(e){throw new o.XPathException(o.XPathException.INVALID_EXPRESSION_ERR,e)}}createNSResolver(e){return new r.NodeXPathNSResolver(e)}evaluate(e,t,n,r,o){if(r<0||r>9)throw{code:0,toString:()=>"Request type not supported"};return null!=n&&(n=function(e){if(null==e)return{lookupNamespaceURI:e=>null};if((0,i.isNSResolver)(e))return e;{const t=e;return{lookupNamespaceURI:e=>t(e)}}}(n)),this.createExpression(e,n).evaluate(t,r,o)}}},1786:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnaryMinusOperation=void 0;const r=n(94739);class i extends r.UnaryOperation{evaluate(e){return this.rhs.evaluate(e).number.negate()}toString(){return"-"+this.rhs.toString()}}t.UnaryMinusOperation=i},2224:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:d,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=n(74641),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:E}}=n(68526),{normalizeEncoding:S}=n(56017),{isAsyncFunction:x,isArrayBufferView:R}=n(56017).types,T={},A=/^[0-7]+$/,O=_(((e,t,n=c,r=u)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<n||e>r)throw new w(t,`>= ${n} && <= ${r}`,e)})),I=_(((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<n||e>r)throw new w(t,`>= ${n} && <= ${r}`,e)})),N=_(((e,t,n=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new w(t,`>= ${r} && <= ${i}`,e)}));function P(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const $=_(((e,t,n)=>{if(!i(n,e)){const r=o(s(n,(e=>"string"==typeof e?`'${e}'`:h(e))),", ");throw new v(t,e,"must be one of: "+r)}}));function C(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function M(e,t,n){return null!=e&&f(e,t)?e[t]:n}const k=_(((e,t,n=null)=>{const i=M(n,"allowArray",!1),o=M(n,"allowFunction",!1);if(!M(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)})),j=_(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)})),L=_(((e,t,n=0)=>{if(!r(e))throw new b(t,"Array",e);if(e.length<n)throw new v(t,e,`must be longer than ${n}`)})),F=_(((e,t="buffer")=>{if(!R(e))throw new b(t,["Buffer","TypedArray","DataView"],e)})),D=_(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)})),B=_(((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)})),U=_(((e,t)=>{if("function"!=typeof e||x(e))throw new b(t,"Function",e)})),q=_(((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)})),V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function z(e,t){if(void 0===e||!p(V,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===p(A,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return N(e,t),e},validateArray:L,validateStringArray:function(e,t){L(e,t);for(let n=0;n<e.length;n++)P(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){L(e,t);for(let n=0;n<e.length;n++)C(e[n],`${t}[${n}]`)},validateAbortSignalArray:function(e,t){L(e,t);for(let n=0;n<e.length;n++){const r=e[n],i=`${t}[${n}]`;if(null==r)throw new b(i,"AbortSignal",r);D(r,i)}},validateBoolean:C,validateBuffer:F,validateDictionary:j,validateEncoding:function(e,t){const n=S(t),r=e.length;if("hex"===n&&r%2!=0)throw new v("encoding",t,`is invalid for data of length ${r}`)},validateFunction:B,validateInt32:I,validateInteger:O,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new b(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&l(e))throw new w(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:k,validateOneOf:$,validatePlainFunction:U,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!=+e>>>0||e>65535||0===e&&!n)throw new y(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(P(e,t),void 0===T[e]){if(void 0!==T[m(e)])throw new E(e+" (signals must use all capital letters)");throw new E(e)}},validateString:P,validateUint32:N,validateUndefined:q,validateUnion:function(e,t,n){if(!i(n,e))throw new b(t,`('${o(n,"|")}')`,e)},validateAbortSignal:D,validateLinkHeaderValue:function(e){if("string"==typeof e)return z(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const i=e[r];z(i,"hints"),n+=i,r!==t-1&&(n+=", ")}return n}throw new v("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},2362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NORMALIZE_TREE_SITTER=void 0;const r=n(23644),i=n(833),o=n(56293),s=n(71412);t.NORMALIZE_TREE_SITTER={name:"normalize",humanReadableName:"normalize tree-sitter tree",description:"Normalize the AST to flowR's AST",processor:function(e,t){return(0,o.normalizeTreeSitter)(e.parse,t.getId,(0,s.getCurrentRequestFile)(t.request))},executed:0,printer:{0:r.internalPrinter,2:i.normalizedAstToJson,5:i.normalizedAstToQuads,3:i.printNormalizedAstToMermaid,4:i.printNormalizedAstToMermaidUrl},dependencies:["parse"],requiredInput:void 0}},2391:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResolveValueQueryDefinition=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(41229);t.ResolveValueQueryDefinition={executor:a.executeResolveValueQuery,asciiSummarizer:(e,t,n,r)=>{const s=n;r.push(`Query: ${(0,i.bold)("resolve-value",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`);for(const[e,t]of Object.entries(s.results)){const{criteria:n}=JSON.parse(e);r.push(`   ╰ Values for {${n.join(", ")}}`),r.push(`   \t╰ ${t.values.map((e=>{return null==(t=e)?"undefined":"string"==typeof t?t:"object"==typeof t?"num"in t?t.num.toString():"str"in t?`${t.quotes}${t.str}${t.quotes}`:(console.warn("omega lul"),JSON.stringify(t)):t;var t})).join(", ")}`)}return!0},schema:s.default.object({type:s.default.string().valid("resolve-value").required().description("The type of the query."),criteria:s.default.array().items(s.default.string()).min(1).required().description("The slicing criteria to use.")}).description("The resolve value query used to get definitions of an identifier")}},3345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeAccess=function(e,t){if(t.length<3)return void i.parseLog.trace("expected at least three elements are required to parse an access");const n=t[1];let f,p=0;switch(n.name){case l.RawRType.BracketLeft:f="[",p=1;break;case l.RawRType.Dollar:f="$";break;case l.RawRType.At:f="@";break;case l.RawRType.DoubleBracketLeft:f="[[",p=2;break;default:return void i.parseLog.trace(`expected second element to be an access operator, yet received ${n.name}`)}const h=t[0];if(h.name!==l.RawRType.Expression&&h.name!==l.RawRType.ExprOfAssignOrHelp&&h.name!==l.RawRType.LegacyEqualAssign)return void i.parseLog.trace(`expected accessed element to be wrapped an expression, yet received ${h.name}`);const m=(0,d.normalizeExpressions)(e,[h]);if(1!==m.length)return void i.parseLog.trace(`expected accessed element to be wrapped an expression, yet received ${h.name}`);const g=t.slice(2,t.length-p);i.parseLog.trace(`${g.length} remaining arguments for access`);const _=(0,o.splitArrayOn)(g,(e=>e.name===l.RawRType.Comma)).map((t=>function(e,t,n){if(0===e.length)return c.EmptyArgument;if(1!==e.length||e[0].name===l.RawRType.Expression){const i=(0,r.tryToNormalizeArgument)(t,e);return(0,s.guard)(void 0!==i,(()=>`expected one access result in access as argument, yet received ${JSON.stringify(i)} for ${JSON.stringify([n,e])}`)),i}{const n=(0,u.normalizeSingleNode)(t,e[0]);return(0,s.guard)(n.type!==l.RType.ExpressionList,(()=>`expected expression list to be parsed as argument, yet received ${JSON.stringify(n)} for ${JSON.stringify(e)}`)),{type:l.RType.Argument,location:n.location,lexeme:n.lexeme,name:void 0,value:n,info:{fullRange:n.location,fullLexeme:n.lexeme,additionalTokens:[]}}}}(t,e,f))),{content:y,location:b}=(0,a.retrieveMetaStructure)(n.content);return{type:l.RType.Access,location:b,lexeme:y,accessed:m[0],operator:f,access:_,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(4510),i=n(56293),o=n(83584),s=n(57012),a=n(36604),l=n(49375),u=n(10570),c=n(25377),d=n(93086)},3565:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSingleIndex=function(e,t,n){const i=(0,r.resolveByName)(e.lexeme,n),o=i?.flatMap((e=>e?.indicesCollection??[]));return a(o,t)},t.filterIndices=a,t.constructNestedAccess=function e(t,n){const r=t.accessed,i=t.access.filter((e=>e!==o.EmptyArgument)).map((e=>e)),a=[];for(const t of i){const i={indices:[{lexeme:t.lexeme,nodeId:t.info.id,subIndices:[n]}],isContainer:!1};if(r.type===s.RType.Access){const t=e(r,i);a.push(...t)}else a.push(i)}return a},t.addSubIndicesToLeafIndices=function e(t,n){const r=[];for(const o of t){const t=[];for(const r of o.indices){let o=[];o=(0,i.isParentContainerIndex)(r)?e(r.subIndices,n):n,t.push({...r,subIndices:o})}r.push({...o,indices:t})}return r};const r=n(85193),i=n(18841),o=n(25377),s=n(49375);function a(e,t){let n;for(const r of e??[]){const e=r.indices.filter((e=>t.lexeme===e.lexeme));0!=e.length&&(n??=[],n.push({indices:e,isContainer:r.isContainer}))}return n}},3629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamespaceResolverImpl=void 0;const r=n(53133),i=n(22140),o=n(40318);t.NamespaceResolverImpl=class{getNamespace(e,t){if("xml"===e)return r.XML_NAMESPACE_URI;if("xmlns"===e)return r.XMLNS_NAMESPACE_URI;for((0,o.isDocument)(t)?t=t.documentElement:(0,o.isAttribute)(t)&&(t=i.PathExpr.getOwnerElement(t));null!=t&&(0,o.isElement)(t);){const n=t.attributes;for(let t=0;t<n.length;t++){const r=n.item(t),i=r.name||r.nodeName;if("xmlns"===i&&""===e||i==="xmlns:"+e)return String(r.value||r.nodeValue)}t=t.parentNode}return null}}},3645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processReplacementFunction=function(e,t,n,y,b){if(t.length<2)return c.dataflowLogger.warn(`Replacement ${e.content} has less than 2 arguments, skipping`),(0,i.processKnownFunctionCall)({name:e,args:t,rootId:n,data:y}).information;let v;if((0,o.expensiveTrace)(c.dataflowLogger,(()=>`Replacement ${e.content} with ${JSON.stringify(t)}, processing`)),"$<-"===e.content&&(0,_.getConfig)().solver.pointerTracking){const e=t.filter((e=>e!==u.EmptyArgument)),n=e.find((e=>"accessed"===e.info.role)),r=e.find((e=>"index-access"===e.info.role));if(void 0!==r&&null!=n){const e={indices:[{lexeme:r.lexeme,nodeId:n.info.parent??""}],isContainer:!1};v=n.value?.type===m.RType.Access?(0,g.constructNestedAccess)(n.value,e):[e]}}const w=(0,s.processAssignment)(e,[t[0],t[t.length-1]],n,y,{superAssignment:"<<-"===b.assignmentOperator,makeMaybe:void 0===v&&b.makeMaybe,indicesCollection:v}),{callArgs:E}=(0,a.processAllArguments)({functionName:(0,r.initializeCleanDataflowInformation)(n,y),args:t.slice(1,-1),data:y,functionRootId:n,finalGraph:w.graph,forceArgs:b.forceArgs}),S=w.graph.getVertex(n,!0);(0,l.guard)(S?.tag===d.VertexType.FunctionCall&&2===S.args.length,(()=>`Function ${n} not found in graph or not 2-arg fn-call (${JSON.stringify(S)}) ${(0,h.graphToMermaidUrl)(w.graph)}`)),S.args=[S.args[0],...E,S.args[1]];for(const e of E){const t=(0,f.getReferenceOfArgument)(e);void 0!==t&&w.graph.addEdge(n,t,p.EdgeType.Reads)}return w};const r=n(47318),i=n(92397),o=n(19742),s=n(33152),a=n(80876),l=n(57012),u=n(25377),c=n(22438),d=n(18841),f=n(60347),p=n(34966),h=n(82627),m=n(49375),g=n(3565),_=n(67481)},3681:(e,t,n)=>{"use strict";e.exports=i;var r=n(59083);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(56698)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},3735:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NormalizedAstQueryDefinition=void 0;const i=n(67341),o=n(77529),s=n(87247),a=n(67820),l=r(n(16075));t.NormalizedAstQueryDefinition={executor:i.executeNormalizedAstQuery,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("normalized-ast",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push(`   ╰ [Normalized AST](${(0,a.normalizedAstToMermaidUrl)(i.normalized.ast)})`),!0},schema:l.default.object({type:l.default.string().valid("normalized-ast").required().description("The type of the query.")}).description("The normalized AST query simply returns the normalized AST, there is no need to pass it multiple times!")}},3967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAccess=function(e,t,n,f,g){if(t.length<2)return o.dataflowLogger.warn(`Access ${e.content} has less than 2 arguments, skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:f,forceArgs:g.forceArgs}).information;const _=t[0];let y;y=_===i.EmptyArgument?(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:f,forceArgs:g.forceArgs}):g.treatIndicesAsString?function(e,t,n,o,a){const l=[...e];for(let e=1;e<l.length;e++){const t=l[e];t!==i.EmptyArgument&&t.value?.type===s.RType.Symbol&&(l[e]={...t,value:{type:s.RType.String,info:t.value.info,lexeme:t.value.lexeme,location:t.value.location,content:{quotes:"none",str:t.value.lexeme}}})}const u=(0,r.processKnownFunctionCall)({name:n,args:l,rootId:o,data:t,forceArgs:a.forceArgs}),c=l.filter((e=>e!==i.EmptyArgument)),d=c.find((e=>"accessed"===e.info.role)),f=c.find((e=>"index-access"===e.info.role));if(void 0===d||void 0===f)return u;if((0,h.getConfig)().solver.pointerTracking){let e;if(d.value?.type===s.RType.Symbol)e=(0,p.resolveSingleIndex)(d,f,t.environment);else{const t=d.value?.info.id??-1,n=u.information.graph.getVertex(t),r=n?.indicesCollection?.flatMap((e=>e.indices))?.flatMap((e=>e?.subIndices??[]));r&&(e=(0,p.filterIndices)(r,f))}if(e){const r=u.information.graph.getVertex(o);r&&(r.indicesCollection=e);const i=t.completeAst.idMap.get(o),a=t.completeAst.idMap.get(i?.info.parent??-1);a?.type!==s.RType.Access&&m(e,u,n.info.id)}}return u}(t,f,e,n,g):function(e,t,n,i,o,s){const a=e.environment.current.memory.get(":="),l={definitionRootNodes:[]};e.environment.current.memory.set(":=",[{type:d.ReferenceType.BuiltInFunction,definedAt:u.BuiltIn,controlDependencies:void 0,processor:(e,t,n,i)=>function(e,t,n,i,o){return o.definitionRootNodes.push(n),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:i}).information}(e,t,n,i,l),name:":=",nodeId:u.BuiltIn}]);const f=(0,r.processKnownFunctionCall)({name:t,args:n,rootId:i,data:e,forceArgs:o.forceArgs});return void 0!==a&&e.environment.current.memory.set(":=",a),s.value&&l.definitionRootNodes.length>0&&(0,c.markAsAssignment)(f.information,{type:d.ReferenceType.Variable,name:s.value.lexeme??"",nodeId:s.value.info.id,definedAt:i,controlDependencies:[]},l.definitionRootNodes,i),f}(f,e,t,n,g,_);const b=y.information;_!==i.EmptyArgument&&b.graph.addEdge(e.info.id,y.processedArguments[0]?.entryPoint??_.info.id,a.EdgeType.Returns);for(const t of y.processedArguments)void 0!==t&&b.graph.addEdge(e.info.id,t.entryPoint,a.EdgeType.Reads);return{...b,unknownReferences:(0,l.makeAllMaybe)(b.unknownReferences,b.graph,b.environment,!1),entryPoint:n,in:_===i.EmptyArgument?b.in:b.in.map((e=>e.nodeId===_.value?.info.id?(0,l.makeReferenceMaybe)(e,b.graph,b.environment,!1):e))}};const r=n(92397),i=n(25377),o=n(22438),s=n(49375),a=n(34966),l=n(73326),u=n(39767),c=n(33152),d=n(46044),f=n(18841),p=n(3565),h=n(67481);function m(e,t,n){const r=e?.flatMap((e=>e.indices));for(const e of r??[])t.information.graph.addEdge(n,e.nodeId,a.EdgeType.Reads),m((0,f.isParentContainerIndex)(e)?e.subIndices:void 0,t,e.nodeId)}},4429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeDataflowQuery=function({dataflow:{graph:e}},t){return 1!==t.length&&r.log.warn("Dataflow query expects only up to one query, but got",t.length),{".meta":{timing:0},graph:e}};const r=n(19742)},4510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryToNormalizeArgument=function(e,t){if(t.length<1||t.length>3)return void r.parseLog.warn(`Either [expr|value], [SYMBOL_SUB, EQ_SUB], or [SYMBOL_SUB, EQ_SUB, expr], but got: ${t.map((e=>e.name)).join(", ")}`);const n=t[0],{location:u,content:c}=(0,i.retrieveMetaStructure)(n.content);let d,f;if(n.name===s.RawRType.Expression)f=void 0,d=(0,a.normalizeSingleNode)(e,n);else{if(n.name!==s.RawRType.SymbolSub&&n.name!==s.RawRType.StringConst)return void r.parseLog.warn(`expected symbol or expr for argument, yet received ${t.map((e=>e.name)).join(",")}`);f={type:s.RType.Symbol,location:u,content:n.name===s.RawRType.StringConst||(0,l.startAndEndsWith)(c,"`")?c.slice(1,-1):c,namespace:void 0,lexeme:c,info:{fullRange:u,additionalTokens:[],fullLexeme:c}},d=function(e,t){(0,o.guard)(t[1].name===s.RawRType.EqualSub,(()=>`[arg-default] second element of parameter must be ${s.RawRType.EqualFormals}, but: ${JSON.stringify(t)}`));const n=t[2];return(0,o.guard)(2===t.length||n.name===s.RawRType.Expression,(()=>`[arg-default] third element of parameter must be an Expression or undefined (for 'x=') but: ${JSON.stringify(t)}`)),n?(0,a.normalizeSingleNode)(e,n):null}(e,t)}return(0,o.guard)(void 0!==d&&d?.type!==s.RType.Delimiter,(()=>`[argument] parsed value must not be undefined, yet: ${JSON.stringify(t)}`)),{type:s.RType.Argument,location:u,lexeme:c,name:f,value:d??void 0,info:{fullRange:u,fullLexeme:c,additionalTokens:[]}}};const r=n(56293),i=n(36604),o=n(57012),s=n(49375),a=n(10570),l=n(27454)},4683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendEnvironment=function(e,t){return void 0===e?t:void 0===t?e:((0,r.guard)(e.level===t.level,"environments must have the same level to be handled, it is up to the caller to ensure that"),{current:s(e.current,t.current),level:e.level})};const r=n(57012),i=n(73326);function o(e,t){const n=e;for(const e of t)n.findIndex((t=>t.nodeId===e.nodeId&&t.definedAt===e.definedAt))<0&&n.push(e);return n}function s(e,t){(0,r.guard)(void 0!==e&&void 0!==t,"can not append environments with undefined");const n=new Map(e.memory);for(const[e,r]of t.memory){const t=n.get(e);t?n.set(e,o(t,r)):n.set(e,r)}const a=e.parent===i.BuiltInEnvironment?i.BuiltInEnvironment:s(e.parent,t.parent),l=new i.Environment(a);return l.memory=n,l}},4853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runSearch=function(e,t){const n=(0,r.getFlowrSearch)(e);return n.search.reduce(((e,n)=>(0,o.getTransformer)(n.name)(t,e,n.args)),(0,i.getGenerator)(n.generator.name)(t,n.generator.args)).getElements()};const r=n(5521),i=n(94692),o=n(8467)},5204:()=>{},5267:(e,t,n)=>{"use strict";var r,i=n(12463).F,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var c,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var f=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(14257)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,i>0,(function(e){c||(c=e),e&&f.forEach(l),o||(f.forEach(l),d(c))}))}));return t.reduce(u)}},5342:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,"<",n)},5350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asciiCallContext=function(e,t,n){const i=[];for(const[o,{subkinds:s}]of Object.entries(t.kinds)){i.push(`   ╰ ${(0,r.bold)(o,e)}`);for(const[t,o]of Object.entries(s))i.push(`     ╰ ${(0,r.bold)(t,e)}: ${u(e,o,n)}`)}return i.join("\n")},t.summarizeIdsIfTooLong=function(e,t){const n=t.join(", ");if(n.length<=20)return n;let i="",s=0;for(;i.length<=20;)i+=t[s++]+", ";return s<t.length&&(i+="... (see JSON)"),e===r.markdownFormatter?(0,o.textWithTooltip)(i,JSON.stringify(t)):i},t.asciiSummaryOfQueryResult=function(e,t,n,o){const a=[];for(const[t,l]of Object.entries(n)){if(".meta"===t)continue;if(i.SupportedQueries[t].asciiSummarizer(e,o,l,a))continue;a.push(`Query: ${(0,r.bold)(t,e)}`);let n=-1;for(const[e,t]of Object.entries(l))".meta"!==e?a.push(` ╰ ${e}: ${JSON.stringify(t)}`):n=t.timing;a.push(`  - Took ${(0,s.printAsMs)(n,0)}`)}return a.push((0,r.italic)(`All queries together required ≈${(0,s.printAsMs)(n[".meta"].timing,0)} (1ms accuracy, total ${(0,s.printAsMs)(t,0)})`,e)),e.format(a.join("\n"))};const r=n(77529),i=n(49144),o=n(40015),s=n(87247),a=n(39767);function l(e,t,n){if(e===a.BuiltIn)return(0,r.italic)("built-in",t);const i=n.normalize.idMap.get(e);return void 0===i?`UNKNOWN: ${e}`:`${(0,r.italic)("`"+(i.lexeme??i.info.fullLexeme??"UNKNOWN")+"`",t)} (L.${i.location?.[0]})`}function u(e,t,n){const i=[];for(const{id:o,calls:s=[],linkedIds:a=[],aliasRoots:u=[]}of t){if(void 0===n.normalize.idMap.get(o)){i.push(` ${(0,r.bold)("UNKNOWN: "+JSON.stringify({calls:s,linkedIds:a}))}`);continue}let t=l(o,e,n);s.length>0&&(t+=` with ${s.length} call${s.length>1?"s":""} (${s.map((t=>l(t,e,n))).join(", ")})`),a.length>0&&(t+=` with ${a.length} link${a.length>1?"s":""} (${a.map((t=>l(t,e,n))).join(", ")})`),u.length>0&&(t+=` with ${u.length} alias root${u.length>1?"s":""} (${u.map((t=>l(t,e,n))).join(", ")})`),i.push(t)}return i.join(", ")}},5521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowrSearchBuilder=t.Q=t.FlowrSearchGenerator=void 0,t.getFlowrSearch=function(e,t=!0){return e instanceof o?e.build(t):e};const r=n(81325),i=n(57012);t.FlowrSearchGenerator={from:e=>new o({type:"generator",name:"from",args:{from:e}}),all:()=>new o({type:"generator",name:"all",args:void 0}),get:e=>((0,i.guard)(!e.nameIsRegex||e.name,"If nameIsRegex is set, a name should be provided"),(0,i.guard)(!e.line||0!=e.line,"If line is set, it must be different from 0 as there is no 0 line"),(0,i.guard)(!e.column||e.column>0,"If column is set, it must be greater than 0, but was "+e.column),new o({type:"generator",name:"get",args:{filter:e}})),criterion:(...e)=>((0,i.guard)(e.length>0,"At least one criterion must be provided"),new o({type:"generator",name:"criterion",args:{criterion:e}})),loc:(e,n)=>t.FlowrSearchGenerator.get({line:e,column:n}),varInLine:(e,n)=>t.FlowrSearchGenerator.get({name:e,line:n}),var:e=>t.FlowrSearchGenerator.get({name:e}),id:e=>t.FlowrSearchGenerator.get({id:e})},t.Q=t.FlowrSearchGenerator;class o{generator;search=[];constructor(e){this.generator=e}filter(e){return this.search.push({type:"transformer",name:"filter",args:{filter:e}}),this}first(){return this.search.push({type:"transformer",name:"first",args:void 0}),this}last(){return this.search.push({type:"transformer",name:"last",args:void 0}),this}index(e){return(0,i.guard)(e>=0,"Index must be greater or equal to 0, but was "+e),this.search.push({type:"transformer",name:"index",args:{index:e}}),this}tail(){return this.search.push({type:"transformer",name:"tail",args:void 0}),this}take(e){return(0,i.guard)(e>=0,"Count must be greater or equal to 0, but was "+e),this.search.push({type:"transformer",name:"take",args:{count:e}}),this}skip(e){return(0,i.guard)(e>=0,"Count must be greater or equal to 0, but was "+e),this.search.push({type:"transformer",name:"skip",args:{count:e}}),this}select(...e){return(0,i.guard)(e.length>0,"At least one index must be provided"),(0,i.guard)(e.every((e=>e>=0)),(()=>"All indices must be greater or equal to 0, but were "+JSON.stringify(e))),this.search.push({type:"transformer",name:"select",args:{select:e}}),this}merge(e){return this.search.push({type:"transformer",name:"merge",args:{generator:e.generator,search:e.search}}),this}build(e=!0){return e?(0,r.optimize)(this.generator,this.search):{generator:this.generator,search:this.search}}}t.FlowrSearchBuilder=o},6056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeSymbol=function(e,t){let n,a,l;if((0,r.guard)(t.length>0,"to parse symbols we need at least one object to work on!"),1===t.length&&(0,s.isSymbol)(t[0].name)){const e=(0,i.retrieveMetaStructure)(t[0].content);n=e.location,a=e.content,l=void 0}else{if(3!==t.length||!(0,s.isSymbol)(t[2].name))return;{const e=(0,i.retrieveMetaStructure)(t[2].content);n=e.location,a=e.content,l=(0,i.retrieveMetaStructure)(t[0].content).content}}return{type:s.RType.Symbol,namespace:l,location:n,content:(0,o.startAndEndsWith)(a,"`")?a.substring(1,a.length-1):a,lexeme:a,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(57012),i=n(36604),o=n(27454),s=n(49375)},6120:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6120,e.exports=t},6188:e=>{"use strict";e.exports=Math.max},6416:(e,t,n)=>{"use strict";var r=n(48287).Buffer;const i=n(5204);e.exports=class{constructor(e,t){(t=t||{}).readChunk||(t.readChunk=1024),t.newLineCharacter?t.newLineCharacter=t.newLineCharacter.charCodeAt(0):t.newLineCharacter=10,this.fd="number"==typeof e?e:i.openSync(e,"r"),this.options=t,this.newLineCharacter=t.newLineCharacter,this.reset()}_searchInBuffer(e,t){let n=-1;for(let r=0;r<=e.length;r++)if(e[r]===t){n=r;break}return n}reset(){this.eofReached=!1,this.linesCache=[],this.fdPosition=0}close(){i.closeSync(this.fd),this.fd=null}_extractLines(e){let t;const n=[];let r=0,i=0;for(;;){let o=e[r++];if(o===this.newLineCharacter)t=e.slice(i,r),n.push(t),i=r;else if(void 0===o)break}let o=e.slice(i,r);return o.length&&n.push(o),n}_readChunk(e){let t,n=0;const o=[];do{const e=new r(this.options.readChunk);t=i.readSync(this.fd,e,0,this.options.readChunk,this.fdPosition),n+=t,this.fdPosition=this.fdPosition+t,o.push(e)}while(t&&-1===this._searchInBuffer(o[o.length-1],this.options.newLineCharacter));let s=r.concat(o);return t<this.options.readChunk&&(this.eofReached=!0,s=s.slice(0,n)),n&&(this.linesCache=this._extractLines(s),e&&(this.linesCache[0]=r.concat([e,this.linesCache[0]]))),n}next(){if(!this.fd)return!1;let e,t=!1;return this.eofReached&&0===this.linesCache.length||(this.linesCache.length||(e=this._readChunk()),this.linesCache.length&&(t=this.linesCache.shift(),t[t.length-1]!==this.newLineCharacter&&(e=this._readChunk(t),e&&(t=this.linesCache.shift()))),this.eofReached&&0===this.linesCache.length&&this.close(),t&&t[t.length-1]===this.newLineCharacter&&(t=t.slice(0,t.length-1))),t}}},6549:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},6696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffIdentifierReferences=function(e,t,n){void 0!==e&&void 0!==t?(e.name!==t.name&&n.report.addComment(`${n.position}Different identifier names: ${n.leftname}: ${e.name} vs. ${n.rightname}: ${t.name}`),e.nodeId!==t.nodeId&&n.report.addComment(`${n.position}Different nodeIds: ${n.leftname}: ${e.nodeId} vs. ${n.rightname}: ${t.nodeId}`),(0,s.diffControlDependencies)(e.controlDependencies,t.controlDependencies,n)):e!==t&&n.report.addComment(`${n.position}Different identifier references: ${n.leftname}: ${JSON.stringify(e,o.jsonReplacer)} vs. ${n.rightname}: ${JSON.stringify(t,o.jsonReplacer)}`)},t.diffEnvironment=l,t.diffEnvironmentInformation=function(e,t,n){void 0!==e&&void 0!==t?(e.level!==t.level&&n.report.addComment(`${n.position}Different environment levels: ${n.leftname}: ${e.level} vs. ${n.rightname}: ${t.level}. Using max to report level for further errors.`),l(e.current,t.current,n,Math.max(e.level,t.level))):e!==t&&n.report.addComment(`${n.position}Different environments: ${JSON.stringify(e,i.builtInEnvJsonReplacer)} vs. ${JSON.stringify(t,i.builtInEnvJsonReplacer)}`)};const r=n(49553),i=n(73326),o=n(91884),s=n(47318),a=n(39767);function l(e,t,n,i){void 0!==e&&void 0!==t?(e.memory!==a.BuiltInMemory&&e.memory!==a.EmptyBuiltInMemory||t.memory!==a.BuiltInMemory&&t.memory!==a.EmptyBuiltInMemory)&&(e.memory.size!==t.memory.size&&(n.report.addComment(`${n.position}[at level: ${i}] Different number of definitions in environment. ${n.leftname}: ${e.memory.size} vs. ${n.rightname}: ${t.memory.size}`),(0,r.setDifference)(new Set([...e.memory.keys()]),new Set([...t.memory.keys()]),{...n,position:`${n.position}[at level: ${i}] Key comparison. `})),function(e,t,n){for(const[r,i]of e.memory){const e=t.memory.get(r);if(void 0===e||i.length!==e.length){n.report.addComment(`${n.position}Different definitions for ${r}. ${n.leftname}: ${JSON.stringify(i,o.jsonReplacer)} vs. ${n.rightname}: ${JSON.stringify(e,o.jsonReplacer)}`);continue}const a=[...i].sort(((e,t)=>String(e.nodeId).localeCompare(String(t.nodeId)))),l=[...e].sort(((e,t)=>String(e.nodeId).localeCompare(String(t.nodeId))));for(let e=0;e<i.length;++e){const t=a[e],i=l[e];t.name!==i.name&&n.report.addComment(`${n.position}Different names for ${r}. ${n.leftname}: ${t.name} vs. ${n.rightname}: ${i.name}`),t.nodeId!==i.nodeId&&n.report.addComment(`${n.position}Different ids for ${r}. ${n.leftname}: ${t.nodeId} vs. ${n.rightname}: ${i.nodeId}`),(0,s.diffControlDependencies)(t.controlDependencies,i.controlDependencies,{...n,position:`${n.position} For ${r}. `}),t.definedAt!==i.definedAt&&n.report.addComment(`${n.position}Different definition ids (definedAt) for ${r} (${t.nodeId}). ${n.leftname}: ${t.definedAt} vs. ${n.rightname}: ${i.definedAt}`),t.type!==i.type&&n.report.addComment(`${n.position}Different types for ${r} (${t.nodeId}). ${n.leftname}: ${t.type} vs. ${n.rightname}: ${i.type}`)}}}(e,t,{...n,position:`${n.position}[at level: ${i}] `}),l(e.parent,t.parent,{...n,position:`${n.position}Parents of ${e.id} & ${t.id}. `},i--)):e!==t&&n.report.addComment(`${n.position}[at level: ${i}] Different environments. ${n.leftname}: ${void 0!==e?"present":"undefined"} vs. ${n.rightname}: ${void 0!==t?"present":"undefined"}`)}},6724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTemplate=void 0;const r=n(99489);t.formatTemplate=function(e,t,n,i=!1){const o=String(t),s=(e,t)=>`[${t[0]}m${e}[${t[1]}m`,a=(e,t)=>null!=t&&"string"==typeof t?s(e,r.prettyLogStyles[t]):null!=t&&Array.isArray(t)?t.reduce(((e,t)=>a(e,t)),e):null!=t&&null!=t[e.trim()]?a(e,t[e.trim()]):null!=t&&null!=t["*"]?a(e,t["*"]):e;return o.replace(/{{(.+?)}}/g,((t,o)=>{const l=null!=n[o]?String(n[o]):i?"":t;return e.stylePrettyLogs?a(l,e?.prettyLogStyles?.[o]??null)+s("",r.prettyLogStyles.reset):l}))}},6737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statisticsFileProvider=void 0,t.extractNodeContent=o,t.initFileProvider=function(e){i.log.debug(`Initializing file provider for output directory ${e}`),t.statisticsFileProvider=new r.StatisticFileProvider(e)},t.initDummyFileProvider=s,t.appendStatisticsFile=function(e,n,r,i,s=!1){if(0===r.length)return;let a;a="string"==typeof r[0]?r:"nodeType"in r[0]?r.map(o):r,s&&(a=[...new Set(a)]),a=a.map((e=>JSON.stringify(void 0===i?[e]:[e,i]))),t.statisticsFileProvider.append(e,n,a.join("\n"))};const r=n(50653),i=n(19742);function o(e){let t=e.textContent;if(e.hasChildNodes()){const n=e.childNodes.item(0);3===n.nodeType&&(t=n.textContent)}return t?.trim()?.replaceAll("\n","\\n")??"<unknown>"}function s(e){t.statisticsFileProvider=new r.DummyAppendProvider(e)}s()},6777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TREE_SITTER_PARSE_PIPELINE=t.DEFAULT_PARSE_PIPELINE=t.TREE_SITTER_NORMALIZE_PIPELINE=t.DEFAULT_NORMALIZE_PIPELINE=t.TREE_SITTER_DATAFLOW_PIPELINE=t.DEFAULT_DATAFLOW_PIPELINE=t.TREE_SITTER_SLICE_WITHOUT_RECONSTRUCT_PIPELINE=t.TREE_SITTER_SLICE_AND_RECONSTRUCT_PIPELINE=t.TREE_SITTER_SLICING_PIPELINE=t.DEFAULT_SLICE_WITHOUT_RECONSTRUCT_PIPELINE=t.DEFAULT_SLICE_AND_RECONSTRUCT_PIPELINE=t.DEFAULT_SLICING_PIPELINE=void 0,t.createParsePipeline=function(e,n){const r="tree-sitter"===e.name?t.TREE_SITTER_PARSE_PIPELINE:t.DEFAULT_PARSE_PIPELINE;return new d.PipelineExecutor(r,{parser:e,...n})},t.createSlicePipeline=function(e,n){const r="tree-sitter"===e.name?t.TREE_SITTER_SLICING_PIPELINE:t.DEFAULT_SLICING_PIPELINE;return new d.PipelineExecutor(r,{parser:e,...n})},t.createNormalizePipeline=function(e,n){const r="tree-sitter"===e.name?t.TREE_SITTER_NORMALIZE_PIPELINE:t.DEFAULT_NORMALIZE_PIPELINE;return new d.PipelineExecutor(r,{parser:e,...n})},t.createDataflowPipeline=function(e,n){const r="tree-sitter"===e.name?t.TREE_SITTER_DATAFLOW_PIPELINE:t.DEFAULT_DATAFLOW_PIPELINE;return new d.PipelineExecutor(r,{parser:e,...n})};const r=n(32018),i=n(35277),o=n(71412),s=n(23310),a=n(21903),l=n(33942),u=n(19123),c=n(2362),d=n(82175);t.DEFAULT_SLICING_PIPELINE=(0,r.createPipeline)(i.PARSE_WITH_R_SHELL_STEP,o.NORMALIZE,s.STATIC_DATAFLOW,a.STATIC_SLICE,l.NAIVE_RECONSTRUCT),t.DEFAULT_SLICE_AND_RECONSTRUCT_PIPELINE=t.DEFAULT_SLICING_PIPELINE,t.DEFAULT_SLICE_WITHOUT_RECONSTRUCT_PIPELINE=(0,r.createPipeline)(i.PARSE_WITH_R_SHELL_STEP,o.NORMALIZE,s.STATIC_DATAFLOW,a.STATIC_SLICE),t.TREE_SITTER_SLICING_PIPELINE=(0,r.createPipeline)(u.PARSE_WITH_TREE_SITTER_STEP,c.NORMALIZE_TREE_SITTER,s.STATIC_DATAFLOW,a.STATIC_SLICE,l.NAIVE_RECONSTRUCT),t.TREE_SITTER_SLICE_AND_RECONSTRUCT_PIPELINE=t.TREE_SITTER_SLICING_PIPELINE,t.TREE_SITTER_SLICE_WITHOUT_RECONSTRUCT_PIPELINE=(0,r.createPipeline)(u.PARSE_WITH_TREE_SITTER_STEP,c.NORMALIZE_TREE_SITTER,s.STATIC_DATAFLOW,a.STATIC_SLICE),t.DEFAULT_DATAFLOW_PIPELINE=(0,r.createPipeline)(i.PARSE_WITH_R_SHELL_STEP,o.NORMALIZE,s.STATIC_DATAFLOW),t.TREE_SITTER_DATAFLOW_PIPELINE=(0,r.createPipeline)(u.PARSE_WITH_TREE_SITTER_STEP,c.NORMALIZE_TREE_SITTER,s.STATIC_DATAFLOW),t.DEFAULT_NORMALIZE_PIPELINE=(0,r.createPipeline)(i.PARSE_WITH_R_SHELL_STEP,o.NORMALIZE),t.TREE_SITTER_NORMALIZE_PIPELINE=(0,r.createPipeline)(u.PARSE_WITH_TREE_SITTER_STEP,c.NORMALIZE_TREE_SITTER),t.DEFAULT_PARSE_PIPELINE=(0,r.createPipeline)(i.PARSE_WITH_R_SHELL_STEP),t.TREE_SITTER_PARSE_PIPELINE=(0,r.createPipeline)(u.PARSE_WITH_TREE_SITTER_STEP)},6945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visitAst=function(e,t,n){return new s(t,n).visit(e)};const r=n(49375),i=n(57012),o=n(25377);class s{onEnter;onExit;constructor(e,t){this.onEnter=e,this.onExit=t}visitSingle(e){if(this.onEnter?.(e))return;const t=e.type;switch(t){case r.RType.FunctionCall:this.visitSingle(e.named?e.functionName:e.calledFunction),this.visit(e.arguments);break;case r.RType.FunctionDefinition:this.visit(e.parameters),this.visitSingle(e.body);break;case r.RType.ExpressionList:this.visit(e.grouping),this.visit(e.children);break;case r.RType.ForLoop:this.visitSingle(e.variable),this.visitSingle(e.vector),this.visitSingle(e.body);break;case r.RType.WhileLoop:this.visitSingle(e.condition),this.visitSingle(e.body);break;case r.RType.RepeatLoop:this.visitSingle(e.body);break;case r.RType.IfThenElse:this.visitSingle(e.condition),this.visitSingle(e.then),this.visit(e.otherwise);break;case r.RType.BinaryOp:case r.RType.Pipe:this.visitSingle(e.lhs),this.visitSingle(e.rhs);break;case r.RType.UnaryOp:this.visitSingle(e.operand);break;case r.RType.Parameter:this.visitSingle(e.name),this.visit(e.defaultValue);break;case r.RType.Argument:this.visit(e.name),this.visit(e.value);break;case r.RType.Access:this.visitSingle(e.accessed),"["!==e.operator&&"[["!==e.operator||this.visit(e.access);break;case r.RType.Symbol:case r.RType.Logical:case r.RType.Number:case r.RType.String:case r.RType.Comment:case r.RType.Break:case r.RType.Next:case r.RType.LineDirective:break;default:(0,i.assertUnreachable)(t)}this.onExit?.(e)}visit(e){if(Array.isArray(e)){const t=e;for(const e of t)e&&e!==o.EmptyArgument&&this.visitSingle(e)}else e&&this.visitSingle(e)}}},7059:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<0},7176:(e,t,n)=>{"use strict";var r,i=n(73126),o=n(75795);try{r=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!r&&o&&o(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=s&&"function"==typeof s.get?i([s.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},7300:()=>{},8238:function(e,t,n){"use strict";var r,i=n(65606),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),i=0;i<n.length;i++)"default"!==n[i]&&o(t,e,n[i]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RShell=t.DEFAULT_R_PATH=t.DEFAULT_OUTPUT_COLLECTOR_CONFIGURATION=void 0,t.getDefaultRShellOptions=w;const u=n(44862),c=n(22452),d=a(n(50072)),f=n(19742),p=l(n(97716)),h=n(59592),m=l(n(90103)),g=n(42284),_=n(67481),y=n(48060),b=n(72814);let v;function w(){return v||(v={pathToRExecutable:(0,_.getEngineConfig)("r-shell")?.rPath??t.DEFAULT_R_PATH,commandLineOptions:["--vanilla","--quiet","--no-save","-s"],cwd:i.cwd(),env:void 0,eol:"\n",homeLibPath:"windows"===(0,h.getPlatform)()?void 0:"~/.r-libs",sessionName:"default",revive:0,onRevive:()=>{}}),v}t.DEFAULT_OUTPUT_COLLECTOR_CONFIGURATION={from:"stdout",postamble:`🐧${"-".repeat(5)}🐧`,timeout:{ms:75e4,resetOnNewData:!0},keepPostamble:!1,automaticallyTrimOutput:!0,errorStopsWaiting:!0},t.DEFAULT_R_PATH="windows"===(0,h.getPlatform)()?"R.exe":"R",t.RShell=class{name="r-shell";async=!0;options;session;log;versionCache=null;tempDirs=new Set;constructor(e){this.options={...w(),...e},this.log=f.log.getSubLogger({name:this.options.sessionName}),this.session=new E(this.options,this.log),this.revive()}parse(e){return(0,b.retrieveParseDataFromRCode)(e,this)}revive(){0!==this.options.revive&&this.session.onExit(((e,t)=>{(2===this.options.revive||1===this.options.revive&&0!==e)&&(this.log.warn(`R session exited with code ${e}, reviving!`),this.options.onRevive(e,t),this.session=new E(this.options,this.log),this.revive())}))}sendCommand(e){this.log.settings.minLevel<=1&&this.log.trace(`> ${JSON.stringify(e)}`),this._sendCommand(e)}async rVersion(){return(await this.usedRVersion())?.format()??"unknown"}async usedRVersion(){if(null!==this.versionCache)return this.versionCache;const e=await this.sendCommandWithOutput(`cat(paste0(R.version$major,".",R.version$minor), ${(0,y.ts2r)(this.options.eol)})`,{timeout:{ms:5e3,resetOnNewData:!1,onTimeout:e=>e([])}});return(0,f.expensiveTrace)(this.log,(()=>`raw version: ${JSON.stringify(e)}`)),1===e.length?(this.versionCache=p.default.coerce(e[0]),this.versionCache):null}injectLibPaths(...e){(0,f.expensiveTrace)(this.log,(()=>`injecting lib paths ${JSON.stringify(e)}`)),this._sendCommand(`.libPaths(c(.libPaths(), ${e.map(y.ts2r).join(",")}))`)}tryToInjectHomeLibPath(){void 0===this.options.homeLibPath?(this.log.debug("ensuring home lib path exists (automatic inject)"),this.sendCommand('if(!dir.exists(Sys.getenv("R_LIBS_USER"))) { dir.create(path=Sys.getenv("R_LIBS_USER"),showWarnings=FALSE,recursive=TRUE) }'),this.sendCommand('.libPaths(c(.libPaths(), Sys.getenv("R_LIBS_USER")))')):this.injectLibPaths(this.options.homeLibPath)}async isPackageInstalled(e){this.log.debug(`checking if package "${e}" is installed`);const t=await this.sendCommandWithOutput(`cat(system.file(package="${e}")!="","${this.options.eol}")`);return 1===t.length&&"TRUE"===t[0]}async sendCommandWithOutput(e,n){const r=(0,c.deepMergeObject)(t.DEFAULT_OUTPUT_COLLECTOR_CONFIGURATION,n);(0,f.expensiveTrace)(this.log,(()=>`> ${JSON.stringify(e)}`));const i=await this.session.collectLinesUntil(r.from,{predicate:e=>e===r.postamble,includeInResult:r.keepPostamble},r.timeout,(()=>{this._sendCommand(e),"stderr"===r.from?this._sendCommand(`cat("${r.postamble}${this.options.eol}",file=stderr())`):this._sendCommand(`cat("${r.postamble}${this.options.eol}")`)}));return r.automaticallyTrimOutput?i.map((e=>e.trim())):i}sendCommands(...e){for(const t of e)this.sendCommand(t)}clearEnvironment(){this.log.debug("clearing environment"),this._sendCommand('rm(list=setdiff(ls(), "flowr_get_ast"))')}async obtainTmpDir(){this.sendCommand("temp<-tempdir()");const[e]=await this.sendCommandWithOutput(`cat(temp,${(0,y.ts2r)(this.options.eol)})`);return this.tempDirs.add(e),e}close(){return this.session.end([...this.tempDirs])}_sendCommand(e){this.session.writeLine(e)}};class E{bareSession;sessionStdOut;sessionStdErr;options;collectionTimeout;constructor(e,t){this.bareSession=(0,u.spawn)(e.pathToRExecutable,e.commandLineOptions,{env:e.env,cwd:e.cwd,windowsHide:!0}),this.sessionStdOut=d.createInterface({input:this.bareSession.stdout,terminal:!1}),this.sessionStdErr=d.createInterface({input:this.bareSession.stderr,terminal:!1}),this.onExit((()=>{this.end()})),this.options=e,this.writeLine((0,g.initCommand)(e.eol)),t.settings.minLevel<=1&&(this.bareSession.stdout.on("data",(e=>{t.trace(`< ${e.toString()}`)})),this.bareSession.on("close",(e=>{t.trace(`session exited with code ${e}`)}))),this.bareSession.stderr.on("data",(e=>{t.warn(`< ${e}`)}))}write(e){this.bareSession.stdin.write(e)}writeLine(e){this.write(`${e}${this.options.eol}`)}async collectLinesUntil(e,t,n,r){const i=[];let o,s;return await new Promise(((a,l)=>{const u=()=>setTimeout((()=>{n.onTimeout?n.onTimeout(a,l,i):l(new Error(`timeout of ${n.ms}ms reached (${JSON.stringify(i)})`))}),n.ms);this.collectionTimeout=u(),o=e=>{const r=t.predicate(e);r&&!t.includeInResult||i.push(e),r?(clearTimeout(this.collectionTimeout),a(i)):n.resetOnNewData&&(clearTimeout(this.collectionTimeout),this.collectionTimeout=u())},s=()=>{a(i)},this.onExit(s),this.on(e,"line",o),r?.()})).finally((()=>{this.removeListener(e,"line",o),this.bareSession.removeListener("exit",s),this.bareSession.stdin.removeListener("error",s)}))}end(e){if(void 0!==e){f.log.info(`unlinking ${e.length} files (${JSON.stringify(e)})`);for(const t of e)try{m.default.rmSync(t,{recursive:!0,force:!0})}catch{f.log.error(`failed to unlink file ${t}`)}}const t=this.bareSession.kill();return void 0!==this.collectionTimeout&&clearTimeout(this.collectionTimeout),this.sessionStdOut.close(),this.sessionStdErr.close(),f.log.info(`killed R session with pid ${this.bareSession.pid??"<unknown>"} and result ${t?"successful":"failed"} (including streams)`),t}onExit(e){this.bareSession.on("exit",e),this.bareSession.stdin.on("error",e)}on(e,t,n){const r="both"===e;(r||"stdout"===e)&&this.sessionStdOut.on(t,n),(r||"stderr"===e)&&this.sessionStdErr.on(t,n)}removeListener(e,t,n){const r="both"===e;(r||"stdout"===e)&&this.sessionStdOut.removeListener(t,n),(r||"stderr"===e)&&this.sessionStdErr.removeListener(t,n)}}},8448:(e,t)=>{"use strict";function n(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||902===e||e>=904&&e<=906||908===e||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||986===e||988===e||990===e||992===e||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||1369===e||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||1749===e||e>=1765&&e<=1766||e>=2309&&e<=2361||2365===e||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||2482===e||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||2654===e||e>=2674&&e<=2676||e>=2693&&e<=2699||2701===e||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||2749===e||2784===e||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||2877===e||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||2972===e||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||3294===e||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||3632===e||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||3716===e||e>=3719&&e<=3720||3722===e||3725===e||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||3749===e||3751===e||e>=3754&&e<=3755||e>=3757&&e<=3758||3760===e||e>=3762&&e<=3763||3773===e||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||4352===e||e>=4354&&e<=4355||e>=4357&&e<=4359||4361===e||e>=4363&&e<=4364||e>=4366&&e<=4370||4412===e||4414===e||4416===e||4428===e||4430===e||4432===e||e>=4436&&e<=4437||4441===e||e>=4447&&e<=4449||4451===e||4453===e||4455===e||4457===e||e>=4461&&e<=4462||e>=4466&&e<=4467||4469===e||4510===e||4520===e||4523===e||e>=4526&&e<=4527||e>=4535&&e<=4536||4538===e||e>=4540&&e<=4546||4587===e||4592===e||4601===e||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||8025===e||8027===e||8029===e||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||8126===e||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||8486===e||e>=8490&&e<=8491||8494===e||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||12295===e||e>=12321&&e<=12329}Object.defineProperty(t,"__esModule",{value:!0}),t.isNCNameChar=t.isLetter=t.isSpace=void 0,t.isSpace=function(e){return 9===e||13===e||10===e||32===e},t.isLetter=n,t.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||46===e||45===e||95===e||n(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||1471===e||e>=1473&&e<=1474||1476===e||e>=1611&&e<=1618||1648===e||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||2364===e||e>=2366&&e<=2380||2381===e||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||2492===e||2494===e||2495===e||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||2519===e||e>=2530&&e<=2531||2562===e||2620===e||2622===e||2623===e||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||2748===e||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||2876===e||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||3031===e||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||3415===e||3633===e||e>=3636&&e<=3642||e>=3655&&e<=3662||3761===e||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||3893===e||3895===e||3897===e||3902===e||3903===e||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||3991===e||e>=3993&&e<=4013||e>=4017&&e<=4023||4025===e||e>=8400&&e<=8412||8417===e||e>=12330&&e<=12335||12441===e||12442===e||183===e||720===e||721===e||903===e||1600===e||3654===e||3782===e||12293===e||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542}},8467:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformers=void 0,t.getTransformer=function(e){if(!t.transformers[e])throw new Error(`Unknown transformer: ${e}`);return t.transformers[e]};const r=n(26345),i=n(4853),o=n(57012);function s({node:e},{node:t}){return e.location&&t.location?e.location[0]-t.location[0]||e.location[1]-t.location[1]:e.location?-1:t.location?1:0}function a(e){if(0!==e.length)return e.reduce(((e,t)=>void 0===e?t:s(e,t)<0?e:t),void 0)}function l(e){return e.sort(s)}function u(e){if(0!==e.length)return e.reduce(((e,t)=>void 0===e?t:s(e,t)>0?e:t),void 0)}t.transformers={first:function(e,t){return t.mutate((e=>[a(e)]))},last:function(e,t){return t.mutate((e=>[u(e)]))},index:function(e,t,{index:n}){return t.mutate((e=>[l(e)[n]]))},tail:function(e,t){return t.mutate((e=>{const t=a(e);return e.filter((e=>e!==t))}))},take:function(e,t,{count:n}){return t.mutate((e=>l(e).slice(0,n)))},skip:function(e,t,{count:n}){return t.mutate((e=>l(e).slice(n)))},filter:function(e,t,{filter:n}){return t.mutate((t=>t.filter((({node:t})=>(0,r.evalFilter)(n,{node:t,normalize:e.normalize,dataflow:e.dataflow})))))},merge:function(e,t,n){const r=(0,i.runSearch)(n,e);return t.addAll(r)},select:function(e,t,{select:n}){return t.mutate((e=>(l(e),n.map((t=>e[t])).filter(o.isNotUndefined))))}}},8489:(e,t,n)=>{"use strict";const{pipeline:r}=n(28431),i=n(43559),{destroyer:o}=n(57647),{isNodeStream:s,isReadable:a,isWritable:l,isWebStream:u,isTransformStream:c,isWritableStream:d,isReadableStream:f}=n(136),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=n(68526),g=n(89365);e.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let n=0;n<e.length;++n)if(s(e[n])||u(e[n])){if(n<e.length-1&&!(a(e[n])||f(e[n])||c(e[n])))throw new h(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(l(e[n])||d(e[n])||c(e[n])))throw new h(`streams[${n}]`,t[n],"must be writable")}let n,_,y,b,v;const w=e[0],E=r(e,(function(e){const t=b;b=null,t?t(e):e?v.destroy(e):x||S||v.destroy()})),S=!!(l(w)||d(w)||c(w)),x=!!(a(E)||f(E)||c(E));if(v=new i({writableObjectMode:!(null==w||!w.writableObjectMode),readableObjectMode:!(null==E||!E.readableObjectMode),writable:S,readable:x}),S){if(s(w))v._write=function(e,t,r){w.write(e,t)?r():n=r},v._final=function(e){w.end(),_=e},w.on("drain",(function(){if(n){const e=n;n=null,e()}}));else if(u(w)){const e=(c(w)?w.writable:w).getWriter();v._write=async function(t,n,r){try{await e.ready,e.write(t).catch((()=>{})),r()}catch(e){r(e)}},v._final=async function(t){try{await e.ready,e.close().catch((()=>{})),_=t}catch(e){t(e)}}}const e=c(E)?E.readable:E;g(e,(()=>{if(_){const e=_;_=null,e()}}))}if(x)if(s(E))E.on("readable",(function(){if(y){const e=y;y=null,e()}})),E.on("end",(function(){v.push(null)})),v._read=function(){for(;;){const e=E.read();if(null===e)return void(y=v._read);if(!v.push(e))return}};else if(u(E)){const e=(c(E)?E.readable:E).getReader();v._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!v.push(t))return;if(n)return void v.push(null)}catch{return}}}return v._destroy=function(e,t){e||null===b||(e=new p),y=null,n=null,_=null,null===b?t(e):(b=t,s(E)&&o(E,e))},v}},8518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BlankNode:()=>A,DataFactory:()=>S,DefaultGraph:()=>I,EntityIndex:()=>pe,Lexer:()=>_,Literal:()=>T,NamedNode:()=>R,Parser:()=>U,Quad:()=>$,Reasoner:()=>be,Store:()=>he,StoreFactory:()=>_e,StreamParser:()=>Ee,StreamWriter:()=>Se,Term:()=>x,Triple:()=>$,Util:()=>r,Variable:()=>O,Writer:()=>oe,default:()=>xe,getRulesFromDataset:()=>ye,termFromId:()=>N,termToId:()=>P});var r={};n.r(r),n.d(r,{inDefaultGraph:()=>Q,isBlankNode:()=>W,isDefaultGraph:()=>J,isLiteral:()=>G,isNamedNode:()=>z,isVariable:()=>H,prefix:()=>X,prefixes:()=>Y});var i=n(48287),o=n(79596),s=n.n(o);const a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l="http://www.w3.org/2001/XMLSchema#",u="http://www.w3.org/2000/10/swap/",c={xsd:{decimal:`${l}decimal`,boolean:`${l}boolean`,double:`${l}double`,integer:`${l}integer`,string:`${l}string`},rdf:{type:`${a}type`,nil:`${a}nil`,first:`${a}first`,rest:`${a}rest`,langString:`${a}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${u}reify#forSome`,forAll:`${u}reify#forAll`},log:{implies:`${u}log#implies`}},{xsd:d}=c,f=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,p={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},h=/[\x00-\x20<>\\"\{\}\|\^\`]/,m={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},g=/$0^/;class _{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in m)&&this[e]instanceof RegExp&&(this[e]=g)}else this._n3Mode=!1!==e.n3;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,r=n.length;for(;;){let e,s;for(;e=this._newline.exec(n);)this.comments&&(s=this._comment.exec(e[0]))&&i("comment",s[1],"",this._line,e[0].length),n=n.substr(e[0].length,n.length),r=n.length,this._line++;if(!e&&(e=this._whitespace.exec(n))&&(n=n.substr(e[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(s=this._comment.exec(n))&&i("comment",s[1],"",this._line,n.length),n=null,i("eof","","",this._line,0)),this._input=n;const a=this._line,l=n[0];let u="",c="",f="",p=null,m=0,g=!1;switch(l){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(m=1,u="^");break}if(this._previousMarker="^^",n=n.substr(2),"<"!==n[0]){g=!0;break}case"<":if(p=this._unescapedIri.exec(n))u="IRI",c=p[1];else if(p=this._iri.exec(n)){if(c=this._unescape(p[1]),null===c||h.test(c))return o(this);u="IRI"}else n.length>1&&"<"===n[1]?(u="<<",m=2):this._n3Mode&&n.length>1&&"="===n[1]&&(u="inverse",m=2,c=">");break;case">":n.length>1&&">"===n[1]&&(u=">>",m=2);break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(`${n} `)))&&(u="blank",f="_",c=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))c=p[1];else if(({value:c,matchLength:m}=this._parseLiteral(n)),null===c)return o(this);null===p&&0===m||(u="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))c=p[1];else if(({value:c,matchLength:m}=this._parseLiteral(n)),null===c)return o(this);null===p&&0===m||(u="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(u="var",c=p[0]);break;case"@":"literal"===this._previousMarker&&(p=this._langcode.exec(n))?(u="langcode",c=p[1]):(p=this._keyword.exec(n))&&(u=p[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){u=".",m=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||t&&(p=this._number.exec(`${n} `)))&&(u="literal",c=p[0],f="string"==typeof p[1]?d.double:"string"==typeof p[2]?d.decimal:d.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?u=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(u="literal",c=p[0],f=d.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(u="abbreviation",c="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(u="abbreviation",">"!==n[1]?(m=1,c="="):(m=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(m=1,u=l);break;case"{":!this._lineMode&&n.length>=2&&("|"===n[1]?(u="{|",m=2):(u=l,m=1));break;case"|":n.length>=2&&"}"===n[1]&&(u="|}",m=2);break;default:g=!0}if(g&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(p=this._prefix.exec(n))?((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(`${n} `)))&&(u="prefixed",f=p[1]||"",c=this._unescape(p[2])):(u="prefix",c=p[1]||"")),"^^"===this._previousMarker)switch(u){case"prefixed":u="type";break;case"IRI":u="typeIRI";break;default:u=""}if(!u)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const _=m||p[0].length,y=i(u,c,f,a,_);this.previousToken=y,this._previousMarker=u,n=n.substr(_,n.length)}function i(t,i,o,s,a){const l=n?r-n.length:r,u={type:t,value:i,prefix:o,line:s,start:l,end:l+a};return e(null,u),u}function o(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(f,((e,n,r,i)=>{if("string"==typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"==typeof r){let e=Number.parseInt(r,16);return e<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in p?p[i]:(t=!0,"")}));return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let t=0;for(;"\\"===e[r-t-1];)t++;if(t%2==0){const t=e.substring(n,r),i=t.split(/\r\n|\r|\n/).length-1,o=r+n;if(1===n&&0!==i||3===n&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:o}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const e=[];let t;if(this._tokenizeToEnd(((n,r)=>n?t=n:e.push(r)),!0),t)throw t;return e}s()((()=>this._tokenizeToEnd(t,!0)))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=i.Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))})),e.on("end",(()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)})),e.on("error",t)}}const{rdf:y,xsd:b}=c;let v,w=0;const E={namedNode:C,blankNode:M,variable:j,literal:k,defaultGraph:function(){return v},quad:L,triple:L,fromTerm:F,fromQuad:D},S=E;class x{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof x?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class R extends x{get termType(){return"NamedNode"}}class T extends x{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new R(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?b.string:y.langString}equals(e){return e instanceof T?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class A extends x{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class O extends x{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class I extends x{constructor(){return super(""),v||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}function N(e,t,n){if(t=t||E,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===E)return new T(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));const r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),"@"===e[r+1]?e.substr(r+2):t.namedNode(e.substr(r+3)));case"[":e=JSON.parse(e);break;default:if(!n||!Array.isArray(e))return t.namedNode(e)}return t.quad(N(e[0],t,!0),N(e[1],t,!0),N(e[2],t,!0),e[3]&&N(e[3],t,!0))}function P(e,t){if("string"==typeof e)return e;if(e instanceof x&&"Quad"!==e.termType)return e.id;if(!e)return v.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==b.string?`^^${e.datatype.value}`:""}`;case"Quad":const n=[P(e.subject,!0),P(e.predicate,!0),P(e.object,!0)];return e.graph&&"DefaultGraph"!==e.graph.termType&&n.push(P(e.graph,!0)),t?n:JSON.stringify(n);default:throw new Error(`Unexpected termType: ${e.termType}`)}}v=new I;class $ extends x{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||v}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function C(e){return new R(e)}function M(e){return new A(e||"n3-"+w++)}function k(e,t){if("string"==typeof t)return new T(`"${e}"@${t.toLowerCase()}`);let n=t?t.value:"";return""===n&&("boolean"==typeof e?n=b.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?b.integer:b.double:(n=b.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===n||n===b.string?new T(`"${e}"`):new T(`"${e}"^^${n}`)}function j(e){return new O(e)}function L(e,t,n,r){return new $(e,t,n,r)}function F(e){if(e instanceof x)return e;switch(e.termType){case"NamedNode":return C(e.value);case"BlankNode":return M(e.value);case"Variable":return j(e.value);case"DefaultGraph":return v;case"Literal":return k(e.value,e.language||e.datatype);case"Quad":return D(e);default:throw new Error(`Unexpected termType: ${e.termType}`)}}function D(e){if(e instanceof $)return e;if("Quad"!==e.termType)throw new Error(`Unexpected termType: ${e.termType}`);return L(F(e.subject),F(e.predicate),F(e.object),F(e.graph))}let B=0;class U{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&V(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),s=this._n3Mode=/n3/.test(t),a=i||o;(this._supportsNamedGraphs=!(n||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||i||s),this._supportsRDFStar=""===t||/star|\*$/.test(t),a&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new _({lineMode:a,n3:s}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){B=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,n,r,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:i,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);n=this._factory.namedNode(t);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(void 0===r)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(r+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const i=this._subject,o=this._contextStack,s=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._factory.blankNode()),null===i?null===s.predicate?s.subject=n:s.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(void 0===n)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,s=this._object;this._subject=this._factory.quad(r,o,s,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const e=this._predicate,t=this._object;i?this._emit(t,e,r,n):this._emit(r,e,t,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){const t=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._factory.blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,r;if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._factory.quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=q}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,i=-1,o=0,s="/";for(;r<t;){switch(s){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(s=e[1+ ++r],s){case"/":n+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return n+e.substring(o,r)+e.substr(r+1);case".":if(s=e[1+ ++r],void 0===s||"/"===s||"?"===s||"#"===s){if(n+=e.substring(o,r-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),"/"!==s)return`${n}/${e.substr(r+1)}`;o=r+1}}}s=e[++r]}return n+e.substring(o)}parse(e,t,n){let r,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(r=t.onQuad,i=t.onPrefix,o=t.onComment):(r=t,i=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${B++}_`,this._prefixCallback=i||q,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const t=[];let n;if(this._callback=(e,r)=>{e?n=e:r&&t.push(r)},this._lexer.tokenize(e).every((e=>this._readCallback=this._readCallback(e))),n)throw n;return t}let s=(e,t)=>{null!==e?(this._callback(e),this._callback=q):this._readCallback&&(this._readCallback=this._readCallback(t))};o&&(this._lexer.comments=!0,s=(e,t)=>{null!==e?(this._callback(e),this._callback=q):this._readCallback&&("comment"===t.type?o(t.value):this._readCallback=this._readCallback(t))}),this._callback=r,this._lexer.tokenize(e,s)}}function q(){}function V(e,t){e._factory=t,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=t.namedNode(c.rdf.first),e.RDF_REST=t.namedNode(c.rdf.rest),e.RDF_NIL=t.namedNode(c.rdf.nil),e.N3_FORALL=t.namedNode(c.r.forAll),e.N3_FORSOME=t.namedNode(c.r.forSome),e.ABBREVIATIONS={a:t.namedNode(c.rdf.type),"=":t.namedNode(c.owl.sameAs),">":t.namedNode(c.log.implies)},e.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}function z(e){return!!e&&"NamedNode"===e.termType}function W(e){return!!e&&"BlankNode"===e.termType}function G(e){return!!e&&"Literal"===e.termType}function H(e){return!!e&&"Variable"===e.termType}function J(e){return!!e&&"DefaultGraph"===e.termType}function Q(e){return J(e.graph)}function X(e,t){return Y({"":e.value||e},t)("")}function Y(e,t){const n=Object.create(null);for(const t in e)r(t,e[t]);function r(e,r){if("string"==typeof r){const i=Object.create(null);n[e]=e=>i[e]||(i[e]=t.namedNode(r+e))}else if(!(e in n))throw new Error(`Unknown prefix: ${e}`);return n[e]}return t=t||S,r}V(U.prototype,S);const Z=S.defaultGraph(),{rdf:K,xsd:ee}=c,te=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ne=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,re={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class ie extends x{equals(e){return e===this}}class oe{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,n,r){e+=t,r&&r()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Z,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseMatcher=new RegExp(`^${ae(t.baseIRI)}${t.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=t.baseIRI.length))}get _inDefaultGraph(){return Z.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(Z.equals(r)?"":`${this._encodeIriOrBlank(r)} {\n`)),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(e){i&&i(e)}}_writeQuadLine(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}quadToString(e,t,n,r){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .\n`:" .\n"}`}quadsToString(e){let t="";for(const n of e)t+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return t}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),te.test(t)&&(t=t.replace(ne,se));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(te.test(t)&&(t=t.replace(ne,se)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===ee.string)return`"${t}"`}else switch(e.datatype.value){case ee.string:return`"${t}"`;case ee.boolean:if("true"===t||"false"===t)return t;break;case ee.integer:if(/^[+-]?\d+$/.test(t))return t;break;case ee.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case ee.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===K.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:r}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${J(r)?"":` ${this._encodeIriOrBlank(r)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof r?this._writeQuad(e,t,n,Z,r):this._writeQuad(e,t,n,r||Z,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const r={};r[e]=t,this.addPrefixes(r,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let t in e){let r=e[t];"string"!=typeof r&&(r=r.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[r]=t+=":",this._write(`@prefix ${t} <${r}>.\n`)}if(n){let e="",t="";for(const n in this._prefixIRIs)e+=e?`|${n}`:n,t+=(t?"|":"")+this._prefixIRIs[n];e=ae(e),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?"\n":"",t)}blank(e,t){let n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new ie("[]");case 1:if(n=i[0],!(n.object instanceof ie))return new ie(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let t="[";for(let o=0;o<r;o++)n=i[o],n.predicate.equals(e)?t+=`, ${this._encodeObject(n.object)}`:(t+=`${(o?";\n  ":"\n  ")+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new ie(`${t}\n]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new ie(`(${n.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,r)=>{t=null,e(n,r)});if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}}function se(e){let t=re[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function ae(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var le=n(85721);const ue=Symbol("iter");function ce(e,t,n=4){if(0===n)return Object.assign(e,t);for(const r in t)e[r]=ce(e[r]||Object.create(null),t[r],n-1);return e}function de(e,t,n=4){let r=!1;for(const i in e)if(i in t){const o=0===n?null:de(e[i],t[i],n-1);if(!1!==o)r=r||Object.create(null),r[i]=o;else if(3===n)return!1}return r}function fe(e,t,n=4){let r=!1;for(const i in e)if(i in t){if(0!==n){const o=fe(e[i],t[i],n-1);if(!1!==o)r=r||Object.create(null),r[i]=o;else if(3===n)return!1}}else r=r||Object.create(null),r[i]=0===n?null:ce({},e[i],n-1);return r}class pe{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||S}_termFromId(e){if("."===e[0]){const t=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(t[n[1]]),this._termFromId(t[n[2]]),this._termFromId(t[n[3]]),n[4]&&this._termFromId(t[n[4]]))}return N(e,this._factory)}_termToNumericId(e){if("Quad"===e.termType){const t=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let i;return t&&n&&r&&(J(e.graph)||(i=this._termToNumericId(e.graph)))&&this._ids[i?`.${t}.${n}.${r}.${i}`:`.${t}.${n}.${r}`]}return this._ids[P(e)]}_termToNewNumericId(e){const t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${J(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:P(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}createBlankNode(e){let t,n;if(e)for(t=e=`_:${e}`,n=1;this._ids[t];)t=e+n++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}}class he{constructor(e,t){this._size=0,this._graphs=Object.create(null),t||!e||e[0]||(t=e,e=null),t=t||{},this._factory=t.factory||S,this._entityIndex=t.entityIndex||new pe({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let n,r;for(const i in t)for(const o in n=t[i].subjects)for(const t in r=n[o])e+=Object.keys(r[t]).length;return this._size=e}_addToIndex(e,t,n,r){const i=e[t]||(e[t]={}),o=i[n]||(i[n]={}),s=r in o;return s||(o[r]=null),!s}_removeFromIndex(e,t,n,r){const i=e[t],o=i[n];delete o[r];for(const e in o)return;delete i[n];for(const e in i)return;delete e[t]}*_findInIndex(e,t,n,r,i,o,s,a){let l,u,c;const d=this._entities,f=this._termFromId(d[a]),p={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const t in e)if(u=e[t]){p[i]=this._termFromId(d[t]),n&&((l=u,u={})[n]=l[n]);for(const e in u)if(c=u[e]){p[o]=this._termFromId(d[e]);const t=r?r in c?[r]:[]:Object.keys(c);for(let e=0;e<t.length;e++)p[s]=this._termFromId(d[t[e]]),yield this._factory.quad(p.subject,p.predicate,p.object,f)}}}_loop(e,t){for(const n in e)t(n)}_loopByKey0(e,t,n){let r,i;if(r=e[t])for(i in r)n(i)}_loopByKey1(e,t,n){let r,i;for(r in e)i=e[r],i[t]&&n(r)}_loopBy2Keys(e,t,n,r){let i,o,s;if((i=e[t])&&(o=i[n]))for(s in o)r(s)}_countInIndex(e,t,n,r){let i,o,s,a=0;t&&((i=e,e={})[t]=i[t]);for(const t in e)if(o=e[t]){n&&((i=o,o={})[n]=i[n]);for(const e in o)(s=o[e])&&(r?r in s&&a++:a+=Object.keys(s).length)}return a}_getGraphs(e){return"number"!=typeof(e=""===e?1:e&&(this._termToNumericId(e)||-1))?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const t=Object.create(null);return n=>{n in t||(t[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),r=r?this._termToNewNumericId(r):1;let i=this._graphs[r];return i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),n=this._termToNewNumericId(n),!!this._addToIndex(i.subjects,e,t,n)&&(this._addToIndex(i.predicates,t,n,e),this._addToIndex(i.objects,n,e,t),this._size=null,!0)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,n,r){return e&&e.subject&&({subject:e,predicate:t,object:n,graph:r}=e),!this.readQuads(e,t,n,r).next().done}import(e){return e.on("data",(e=>{this.addQuad(e)})),e}removeQuad(e,t,n,r){t||({subject:e,predicate:t,object:n,graph:r}=e),r=r?this._termToNumericId(r):1;const i=this._graphs;let o,s,a;if(!((e=e&&this._termToNumericId(e))&&(t=t&&this._termToNumericId(t))&&(n=n&&this._termToNumericId(n))&&(o=i[r])&&(s=o.subjects[e])&&(a=s[t])&&n in a))return!1;for(e in this._removeFromIndex(o.subjects,e,t,n),this._removeFromIndex(o.predicates,t,n,e),this._removeFromIndex(o.objects,n,e,t),null!==this._size&&this._size--,o.subjects)return!0;return delete i[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",(e=>{this.removeQuad(e)})),e}removeMatches(e,t,n,r){const i=new le.Readable({objectMode:!0}),o=this.readQuads(e,t,n,r);return i._read=e=>{for(;--e>=0;){const{done:e,value:t}=o.next();if(e)return void i.push(null);i.push(t)}},this.remove(i)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,n,r){return[...this.readQuads(e,t,n,r)]}*readQuads(e,t,n,r){const i=this._getGraphs(r);let o,s,a,l;if(!(e&&!(s=this._termToNumericId(e))||t&&!(a=this._termToNumericId(t))||n&&!(l=this._termToNumericId(n))))for(const e in i)(o=i[e])&&(s?l?yield*this._findInIndex(o.objects,l,s,a,"object","subject","predicate",e):yield*this._findInIndex(o.subjects,s,a,null,"subject","predicate","object",e):a?yield*this._findInIndex(o.predicates,a,l,null,"predicate","object","subject",e):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",e):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",e))}match(e,t,n,r){return new ge(this,e,t,n,r,{entityIndex:this._entityIndex})}countQuads(e,t,n,r){const i=this._getGraphs(r);let o,s,a,l,u=0;if(e&&!(s=this._termToNumericId(e))||t&&!(a=this._termToNumericId(t))||n&&!(l=this._termToNumericId(n)))return 0;for(const r in i)(o=i[r])&&(u+=e?n?this._countInIndex(o.objects,l,s,a):this._countInIndex(o.subjects,s,a,l):t?this._countInIndex(o.predicates,a,l,s):this._countInIndex(o.objects,l,s,a));return u}forEach(e,t,n,r,i){this.some((t=>(e(t,this),!1)),t,n,r,i)}every(e,t,n,r,i){return!this.some((t=>!e(t,this)),t,n,r,i)}some(e,t,n,r,i){for(const o of this.readQuads(t,n,r,i))if(e(o))return!0;return!1}getSubjects(e,t,n){const r=[];return this.forSubjects((e=>{r.push(e)}),e,t,n),r}forSubjects(e,t,n,r){const i=this._getGraphs(r);let o,s,a;if(e=this._uniqueEntities(e),!(t&&!(s=this._termToNumericId(t))||n&&!(a=this._termToNumericId(n))))for(r in i)(o=i[r])&&(s?a?this._loopBy2Keys(o.predicates,s,a,e):this._loopByKey1(o.subjects,s,e):a?this._loopByKey0(o.objects,a,e):this._loop(o.subjects,e))}getPredicates(e,t,n){const r=[];return this.forPredicates((e=>{r.push(e)}),e,t,n),r}forPredicates(e,t,n,r){const i=this._getGraphs(r);let o,s,a;if(e=this._uniqueEntities(e),!(t&&!(s=this._termToNumericId(t))||n&&!(a=this._termToNumericId(n))))for(r in i)(o=i[r])&&(s?a?this._loopBy2Keys(o.objects,a,s,e):this._loopByKey0(o.subjects,s,e):a?this._loopByKey1(o.predicates,a,e):this._loop(o.predicates,e))}getObjects(e,t,n){const r=[];return this.forObjects((e=>{r.push(e)}),e,t,n),r}forObjects(e,t,n,r){const i=this._getGraphs(r);let o,s,a;if(e=this._uniqueEntities(e),!(t&&!(s=this._termToNumericId(t))||n&&!(a=this._termToNumericId(n))))for(r in i)(o=i[r])&&(s?a?this._loopBy2Keys(o.subjects,s,a,e):this._loopByKey1(o.objects,s,e):a?this._loopByKey0(o.predicates,a,e):this._loop(o.objects,e))}getGraphs(e,t,n){const r=[];return this.forGraphs((e=>{r.push(e)}),e,t,n),r}forGraphs(e,t,n,r){for(const i in this._graphs)this.some((t=>(e(t.graph),!0)),t,n,r,this._termFromId(this._entities[i]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const n={},r=t?()=>!0:(e,t)=>{throw new Error(`${e.value} ${t}`)},i=this.getQuads(null,c.rdf.rest,c.rdf.nil,null),o=e?[...i]:[];return i.forEach((t=>{const i=[];let s,a,l=!1;const u=t.graph;let d=t.subject;for(;d&&!l;){const e=this.getQuads(null,null,d,null),t=this.getQuads(d,null,null,null);let n,f=null,p=null,h=null;for(let i=0;i<t.length&&!l;i++)n=t[i],n.graph.equals(u)?s?l=r(d,"has non-list arcs out"):n.predicate.value===c.rdf.first?f?l=r(d,"has multiple rdf:first arcs"):o.push(f=n):n.predicate.value===c.rdf.rest?p?l=r(d,"has multiple rdf:rest arcs"):o.push(p=n):e.length?l=r(d,"can't be subject and object"):(s=n,a="subject"):l=r(d,"not confined to single graph");for(let t=0;t<e.length&&!l;++t)n=e[t],s?l=r(d,"can't have coreferences"):n.predicate.value===c.rdf.rest?h?l=r(d,"has incoming rdf:rest arcs"):h=n:(s=n,a="object");f?i.unshift(f.object):l=r(d,"has no list head"),d=h&&h.subject}l?e=!1:s&&(n[s[a].value]=i)})),e&&this.removeQuads(o),n}addAll(e){if(e instanceof ge&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof he&&e._entityIndex===this._entityIndex)0!==e._size&&(this._graphs=ce(this._graphs,e._graphs),this._size=null);else for(const t of e)this.add(t);return this}contains(e){if(e instanceof ge&&(e=e.filtered),e===this)return!0;if(!(e instanceof he)||this._entityIndex!==e._entityIndex)return e.every((e=>this.has(e)));const t=this._graphs,n=e._graphs;let r,i,o,s,a;for(const e in n){if(!(r=t[e]))return!1;r=r.subjects;for(const t in i=n[e].subjects){if(!(o=r[t]))return!1;for(const e in s=i[t]){if(!(a=o[e]))return!1;for(const t in s[e])if(!(t in a))return!1}}}return!0}deleteMatches(e,t,n,r){for(const i of this.match(e,t,n,r))this.removeQuad(i);return this}difference(e){if(e&&e instanceof ge&&(e=e.filtered),e===this)return new he({entityIndex:this._entityIndex});if(e instanceof he&&e._entityIndex===this._entityIndex){const t=new he({entityIndex:this._entityIndex}),n=fe(this._graphs,e._graphs);return n&&(t._graphs=n,t._size=null),t}return this.filter((t=>!e.has(t)))}equals(e){return e instanceof ge&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const t=new he({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&t.add(n);return t}intersection(e){if(e instanceof ge&&(e=e.filtered),e===this){const e=new he({entityIndex:this._entityIndex});return e._graphs=ce(Object.create(null),this._graphs),e._size=this._size,e}if(e instanceof he&&this._entityIndex===e._entityIndex){const t=new he({entityIndex:this._entityIndex}),n=de(e._graphs,this._graphs);return n&&(t._graphs=n,t._size=null),t}return this.filter((t=>e.has(t)))}map(e){const t=new he({entityIndex:this._entityIndex});for(const n of this)t.add(e(n,this));return t}reduce(e,t){const n=this.readQuads();let r=void 0===t?n.next().value:t;for(const t of n)r=e(r,t,this);return r}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return(new oe).quadsToString(this)}union(e){const t=new he({entityIndex:this._entityIndex});return t._graphs=ce(Object.create(null),this._graphs),t._size=this._size,t.addAll(e),t}*[Symbol.iterator](){yield*this.readQuads()}}function me(e,t,n=0){const r=t[n];if(r&&!(r in e))return!1;let i=!1;for(const o in r?{[r]:e[r]}:e){const r=2===n?null:me(e[o],t,n+1);!1!==r&&(i=i||Object.create(null),i[o]=r)}return i}class ge extends le.Readable{constructor(e,t,n,r,i,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:n,object:r,graph:i,options:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:n,predicate:r,subject:i}=this,o=this._filtered=new he({factory:e._factory,entityIndex:this.options.entityIndex});let s,a,l;if(i&&!(s=o._termToNumericId(i))||r&&!(a=o._termToNumericId(r))||n&&!(l=o._termToNumericId(n)))return o;const u=e._getGraphs(t);for(const e in u){let t,n,r;!s&&a?(n=me(u[e].predicates,[a,l,s]))&&(t=me(u[e].subjects,[s,a,l]),r=me(u[e].objects,[l,s,a])):l?(r=me(u[e].objects,[l,s,a]))&&(t=me(u[e].subjects,[s,a,l]),n=me(u[e].predicates,[a,l,s])):(t=me(u[e].subjects,[s,a,l]))&&(n=me(u[e].predicates,[a,l,s]),r=me(u[e].objects,[l,s,a])),t&&(o._graphs[e]={subjects:t,predicates:n,objects:r})}o._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[ue]&&(this[ue]=this[Symbol.iterator]());const t=this[ue];for(;--e>=0;){const{done:e,value:n}=t.next();if(e)return void this.push(null);this.push(n)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,t,n,r){return this.filtered.deleteMatches(e,t,n,r)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,t,n,r,i){return this.filtered.every(e,t,n,r,i)}filter(e){return this.filtered.filter(e)}forEach(e,t,n,r,i){return this.filtered.forEach(e,t,n,r,i)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,t,n,r,i){return this.filtered.some(e,t,n,r,i)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,t){return this.filtered.reduce(e,t)}toString(){return(new oe).quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,n,r){return new ge(this.filtered,e,t,n,r,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class _e{dataset(e){return new he(e)}}function ye(e){const t=[];for(const{subject:n,object:r}of e.match(null,S.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,S.defaultGraph())){const i=[...e.match(null,null,null,n)],o=[...e.match(null,null,null,r)];t.push({premise:i,conclusion:o})}return t}class be{constructor(e){this._store=e}_add(e,t,n,r,i){this._store._addToIndex(r.subjects,e,t,n)&&(this._store._addToIndex(r.predicates,t,n,e),this._store._addToIndex(r.objects,n,e,t),i())}_evaluatePremise(e,t,n,r=0){let i,o,s,a,l;const[u,c,d]=e.premise[r].value,f=t[e.premise[r].content],p=!(s=u.value);for(s in p?f:{[s]:f[s]})if(a=f[s]){for(s in p&&(u.value=Number(s)),i=!(s=c.value),i?a:{[s]:a[s]})if(l=a[s]){for(s in i&&(c.value=Number(s)),o=!(s=d.value),o?l:{[s]:l[s]})o&&(d.value=Number(s)),r===e.premise.length-1?e.conclusion.forEach((e=>{this._add(e.subject.value,e.predicate.value,e.object.value,t,(()=>{n(e)}))})):this._evaluatePremise(e,t,n,r+1);o&&(d.value=null)}i&&(c.value=null)}p&&(u.value=null)}_evaluateRules(e,t,n){for(let r=0;r<e.length;r++)this._evaluatePremise(e[r],t,n)}_reasonGraphNaive(e,t){const n=[];function r(e){e.next&&e.next.forEach((t=>{n.push([e.subject.value,e.predicate.value,e.object.value,t])}))}const i=e=>{e.forEach((e=>{this._add(e.subject.value,e.predicate.value,e.object.value,t,(()=>{r(e)}))}))};let o;for(this._evaluateRules(e,t,r);void 0!==(o=n.pop());){const[e,n,s,a]=o,l=a.basePremise.subject.value;l||(a.basePremise.subject.value=e);const u=a.basePremise.predicate.value;u||(a.basePremise.predicate.value=n);const c=a.basePremise.object.value;c||(a.basePremise.object.value=s),0===a.premise.length?i(a.conclusion):this._evaluatePremise(a,t,r),l||(a.basePremise.subject.value=null),u||(a.basePremise.predicate.value=null),c||(a.basePremise.object.value=null)}}_createRule({premise:e,conclusion:t}){const n={},r=e=>"Variable"===e.termType?n[e.value]=n[e.value]||{}:{value:this._store._termToNewNumericId(e)},i=e=>({subject:r(e.subject),predicate:r(e.predicate),object:r(e.object)});return{premise:e.map((e=>i(e))),conclusion:t.map((e=>i(e))),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=ye(e)),e=e.map((e=>this._createRule(e)));for(const t of e)for(const n of e)for(let e=0;e<n.premise.length;e++){const r=n.premise[e];for(const i of t.conclusion){if(we(r.subject,i.subject)&&we(r.predicate,i.predicate)&&we(r.object,i.object)){const t=new Set,o=[];r.subject.value=r.subject.value||1,r.object.value=r.object.value||1,r.predicate.value=r.predicate.value||1;for(let r=0;r<n.premise.length;r++)r!==e&&o.push(ve(n.premise[r],t));(i.next=i.next||[]).push({premise:o,conclusion:n.conclusion,basePremise:r})}n.variables.forEach((e=>{e.value=null}))}}for(const t of e){const e=new Set;t.premise=t.premise.map((t=>ve(t,e)))}const t=this._store._getGraphs();for(const n in t)this._reasonGraphNaive(e,t[n]);this._store._size=null}}function ve({subject:e,predicate:t,object:n},r){const i=e.value||r.has(e)||(r.add(e),!1),o=t.value||r.has(t)||(r.add(t),!1),s=n.value||r.has(n)||(r.add(n),!1);return!i&&o?{content:"predicates",value:[t,n,e]}:s?{content:"objects",value:[n,e,t]}:{content:"subjects",value:[e,t,n]}}function we(e,t){return null===e.value&&(e.value=t.value),e.value===t.value}class Ee extends le.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const t=new U(e);let n,r;const i={onQuad:(e,t)=>{e&&this.emit("error",e)||t&&this.push(t)},onPrefix:(e,t)=>{this.emit("prefix",e,t)}};e&&e.comments&&(i.onComment=e=>{this.emit("comment",e)}),t.parse({on:(e,t)=>{switch(e){case"data":n=t;break;case"end":r=t}}},i),this._transform=(e,t,r)=>{n(e),r()},this._flush=e=>{r(),e()}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),this}}class Se extends le.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const t=this._writer=new oe({write:(e,t,n)=>{this.push(e),n&&n()},end:e=>{this.push(null),e&&e()}},e);this._transform=(e,n,r)=>{t.addQuad(e,r)},this._flush=e=>{t.end(e)}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),e.on("prefix",((e,t)=>{this._writer.addPrefix(e,t)})),this}}const xe={Lexer:_,Parser:U,Writer:oe,Store:he,StoreFactory:_e,EntityIndex:pe,StreamParser:Ee,StreamWriter:Se,Util:r,Reasoner:be,DataFactory:S,Term:x,NamedNode:R,Literal:T,BlankNode:A,Variable:O,DefaultGraph:I,Quad:$,Triple:$,termFromId:N,termToId:P}},9400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeFor=function(e,[t,n,f]){if(t.name!==a.RawRType.For)return void i.parseLog.debug("encountered non-for token for supposed for-loop structure");if(n.name!==a.RawRType.ForCondition)throw new r.ParseError(`expected condition for for-loop but found ${JSON.stringify(n)}`);if(f.name!==a.RawRType.Expression&&f.name!==a.RawRType.ExprOfAssignOrHelp&&f.name!==a.RawRType.LegacyEqualAssign)throw new r.ParseError(`expected expr body for for-loop but found ${JSON.stringify(f)}`);const p={...e,data:e,currentRange:void 0,currentLexeme:void 0},{variable:h,vector:m,comments:g}=function(e,t){const n=(0,o.getWithTokenType)(t.children),{comments:r,others:i}=(0,u.splitComments)(n),l=i.findIndex((e=>e.name===a.RawRType.ForIn));(0,s.guard)(l>0&&l<i.length-1,(()=>`for loop searched in and found at ${l}, but this is not in legal bounds for ${JSON.stringify(n)}`));const f=(0,c.tryNormalizeSymbol)(e,[i[l-1]]);(0,s.guard)(void 0!==f,(()=>`for loop variable should have been parsed to a symbol but was ${JSON.stringify(f)}`)),(0,s.guard)(f.type===a.RType.Symbol,(()=>`for loop variable should have been parsed to a symbol but was ${JSON.stringify(f)}`));const p=(0,u.normalizeExpressions)(e,[i[l+1]]);(0,s.guard)(1===p.length&&p[0].type!==a.RType.Delimiter,(()=>`for loop vector should have been parsed to a single element but was ${JSON.stringify(p)}`));const h=r.map((t=>(0,d.normalizeComment)(e,t.content)));return{variable:f,vector:p[0],comments:h}}(p,n.content),_=(0,l.normalizeSingleNode)(p,f);if(void 0===h||void 0===m||_.type===a.RType.Delimiter)throw new r.ParseError(`unexpected under-sided for-loop, received ${JSON.stringify([h,h,_])}`);const{location:y,content:b}=(0,o.retrieveMetaStructure)(t.content);return{type:a.RType.ForLoop,variable:h,vector:m,body:(0,o.ensureExpressionList)(_),lexeme:b,info:{fullRange:e.currentRange,additionalTokens:g,fullLexeme:e.currentLexeme},location:y}};const r=n(66197),i=n(56293),o=n(36604),s=n(57012),a=n(49375),l=n(10570),u=n(93086),c=n(6056),d=n(31315)},9705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).nodeset.union(this.rhs.evaluate(e).nodeset)}toString(){return this.lhs.toString()+" | "+this.rhs.toString()}}t.BarOperation=i},9957:(e,t,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(66743);e.exports=o.call(r,i)},9970:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(t,e,n)},10076:e=>{"use strict";e.exports=Function.prototype.call},10077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeNumber=function(e,t){const{location:n,content:s}=(0,i.retrieveMetaStructure)(t),a={location:n,lexeme:s,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}};return(0,r.isNA)(s)?{...a,namespace:void 0,type:o.RType.Symbol,content:s}:(0,r.isBoolean)(s)?{...a,type:o.RType.Logical,content:(0,r.boolean2ts)(s)}:{...a,type:o.RType.Number,content:(0,r.number2ts)(s)}};const r=n(48060),i=n(36604),o=n(49375)},10336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MinusOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).number.minus(this.rhs.evaluate(e).number)}toString(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"}}t.MinusOperation=i},10487:(e,t,n)=>{"use strict";var r=n(96897),i=n(30655),o=n(73126),s=n(12205);e.exports=function(e){var t=o(arguments),n=e.length-(arguments.length-1);return r(t,1+(n>0?n:0),!0)},i?i(e.exports,"apply",{value:s}):e.exports.apply=s},10570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSingleNode=function(e,t){switch(t.name){case l.RawRType.ParenLeft:case l.RawRType.ParenRight:case l.RawRType.BraceLeft:case l.RawRType.BraceRight:return(0,a.normalizeDelimiter)(t);case l.RawRType.Comment:return(0,u.normalizeComment)(e,t.content);case l.RawRType.LineDirective:return(0,o.normalizeLineDirective)(e,t.content);case l.RawRType.ExpressionList:case l.RawRType.Expression:case l.RawRType.ExprOfAssignOrHelp:case l.RawRType.LegacyEqualAssign:return(0,c.normalizeExpression)(e,t.content);case l.RawRType.NumericConst:return(0,d.normalizeNumber)(e,t.content);case l.RawRType.StringConst:return(0,f.normalizeString)(e,t.content);case l.RawRType.Break:return(0,p.normalizeBreak)(e,t.content);case l.RawRType.Next:return(0,h.normalizeNext)(e,t.content);case l.RawRType.Symbol:case l.RawRType.Slot:case l.RawRType.NullConst:{const n=(0,m.tryNormalizeSymbol)(e,(0,r.getWithTokenType)([t.content]));return(0,s.guard)(void 0!==n,(()=>`should have been parsed to a symbol but was ${JSON.stringify(n)}`)),n}default:throw new i.ParseError(`unknown type ${t.name} for ${JSON.stringify(t)} in ${JSON.stringify(e)}`)}};const r=n(36604),i=n(66197),o=n(38314),s=n(57012),a=n(31540),l=n(49375),u=n(31315),c=n(73670),d=n(10077),f=n(80065),p=n(41096),h=n(44918),m=n(6056)},10682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overwriteIEnvironmentWith=s,t.overwriteEnvironment=function(e,t,n){return void 0===e?t:void 0===t?e:((0,r.guard)(t.level===e.level,`cannot overwrite environments with differently nested local scopes, base ${e.level} vs. next ${t.level}. This should not happen.`),{current:s(e.current,t.current,!0,n),level:e.level})};const r=n(57012),i=n(73326);function o(e){if(0===e.length)return!0;for(const t of e)if(void 0!==t.controlDependencies)return!0;return!1}function s(e,t,n=!0,a){(0,r.guard)(void 0!==e&&void 0!==t,"can not overwrite environments with undefined");const l=new Map(e.memory);for(const[e,n]of t.memory)if(0===a?.length||void 0!==a||o(n)){const t=l.get(e)??[];for(const e of n)t.findIndex((t=>t.nodeId===e.nodeId&&t.definedAt===e.definedAt))<0&&(void 0!==a?t.push({...e,controlDependencies:[...a,...e.controlDependencies??[]]}):t.push(e));l.set(e,[...t])}else l.set(e,n);let u;u=n?e.parent.id===i.BuiltInEnvironment.id?i.BuiltInEnvironment:s(e.parent,t.parent,n,a):e.parent;const c=new i.Environment(u);return c.memory=l,c}},10891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scripts=void 0,t.getValidOptionsForCompletion=function(e,t){return e.filter((e=>function(e,t){return e.multiple||!t.includes((0,i.asOptionName)(e.name))&&(!e.alias||!t.includes((0,i.asOptionName)(e.alias)))}(e,t))).flatMap((e=>{const t=[(0,i.asOptionName)(e.name)];return e.alias&&t.push((0,i.asOptionName)(e.alias)),t}))};const r=n(57876),i=n(48339),o={slicer:{toolName:"slicer",target:"slicer-app",description:"Static backwards executable slicer for R",options:r.slicerOptions,usageExample:'slicer -c "12@product" test/testfiles/example.R',type:"master script"},benchmark:{toolName:"benchmark",target:"benchmark-app",description:"Benchmark the static backwards slicer",type:"master script",usageExample:'benchmark "example-folder/"',options:r.benchmarkOptions},"benchmark-helper":{toolName:"benchmark-single",target:"benchmark-helper-app",description:"Helper Script to Benchmark the Slicer",usageExample:'benchmark-single "example.R" --output "example.json"',options:r.benchmarkHelperOptions,type:"helper script",masterScripts:["benchmark"]},summarizer:{toolName:"summarizer",target:"summarizer-app",description:"Summarize the results of the benchmark",options:r.summarizerOptions,usageExample:'summarizer "benchmark.json"',type:"master script"},"export-quads":{toolName:"export-quads",target:"export-quads-app",description:"Export quads of the normalized AST of a given R code file",usageExample:'export-quads "example.R" --output "example.quads"',options:r.exportQuadsOptions,type:"master script"},stats:{toolName:"stats",target:"statistics-app",description:"Generate usage Statistics for R scripts",options:r.statisticOptions,usageExample:'stats -i example.R --output-dir "output-folder/"',type:"master script"},"stats-helper":{toolName:"stats-helper",target:"statistics-helper-app",description:"Generate usage Statistics for a single R script (parallel helper for stats)",options:r.statisticHelperOptions,usageExample:'stats-helper -i example.R --output-dir "output-folder/"',type:"helper script",masterScripts:["stats"]}};t.scripts=o},10972:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.envFingerprint=function(e){return(0,i.default)(e,{excludeKeys:e=>"id"===e,replacer:e=>e===o.BuiltInEnvironment||e===s.EmptyBuiltInMemory?void 0:e})},t.fingerprint=function(e,t,n){return`${e}-${t}-${n?"0":"1"}`};const i=r(n(74802)),o=n(73326),s=n(39767)},11002:e=>{"use strict";e.exports=Function.prototype.apply},11291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeTreeSitterTreeToAst=function(e){const t=p(e.rootNode);if(t.type!==o.RType.ExpressionList)throw new r.ParseError(`expected root to resolve to an expression list, got a ${t.type}`);return t};const r=n(66197),i=n(49245),o=n(49375),s=n(72814),a=n(48060),l=n(36604),u=n(83584),c=n(25377),d=n(27454);function f(e){return e.hasError?[]:e.children}function p(e){const t=h(e),n={info:{fullRange:t,additionalTokens:[],fullLexeme:e.text}};switch(e.type){case i.TreeSitterType.Program:{const[t,n]=m(f(e)),r=n.map((e=>[e,p(e)])),i=g(r,t);return{type:o.RType.ExpressionList,children:r.map((e=>e[1])),grouping:void 0,lexeme:void 0,info:{additionalTokens:i.map((e=>e[1]))}}}case i.TreeSitterType.BracedExpression:case i.TreeSitterType.ParenthesizedExpression:{const[t,r]=m(f(e)),i=r[0],a=r.slice(1,-1).map((e=>[e,p(e)])),l=g(a,t),u=r[r.length-1];return{type:o.RType.ExpressionList,location:void 0,lexeme:void 0,children:a.map((e=>e[1])),grouping:[{type:o.RType.Symbol,location:h(i),content:(0,s.removeRQuotes)(i.text),lexeme:i.text,namespace:void 0,...n},{type:o.RType.Symbol,location:h(u),content:(0,s.removeRQuotes)(u.text),lexeme:u.text,namespace:void 0,...n}],info:{additionalTokens:l.map((e=>e[1]))}}}case i.TreeSitterType.BinaryOperator:{const r=f(e),i=p(r[0]),s=p(r[r.length-1]),[a,[l]]=m(r.slice(1,-1)),u=a.map((e=>e[1])),c=h(l),d={type:o.RType.Argument,location:i.location,value:i,name:void 0,lexeme:i.lexeme,info:{}};return"special"==l.type?{type:o.RType.FunctionCall,location:c,lexeme:e.text,functionName:{type:o.RType.Symbol,location:c,lexeme:l.text,content:l.text,namespace:void 0,info:{}},arguments:[d,{type:o.RType.Argument,location:s.location,value:s,name:void 0,lexeme:s.lexeme,info:{}}],named:!0,infixSpecial:!0,info:{additionalTokens:u}}:"|>"===l.text?{type:o.RType.Pipe,location:c,lhs:d,rhs:s,lexeme:l.text,...n,info:{fullRange:t,additionalTokens:u,fullLexeme:e.text}}:{type:o.RType.BinaryOp,location:c,lhs:i,rhs:s,operator:l.text,lexeme:l.text,info:{fullRange:t,additionalTokens:u,fullLexeme:e.text}}}case i.TreeSitterType.UnaryOperator:{const[t,r]=f(e);return{type:o.RType.UnaryOp,operand:p(r),location:h(t),operator:t.text,lexeme:t.text,...n}}case i.TreeSitterType.NamespaceOperator:{const[t,,r]=f(e);return{type:o.RType.Symbol,location:h(r),content:r.text,lexeme:r.text,namespace:t.text,...n}}case"(":case")":case i.TreeSitterType.Na:case i.TreeSitterType.Null:case i.TreeSitterType.Dots:case i.TreeSitterType.DotDotI:case i.TreeSitterType.Identifier:case i.TreeSitterType.Return:return{type:o.RType.Symbol,location:t,content:(0,d.startAndEndsWith)(e.text,"`")?e.text.slice(1,-1):(0,s.removeRQuotes)(e.text),lexeme:e.text,namespace:void 0,...n};case i.TreeSitterType.IfStatement:{const[t,,r,,s,,...a]=f(e),u=a.filter((e=>e.type!==i.TreeSitterType.ElseStatement));return{type:o.RType.IfThenElse,condition:p(r),then:(0,l.ensureExpressionList)(p(s)),otherwise:u.length>0?(0,l.ensureExpressionList)(p(u[0])):void 0,location:h(t),lexeme:t.text,...n}}case i.TreeSitterType.ForStatement:{const n=f(e),r=n[0],i=_(n,"in",2),a=_(n,")",2+i.length+1),u=n[2+i.length+1+a.length+1],[c,[d]]=m(i),[g,[y]]=m(a);return{type:o.RType.ForLoop,variable:{type:o.RType.Symbol,location:h(d),content:(0,s.removeRQuotes)(d.text),lexeme:d.text,namespace:void 0,info:{fullRange:void 0,additionalTokens:[],fullLexeme:void 0}},vector:p(y),body:(0,l.ensureExpressionList)(p(u)),location:h(r),lexeme:r.text,info:{fullRange:t,additionalTokens:[...c,...g].map((e=>e[1])),fullLexeme:e.text}}}case i.TreeSitterType.WhileStatement:{const[t,,r,,i]=f(e);return{type:o.RType.WhileLoop,condition:p(r),body:(0,l.ensureExpressionList)(p(i)),location:h(t),lexeme:t.text,...n}}case i.TreeSitterType.RepeatStatement:{const[t,r]=f(e);return{type:o.RType.RepeatLoop,body:(0,l.ensureExpressionList)(p(r)),location:h(t),lexeme:t.text,...n}}case i.TreeSitterType.Call:{const[r,a]=f(e);if(r.type===i.TreeSitterType.Next||r.type==i.TreeSitterType.Break)return{...p(r),...n};const l=(0,u.splitArrayOn)(f(a).slice(1,-1),(e=>"comma"===e.type)),d=h(r),m={arguments:l.map((e=>0==e.length?c.EmptyArgument:p(e[0]))),location:d,lexeme:r.text,...n};if(r.type===i.TreeSitterType.Identifier||r.type===i.TreeSitterType.String||r.type===i.TreeSitterType.NamespaceOperator||r.type===i.TreeSitterType.Return){let n=p(r);return n.type===o.RType.String&&(n={...n,type:o.RType.Symbol,namespace:void 0,content:(0,s.removeRQuotes)(r.text)}),{...m,type:o.RType.FunctionCall,functionName:{...n,info:{fullRange:t,additionalTokens:[],fullLexeme:e.text}},named:!0}}return{...m,type:o.RType.FunctionCall,calledFunction:p(r),named:void 0}}case i.TreeSitterType.FunctionDefinition:{const[t,r,i]=f(e),s=(0,u.splitArrayOn)(r.children.slice(1,-1),(e=>"comma"===e.type));return{type:o.RType.FunctionDefinition,parameters:s.map((e=>p(e[0]))),body:(0,l.ensureExpressionList)(p(i)),location:h(t),lexeme:t.text,...n}}case i.TreeSitterType.String:return{type:o.RType.String,location:t,content:(0,a.string2ts)(e.text),lexeme:e.text,...n};case i.TreeSitterType.Float:case i.TreeSitterType.Integer:case i.TreeSitterType.Complex:case i.TreeSitterType.Inf:case i.TreeSitterType.Nan:return{type:o.RType.Number,location:t,content:(0,a.number2ts)(e.text),lexeme:e.text,...n};case i.TreeSitterType.True:case i.TreeSitterType.False:return{type:o.RType.Logical,location:t,content:(0,a.boolean2ts)(e.text),lexeme:e.text,...n};case i.TreeSitterType.Break:case i.TreeSitterType.Next:return{type:e.type==i.TreeSitterType.Break?o.RType.Break:o.RType.Next,location:t,lexeme:e.text,...n};case i.TreeSitterType.Subset:case i.TreeSitterType.Subset2:{const[t,r]=f(e),[i,...s]=f(r),a=(0,u.splitArrayOn)(s.slice(0,-1),(e=>"comma"===e.type));return{type:o.RType.Access,operator:i.text,accessed:p(t),access:a.map((e=>0==e.length?c.EmptyArgument:p(e[0]))),location:h(i),lexeme:i.text,...n}}case i.TreeSitterType.ExtractOperator:{const[t,r,i]=f(e),s=h(i);return{type:o.RType.Access,operator:r.text,accessed:p(t),access:[{type:o.RType.Argument,name:void 0,value:{...p(i),...n},location:s,lexeme:i.text,info:{fullRange:s,additionalTokens:[],fullLexeme:i.text}}],location:h(r),lexeme:r.text,...n}}case i.TreeSitterType.Parameter:{const n=f(e),r=n[0],i=h(r);let s;return 3==n.length&&(s=p(n[2])),{type:o.RType.Parameter,name:{type:o.RType.Symbol,location:i,namespace:void 0,content:r.text,lexeme:r.text,info:{fullRange:t,additionalTokens:[],fullLexeme:r.text}},special:"..."===r.text,defaultValue:s,location:i,lexeme:r.text,info:{fullRange:t,additionalTokens:[],fullLexeme:r.text}}}case i.TreeSitterType.Argument:{const r=f(e);if(1==r.length){const[i]=r;return{type:o.RType.Argument,name:void 0,value:p(i),location:t,lexeme:e.text,...n}}{const[e,,t]=r;let n=p(e);n.type===o.RType.String?n={...n,type:o.RType.Symbol,content:n.content.str,namespace:void 0}:(0,d.startAndEndsWith)(n.content,"`")&&(n.content=n.content.slice(1,-1));const i=h(e);return{type:o.RType.Argument,name:n,value:t?p(t):void 0,location:i,lexeme:e.text,info:{fullRange:i,additionalTokens:[],fullLexeme:e.text}}}}case i.TreeSitterType.Comment:return{type:o.RType.Comment,location:t,content:e.text.slice(1),lexeme:e.text,...n};default:throw new r.ParseError(`unexpected node type ${e.type} at ${JSON.stringify(t)}`)}}function h(e){return[e.startPosition.row+1,e.startPosition.column+1,e.endPosition.row+1,e.endPosition.column]}function m(e){const t=[],n=[];for(const r of e)r.type===i.TreeSitterType.Comment?t.push([r,{type:o.RType.Comment,location:h(r),content:r.text.slice(1),lexeme:r.text,info:{additionalTokens:[],fullLexeme:r.text}}]):n.push(r);return[t,n]}function g(e,t){const n=[];for(const[r,o]of t){let t;if(r.previousSibling?.endIndex===r.startIndex)t=r.previousSibling;else for(t=r.nextSibling;t&&t.type===i.TreeSitterType.Comment;)t=t.nextSibling;const[,s]=(t?e.find((([e])=>e.equals(t))):void 0)??e[0]??[];s?(s.info.additionalTokens??=[],s.info.additionalTokens.push(o)):n.push([r,o])}return n}function _(e,t,n=0){const r=[];for(let i=n;i<e.length&&e[i].type!==t;i++)r.push(e[i]);return r}},11556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processIfThenElse=function(e,t,n,h){if(2!==t.length&&3!==t.length)return l.dataflowLogger.warn(`If-then-else ${e.content} has something different from 2 or 3 arguments, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:h}).information;const[m,g,_]=t.map((e=>(0,a.unpackArgument)(e)));if(void 0===m||void 0===g)return l.dataflowLogger.warn(`If-then-else ${e.content} has empty condition or then case in ${JSON.stringify(t)}, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:h}).information;const y=(0,r.processDataflowFor)(m,h);if((0,i.alwaysExits)(y))return l.dataflowLogger.warn(`If-then-else ${n} forces exit in condition, skipping rest`),y;const b=h.controlDependencies;let v;h={...h,environment:y.environment};let w=!1;const E=(0,u.resolveValueOfVariable)(m?.lexeme,h.environment,h.completeAst.idMap),S=E?.every((e=>!1===e))??!1,x=E?.every((e=>!0===e))??!1;S||(v=(0,r.processDataflowFor)(g,h),v.entryPoint&&v.graph.addEdge(e.info.id,v.entryPoint,c.EdgeType.Returns),x||(w=!0));let R,T=!1;void 0===_||x||(R=(0,r.processDataflowFor)(_,h),R.entryPoint&&R.graph.addEdge(e.info.id,R.entryPoint,c.EdgeType.Returns),S||(T=!0));const A=y.graph.mergeWith(v?.graph).mergeWith(R?.graph),O=v?.environment??y.environment;let I;I=S?R?R.environment:y.environment:x?O:(0,d.appendEnvironment)(O,R?R.environment:y.environment);const N={id:n,when:!0},P={id:n,when:!1},$=[...y.in,...w?(0,p.makeAllMaybe)(v?.in,A,I,!1,N):v?.in??[],...T?(0,p.makeAllMaybe)(R?.in,A,I,!1,P):R?.in??[],...y.unknownReferences,...w?(0,p.makeAllMaybe)(v?.unknownReferences,A,I,!1,N):v?.unknownReferences??[],...T?(0,p.makeAllMaybe)(R?.unknownReferences,A,I,!1,P):R?.unknownReferences??[]],C=[...y.out,...w?(0,p.makeAllMaybe)(v?.out,A,I,!0,N):v?.out??[],...T?(0,p.makeAllMaybe)(R?.out,A,I,!0,P):R?.out??[]];(0,s.patchFunctionCall)({nextGraph:A,rootId:n,name:e,data:{...h,controlDependencies:b},argumentProcessResult:[y,v,R]}),A.addEdge(e.info.id,y.entryPoint,c.EdgeType.Reads);const M=[...(v?.exitPoints??[]).map((e=>({...e,controlDependencies:w?[...h.controlDependencies??[],{id:n,when:!0}]:e.controlDependencies}))),...(R?.exitPoints??[]).map((e=>({...e,controlDependencies:T?[...h.controlDependencies??[],{id:n,when:!1}]:e.controlDependencies})))];return{unknownReferences:[],in:[{nodeId:n,name:e.content,controlDependencies:b,type:f.ReferenceType.Function},...$],out:C,exitPoints:M,entryPoint:n,environment:I,graph:A}};const r=n(22476),i=n(47318),o=n(92397),s=n(80876),a=n(55143),l=n(22438),u=n(85193),c=n(34966),d=n(4683),f=n(46044),p=n(73326)},11676:()=>{},11763:(e,t,n)=>{const r=n(50560);e.exports=(e,t)=>r(e,t,!0)},12205:(e,t,n)=>{"use strict";var r=n(66743),i=n(11002),o=n(13144);e.exports=function(){return o(r,i,arguments)}},12273:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Dependency=void 0,t.registerDependencyView=function(e){const t=new p(e),n=a.window.createTreeView(c,{treeDataProvider:t});return t.setTreeView(n),()=>t.dispose()};const a=s(n(91398)),l=n(74265),u=n(62288),c="flowr-dependencies",d={libraries:[],readData:[],sourcedFiles:[],writtenData:[],".meta":{timing:-1}},f={map:{},".meta":{timing:-1}};class p{output;activeDependencies=d;locationMap=f;_onDidChangeTreeData=new a.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;disposables=[];parent;constructor(e){this.output=e,this.updateConfig(),this.disposables.push(a.workspace.onDidChangeConfiguration((async()=>{this.updateConfig(),await this.refresh()}))),this.disposables.push(a.window.onDidChangeActiveTextEditor((async()=>await this.refresh()))),setTimeout((()=>{this.refresh()}),500),setTimeout((()=>{this.refresh()}),2e3)}activeInterval;activeDisposable;updateConfig(){switch(this.activeInterval&&(clearInterval(this.activeInterval),this.activeInterval=void 0),this.activeDisposable&&(this.activeDisposable.dispose(),this.activeDisposable=void 0),(0,l.getConfig)().get("dependencyView.updateType","never")){case"never":break;case"interval":this.activeInterval=setInterval((()=>{this.refresh()}),1e3*(0,l.getConfig)().get("dependencyView.updateInterval",1e4));break;case"on save":this.activeDisposable=a.workspace.onWillSaveTextDocument((async()=>await this.refresh()));break;case"on change":this.activeDisposable=a.workspace.onDidChangeTextDocument((async()=>await this.refresh()));break;default:this.output.appendLine(`[Dependencies View] Invalid update type: ${(0,l.getConfig)().get("dependencyView.updateType")}`)}}setTreeView(e){this.parent=e}async getDependenciesForActiveFile(){const e=a.window.activeTextEditor;if(!e)return{dep:d,loc:f};const t=await(0,l.getFlowrSession)(),[n,r]=await t.retrieveQuery(e.document,[{type:"dependencies"},{type:"location-map"}]);return r?(this.output.appendLine("[Dependencies View] Error: Could not retrieve dependencies"),"error"):(this.output.appendLine(`[Dependencies View] Refreshed! (Dependencies: ${n.dependencies[".meta"].timing}ms, Locations: ${n["location-map"][".meta"].timing}ms)`),{dep:n.dependencies,loc:n["location-map"]})}working=!1;textBuffer=new u.RotaryBuffer(5);lastText="";textFingerprint(e){return e.trim().replace(/\s|^\s*#.*$/gm,"")}async refresh(){if(this.working)return;if("r"!==a.window.activeTextEditor?.document.languageId)return;const e=this.textFingerprint(a.window.activeTextEditor?.document.getText());if(e!==this.lastText){this.lastText=e??"",this.output.appendLine("Refreshing dependencies"),this.working=!0;try{const t=this.textBuffer.get((t=>t?.[0]===e));if(t){try{this.output.appendLine(`[Dependencies View] Using cached dependencies (Dependencies: ${t[1].dep[".meta"].timing}ms, Locations: ${t[1].loc[".meta"].timing}ms)`)}catch(e){this.output.appendLine(`[Dependencies View] Error: ${e.message}`),this.output.appendLine(e.stack??"")}return this.activeDependencies=t[1].dep,this.locationMap=t[1].loc,void this._onDidChangeTreeData.fire(void 0)}await a.window.withProgress({location:{viewId:c}},(()=>this.getDependenciesForActiveFile().then((t=>{if("error"===t)return(0,l.getConfig)().get("dependencyView.keepOnError",!0)?void 0:(this.activeDependencies=d,this.locationMap=f,void this._onDidChangeTreeData.fire(void 0));this.activeDependencies=t.dep,this.locationMap=t.loc,this.textBuffer.push([e,t]),this._onDidChangeTreeData.fire(void 0)})).catch((e=>{this.output.appendLine(`[Dependencies View] Error: ${e}`)}))))}catch(e){this.output.appendLine("[Dependencies View] Error: Could not refresh dependencies"),this.output.appendLine(e.message),this.output.appendLine(e.stack??"")}finally{this.working=!1,setTimeout((()=>{this.reveal()}),0)}}}async reveal(){const e=await this.getChildren(),t=(0,l.getConfig)().get("dependencyView.autoReveal",5);for(const n of e??[])n.children?.length&&n.children.length<=t&&(this.output.appendLine(`Revealing ${JSON.stringify(n.label)} as it has ${n.children.length} children (<= vscode-flowr.dependencyView.autoReveal)`),this.parent?.reveal(n,{select:!1,focus:!1,expand:!0}))}getTreeItem(e){return e}getChildren(e){return e?e.children??[]:[this.makeDependency("Libraries","loads the library",this.activeDependencies.libraries,new a.ThemeIcon("library"),(e=>e.libraryName)),this.makeDependency("Imported Data","imports the data",this.activeDependencies.readData,new a.ThemeIcon("file-text"),(e=>e.source)),this.makeDependency("Sourced Scripts","sources the script",this.activeDependencies.sourcedFiles,new a.ThemeIcon("file-code"),(e=>e.file)),this.makeDependency("Outputs","produces the output",this.activeDependencies.writtenData,new a.ThemeIcon("new-file"),(e=>e.destination))]}getParent(e){return e.getParent()}makeDependency(e,t,n,r,i){const o=new h({label:e,icon:r,root:!0,verb:t,children:this.makeChildren(i,n,t)});return o.children?.forEach((e=>e.setParent(o))),o}makeChildren(e,t,n){const r=t=>{const n=e(t);return"unknown"===n&&t.lexemeOfArgument?n+": "+t.lexemeOfArgument:n},i=new Map;for(const n of t){const t=e(n)+" ("+n.functionName+")";i.has(t)||i.set(t,[]),i.get(t)?.push(n)}return Array.from(i.entries()).map((([e,t])=>{if(1===t.length)return new h({label:r(t[0]),info:t[0],locationMap:this.locationMap,verb:n});const i=new h({label:e,locationMap:this.locationMap,verb:n,icon:a.ThemeIcon.Folder,children:t.map((e=>new h({verb:n,label:r(e),info:e,locationMap:this.locationMap})))});return i.children?.forEach((e=>e.setParent(i))),i}))}dispose(){for(const e of this.disposables)e.dispose();this.activeInterval&&clearInterval(this.activeInterval),this.activeDisposable&&this.activeDisposable.dispose()}}class h extends a.TreeItem{children;info;loc;parent;setParent(e){this.parent=e}getParent(){return this.parent}constructor({label:e,root:t=!1,children:n=[],info:r,icon:i,locationMap:o,collapsibleState:s,parent:l,verb:u}){if(s??=0===n.length?a.TreeItemCollapsibleState.None:a.TreeItemCollapsibleState.Collapsed,super(e,s),this.children=n,this.info=r,this.parent=l,r){if(this.loc=o?.map[r.nodeId],this.description=`by ${r.functionName} in ${this.loc?`(L. ${this.loc[0]})`:"unknown location"}`,this.tooltip=`${u} ${JSON.stringify(this.label)} with the "${r.functionName}" function in ${this.loc?`line ${this.loc[0]}`:" an unknown location (right-click for more)"}`,this.loc&&a.window.activeTextEditor){const e=new a.Position(this.loc[0]-1,this.loc[1]-1),t=new a.Position(this.loc[2]-1,this.loc[3]);this.command={command:"editor.action.goToLocations",title:"go to location",arguments:[a.window.activeTextEditor.document.uri,e,[new a.Location(a.window.activeTextEditor.document.uri,new a.Range(e,t))],"goto"]}}}else n.length>0?(this.tooltip=`${"string"==typeof this.label?this.label:""}${r?" (right-click for more!)":""}`,this.description=`${n.length} item${1===n.length?"":"s"}`):this.description=`${n.length} item${1===n.length?"":"s"}`;i&&(this.iconPath=i),!t&&r&&(this.contextValue="dependency")}getNodeId(){return this.info?.nodeId}getLocation(){return this.loc}}t.Dependency=h},12463:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,s,a,l;if("string"==typeof t&&(o="not ",t.substr(0,4)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var u=("number"!=typeof l&&(l=0),l+1>(a=e).length||-1===a.indexOf(".",l)?"argument":"property");s='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(r(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},12544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GreaterThanOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"}}t.GreaterThanOperation=i},12812:(module,__unused_webpack_exports,__webpack_require__)=>{var __dirname="/",process=__webpack_require__(65606),Module=void 0!==Module?Module:{},ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,TreeSitter=function(){var initPromise,document="object"==typeof window?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise((resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},scriptDirectory="",readAsync,readBinary;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}if(ENVIRONMENT_IS_NODE){var fs=__webpack_require__(28075),nodePath=__webpack_require__(57975);scriptDirectory=__dirname+"/",readBinary=e=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e)),readAsync=(e,t=!0)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),new Promise(((n,r)=>{fs.readFile(e,t?void 0:"utf8",((e,i)=>{e?r(e):n(t?i.buffer:i)}))}))),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),module.exports=Module,quit_=(e,t)=>{throw process.exitCode=e,t}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:void 0!==document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.startsWith("blob:")?"":scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=e=>isFileURI(e)?new Promise(((t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{(200==r.status||0==r.status&&r.response)&&n(r.response),t(r.status)},r.onerror=t,r.send(null)})):fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url)))));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary,wasmMemory;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,HEAP_DATA_VIEW;function updateMemoryViews(){var e=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(e),Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}if(Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort?.(e),err(e="Aborted("+e+")"),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=e=>e.startsWith(dataURIPrefix),isFileURI=e=>e.startsWith("file://"),wasmBinaryFile;function findWasmBinary(){var e="tree-sitter.wasm";return isDataURI(e)?e:locateFile(e)}function getBinarySync(e){if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}function getBinaryPromise(e){return wasmBinary?Promise.resolve().then((()=>getBinarySync(e))):readAsync(e).then((e=>new Uint8Array(e)),(()=>getBinarySync(e)))}function instantiateArrayBuffer(e,t,n){return getBinaryPromise(e).then((e=>WebAssembly.instantiate(e,t))).then(n,(e=>{err(`failed to asynchronously prepare wasm: ${e}`),abort(e)}))}function instantiateAsync(e,t,n,r){return e||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(t)||isFileURI(t)||ENVIRONMENT_IS_NODE||"function"!=typeof fetch?instantiateArrayBuffer(t,n,r):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,n).then(r,(function(e){return err(`wasm streaming compile failed: ${e}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(t,n,r)}))))}function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}function createWasm(){var e=getWasmImports();function t(e,t){wasmExports=e.exports,wasmExports=relocateExports(wasmExports,1024);var n=getDylinkMetadata(t);return n.neededDynlibs&&(dynamicLibraries=n.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err(`Module.instantiateWasm callback failed with error: ${e}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,e,(function(e){t(e.instance,e.module)})),{}}var ASM_CONSTS={};function ExitStatus(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(e,t){var n=GOT[t];return n||(n=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(t)||(n.required=!0),n}},LE_HEAP_LOAD_F32=e=>HEAP_DATA_VIEW.getFloat32(e,!0),LE_HEAP_LOAD_F64=e=>HEAP_DATA_VIEW.getFloat64(e,!0),LE_HEAP_LOAD_I16=e=>HEAP_DATA_VIEW.getInt16(e,!0),LE_HEAP_LOAD_I32=e=>HEAP_DATA_VIEW.getInt32(e,!0),LE_HEAP_LOAD_U32=e=>HEAP_DATA_VIEW.getUint32(e,!0),LE_HEAP_STORE_F32=(e,t)=>HEAP_DATA_VIEW.setFloat32(e,t,!0),LE_HEAP_STORE_F64=(e,t)=>HEAP_DATA_VIEW.setFloat64(e,t,!0),LE_HEAP_STORE_I16=(e,t)=>HEAP_DATA_VIEW.setInt16(e,t,!0),LE_HEAP_STORE_I32=(e,t)=>HEAP_DATA_VIEW.setInt32(e,t,!0),LE_HEAP_STORE_U32=(e,t)=>HEAP_DATA_VIEW.setUint32(e,t,!0),callRuntimeCallbacks=e=>{for(;e.length>0;)e.shift()(Module)},UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder:void 0,UTF8ArrayToString=(e,t,n)=>{for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|l:(7&s)<<18|a<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o},getDylinkMetadata=e=>{var t=0,n=0;function r(){for(var n=0,r=1;;){var i=e[t++];if(n+=(127&i)*r,r*=128,!(128&i))break}return n}function i(){var n=r();return UTF8ArrayToString(e,(t+=n)-n,n)}function o(e,t){if(e)throw new Error(t)}var s="dylink.0";if(e instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(e,s);0===a.length&&(s="dylink",a=WebAssembly.Module.customSections(e,s)),o(0===a.length,"need dylink section"),n=(e=new Uint8Array(a[0])).length}else{var l=new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer);o(!(1836278016==l[0]||6386541==l[0]),"need to see wasm magic number"),o(0!==e[8],"need the dylink section to be first"),t=9;var u=r();n=t+u,s=i()}var c={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==s){c.memorySize=r(),c.memoryAlign=r(),c.tableSize=r(),c.tableAlign=r();for(var d=r(),f=0;f<d;++f){var p=i();c.neededDynlibs.push(p)}}else for(o("dylink.0"!==s);t<n;){var h=e[t++],m=r();if(1===h)c.memorySize=r(),c.memoryAlign=r(),c.tableSize=r(),c.tableAlign=r();else if(2===h)for(d=r(),f=0;f<d;++f)p=i(),c.neededDynlibs.push(p);else if(3===h)for(var g=r();g--;){var _=i();256&r()&&c.tlsExports.add(_)}else if(4===h)for(g=r();g--;)i(),_=i(),1==(3&r())&&c.weakImports.add(_);else t+=m}return c};function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e];case"i16":return LE_HEAP_LOAD_I16(2*(e>>1));case"i32":return LE_HEAP_LOAD_I32(4*(e>>2));case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32(4*(e>>2));case"double":return LE_HEAP_LOAD_F64(8*(e>>3));case"*":return LE_HEAP_LOAD_U32(4*(e>>2));default:abort(`invalid type for getValue: ${t}`)}}var newDSO=(e,t,n)=>{var r={refcount:1/0,name:e,exports:n,global:!0};return LDSO.loadedLibsByName[e]=r,null!=t&&(LDSO.loadedLibsByHandle[t]=r),r},LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=(e,t)=>(HEAPU8.fill(0,e,e+t),e),alignMemory=(e,t)=>Math.ceil(e/t)*t,getMemory=e=>{if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,n=t+alignMemory(e,16);return ___heap_base=n,GOT.__heap_base.value=n,t},isInternalSym=e=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(e)||e.startsWith("__em_js__"),uleb128Encode=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},sigToWasmTypes=e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)n.parameters.push(t[e[r]]);return n},generateFuncType=(e,t)=>{var n=e.slice(0,1),r=e.slice(1),i={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),uleb128Encode(r.length,t);for(var o=0;o<r.length;++o)t.push(i[r[o]]);"v"==n?t.push(0):t.push(1,i[n])},convertJsFunctionToWasm=(e,t)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(t),e);var n=[1];generateFuncType(t,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push(...n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:e}}).exports.f},wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=e=>{var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t},updateTableMap=(e,t)=>{if(functionsInTableMap)for(var n=e;n<e+t;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}},functionsInTableMap,getFunctionAddress=e=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(e)||0),freeTableIndexes=[],getEmptyTableSlot=()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1},setWasmTableEntry=(e,t)=>{wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e)},addFunction=(e,t)=>{var n=getFunctionAddress(e);if(n)return n;var r=getEmptyTableSlot();try{setWasmTableEntry(r,e)}catch(n){if(!(n instanceof TypeError))throw n;var i=convertJsFunctionToWasm(e,t);setWasmTableEntry(r,i)}return functionsInTableMap.set(e,r),r},updateGOT=(e,t)=>{for(var n in e)if(!isInternalSym(n)){var r=e[n];n.startsWith("orig$")&&(n=n.split("$")[1],t=!0),GOT[n]||=new WebAssembly.Global({value:"i32",mutable:!0}),(t||0==GOT[n].value)&&("function"==typeof r?GOT[n].value=addFunction(r):"number"==typeof r?GOT[n].value=r:err(`unhandled export type for '${n}': ${typeof r}`))}},relocateExports=(e,t,n)=>{var r={};for(var i in e){var o=e[i];"object"==typeof o&&(o=o.value),"number"==typeof o&&(o+=t),r[i]=o}return updateGOT(r,n),r},isSymbolDefined=e=>{var t=wasmImports[e];return!(!t||t.stub)},dynCallLegacy=(e,t,n)=>(e=e.replace(/p/g,"i"),(0,Module["dynCall_"+e])(t,...n)),dynCall=(e,t,n=[])=>e.includes("j")?dynCallLegacy(e,t,n):getWasmTableEntry(t)(...n),stackSave=()=>_emscripten_stack_get_current(),stackRestore=e=>__emscripten_stack_restore(e),createInvokeFunction=e=>(t,...n)=>{var r=stackSave();try{return dynCall(e,t,n)}catch(e){if(stackRestore(r),e!==e+0)throw e;_setThrew(1,0)}},resolveGlobalSymbol=(e,t=!1)=>{var n;return t&&"orig$"+e in wasmImports&&(e="orig$"+e),isSymbolDefined(e)?n=wasmImports[e]:e.startsWith("invoke_")&&(n=wasmImports[e]=createInvokeFunction(e.split("_")[1])),{sym:n,name:e}},UTF8ToString=(e,t)=>e?UTF8ArrayToString(HEAPU8,e,t):"",loadWebAssemblyModule=(binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+8];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+8]=1,LE_HEAP_STORE_U32(4*(handle+12>>2),memoryBase),LE_HEAP_STORE_I32(4*(handle+16>>2),metadata.memorySize),LE_HEAP_STORE_U32(4*(handle+20>>2),tableBase),LE_HEAP_STORE_I32(4*(handle+24>>2),metadata.tableSize))}else memoryBase=LE_HEAP_LOAD_U32(4*(handle+12>>2)),tableBase=LE_HEAP_LOAD_U32(4*(handle+20>>2));var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e).sym;return!t&&localScope&&(t=localScope[e]),t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}return t in wasmImports&&!wasmImports[t].stub?wasmImports[t]:(t in e||(e[t]=(...e)=>(n||=resolveSymbol(t),n(...e))),e[t]);var n}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&-1!=body.indexOf("$"+arity);arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),"void"!=cSig)for(var i in cSig=cSig.split(","),cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then((e=>postInstantiation(e.module,e.instance)))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return currentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(((e,t)=>e.then((()=>loadDynamicLibrary(t,flags,localScope)))),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach((e=>loadDynamicLibrary(e,flags,localScope))),loadModule())},mergeLibSymbols=(e,t)=>{for(var[n,r]of Object.entries(e)){const e=e=>{isSymbolDefined(e)||(wasmImports[e]=r)};e(n);const t="__main_argc_argv";"main"==n&&e(t),n==t&&e("main"),n.startsWith("dynCall_")&&!Module.hasOwnProperty(n)&&(Module[n]=r)}},asyncLoad=(e,t,n,r)=>{var i=r?"":getUniqueRunDependency(`al ${e}`);readAsync(e).then((e=>{t(new Uint8Array(e)),i&&removeRunDependency(i)}),(t=>{if(!n)throw`Loading data file "${e}" failed.`;n()})),i&&addRunDependency(i)};function loadDynamicLibrary(e,t={global:!0,nodelete:!0},n,r){var i=LDSO.loadedLibsByName[e];if(i)return t.global?i.global||(i.global=!0,mergeLibSymbols(i.exports,e)):n&&Object.assign(n,i.exports),t.nodelete&&i.refcount!==1/0&&(i.refcount=1/0),i.refcount++,r&&(LDSO.loadedLibsByHandle[r]=i),!t.loadAsync||Promise.resolve(!0);function o(){if(r){var n=LE_HEAP_LOAD_U32(4*(r+28>>2)),i=LE_HEAP_LOAD_U32(4*(r+32>>2));if(n&&i){var o=HEAP8.slice(n,n+i);return t.loadAsync?Promise.resolve(o):o}}var s=locateFile(e);if(t.loadAsync)return new Promise((function(e,t){asyncLoad(s,e,t)}));if(!readBinary)throw new Error(`${s}: file not found, and synchronous loading of external files is not available`);return readBinary(s)}function s(){return t.loadAsync?o().then((i=>loadWebAssemblyModule(i,t,e,n,r))):loadWebAssemblyModule(o(),t,e,n,r)}function a(t){i.global?mergeLibSymbols(t,e):n&&Object.assign(n,t),i.exports=t}return(i=newDSO(e,r,"loading")).refcount=t.nodelete?1/0:1,i.global=t.global,t.loadAsync?s().then((e=>(a(e),!0))):(a(s()),!0)}var reportUndefinedSymbols=()=>{for(var[e,t]of Object.entries(GOT))if(0==t.value){var n=resolveGlobalSymbol(e,!0).sym;if(!n&&!t.required)continue;if("function"==typeof n)t.value=addFunction(n,n.sig);else{if("number"!=typeof n)throw new Error(`bad export type for '${e}': ${typeof n}`);t.value=n}}},loadDylibs=()=>{dynamicLibraries.length?(addRunDependency("loadDylibs"),dynamicLibraries.reduce(((e,t)=>e.then((()=>loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})))),Promise.resolve()).then((()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")}))):reportUndefinedSymbols()},noExitRuntime=Module.noExitRuntime||!0;function setValue(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[e]=t;break;case"i16":LE_HEAP_STORE_I16(2*(e>>1),t);break;case"i32":LE_HEAP_STORE_I32(4*(e>>2),t);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32(4*(e>>2),t);break;case"double":LE_HEAP_STORE_F64(8*(e>>3),t);break;case"*":LE_HEAP_STORE_U32(4*(e>>2),t);break;default:abort(`invalid type for setValue: ${n}`)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=()=>{abort("")};__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=()=>nowIsMonotonic;__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=(e,t,n)=>HEAPU8.copyWithin(e,t,t+n);__emscripten_memcpy_js.sig="vppp";var _emscripten_date_now=()=>Date.now(),_emscripten_get_now;_emscripten_date_now.sig="d",_emscripten_get_now=()=>performance.now(),_emscripten_get_now.sig="d";var getHeapMax=()=>2147483648,growMemory=e=>{var t=(e-wasmMemory.buffer.byteLength+65535)/65536;try{return wasmMemory.grow(t),updateMemoryViews(),1}catch(e){}},_emscripten_resize_heap=e=>{var t=HEAPU8.length;e>>>=0;var n=getHeapMax();if(e>n)return!1;for(var r,i=1;i<=4;i*=2){var o=t*(1+.2/i);o=Math.min(o,e+100663296);var s=Math.min(n,(r=Math.max(e,o))+(65536-r%65536)%65536);if(growMemory(s))return!0}return!1};_emscripten_resize_heap.sig="ip";var _fd_close=e=>52;_fd_close.sig="ii";var convertI32PairToI53Checked=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN;function _fd_seek(e,t,n,r,i){return convertI32PairToI53Checked(t,n),70}_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=(e,t)=>{var n=printCharBuffers[e];0===t||10===t?((1===e?out:err)(UTF8ArrayToString(n,0)),n.length=0):n.push(t)},_fd_write=(e,t,n,r)=>{for(var i=0,o=0;o<n;o++){var s=LE_HEAP_LOAD_U32(4*(t>>2)),a=LE_HEAP_LOAD_U32(4*(t+4>>2));t+=8;for(var l=0;l<a;l++)printChar(e,HEAPU8[s+l]);i+=a}return LE_HEAP_STORE_U32(4*(r>>2),i),0};function _tree_sitter_log_callback(e,t){if(currentLogCallback){const n=UTF8ToString(t);currentLogCallback(n,0!==e)}}function _tree_sitter_parse_callback(e,t,n,r,i){const o=currentParseCallback(t,{row:n,column:r});"string"==typeof o?(setValue(i,o.length,"i32"),stringToUTF16(o,e,10240)):setValue(i,0,"i32")}_fd_write.sig="iippp";var runtimeKeepaliveCounter=0,keepRuntimeAlive=()=>noExitRuntime||runtimeKeepaliveCounter>0,_proc_exit=e=>{EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit?.(e),ABORT=!0),quit_(e,new ExitStatus(e))};_proc_exit.sig="vi";var exitJS=(e,t)=>{EXITSTATUS=e,_proc_exit(e)},handleException=e=>{if(e instanceof ExitStatus||"unwind"==e)return EXITSTATUS;quit_(1,e)},lengthBytesUTF8=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},stringToUTF8Array=(e,t,n,r)=>{if(!(r>0))return 0;for(var i=n,o=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),a<=127){if(n>=o)break;t[n++]=a}else if(a<=2047){if(n+1>=o)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=o)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i},stringToUTF8=(e,t,n)=>stringToUTF8Array(e,HEAPU8,t,n),stackAlloc=e=>__emscripten_stack_alloc(e),stringToUTF8OnStack=e=>{var t=lengthBytesUTF8(e)+1,n=stackAlloc(t);return stringToUTF8(e,n,t),n},stringToUTF16=(e,t,n)=>{if(n??=2147483647,n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var s=e.charCodeAt(o);LE_HEAP_STORE_I16(2*(t>>1),s),t+=2}return LE_HEAP_STORE_I16(2*(t>>1),0),t-r},AsciiToString=e=>{for(var t="";;){var n=HEAPU8[e++];if(!n)return t;t+=String.fromCharCode(n)}},wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports.__wasm_call_ctors)(),___wasm_apply_data_relocs=()=>(___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs)(),_malloc=Module._malloc=e=>(_malloc=Module._malloc=wasmExports.malloc)(e),_calloc=Module._calloc=(e,t)=>(_calloc=Module._calloc=wasmExports.calloc)(e,t),_realloc=Module._realloc=(e,t)=>(_realloc=Module._realloc=wasmExports.realloc)(e,t),_free=Module._free=e=>(_free=Module._free=wasmExports.free)(e),_ts_language_symbol_count=Module._ts_language_symbol_count=e=>(_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(e),_ts_language_state_count=Module._ts_language_state_count=e=>(_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count)(e),_ts_language_version=Module._ts_language_version=e=>(_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version)(e),_ts_language_field_count=Module._ts_language_field_count=e=>(_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count)(e),_ts_language_next_state=Module._ts_language_next_state=(e,t,n)=>(_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state)(e,t,n),_ts_language_symbol_name=Module._ts_language_symbol_name=(e,t)=>(_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(e,t),_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=(e,t,n,r)=>(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(e,t,n,r),_strncmp=Module._strncmp=(e,t,n)=>(_strncmp=Module._strncmp=wasmExports.strncmp)(e,t,n),_ts_language_symbol_type=Module._ts_language_symbol_type=(e,t)=>(_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(e,t),_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=(e,t)=>(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(e,t),_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=(e,t)=>(_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(e,t),_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=e=>(_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(e),_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=(e,t)=>(_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(e,t),_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=(e,t,n)=>(_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(e,t,n),_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=e=>(_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(e),_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=e=>(_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(e),_memset=Module._memset=(e,t,n)=>(_memset=Module._memset=wasmExports.memset)(e,t,n),_memcpy=Module._memcpy=(e,t,n)=>(_memcpy=Module._memcpy=wasmExports.memcpy)(e,t,n),_ts_parser_delete=Module._ts_parser_delete=e=>(_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete)(e),_ts_parser_reset=Module._ts_parser_reset=e=>(_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset)(e),_ts_parser_set_language=Module._ts_parser_set_language=(e,t)=>(_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(e,t),_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=e=>(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(e),_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=(e,t,n)=>(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(e,t,n),_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=(e,t,n)=>(_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(e,t,n),_memmove=Module._memmove=(e,t,n)=>(_memmove=Module._memmove=wasmExports.memmove)(e,t,n),_memcmp=Module._memcmp=(e,t,n)=>(_memcmp=Module._memcmp=wasmExports.memcmp)(e,t,n),_ts_query_new=Module._ts_query_new=(e,t,n,r,i)=>(_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new)(e,t,n,r,i),_ts_query_delete=Module._ts_query_delete=e=>(_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete)(e),_iswspace=Module._iswspace=e=>(_iswspace=Module._iswspace=wasmExports.iswspace)(e),_iswalnum=Module._iswalnum=e=>(_iswalnum=Module._iswalnum=wasmExports.iswalnum)(e),_ts_query_pattern_count=Module._ts_query_pattern_count=e=>(_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(e),_ts_query_capture_count=Module._ts_query_capture_count=e=>(_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(e),_ts_query_string_count=Module._ts_query_string_count=e=>(_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count)(e),_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=(e,t,n)=>(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(e,t,n),_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=(e,t,n)=>(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(e,t,n),_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=(e,t,n)=>(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(e,t,n),_ts_query_disable_capture=Module._ts_query_disable_capture=(e,t,n)=>(_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(e,t,n),_ts_tree_copy=Module._ts_tree_copy=e=>(_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy)(e),_ts_tree_delete=Module._ts_tree_delete=e=>(_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete)(e),_ts_init=Module._ts_init=()=>(_ts_init=Module._ts_init=wasmExports.ts_init)(),_ts_parser_new_wasm=Module._ts_parser_new_wasm=()=>(_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=(e,t)=>(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(e,t),_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=(e,t,n,r,i)=>(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(e,t,n,r,i),_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=e=>(_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(e),_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=(e,t)=>(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(e,t),_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=(e,t)=>(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(e,t),_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=e=>(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(e),_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=e=>(_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(e),_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=e=>(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(e),_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=e=>(_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(e),_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=(e,t)=>(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(e,t),_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=e=>(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(e),_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=e=>(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(e),_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=e=>(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(e),_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=(e,t)=>(_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(e,t),_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=e=>(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(e),_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=e=>(_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(e),_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=e=>(_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(e),_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=e=>(_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(e),_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=e=>(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(e),_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=e=>(_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(e),_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=(e,t)=>(_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(e,t),_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=e=>(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(e),_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=e=>(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(e),_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=e=>(_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(e),_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=e=>(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(e),_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=e=>(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(e),_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=e=>(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(e),_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=e=>(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(e),_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=e=>(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(e),_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=e=>(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(e),_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=e=>(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(e),_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=e=>(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(e),_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=e=>(_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(e),_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=e=>(_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(e),_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=e=>(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(e),_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=e=>(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(e),_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=(e,t)=>(_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(e,t),_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=(e,t)=>(_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(e,t),_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=e=>(_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(e),_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=e=>(_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(e),_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=e=>(_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(e),_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=e=>(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(e),_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=e=>(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(e),_ts_node_child_wasm=Module._ts_node_child_wasm=(e,t)=>(_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(e,t),_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=(e,t)=>(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(e,t),_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=(e,t)=>(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(e,t),_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=e=>(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(e),_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=e=>(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(e),_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=e=>(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(e),_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=e=>(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(e),_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=e=>(_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(e),_ts_node_parent_wasm=Module._ts_node_parent_wasm=e=>(_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(e),_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=e=>(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(e),_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=e=>(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(e),_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=e=>(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(e),_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=e=>(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(e),_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=e=>(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(e),_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=e=>(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(e),_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=e=>(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(e),_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=e=>(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(e),_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=e=>(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(e),_ts_node_children_wasm=Module._ts_node_children_wasm=e=>(_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(e),_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=e=>(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(e),_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=(e,t,n,r,i,o,s)=>(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(e,t,n,r,i,o,s),_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=e=>(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(e),_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=e=>(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(e),_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=e=>(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(e),_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=e=>(_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(e),_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=e=>(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(e),_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=e=>(_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(e),_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=e=>(_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(e),_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=e=>(_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(e),_ts_query_matches_wasm=Module._ts_query_matches_wasm=(e,t,n,r,i,o,s,a,l,u,c)=>(_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(e,t,n,r,i,o,s,a,l,u,c),_ts_query_captures_wasm=Module._ts_query_captures_wasm=(e,t,n,r,i,o,s,a,l,u,c)=>(_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(e,t,n,r,i,o,s,a,l,u,c),_iswalpha=Module._iswalpha=e=>(_iswalpha=Module._iswalpha=wasmExports.iswalpha)(e),_iswblank=Module._iswblank=e=>(_iswblank=Module._iswblank=wasmExports.iswblank)(e),_iswdigit=Module._iswdigit=e=>(_iswdigit=Module._iswdigit=wasmExports.iswdigit)(e),_iswlower=Module._iswlower=e=>(_iswlower=Module._iswlower=wasmExports.iswlower)(e),_iswupper=Module._iswupper=e=>(_iswupper=Module._iswupper=wasmExports.iswupper)(e),_iswxdigit=Module._iswxdigit=e=>(_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit)(e),_memchr=Module._memchr=(e,t,n)=>(_memchr=Module._memchr=wasmExports.memchr)(e,t,n),_strlen=Module._strlen=e=>(_strlen=Module._strlen=wasmExports.strlen)(e),_strcmp=Module._strcmp=(e,t)=>(_strcmp=Module._strcmp=wasmExports.strcmp)(e,t),_strncat=Module._strncat=(e,t,n)=>(_strncat=Module._strncat=wasmExports.strncat)(e,t,n),_strncpy=Module._strncpy=(e,t,n)=>(_strncpy=Module._strncpy=wasmExports.strncpy)(e,t,n),_towlower=Module._towlower=e=>(_towlower=Module._towlower=wasmExports.towlower)(e),_towupper=Module._towupper=e=>(_towupper=Module._towupper=wasmExports.towupper)(e),_setThrew=(e,t)=>(_setThrew=wasmExports.setThrew)(e,t),__emscripten_stack_restore=e=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(e),__emscripten_stack_alloc=e=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(e),_emscripten_stack_get_current=()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)(),dynCall_jiji=Module.dynCall_jiji=(e,t,n,r,i)=>(dynCall_jiji=Module.dynCall_jiji=wasmExports.dynCall_jiji)(e,t,n,r,i),_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=e=>(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(e),_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=(e,t)=>(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(e,t),calledRun;function callMain(e=[]){var t=resolveGlobalSymbol("main").sym;if(t){e.unshift(thisProgram);var n=e.length,r=stackAlloc(4*(n+1)),i=r;e.forEach((e=>{LE_HEAP_STORE_U32(4*(i>>2),stringToUTF8OnStack(e)),i+=4})),LE_HEAP_STORE_U32(4*(i>>2),0);try{var o=t(n,r);return exitJS(o,!0),o}catch(e){return handleException(e)}}}function run(e=arguments_){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(e),postRun()))}runDependencies>0||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}if(Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)},Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;let VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let t;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{t=e[0];const n=C._ts_language_version(t);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else t=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],t),this}getLanguage(){return this.language}parse(e,t,n){if("string"==typeof e)currentParseCallback=(t,n)=>e.slice(t);else{if("function"!=typeof e)throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let r=0,i=0;if(n?.includedRanges){r=n.includedRanges.length,i=C._calloc(r,SIZE_OF_RANGE);let e=i;for(let t=0;t<r;t++)marshalRange(e,n.includedRanges[t]),e+=SIZE_OF_RANGE}const o=C._ts_parser_parse_wasm(this[0],this[1],t?t[0]:0,i,r);if(!o)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");const s=new Tree(INTERNAL,o,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,s}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let r=t;for(let t=0;t<e;t++)n[t]=unmarshalRange(r),r+=SIZE_OF_RANGE;C._free(t)}return n}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}setLogger(e){if(e){if("function"!=typeof e)throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,t,n,r){assertInternal(e),this[0]=t,this.language=n,this.textCallback=r}copy(){const e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(e,t){const n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),marshalPoint(n+SIZE_OF_INT,t),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);const t=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(t);if(t>0){let e=n;for(let n=0;n<t;n++)r[n]=unmarshalRange(e),e+=SIZE_OF_RANGE;C._free(n)}return r}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let r=t;for(let t=0;t<e;t++)n[t]=unmarshalRange(r),r+=SIZE_OF_RANGE;C._free(t)}return n}}class Node{constructor(e,t){assertInternal(e),this.tree=t}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),1===C._ts_node_is_named_wasm(this.tree[0])}get hasError(){return marshalNode(this),1===C._ts_node_has_error_wasm(this.tree[0])}get hasChanges(){return marshalNode(this),1===C._ts_node_has_changes_wasm(this.tree[0])}get isError(){return marshalNode(this),1===C._ts_node_is_error_wasm(this.tree[0])}get isMissing(){return marshalNode(this),1===C._ts_node_is_missing_wasm(this.tree[0])}get isExtra(){return marshalNode(this),1===C._ts_node_is_extra_wasm(this.tree[0])}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){const t=this.tree.language.fields.indexOf(e);return-1!==t?this.childForFieldId(t):null}fieldNameForChild(e){marshalNode(this);const t=C._ts_node_field_name_for_child_wasm(this.tree[0],e);return t?AsciiToString(t):null}childrenForFieldName(e){const t=this.tree.language.fields.indexOf(e);return-1!==t&&0!==t?this.childrenForFieldId(t):[]}childrenForFieldId(e){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],e);const t=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(t);if(t>0){let e=n;for(let n=0;n<t;n++)r[n]=unmarshalNode(this.tree,e),e+=SIZE_OF_NODE;C._free(n)}return r}firstChildForIndex(e){return marshalNode(this),setValue(TRANSFER_BUFFER+SIZE_OF_NODE,e,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(e){return marshalNode(this),setValue(TRANSFER_BUFFER+SIZE_OF_NODE,e,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._children[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._namedChildren[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._namedChildren}descendantsOfType(e,t,n){Array.isArray(e)||(e=[e]),t||(t=ZERO_POINT),n||(n=ZERO_POINT);const r=[],i=this.tree.language.types;for(let t=0,n=i.length;t<n;t++)e.includes(i[t])&&r.push(t);const o=C._malloc(SIZE_OF_INT*r.length);for(let e=0,t=r.length;e<t;e++)setValue(o+e*SIZE_OF_INT,r[e],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],o,r.length,t.row,t.column,n.row,n.column);const s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=new Array(s);if(s>0){let e=a;for(let t=0;t<s;t++)l[t]=unmarshalNode(this.tree,e),e+=SIZE_OF_NODE}return C._free(a),C._free(o),l}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);const n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);const n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);const n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);const n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const e=C._ts_node_to_string_wasm(this.tree[0]),t=AsciiToString(e);return C._free(e),t}}class TreeCursor{constructor(e,t){assertInternal(e),this.tree=t,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(e){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(e,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],e.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])}get nodeIsMissing(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])}get nodeText(){marshalTreeCursor(this);const e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),t=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,t)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoLastChild(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoFirstChildForIndex(e){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,e,"i32");const t=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===t}gotoFirstChildForPosition(e){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,e);const t=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===t}gotoNextSibling(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoPreviousSibling(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoDescendant(e){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],e),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}}class Language{constructor(e,t){assertInternal(e),this[0]=t,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let e=0,t=this.types.length;e<t;e++)C._ts_language_symbol_type(this[0],e)<2&&(this.types[e]=UTF8ToString(C._ts_language_symbol_name(this[0],e)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let e=0,t=this.fields.length;e<t;e++){const t=C._ts_language_field_name_for_id(this[0],e);this.fields[e]=0!==t?UTF8ToString(t):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(e){const t=this.fields.indexOf(e);return-1!==t?t:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,t){const n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);const i=C._ts_language_symbol_for_name(this[0],r,n,t);return C._free(r),i||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){const t=C._ts_language_symbol_name(this[0],e);return t?UTF8ToString(t):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}nextState(e,t){return C._ts_language_next_state(this[0],e,t)}lookaheadIterator(e){const t=C._ts_lookahead_iterator_new(this[0],e);return t?new LookaheadIterable(INTERNAL,t,this):null}query(e){const t=lengthBytesUTF8(e),n=C._malloc(t+1);stringToUTF8(e,n,t+1);const r=C._ts_query_new(this[0],n,t,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!r){const t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=getValue(TRANSFER_BUFFER,"i32"),i=UTF8ToString(n,r).length,o=e.substr(i,100).split("\n")[0];let s,a=o.match(QUERY_WORD_REGEX)[0];switch(t){case 2:s=new RangeError(`Bad node name '${a}'`);break;case 3:s=new RangeError(`Bad field name '${a}'`);break;case 4:s=new RangeError(`Bad capture name @${a}`);break;case 5:s=new TypeError(`Bad pattern structure at offset ${i}: '${o}'...`),a="";break;default:s=new SyntaxError(`Bad syntax at offset ${i}: '${o}'...`),a=""}throw s.index=i,s.length=a.length,C._free(n),s}const i=C._ts_query_string_count(r),o=C._ts_query_capture_count(r),s=C._ts_query_pattern_count(r),a=new Array(o),l=new Array(i);for(let e=0;e<o;e++){const t=C._ts_query_capture_name_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");a[e]=UTF8ToString(t,n)}for(let e=0;e<i;e++){const t=C._ts_query_string_value_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");l[e]=UTF8ToString(t,n)}const u=new Array(s),c=new Array(s),d=new Array(s),f=new Array(s),p=new Array(s);for(let e=0;e<s;e++){const t=C._ts_query_predicates_for_pattern(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");f[e]=[],p[e]=[];const i=[];let o=t;for(let t=0;t<n;t++){const t=getValue(o,"i32");o+=SIZE_OF_INT;const n=getValue(o,"i32");if(o+=SIZE_OF_INT,t===PREDICATE_STEP_TYPE_CAPTURE)i.push({type:"capture",name:a[n]});else if(t===PREDICATE_STEP_TYPE_STRING)i.push({type:"string",value:l[n]});else if(i.length>0){if("string"!==i[0].type)throw new Error("Predicates must begin with a literal value");const t=i[0].value;let n,r=!0,o=!0;switch(t){case"any-not-eq?":case"not-eq?":r=!1;case"any-eq?":case"eq?":if(3!==i.length)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected 2, got ${i.length-1}`);if("capture"!==i[1].type)throw new Error(`First argument of \`#${t}\` predicate must be a capture. Got "${i[1].value}"`);if(o=!t.startsWith("any-"),"capture"===i[2].type){const t=i[1].name,n=i[2].name;p[e].push((e=>{const i=[],s=[];for(const r of e)r.name===t&&i.push(r.node),r.name===n&&s.push(r.node);const a=(e,t,n)=>n?e.text===t.text:e.text!==t.text;return o?i.every((e=>s.some((t=>a(e,t,r))))):i.some((e=>s.some((t=>a(e,t,r)))))}))}else{n=i[1].name;const t=i[2].value,s=e=>e.text===t,a=e=>e.text!==t;p[e].push((e=>{const t=[];for(const r of e)r.name===n&&t.push(r.node);const i=r?s:a;return o?t.every(i):t.some(i)}))}break;case"any-not-match?":case"not-match?":r=!1;case"any-match?":case"match?":if(3!==i.length)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected 2, got ${i.length-1}.`);if("capture"!==i[1].type)throw new Error(`First argument of \`#${t}\` predicate must be a capture. Got "${i[1].value}".`);if("string"!==i[2].type)throw new Error(`Second argument of \`#${t}\` predicate must be a string. Got @${i[2].value}.`);n=i[1].name;const s=new RegExp(i[2].value);o=!t.startsWith("any-"),p[e].push((e=>{const t=[];for(const r of e)r.name===n&&t.push(r.node.text);const i=(e,t)=>t?s.test(e):!s.test(e);return 0===t.length?!r:o?t.every((e=>i(e,r))):t.some((e=>i(e,r)))}));break;case"set!":if(i.length<2||i.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${i.length-1}.`);if(i.some((e=>"string"!==e.type)))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[e]||(u[e]={}),u[e][i[1].value]=i[2]?i[2].value:null;break;case"is?":case"is-not?":if(i.length<2||i.length>3)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected 1 or 2. Got ${i.length-1}.`);if(i.some((e=>"string"!==e.type)))throw new Error(`Arguments to \`#${t}\` predicate must be a strings.".`);const a="is?"===t?c:d;a[e]||(a[e]={}),a[e][i[1].value]=i[2]?i[2].value:null;break;case"not-any-of?":r=!1;case"any-of?":if(i.length<2)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected at least 1. Got ${i.length-1}.`);if("capture"!==i[1].type)throw new Error(`First argument of \`#${t}\` predicate must be a capture. Got "${i[1].value}".`);for(let e=2;e<i.length;e++)if("string"!==i[e].type)throw new Error(`Arguments to \`#${t}\` predicate must be a strings.".`);n=i[1].name;const l=i.slice(2).map((e=>e.value));p[e].push((e=>{const t=[];for(const r of e)r.name===n&&t.push(r.node.text);return 0===t.length?!r:t.every((e=>l.includes(e)))===r}));break;default:f[e].push({operator:t,operands:i.slice(1)})}i.length=0}}Object.freeze(u[e]),Object.freeze(c[e]),Object.freeze(d[e])}return C._free(n),new Query(INTERNAL,r,a,p,f,Object.freeze(u),Object.freeze(c),Object.freeze(d))}static load(e){let t;if(e instanceof Uint8Array)t=Promise.resolve(e);else{const n=e;if(void 0!==process&&process.versions&&process.versions.node){const e=__webpack_require__(28075);t=Promise.resolve(e.readFileSync(n))}else t=fetch(n).then((e=>e.arrayBuffer().then((t=>{if(e.ok)return new Uint8Array(t);{const n=new TextDecoder("utf-8").decode(t);throw new Error(`Language.load failed with status ${e.status}.\n\n${n}`)}}))))}return t.then((e=>loadWebAssemblyModule(e,{loadAsync:!0}))).then((e=>{const t=Object.keys(e),n=t.find((e=>LANGUAGE_FUNCTION_REGEX.test(e)&&!e.includes("external_scanner_")));n||console.log(`Couldn't find language function in WASM file. Symbols:\n${JSON.stringify(t,null,2)}`);const r=e[n]();return new Language(INTERNAL,r)}))}}class LookaheadIterable{constructor(e,t,n){assertInternal(e),this[0]=t,this.language=n}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(e){return C._ts_lookahead_iterator_reset_state(this[0],e)}reset(e,t){return!!C._ts_lookahead_iterator_reset(this[0],e[0],t)&&(this.language=e,!0)}[Symbol.iterator](){const e=this;return{next:()=>C._ts_lookahead_iterator_next(e[0])?{done:!1,value:e.currentType}:{done:!0,value:""}}}}class Query{constructor(e,t,n,r,i,o,s,a){assertInternal(e),this[0]=t,this.captureNames=n,this.textPredicates=r,this.predicates=i,this.setProperties=o,this.assertedProperties=s,this.refutedProperties=a,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,{startPosition:t=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:r=0,endIndex:i=0,matchLimit:o=4294967295,maxStartDepth:s=4294967295,timeoutMicros:a=0}={}){if("number"!=typeof o)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,r,i,o,s,a);const l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),d=new Array(l);this.exceededMatchLimit=Boolean(c);let f=0,p=u;for(let t=0;t<l;t++){const t=getValue(p,"i32");p+=SIZE_OF_INT;const n=getValue(p,"i32");p+=SIZE_OF_INT;const r=new Array(n);if(p=unmarshalCaptures(this,e.tree,p,r),this.textPredicates[t].every((e=>e(r)))){d[f]={pattern:t,captures:r};const e=this.setProperties[t];e&&(d[f].setProperties=e);const n=this.assertedProperties[t];n&&(d[f].assertedProperties=n);const i=this.refutedProperties[t];i&&(d[f].refutedProperties=i),f++}}return d.length=f,C._free(u),d}captures(e,{startPosition:t=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:r=0,endIndex:i=0,matchLimit:o=4294967295,maxStartDepth:s=4294967295,timeoutMicros:a=0}={}){if("number"!=typeof o)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,r,i,o,s,a);const l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),d=[];this.exceededMatchLimit=Boolean(c);const f=[];let p=u;for(let t=0;t<l;t++){const t=getValue(p,"i32");p+=SIZE_OF_INT;const n=getValue(p,"i32");p+=SIZE_OF_INT;const r=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=n,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[t].every((e=>e(f)))){const e=f[r],n=this.setProperties[t];n&&(e.setProperties=n);const i=this.assertedProperties[t];i&&(e.assertedProperties=i);const o=this.refutedProperties[t];o&&(e.refutedProperties=o),d.push(e)}}return C._free(u),d}predicatesForPattern(e){return this.predicates[e]}disableCapture(e){const t=lengthBytesUTF8(e),n=C._malloc(t+1);stringToUTF8(e,n,t+1),C._ts_query_disable_capture(this[0],n,t),C._free(n)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,n){const r=n-t;let i=e.textCallback(t,null,n);for(t+=i.length;t<n;){const r=e.textCallback(t,null,n);if(!(r&&r.length>0))break;t+=r.length,i+=r}return t>n&&(i=i.slice(0,r)),i}function unmarshalCaptures(e,t,n,r){for(let i=0,o=r.length;i<o;i++){const o=getValue(n,"i32"),s=unmarshalNode(t,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:e.captureNames[o],node:s}}return n}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&"number"==typeof e.row&&"number"==typeof e.column}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32")}function unmarshalNode(e,t=TRANSFER_BUFFER){const n=getValue(t,"i32");if(0===n)return null;const r=getValue(t+=SIZE_OF_INT,"i32"),i=getValue(t+=SIZE_OF_INT,"i32"),o=getValue(t+=SIZE_OF_INT,"i32"),s=getValue(t+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,e);return a.id=n,a.startIndex=r,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32"),setValue(t+3*SIZE_OF_INT,e[3],"i32")}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),e[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32")}function unmarshalPoint(e){return{row:getValue(e,"i32")>>>0,column:getValue(e+SIZE_OF_INT,"i32")>>>0}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,"i32"),setValue(e+=SIZE_OF_INT,t.endIndex,"i32"),e+=SIZE_OF_INT}function unmarshalRange(e){const t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32")>>>0,e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32")>>>0,t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT}for(const e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}})))}}return Parser}();module.exports=TreeSitter},12865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BiMap=void 0;class n{[Symbol.toStringTag]="BiMap";size=0;k2v=new Map;v2k=new WeakMap;constructor(e){if(null!=e)for(const[t,n]of e)this.set(t,n)}[Symbol.iterator](){return this.k2v[Symbol.iterator]()}clear(){this.size=0,this.k2v.clear(),this.v2k=new WeakMap}delete(e){const t=this.k2v.get(e);return void 0!==t&&(this.k2v.delete(e),this.v2k.delete(t),this.size=this.k2v.size,!0)}entries(){return this.k2v.entries()}forEach(e){this.k2v.forEach(e)}get(e){return this.k2v.get(e)}getKey(e){return this.v2k.get(e)}has(e){return this.k2v.has(e)}hasValue(e){return this.v2k.has(e)}keys(){return this.k2v.keys()}set(e,t){return this.k2v.set(e,t),this.v2k.set(t,e),this.size=this.k2v.size,this}values(){return this.k2v.values()}}t.BiMap=n},13078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bigint2number=function(e){return Number(String(e).slice(0,-1))},t.roundToDecimals=function(e,t){const n=10**t;return Math.round(e*n)/n}},13144:(e,t,n)=>{"use strict";var r=n(66743),i=n(11002),o=n(10076),s=n(47119);e.exports=s||r.call(o,i)},13874:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},13920:(e,t,n)=>{"use strict";const{MathFloor:r,NumberIsInteger:i}=n(74641),{validateInteger:o}=n(2224),{ERR_INVALID_ARG_VALUE:s}=n(68526).codes;let a=16384,l=16;function u(e){return e?l:a}e.exports={getHighWaterMark:function(e,t,n,o){const a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=a){if(!i(a)||a<0)throw new s(o?`options.${n}`:"options.highWaterMark",a);return r(a)}return u(e.objectMode)},getDefaultHighWaterMark:u,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:a=t}}},13968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.foldAst=function(e,t){const n=t;return n.down=i,(0,r.foldAstStateful)(e,void 0,n)};const r=n(18327),i=()=>{}},13989:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataAccess=void 0;const r=n(67102),i=n(20144),o=n(57012),s=n(49375),a=n(6945),l=n(48387),u=n(6737),c=n(25377),d={singleBracket:{0:0n,1:(0,r.emptyCommonSyntaxTypeCounts)()},doubleBracket:{0:0n,1:(0,r.emptyCommonSyntaxTypeCounts)()},chainedOrNestedAccess:0,longestChain:0,deepestNesting:0,byName:0,bySlot:0};function f(e,t){if(0===e.length)return void t[0]++;let n=1;for(const i of e)null!=i&&i!==c.EmptyArgument?(t[n]=(0,r.updateCommonSyntaxTypeCounts)(t[n]??(0,r.emptyCommonSyntaxTypeCounts)(),i),n++):t[0]++}t.dataAccess={name:"Data Access",description:"Ways of accessing data structures in R",process:(e,n)=>(function(e,n){const r=[],i=[],c=new Map;(0,a.visitAst)(n.normalizedRAst.ast,(a=>{if(a.type!==s.RType.Access)return;const d=(0,l.rolesOfParents)(a,n.normalizedRAst.idMap);let p=!1,h=!1;for(const e of d){if("accessed"===e){p=!0;break}if("index-access"===e){h=!0;break}}p?(i.push(a),e.chainedOrNestedAccess++,e.longestChain=Math.max(e.longestChain,i.length)):h&&(r.push(a),e.chainedOrNestedAccess++,e.deepestNesting=Math.max(e.deepestNesting,r.length)),c.set(a.info.id,{acc:p,idxAcc:h}),0===r.length&&0===i.length&&(0,u.appendStatisticsFile)(t.dataAccess.name,"dataAccess",[a.info.fullLexeme??a.lexeme],n.filepath);const m=a.operator;switch(m){case"@":return void e.bySlot++;case"$":return void e.byName++;case"[":f(a.access,e.singleBracket);break;case"[[":f(a.access,e.doubleBracket);break;default:(0,o.assertUnreachable)(m)}(0,o.guard)(Array.isArray(a.access),"[ and [[ must provide access as array")}),(e=>{if(e.type===s.RType.Access){const t=c.get(e.info.id);t?.acc?i.pop():t?.idxAcc&&r.pop()}}))}(e,n),e),initialValue:d,postProcess:i.postProcess}},13999:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0!==r(e,t,n)},14035:(e,t,n)=>{"use strict";var r,i=n(36556),o=n(49092)(),s=n(9957),a=n(75795);if(o){var l=i("RegExp.prototype.exec"),u={},c=function(){throw u},d={toString:c,valueOf:c};"symbol"==typeof Symbol.toPrimitive&&(d[Symbol.toPrimitive]=c),r=function(e){if(!e||"object"!=typeof e)return!1;var t=a(e,"lastIndex");if(!t||!s(t,"value"))return!1;try{l(e,d)}catch(e){return e===u}}}else{var f=i("Object.prototype.toString");r=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===f(e)}}e.exports=r},14093:function(e,t,n){"use strict";var r=n(65606),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.stdioCaptureProcessor=function(e,t,n){(0,a.guard)(null!==e[1],"no stdout given in stdio!");const r=s.default.createInterface({input:e[1],terminal:!1});(0,a.guard)(null!==e[2],"no stderr given in stdio!");const i=s.default.createInterface({input:e[2],terminal:!1});r.on("line",t),i.on("line",n)},t.waitOnScript=async function(e,t,n,i=!1){l.log.info(`starting script ${e} with args ${JSON.stringify(t)}`);const s=o.default.fork(e,t,{silent:void 0!==n});void 0!==n&&n(s.stdio),s.on("exit",((t,n)=>{t&&(console.error(`Script ${e} exited with code ${String(t)} and signal ${JSON.stringify(n)}`),i&&r.exit(t))})),s.on("error",(t=>{console.error(`Script ${e} signaled error ${JSON.stringify(t)}`),i&&r.exit(1)})),await new Promise(((t,n)=>s.on("exit",(r=>{i&&r?n(new Error(`Script ${e} exited with code ${String(r)}`)):t()}))))};const o=i(n(58912)),s=i(n(99602)),a=n(57012),l=n(19742)},14257:(e,t,n)=>{"use strict";var r=n(12463).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){a=!1,u=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},h=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",h),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",f),t.on("finish",c),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",c),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)}}},14348:()=>{},14530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeWhile=function(e,[t,n,l,u,c]){if(t.name!==s.RawRType.While)return void i.parseLog.debug("encountered non-while token for supposed while-loop structure");if(n.name!==s.RawRType.ParenLeft)throw new r.ParseError(`expected left-parenthesis for while but found ${JSON.stringify(n)}`);if(u.name!==s.RawRType.ParenRight)throw new r.ParseError(`expected right-parenthesis for while but found ${JSON.stringify(u)}`);i.parseLog.debug("trying to parse while-loop");const d=(0,a.normalizeSingleNode)(e,l),f=(0,a.normalizeSingleNode)(e,c);if(d.type===s.RType.Delimiter||f.type===s.RType.Delimiter)throw new r.ParseError(`unexpected under-sided while-loop, received ${JSON.stringify([d,f])} for ${JSON.stringify([t,l,c])}`);const{location:p,content:h}=(0,o.retrieveMetaStructure)(t.content);return{type:s.RType.WhileLoop,condition:d,body:(0,o.ensureExpressionList)(f),lexeme:h,location:p,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(66197),i=n(56293),o=n(36604),s=n(49375),a=n(10570)},15003:(e,t,n)=>{var r=n(48287),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},15305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathResultImpl=void 0;const r=n(20518),i=n(52950);class o{static ANY_TYPE=0;static NUMBER_TYPE=1;static STRING_TYPE=2;static BOOLEAN_TYPE=3;static UNORDERED_NODE_ITERATOR_TYPE=4;static ORDERED_NODE_ITERATOR_TYPE=5;static UNORDERED_NODE_SNAPSHOT_TYPE=6;static ORDERED_NODE_SNAPSHOT_TYPE=7;static ANY_UNORDERED_NODE_TYPE=8;static FIRST_ORDERED_NODE_TYPE=9;resultType;numberValue;stringValue;booleanValue;nodes=void 0;singleNodeValue=void 0;invalidIteratorState=void 0;iteratorIndex=void 0;snapshotLength=void 0;ANY_TYPE=o.ANY_TYPE;NUMBER_TYPE=o.NUMBER_TYPE;STRING_TYPE=o.STRING_TYPE;BOOLEAN_TYPE=o.BOOLEAN_TYPE;UNORDERED_NODE_ITERATOR_TYPE=o.UNORDERED_NODE_ITERATOR_TYPE;ORDERED_NODE_ITERATOR_TYPE=o.ORDERED_NODE_ITERATOR_TYPE;UNORDERED_NODE_SNAPSHOT_TYPE=o.UNORDERED_NODE_SNAPSHOT_TYPE;ORDERED_NODE_SNAPSHOT_TYPE=o.ORDERED_NODE_SNAPSHOT_TYPE;ANY_UNORDERED_NODE_TYPE=o.ANY_UNORDERED_NODE_TYPE;FIRST_ORDERED_NODE_TYPE=o.FIRST_ORDERED_NODE_TYPE;constructor(e,t){switch(t===o.ANY_TYPE&&(e instanceof i.XString?t=o.STRING_TYPE:e instanceof i.XNumber?t=o.NUMBER_TYPE:e instanceof i.XBoolean?t=o.BOOLEAN_TYPE:(e instanceof i.XNodeSet||null==e)&&(t=o.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case o.NUMBER_TYPE:case o.STRING_TYPE:case o.BOOLEAN_TYPE:return this.numberValue=e.numberValue,this.stringValue=e.stringValue,void(this.booleanValue=e.booleanValue);case o.ANY_UNORDERED_NODE_TYPE:case o.FIRST_ORDERED_NODE_TYPE:if(e instanceof i.XNodeSet){const t=e.first();return this.singleNodeValue=t,this.numberValue=e.numberValue,this.stringValue=e.stringValue,this.booleanValue=e.booleanValue,void(this.nodes=null!=t?[t]:[])}break;case o.UNORDERED_NODE_ITERATOR_TYPE:case o.ORDERED_NODE_ITERATOR_TYPE:if(e instanceof i.XNodeSet)return this.invalidIteratorState=!1,this.nodes=e.toArray(),this.iteratorIndex=0,this.numberValue=e.numberValue,this.stringValue=e.stringValue,void(this.booleanValue=e.booleanValue);if(null==e)return this.nodes=[],this.snapshotLength=0,this.numberValue=0,this.stringValue="",void(this.booleanValue=!1);break;case o.UNORDERED_NODE_SNAPSHOT_TYPE:case o.ORDERED_NODE_SNAPSHOT_TYPE:if(e instanceof i.XNodeSet)return this.nodes=e.toArray(),this.snapshotLength=this.nodes.length,this.numberValue=e.numberValue,this.stringValue=e.stringValue,void(this.booleanValue=e.booleanValue)}throw new r.XPathException(r.XPathException.TYPE_ERR)}iterateNext(){if(this.resultType!==o.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!==o.ORDERED_NODE_ITERATOR_TYPE)throw new r.XPathException(r.XPathException.TYPE_ERR);if(this.iteratorIndex!==this.nodes.length)return this.nodes[this.iteratorIndex++]}snapshotItem(e){if(this.resultType!==o.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!==o.ORDERED_NODE_SNAPSHOT_TYPE)throw new r.XPathException(r.XPathException.TYPE_ERR);return this.nodes[e]}}t.XPathResultImpl=o},15459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlFlowGraph=void 0,t.emptyControlFlowInformation=function(){return{returns:[],breaks:[],nexts:[],entryPoints:[],exitPoints:[],graph:new f}},t.extractCFG=function(e,t){return(0,a.foldAst)(e.ast,t?(n=t,{...p,functions:{...p.functions,foldFunctionCall:y(n)}}):p);var n},t.equalCfg=function(e,t){if(!e||!t)return e===t;if(!(0,r.setEquals)(e.rootVertexIds(),t.rootVertexIds()))return o.log.debug(`root vertex ids differ ${JSON.stringify(e.rootVertexIds(),s.jsonReplacer)} vs. ${JSON.stringify(t.rootVertexIds(),s.jsonReplacer)}.`),!1;const n=e.vertices(),i=t.vertices();if(n.size!==i.size)return o.log.debug(`vertex count differs ${n.size} vs. ${i.size}.`),!1;for(const[e,t]of n){const n=i.get(e);if(void 0===n||t.name!==n.name||w(t.children,n.children))return o.log.debug(`vertex ${e} differs ${JSON.stringify(t,s.jsonReplacer)} vs. ${JSON.stringify(n,s.jsonReplacer)}.`),!1}const a=e.edges(),l=t.edges();if(a.size!==l.size)return o.log.debug(`edge count differs ${a.size} vs. ${l.size}.`),!1;for(const[e,t]of a){const n=l.get(e);if(void 0===n||t.size!==n.size)return o.log.debug(`edge count for ${e} differs ${t.size} vs. ${n?.size??"?"}.`),!1;for(const[r,i]of t){const t=n.get(r);if(void 0===t||i.label!==t.label)return o.log.debug(`edge ${e} -> ${r} differs ${JSON.stringify(i,s.jsonReplacer)} vs. ${JSON.stringify(t,s.jsonReplacer)}.`),!1}}return!0},t.cfg2quads=function(e,t){return(0,i.graph2quads)({rootIds:[...e.graph.rootVertexIds()],vertices:[...e.graph.vertices().entries()].map((([e,t])=>({id:e,name:t.name,children:t.children}))),edges:[...e.graph.edges()].flatMap((([e,t])=>[...t].map((([t,n])=>({from:e,to:t,type:n.label,when:n.when}))))),entryPoints:e.entryPoints,exitPoints:e.exitPoints,breaks:e.breaks,nexts:e.nexts,returns:e.returns},t)};const r=n(71916),i=n(78936),o=n(19742),s=n(91884),a=n(13968),l=n(48060),u=n(25377),c=n(56533),d=n(18841);class f{rootVertices=new Set;vertexInformation=new Map;edgeInformation=new Map;addVertex(e,t=!0){if(this.vertexInformation.has(e.id))throw new Error(`Node with id ${e.id} already exists`);return this.vertexInformation.set(e.id,e),t&&this.rootVertices.add(e.id),this}addEdge(e,t,n){return this.edgeInformation.has(e)||this.edgeInformation.set(e,new Map),this.edgeInformation.get(e)?.set(t,n),this}outgoing(e){return this.edgeInformation.get(e)}rootVertexIds(){return this.rootVertices}vertices(){return this.vertexInformation}edges(){return this.edgeInformation}merge(e,t=!1){for(const[n,r]of e.vertexInformation)this.addVertex(r,!t&&e.rootVertices.has(n));for(const[t,n]of e.edgeInformation)for(const[e,r]of n)this.addEdge(t,e,r);return this}}t.ControlFlowGraph=f;const p={foldNumber:h("expression"),foldString:h("expression"),foldLogical:h("expression"),foldSymbol:h("expression"),foldAccess:function(e,t,n){const r=t,i=r.graph;i.addVertex({id:e.info.id,name:e.type,type:"expression"}),i.addVertex({id:e.info.id+"-exit",name:"access-exit",type:"end-marker"});for(const n of t.entryPoints)i.addEdge(n,e.info.id,{label:"FD"});for(const n of t.exitPoints)i.addEdge(e.info.id,n,{label:"FD"});r.entryPoints=[e.info.id],r.exitPoints=[e.info.id+"-exit"];for(const t of n)if(t!==u.EmptyArgument){i.merge(t.graph);for(const n of t.entryPoints)i.addEdge(n,e.info.id,{label:"FD"});for(const n of t.exitPoints)i.addEdge(e.info.id+"-exit",n,{label:"FD"})}return r},foldBinaryOp:v,foldPipe:v,foldUnaryOp:function(e,t){const n=t.graph;n.addVertex({id:e.info.id,name:e.type,type:"end-marker"});for(const r of t.exitPoints)n.addEdge(e.info.id,r,{label:"FD"});return{...t,graph:n,exitPoints:[e.info.id]}},other:{foldComment:m,foldLineDirective:m},loop:{foldFor:function(e,t,n,r){const i=t.graph;i.addVertex({id:e.info.id,name:e.type,type:g(e)}),i.addVertex({id:e.info.id+"-exit",name:"for-exit",type:"end-marker"}),i.merge(n.graph),i.merge(r.graph);for(const t of n.entryPoints)i.addEdge(t,e.info.id,{label:"FD"});for(const e of n.exitPoints)for(const n of t.entryPoints)i.addEdge(n,e,{label:"FD"});for(const n of t.exitPoints)for(const t of r.entryPoints)i.addEdge(t,n,{label:"CD",when:l.RTrue,caused:e.info.id});for(const t of[...r.nexts,...r.exitPoints])i.addEdge(e.info.id,t,{label:"FD"});for(const t of r.breaks)i.addEdge(e.info.id+"-exit",t,{label:"FD"});for(const n of t.exitPoints)i.addEdge(e.info.id+"-exit",n,{label:"CD",when:l.RFalse,caused:e.info.id});return{graph:i,breaks:[],nexts:[],returns:r.returns,exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]}},foldRepeat:function(e,t){const n=t.graph;n.addVertex({id:e.info.id,name:e.type,type:g(e)}),n.addVertex({id:e.info.id+"-exit",name:"repeat-exit",type:"end-marker"});for(const r of t.entryPoints)n.addEdge(r,e.info.id,{label:"FD"});for(const r of[...t.nexts,...t.exitPoints])n.addEdge(e.info.id,r,{label:"FD"});for(const r of t.breaks)n.addEdge(e.info.id+"-exit",r,{label:"FD"});return{graph:n,breaks:[],nexts:[],returns:t.returns,exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]}},foldWhile:function(e,t,n){const r=t.graph;r.addVertex({id:e.info.id,name:e.type,type:g(e)}),r.addVertex({id:e.info.id+"-exit",name:"while-exit",type:"end-marker"}),r.merge(n.graph);for(const n of t.entryPoints)r.addEdge(n,e.info.id,{label:"FD"});for(const i of t.exitPoints)for(const t of n.entryPoints)r.addEdge(t,i,{label:"CD",when:l.RTrue,caused:e.info.id});for(const t of n.entryPoints)r.addEdge(e.info.id,t,{label:"FD"});for(const t of[...n.nexts,...n.exitPoints])r.addEdge(e.info.id,t,{label:"FD"});for(const t of n.breaks)r.addEdge(e.info.id+"-exit",t,{label:"FD"});for(const n of t.exitPoints)r.addEdge(e.info.id+"-exit",n,{label:"CD",when:l.RFalse,caused:e.info.id});return{graph:r,breaks:[],nexts:[],returns:n.returns,exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]}},foldBreak:function(e){return{...h("statement")(e),breaks:[e.info.id]}},foldNext:function(e){return{...h("statement")(e),nexts:[e.info.id]}}},foldIfThenElse:function(e,t,n,r){const i=new f;i.addVertex({id:e.info.id,name:e.type,type:g(e)}),i.addVertex({id:e.info.id+"-exit",name:"if-exit",type:"end-marker"}),i.merge(t.graph),i.merge(n.graph),r&&i.merge(r.graph);for(const o of t.exitPoints){for(const t of n.entryPoints)i.addEdge(t,o,{label:"CD",when:l.RTrue,caused:e.info.id});for(const t of r?.entryPoints??[])i.addEdge(t,o,{label:"CD",when:l.RFalse,caused:e.info.id})}for(const n of t.entryPoints)i.addEdge(n,e.info.id,{label:"FD"});for(const t of[...n.exitPoints,...r?.exitPoints??[]])i.addEdge(e.info.id+"-exit",t,{label:"FD"});if(!r)for(const n of t.exitPoints)i.addEdge(e.info.id+"-exit",n,{label:"CD",when:l.RFalse,caused:e.info.id});return{graph:i,breaks:[...n.breaks,...r?.breaks??[]],nexts:[...n.nexts,...r?.nexts??[]],returns:[...n.returns,...r?.returns??[]],exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]}},foldExprList:function(e,t,n){const r={graph:new f,breaks:[],nexts:[],returns:[],exitPoints:[],entryPoints:[]};let i=!0;for(const e of n){if(i)r.entryPoints=e.entryPoints,i=!1;else for(const t of r.exitPoints)for(const n of e.entryPoints)r.graph.addEdge(n,t,{label:"FD"});r.graph.merge(e.graph),r.breaks.push(...e.breaks),r.nexts.push(...e.nexts),r.returns.push(...e.returns),r.exitPoints=e.exitPoints}return r},functions:{foldFunctionDefinition:function(e,t,n){const r=new f,i=[e.info.id+"-params",e.info.id+"-exit"];r.addVertex({id:e.info.id+"-params",name:"function-parameters",type:"mid-marker"},!1),r.addVertex({id:e.info.id+"-exit",name:"function-exit",type:"end-marker"},!1),r.addVertex({id:e.info.id,name:e.type,children:i,type:g(e)}),r.merge(n.graph,!0),i.push(...n.graph.rootVertexIds());for(const n of t){r.merge(n.graph,!0),i.push(...n.graph.rootVertexIds());for(const t of n.entryPoints)r.addEdge(t,e.info.id,{label:"FD"});for(const t of n.exitPoints)r.addEdge(e.info.id+"-params",t,{label:"FD"})}0===t.length&&r.addEdge(e.info.id+"-params",e.info.id,{label:"FD"});for(const t of n.entryPoints)r.addEdge(t,e.info.id+"-params",{label:"FD"});for(const t of[...n.returns,...n.breaks,...n.nexts,...n.exitPoints])r.addEdge(e.info.id+"-exit",t,{label:"FD"});return{graph:r,breaks:[],nexts:[],returns:n.returns,exitPoints:[e.info.id],entryPoints:[e.info.id]}},foldFunctionCall:_,foldParameter:b,foldArgument:b}};function h(e){return t=>{const n=new f;return n.addVertex({id:t.info.id,name:t.type,type:e}),{graph:n,breaks:[],nexts:[],returns:[],exitPoints:[t.info.id],entryPoints:[t.info.id]}}}function m(e){return{graph:new f,breaks:[],nexts:[],returns:[],exitPoints:[],entryPoints:[]}}function g(e){return"expr-list-child"===e.info.role?"statement":"expression"}function _(e,t,n){const r=t.graph,i={graph:r,breaks:[...t.breaks],nexts:[...t.nexts],returns:[...t.returns],exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]};r.addVertex({id:e.info.id,name:e.type,type:g(e)});for(const n of t.entryPoints)r.addEdge(n,e.info.id,{label:"FD"});r.addVertex({id:e.info.id+"-name",name:"call-name",type:"mid-marker"});for(const n of t.exitPoints)r.addEdge(e.info.id+"-name",n,{label:"FD"});r.addVertex({id:e.info.id+"-exit",name:"call-exit",type:"end-marker"});let o=[e.info.id+"-name"];for(const e of n)if(e!==u.EmptyArgument){r.merge(e.graph),i.breaks.push(...e.breaks),i.nexts.push(...e.nexts),i.returns.push(...e.returns);for(const t of e.entryPoints)for(const e of o)r.addEdge(t,e,{label:"FD"});o=e.exitPoints}for(const t of o)r.addEdge(e.info.id+"-exit",t,{label:"FD"});return i}function y(e){return(t,n,r)=>{const i=_(t,n,r),o=(0,c.getAllFunctionCallTargets)(t.info.id,e),s=[];for(const n of o)(0,d.isFunctionDefinitionVertex)(e.getVertex(n))&&(i.graph.addEdge(t.info.id,n,{label:"FD"}),s.push(n+"-exit"));if(s.length>0){i.graph.addVertex({id:t.info.id+"-resolved-call-exit",name:"resolved-call-exit",type:"end-marker"});for(const e of[...i.exitPoints,...s])i.graph.addEdge(t.info.id+"-resolved-call-exit",e,{label:"FD"});return{...i,exitPoints:[t.info.id+"-resolved-call-exit"]}}return i}}function b(e,t,n){const r=new f,i={graph:r,breaks:[],nexts:[],returns:[],exitPoints:[e.info.id+"-exit"],entryPoints:[e.info.id]};r.addVertex({id:e.info.id,name:e.type,type:"expression"});let o=[e.info.id];if(t){r.merge(t.graph),i.breaks.push(...t.breaks),i.nexts.push(...t.nexts),i.returns.push(...t.returns);for(const n of t.entryPoints)r.addEdge(n,e.info.id,{label:"FD"});o=t.exitPoints}r.addVertex({id:e.info.id+"-before-value",name:"before-value",type:"mid-marker"});for(const t of o)r.addEdge(e.info.id+"-before-value",t,{label:"FD"});if(o=[e.info.id+"-before-value"],n){r.merge(n.graph),i.breaks.push(...n.breaks),i.nexts.push(...n.nexts),i.returns.push(...n.returns);for(const e of o)for(const t of n.entryPoints)r.addEdge(t,e,{label:"FD"});o=n.exitPoints}r.addVertex({id:e.info.id+"-exit",name:"exit",type:"end-marker"});for(const t of o)r.addEdge(e.info.id+"-exit",t,{label:"FD"});return i}function v(e,t,n){const r=(new f).merge(t.graph).merge(n.graph),i={graph:r,breaks:[...t.breaks,...n.breaks],nexts:[...t.nexts,...n.nexts],returns:[...t.returns,...n.returns],entryPoints:[e.info.id],exitPoints:[e.info.id+"-exit"]};r.addVertex({id:e.info.id,name:e.type,type:"assignment"===e.flavor?"statement":"expression"}),r.addVertex({id:e.info.id+"-exit",name:"binOp-exit",type:"end-marker"});for(const e of t.exitPoints)for(const t of n.entryPoints)i.graph.addEdge(t,e,{label:"FD"});for(const n of t.entryPoints)r.addEdge(n,e.info.id,{label:"FD"});for(const t of n.exitPoints)r.addEdge(e.info.id+"-exit",t,{label:"FD"});return i}function w(e,t){if(!e||!t||e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},15616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoLayerCollector=void 0,t.TwoLayerCollector=class{store=new Map;add(e,t,n){let r=this.store.get(e);void 0===r&&(r=new Map,this.store.set(e,r));let i=r.get(t);void 0===i&&(i=[],r.set(t,i)),i.push(n)}get(e,t){return this.store.get(e)?.get(t)}outerKeys(){return this.store.keys()}innerKeys(e){return this.store.get(e)?.keys()??[]}}},16007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitAtEscapeSensitive=function(e,t=!0,n=" "){const r=[];let i="",o=!1,s=!1;for(const a of e)if(s)switch(s=!1,a){case"n":i+="\n";break;case"t":i+="\t";break;case"r":i+="\r";break;case"v":i+="\v";break;case"f":i+="\f";break;case"b":i+="\b";break;default:i+=a}else a!==n||o||""===i?'"'===a||"'"===a?(o=!o,t||(i+=a)):"\\"===a&&t?s=!0:i+=a:(r.push(i),i="");return""!==i&&r.push(i),r}},16075:e=>{var t;self,t=()=>{return e={7629:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(9474),s=n(1687),a=n(8652),l=n(8160),u=n(3292),c=n(6354),d=n(8901),f=n(9708),p=n(6914),h=n(2294),m=n(6133),g=n(1152),_=n(8863),y=n(2036),b={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new h.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return r("function"==typeof f.describe,"Manifest functionality disabled"),f.describe(this)}allow(...e){return l.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(e){r(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),r(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const n in e){const i=e[n];r("function"==typeof i,"Alteration adjuster for",n,"must be a function"),t.$_terms.alterations.push({target:n,adjuster:i})}return t.$_temp.ruleset=!1,t}artifact(e){return r(void 0!==e,"Artifact cannot be undefined"),r(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return r(!1===e||"string"==typeof e,"Invalid to value"),r(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return r(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return r(e,"Missing error"),r(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e,t={}){return r(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(r(!t,"Cannot combine options with description"),t=e.description,e=e.method),r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(r("string"==typeof e,"id must be a non-empty string"),r(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(e){return r(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return r(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(...e){r(e.length,"Missing notes");for(const t of e)r(t&&"string"==typeof t,"Notes must be non-empty strings");return this._inner("notes",e)}only(e=!0){return r("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){r(e,"Missing preferences"),r(void 0===e.context,"Cannot override context"),r(void 0===e.externals,"Cannot override externals"),r(void 0===e.warnings,"Cannot override warnings"),r(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return r(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(e){return r(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),n=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:n}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...e){r(e.length,"Missing tags");for(const t of e)r(t&&"string"==typeof t,"Tags must be non-empty strings");return this._inner("tags",e)}unit(e){return r(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(...e){l.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){const n=this.clone();n.$_terms.whens||(n.$_terms.whens=[]);const i=u.when(n,e,t);if(!["any","link"].includes(n.type)){const e=i.is?[i]:i.switch;for(const t of e)r(!t.then||"any"===t.then.type||t.then.type===n.type,"Cannot combine",n.type,"with",t.then&&t.then.type),r(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===n.type,"Cannot combine",n.type,"with",t.otherwise&&t.otherwise.type)}return n.$_terms.whens.push(i),n.$_mutateRebuild()}cache(e){r(!this._inRuleset(),"Cannot set caching inside a ruleset"),r(!this._cache,"Cannot override schema cache"),r(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||a.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){r(l.isSchema(e),"Invalid schema object"),r("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),r(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),r(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const n=e.clone();for(const e of Object.keys(t))"type"!==e&&(n[e]=t[e]);t=n}t._ids.concat(e._ids),t._refs.register(e,m.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=y.merge(t._valids,e._valids,e._invalids),t._invalids=y.merge(t._invalids,e._invalids,e._valids);for(const n of e._singleRules.keys())t._singleRules.has(n)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==n)),t._singleRules.delete(n));for(const n of e._rules)e._definition.rules[n.method].multi||t._singleRules.set(n.name,n),t._rules.push(n);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const n=Object.assign({},e._flags);delete n.empty,s(t._flags,n)}else s(t._flags,e._flags);for(const n in e.$_terms){const r=e.$_terms[n];r?t.$_terms[n]?t.$_terms[n]=t.$_terms[n].concat(r):t.$_terms[n]=r.slice():t.$_terms[n]||(t.$_terms[n]=r)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return r(!e.base,"Cannot extend type with another base"),d.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){r(!this._inRuleset(),"Cannot fork inside a ruleset");let n=this;for(let r of[].concat(e))r=Array.isArray(r)?r:r.split("."),n=n._ids.fork(r,t,n);return n.$_temp.ruleset=!1,n}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),r(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const n=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;r(n>=0&&n<this._rules.length,"Cannot apply rules to empty ruleset");const o=this.clone();for(let s=n;s<o._rules.length;++s){const n=o._rules[s],a=i(n);for(const i in e)t.modifiers[i](a,e[i]),r(a.name===n.name,"Cannot change rule name");o._rules[s]=a,o._singleRules.get(a.name)===n&&o._singleRules.set(a.name,a)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){r(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),r(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:n,adjuster:i}of this.$_terms.alterations)e.includes(n)&&(t=i(t),r(l.isSchema(t),"Alteration adjuster for",n,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(e,t){return _.entry(e,this,t)}validateAsync(e,t){return _.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),r(e&&"object"==typeof e,"Invalid options"),r(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)r("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const n=this._definition.rules[t.method],i=t.args;r(n,"Unknown rule",t.method);const o=this.clone();if(i){r(1===Object.keys(i).length||Object.keys(i).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in i){let s=i[e];if(n.argsByName){const a=n.argsByName.get(e);if(a.ref&&l.isResolvable(s))t._resolve.push(e),o.$_mutateRegister(s);else if(a.normalize&&(s=a.normalize(s),i[e]=s),a.assert){const t=l.validateArg(s,e,a);r(!t,t,"or reference")}}void 0!==s?i[e]=s:delete i[e]}}return n.multi||(o._ruleRemove(t.name,{clone:!1}),o._singleRules.set(t.name,t)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),n.priority?o._rules.unshift(t):o._rules.push(t),o}$_compile(e,t){return u.schema(this.$_root,e,t)}$_createError(e,t,n,r,i,o={}){const s=!1!==o.flags?this._flags:{},a=o.messages?p.merge(this._definition.messages,o.messages):this._definition.messages;return new c.Report(e,t,n,s,a,r,i)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,n,r){(n=Object.assign({},n)).abortEarly=!0,n._externals=!1,t.snapshot();const i=!_.validate(e,this,t,n,r).errors;return t.restore(),i}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),h.schema(this,e)||this}$_mutateRebuild(){return r(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:n,path:r,key:i})=>{const o=this._definition[t][n]&&this._definition[t][n].register;!1!==o&&this.$_mutateRegister(e,{family:o,key:i})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:n}={}){this._refs.register(e,t),this._ids.register(e,{key:n})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,n={}){r("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const i=this._definition.flags[e]||{};if(o(t,i.default)&&(t=void 0),o(t,this._flags[e]))return this;const s=!1!==n.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e,...t){return this[e][l.symbols.parent].call(this,...t)}$_validate(e,t,n){return _.validate(e,this,t,n)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=i(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const n in t){const r=t[n];e.$_terms[n]=r.init}return e.$_mutateRebuild()}_default(e,t,n={}){return l.assertOptions(n,"literal"),r(void 0!==t,"Missing",e,"value"),r("function"==typeof t||!n.literal,"Only function value supports literal option"),"function"==typeof t&&n.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,n){if(!this.$_terms.whens)return{schema:this};const r=[],i=[];for(let o=0;o<this.$_terms.whens.length;++o){const s=this.$_terms.whens[o];if(s.concat){r.push(s.concat),i.push(`${o}.concat`);continue}const a=s.ref?s.ref.resolve(e,t,n):e,l=s.is?[s]:s.switch,u=i.length;for(let u=0;u<l.length;++u){const{is:c,then:d,otherwise:f}=l[u],p=`${o}${s.switch?"."+u:""}`;if(c.$_match(a,t.nest(c,`${p}.is`),n)){if(d){const o=t.localize([...t.path,`${p}.then`],t.ancestors,t.schemas),{schema:s,id:a}=d._generate(e,o,n);r.push(s),i.push(`${p}.then${a?`(${a})`:""}`);break}}else if(f){const o=t.localize([...t.path,`${p}.otherwise`],t.ancestors,t.schemas),{schema:s,id:a}=f._generate(e,o,n);r.push(s),i.push(`${p}.otherwise${a?`(${a})`:""}`);break}}if(s.break&&i.length>u)break}const o=i.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",o),!o)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[o])return{schema:this.$_temp.whens[o],id:o};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,n));for(const e of r)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...r]),this.$_temp.whens[o]=s,{schema:s,id:o}}_inner(e,t,n={}){r(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const i=this.clone();return i.$_terms[e]&&!n.override||(i.$_terms[e]=[]),n.single?i.$_terms[e].push(t):i.$_terms[e].push(...t),i.$_temp.ruleset=!1,i}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const n=!1!==t.clone?this.clone():this;n._singleRules.delete(e);const r=[];for(let t=0;t<n._rules.length;++t){const i=n._rules[t];i.name!==e||i.keep?r.push(i):n._inRuleset()&&t<n.$_temp.ruleset&&--n.$_temp.ruleset}return n._rules=r,n}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const n=this.clone(),i=e[0]===l.symbols.override;if(i&&(e=e.slice(1)),!n[t]&&e.length?n[t]=new y:i&&(n[t]=e.length?new y:null,n.$_mutateRebuild()),!n[t])return n;i&&n[t].override();for(const i of e){r(void 0!==i,"Cannot call allow/valid/invalid with undefined"),r(i!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";n[e]&&(n[e].remove(i),n[e].length||(r("_valids"===t||!n._flags.only,"Setting invalid value",i,"leaves schema rejecting all values due to previous valid rule"),n[e]=null)),n[t].add(i,n._refs)}return n}}};b.Base.prototype[l.symbols.any]={version:l.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,e.exports=new b.Base},8652:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(e={}){o.assertOptions(e,["max"]),r(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let n=this._map.get(e);if(n)return n.value=t,void this._list.first(n);n=this._list.unshift({key:e,value:t}),this._map.set(e,n),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),i(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:n}=e;return t.prev=n,n&&(n.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,n)=>{"use strict";const r=n(375),i=n(7916),o=n(5934);let s,a;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=o.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t,n="Options"){r(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const i=Object.keys(e).filter((e=>!t.includes(e)));r(0===i.length,`${n} contain unknown keys: ${i}`)},t.checkPreferences=function(e){a=a||n(3378);const t=a.preferences.validate(e);if(t.error)throw new i([t.error.details[0].message])},t.compare=function(e,t,n){switch(n){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e,n={}){const i=e&&e[t.symbols.any];return!!i&&(r(n.legacy||i.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,r){s=s||n(6914),e=e||{},r=r||{};const i=Object.assign({},e,r);return r.errors&&e.errors&&(i.errors=Object.assign({},e.errors,r.errors),i.errors.wrap=Object.assign({},e.errors.wrap,r.errors.wrap)),r.messages&&(i.messages=s.compile(r.messages,e.messages)),delete i[t.symbols.prefs],i},t.tryWithPath=function(e,t,n={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,n.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,n,{assert:r,message:i}){if(t.isSchema(r)){const t=r.validate(e);if(!t.error)return;return t.error.message}if(!r(e))return n?`${n} ${i}`:i},t.verifyFlat=function(e,t){for(const n of e)r(!Array.isArray(n),"Method no longer accepts array arguments:",t)}},3292:(e,t,n)=>{"use strict";const r=n(375),i=n(8160),o=n(6133),s={};t.schema=function(e,t,n={}){i.assertOptions(n,["appendPath","override"]);try{return s.schema(e,t,n)}catch(e){throw n.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,n){r(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(r(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const o=(t,...r)=>!1!==n.override?t.valid(e.override,...r):t.valid(...r);if(s.simple(t))return o(e,t);if("function"==typeof t)return e.custom(t);if(r("object"==typeof t,"Invalid schema content:",typeof t),i.isResolvable(t))return o(e,t);if(i.isSchema(t))return t;if(Array.isArray(t)){for(const n of t)if(!s.simple(n))return e.alternatives().try(...t);return o(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?o(e.date(),t):(r(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return o.isRef(e)?e:o.create(e,t)},t.compile=function(e,n,o={}){i.assertOptions(o,["legacy"]);const a=n&&n[i.symbols.any];if(a)return r(o.legacy||a.version===i.version,"Cannot mix different versions of joi schemas:",a.version,i.version),n;if("object"!=typeof n||!o.legacy)return t.schema(e,n,{appendPath:!0});const l=s.walk(n);return l?l.compile(l.root,n):t.schema(e,n,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[i.symbols.any];if(t)return{root:e[t.root],compile:t.compile};r(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const n=s.walk(e[t]);if(n)return n}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,n,a){if(void 0===a&&(r(n&&"object"==typeof n,"Missing options"),a=n,n=o.create(".")),Array.isArray(a)&&(a={switch:a}),i.assertOptions(a,["is","not","then","otherwise","switch","break"]),i.isSchema(n))return r(void 0===a.is,'"is" can not be used with a schema condition'),r(void 0===a.not,'"not" can not be used with a schema condition'),r(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:n,then:a.then,otherwise:a.otherwise,break:a.break});if(r(o.isRef(n)||"string"==typeof n,"Invalid condition:",n),r(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let l=a;void 0!==a.not&&(l={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let u=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return r(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),r(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||o.isRef(a.is)||i.isSchema(a.is)||(u=u.required()),s.condition(e,{ref:t.ref(n),is:u,then:l.then,otherwise:l.otherwise,break:l.break})}r(Array.isArray(a.switch),'"switch" must be an array'),r(void 0===a.is,'Cannot combine "switch" with "is"'),r(void 0===a.not,'Cannot combine "switch" with "not"'),r(void 0===a.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(n),switch:[],break:a.break};for(let t=0;t<a.switch.length;++t){const n=a.switch[t],s=t===a.switch.length-1;i.assertOptions(n,s?["is","then","otherwise"]:["is","then"]),r(void 0!==n.is,'Switch statement missing "is"'),r(void 0!==n.then,'Switch statement missing "then"');const u={is:e.$_compile(n.is),then:e.$_compile(n.then)};if(o.isRef(n.is)||i.isSchema(n.is)||(u.is=u.is.required()),s){r(void 0===a.otherwise||void 0===n.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==a.otherwise?a.otherwise:n.otherwise;void 0!==t&&(r(void 0===l.break,"Cannot specify both otherwise and break"),u.otherwise=e.$_compile(t))}l.switch.push(u)}return l},s.condition=function(e,t){for(const n of["then","otherwise"])void 0===t[n]?delete t[n]:t[n]=e.$_compile(t[n]);return t}},6354:(e,t,n)=>{"use strict";const r=n(5688),i=n(8160),o=n(3328);t.Report=class{constructor(e,n,r,i,o,s,a){if(this.code=e,this.flags=i,this.messages=o,this.path=s.path,this.prefs=a,this.state=s,this.value=n,this.message=null,this.template=null,this.local=r||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,n){return t.template(this.value,e,n||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const n of e)"object"!=typeof n&&("string"==typeof n?(t&&(t+="."),t+=n):t+=`[${n}]`);return t},t.template=function(e,t,n,r,s){if(!t)return;if(o.isTemplate(t))return"root"!==n?t:null;let a=s.errors.language;if(i.isResolvable(a)&&(a=a.resolve(e,r,s)),a&&t[a]){if(void 0!==t[a][n])return t[a][n];if(void 0!==t[a]["*"])return t[a]["*"]}return t[n]?t[n]:t["*"]},t.label=function(e,n,r,i){if(!r.errors.label)return"";if(e.label)return e.label;let o=n.path;return"key"===r.errors.label&&n.path.length>1&&(o=n.path.slice(-1)),t.path(o)||t.template(null,r.messages,"root",n,r)||i&&t.template(null,i,"root",n,r)||"value"},t.process=function(e,n,r){if(!e)return null;const{override:i,message:o,details:s}=t.details(e);if(i)return i;if(r.errors.stack)return new t.ValidationError(o,s,n);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(o,s,n);return Error.stackTraceLimit=a,l},t.details=function(e,t={}){let n=[];const r=[];for(const i of e){if(i instanceof Error){if(!1!==t.override)return{override:i};const e=i.toString();n.push(e),r.push({message:e,type:"override",context:{error:i}});continue}const e=i.toString();n.push(e),r.push({message:e,path:i.path.filter((e=>"object"!=typeof e)),type:i.code,context:i.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:r}},t.ValidationError=class extends Error{constructor(e,t,n){super(e),this._original=n,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=r.error},8901:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8160),s=n(6914),a={};t.type=function(e,t){const n=Object.getPrototypeOf(e),l=i(n),u=e._assign(Object.create(l)),c=Object.assign({},t);delete c.base,l._definition=c;const d=n._definition||{};c.messages=s.merge(d.messages,c.messages),c.properties=Object.assign({},d.properties,c.properties),u.type=c.type,c.flags=Object.assign({},d.flags,c.flags);const f=Object.assign({},d.terms);if(c.terms)for(const e in c.terms){const t=c.terms[e];r(void 0===u.$_terms[e],"Invalid term override for",c.type,e),u.$_terms[e]=t.init,f[e]=t}c.terms=f,c.args||(c.args=d.args),c.prepare=a.prepare(c.prepare,d.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=a.coerce(c.coerce,d.coerce),c.validate=a.validate(c.validate,d.validate);const p=Object.assign({},d.rules);if(c.rules)for(const e in c.rules){const t=c.rules[e];r("object"==typeof t,"Invalid rule definition for",c.type,e);let n=t.method;if(void 0===n&&(n=function(){return this.$_addRule(e)}),n&&(r(!l[e],"Rule conflict in",c.type,e),l[e]=n),r(!p[e],"Rule conflict in",c.type,e),p[e]=t,t.alias){const e=[].concat(t.alias);for(const n of e)l[n]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),r(!t.argsByName.has(e.name),"Duplicated argument name",e.name),o.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}c.rules=p;const h=Object.assign({},d.modifiers);if(c.modifiers)for(const e in c.modifiers){r(!l[e],"Rule conflict in",c.type,e);const t=c.modifiers[e];r("function"==typeof t,"Invalid modifier definition for",c.type,e);const n=function(t){return this.rule({[e]:t})};l[e]=n,h[e]=t}if(c.modifiers=h,c.overrides){l._super=n,u.$_super={};for(const e in c.overrides)r(n[e],"Cannot override missing",e),c.overrides[e][o.symbols.parent]=n[e],u.$_super[e]=n[e].bind(u);Object.assign(l,c.overrides)}c.cast=Object.assign({},d.cast,c.cast);const m=Object.assign({},d.manifest,c.manifest);return m.build=a.build(c.manifest&&c.manifest.build,d.manifest&&d.manifest.build),c.manifest=m,c.rebuild=a.rebuild(c.rebuild,d.rebuild),u},a.build=function(e,t){return e&&t?function(n,r){return t(e(n,r),r)}:e||t},a.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(n,r){let i;if((!t.from||t.from.includes(typeof n))&&(i=t.method(n,r),i)){if(i.errors||void 0===i.value)return i;n=i.value}if(!e.from||e.from.includes(typeof n)){const t=e.method(n,r);if(t)return t}return i}}:e||t},a.prepare=function(e,t){return e&&t?function(n,r){const i=e(n,r);if(i){if(i.errors||void 0===i.value)return i;n=i.value}return t(n,r)||i}:e||t},a.rebuild=function(e,t){return e&&t?function(n){t(n),e(n)}:e||t},a.validate=function(e,t){return e&&t?function(n,r){const i=t(n,r);if(i){if(i.errors&&(!Array.isArray(i.errors)||i.errors.length))return i;n=i.value}return e(n,r)||i}:e||t}},5107:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(8652),s=n(8160),a=n(3292),l=n(6354),u=n(8901),c=n(9708),d=n(6133),f=n(3328),p=n(1152);let h;const m={types:{alternatives:n(4946),any:n(8068),array:n(546),boolean:n(4937),date:n(7500),function:n(390),link:n(8785),number:n(3832),object:n(8966),string:n(7417),symbol:n(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(m.types))};for(const t of e._types)e[t]=function(...e){return r(!e.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),m.generate(this,m.types[t],e)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...e){return this.any()[t](...e)};Object.assign(e,m.methods);for(const t in m.aliases){const n=m.aliases[t];e[t]=e[n]}return e.x=e.expression,p.setup&&p.setup(e),e}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:o.provider,assert(e,t,...n){m.assert(e,t,!0,n)},attempt:(e,t,...n)=>m.assert(e,t,!1,n),build(e){return r("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return a.compile(this,e,t)},defaults(e){r("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const n of t._types){const i=e(t[n]());r(s.isSchema(i),"modifier must return a valid schema object"),t[n]=function(...e){return m.generate(this,i,e)}}return t},expression:(...e)=>new f(...e),extend(...e){s.verifyFlat(e,"extend"),h=h||n(3378),r(e.length,"You need to provide at least one extension"),this.assert(e,h.extensions);const t=Object.assign({},this);t._types=new Set(t._types);for(let n of e){"function"==typeof n&&(n=n(t)),this.assert(n,h.extension);const e=m.expandExtension(n,t);for(const n of e){r(void 0===t[n.type]||t._types.has(n.type),"Cannot override name",n.type);const e=n.base||this.any(),i=u.type(e,n);t._types.add(n.type),t[n.type]=function(...e){return m.generate(this,i,e)}}}return t},isError:l.ValidationError.isError,isExpression:f.isTemplate,isRef:d.isRef,isSchema:s.isSchema,in:(...e)=>d.in(...e),override:s.symbols.override,ref:(...e)=>d.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in m.aliases)e[t]=this[t]();return e}},m.assert=function(e,t,n,r){const o=r[0]instanceof Error||"string"==typeof r[0]?r[0]:null,a=null!==o?r[1]:r[0],u=t.validate(e,s.preferences({errors:{stack:!0}},a||{}));let c=u.error;if(!c)return u.value;if(o instanceof Error)throw o;const d=n&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof l.ValidationError==0&&(c=i(c)),c.message=o?`${o} ${d}`:d,c},m.generate=function(e,t,n){return r(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&n.length?t._definition.args(t,...n):t},m.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const n=[];for(const r of t._types)if(e.type.test(r)){const i=Object.assign({},e);i.type=r,i.base=t[r](),n.push(i)}return n},e.exports=m.root()},6914:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(3328);t.compile=function(e,t){if("string"==typeof e)return r(!t,"Cannot set single message string"),new o(e);if(o.isTemplate(e))return r(!t,"Cannot set single message template"),e;r("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?i(t):{};for(let n in e){const i=e[n];if("root"===n||o.isTemplate(i)){t[n]=i;continue}if("string"==typeof i){t[n]=new o(i);continue}r("object"==typeof i&&!Array.isArray(i),"Invalid message for",n);const s=n;for(n in t[s]=t[s]||{},i){const e=i[n];"root"===n||o.isTemplate(e)?t[s][n]=e:(r("string"==typeof e,"Invalid message for",n,"in",s),t[s][n]=new o(e))}}return t},t.decompile=function(e){const t={};for(let n in e){const r=e[n];if("root"===n){t.root=r;continue}if(o.isTemplate(r)){t[n]=r.describe({compact:!0});continue}const i=n;for(n in t[i]={},r){const e=r[n];"root"!==n?t[i][n]=e.describe({compact:!0}):t[i].root=e}}return t},t.merge=function(e,n){if(!e)return t.compile(n);if(!n)return e;if("string"==typeof n)return new o(n);if(o.isTemplate(n))return n;const s=i(e);for(let e in n){const t=n[e];if("root"===e||o.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new o(t);continue}r("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const i=e;for(e in s[i]=s[i]||{},t){const n=t[e];"root"===e||o.isTemplate(n)?s[i][e]=n:(r("string"==typeof n,"Invalid message for",e,"in",i),s[i][e]=new o(n))}}return s}},2294:(e,t,n)=>{"use strict";const r=n(375),i=n(8160),o=n(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,n]of e._byId.entries())r(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,n);for(const[t,n]of e._byKey.entries())r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,n)}fork(e,t,n){const o=this._collect(e);o.push({schema:n});const a=o.shift();let l={id:a.id,schema:t(a.schema)};r(i.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of o)l={id:e.id,schema:s.fork(e.schema,l.id,l.schema)};return l.schema}labels(e,t=[]){const n=e[0],r=this._get(n);if(!r)return[...t,...e].join(".");const i=e.slice(1);return t=[...t,r.schema._flags.label||n],i.length?r.schema._ids.labels(i,t):t.join(".")}reach(e,t=[]){const n=e[0],i=this._get(n);r(i,"Schema does not contain path",[...t,...e].join("."));const o=e.slice(1);return o.length?i.schema._ids.reach(o,[...t,n]):i.schema}register(e,{key:t}={}){if(!e||!i.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const n=e._flags.id;if(n){const t=this._byId.get(n);r(!t||t.schema===e,"Cannot add different schemas with the same id:",n),r(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,{schema:e,id:n})}t&&(r(!this._byKey.has(t),"Schema already contains key:",t),r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,t=[],n=[]){const i=e[0],o=this._get(i);r(o,"Schema does not contain path",[...t,...e].join(".")),n=[o,...n];const s=e.slice(1);return s.length?o.schema._ids._collect(s,[...t,i],n):n}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,n,r){const i=t.schema(e,{each:(e,{key:t})=>{if(n===(e._flags.id||t))return r},ref:!1});return i?i.$_mutateRebuild():e},t.schema=function(e,t){let n;for(const r in e._flags){if("_"===r[0])continue;const i=s.scan(e._flags[r],{source:"flags",name:r},t);void 0!==i&&(n=n||e.clone(),n._flags[r]=i)}for(let r=0;r<e._rules.length;++r){const i=e._rules[r],o=s.scan(i.args,{source:"rules",name:i.name},t);if(void 0!==o){n=n||e.clone();const t=Object.assign({},i);t.args=o,n._rules[r]=t,n._singleRules.get(i.name)===i&&n._singleRules.set(i.name,t)}}for(const r in e.$_terms){if("_"===r[0])continue;const i=s.scan(e.$_terms[r],{source:"terms",name:r},t);void 0!==i&&(n=n||e.clone(),n.$_terms[r]=i)}return n},s.scan=function(e,t,n,r,a){const l=r||[];if(null===e||"object"!=typeof e)return;let u;if(Array.isArray(e)){for(let r=0;r<e.length;++r){const i="terms"===t.source&&"keys"===t.name&&e[r].key,o=s.scan(e[r],t,n,[r,...l],i);void 0!==o&&(u=u||e.slice(),u[r]=o)}return u}if(!1!==n.schema&&i.isSchema(e)||!1!==n.ref&&o.isRef(e)){const r=n.each(e,{...t,path:l,key:a});if(r===e)return;return r}for(const r in e){if("_"===r[0])continue;const i=s.scan(e[r],t,n,[r,...l],a);void 0!==i&&(u=u||Object.assign({},e),u[r]=i)}return u}},6133:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(9621),s=n(8160);let a;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e,t={}){r("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),r(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const n=Object.assign({},l.defaults,t);delete n.prefix;const i=n.separator,o=l.context(e,i,t.prefix);if(n.type=o.type,e=o.key,"value"===n.type)if(o.root&&(r(!i||e[0]!==i,"Cannot specify relative path with root prefix"),n.ancestor="root",e||(e=null)),i&&i===e)e=null,n.ancestor=0;else if(void 0!==n.ancestor)r(!i||!e||e[0]!==i,"Cannot combine prefix with ancestor option");else{const[t,r]=l.ancestor(e,i);r&&""===(e=e.slice(r))&&(e=null),n.ancestor=t}return n.path=i?null===e?[]:e.split(i):[e],new l.Ref(n)},t.in=function(e,n={}){return t.create(e,{...n,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},l.Ref=class{constructor(e){r("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),r([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),r(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),r(!e.map||Array.isArray(e.map),"options.map must be an array"),r(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),r("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,n,i,o={}){return r(!this.in||o.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(n.context,t,o):"local"===this.type?this._resolve(i,t,o):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,o):(r(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,o)):this._resolve(e,t,o)}_resolve(e,t,n){let r;if("value"===this.type&&t.mainstay.shadow&&!1!==n.shadow&&(r=t.mainstay.shadow.get(this.absolute(t))),void 0===r&&(r=o(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(r=this.adjust(r)),this.map){const e=this.map.get(r);void 0!==e&&(r=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,r),r}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t,n={}){if(e=e.trim(),n){const r=void 0===n.global?"$":n.global;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"global"};const i=void 0===n.local?"#":n.local;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"local"};const o=void 0===n.root?"/":n.root;if(o!==t&&e.startsWith(o))return{key:e.slice(o.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let n=2;for(;e[n]===t;)++n;return[n-1,n]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,r){if(e)if(r=void 0===r?t.toParent:r,Array.isArray(e))for(const t of e)this.register(t,r);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-r>=0&&this.refs.push({ancestor:t.ancestor-r,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-r>=0&&this.refs.push({ancestor:e.ancestor-r,root:e.root}),a=a||n(3328),a.isTemplate(e)&&this.register(e.refs(),r)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=i(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,n)=>{"use strict";const r=n(5107),i={};i.wrap=r.string().min(1).max(2).allow(!1),t.preferences=r.object({allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),context:r.object(),convert:r.boolean(),dateFormat:r.valid("date","iso","string","time","utc"),debug:r.boolean(),errors:{escapeHtml:r.boolean(),label:r.valid("path","key",!1),language:[r.string(),r.object().ref()],render:r.boolean(),stack:r.boolean(),wrap:{label:i.wrap,array:i.wrap,string:i.wrap}},externals:r.boolean(),messages:r.object(),noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:r.valid("required","optional","forbidden"),skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()}).strict(),i.nameRx=/^[a-zA-Z0-9]\w*$/,i.rule=r.object({alias:r.array().items(r.string().pattern(i.nameRx)).single(),args:r.array().items(r.string(),r.object({name:r.string().pattern(i.nameRx).required(),ref:r.boolean(),assert:r.alternatives([r.function(),r.object().schema()]).conditional("ref",{is:!0,then:r.required()}),normalize:r.function(),message:r.string().when("assert",{is:r.function(),then:r.required()})})),convert:r.boolean(),manifest:r.boolean(),method:r.function().allow(!1),multi:r.boolean(),validate:r.function()}),t.extension=r.object({type:r.alternatives([r.string(),r.object().regex()]).required(),args:r.function(),cast:r.object().pattern(i.nameRx,r.object({from:r.function().maxArity(1).required(),to:r.function().minArity(1).maxArity(2).required()})),base:r.object().schema().when("type",{is:r.object().regex(),then:r.forbidden()}),coerce:[r.function().maxArity(3),r.object({method:r.function().maxArity(3).required(),from:r.array().items(r.string()).single()})],flags:r.object().pattern(i.nameRx,r.object({setter:r.string(),default:r.any()})),manifest:{build:r.function().arity(2)},messages:[r.object(),r.string()],modifiers:r.object().pattern(i.nameRx,r.function().minArity(1).maxArity(2)),overrides:r.object().pattern(i.nameRx,r.function()),prepare:r.function().maxArity(3),rebuild:r.function().arity(1),rules:r.object().pattern(i.nameRx,i.rule),terms:r.object().pattern(i.nameRx,r.object({init:r.array().allow(null).required(),manifest:r.object().pattern(/.+/,[r.valid("schema","single"),r.object({mapped:r.object({from:r.string().required(),to:r.string().required()}).required()})])})),validate:r.function().maxArity(3)}).strict(),t.extensions=r.array().items(r.object(),r.function().arity(1)).strict(),i.desc={buffer:r.object({buffer:r.string()}),func:r.object({function:r.function().required(),options:{literal:!0}}),override:r.object({override:!0}),ref:r.object({ref:r.object({type:r.valid("value","global","local"),path:r.array().required(),separator:r.string().length(1).allow(!1),ancestor:r.number().min(0).integer().allow("root"),map:r.array().items(r.array().length(2)).min(1),adjust:r.function(),iterables:r.boolean(),in:r.boolean(),render:r.boolean()}).required()}),regex:r.object({regex:r.string().min(3)}),special:r.object({special:r.valid("deep").required()}),template:r.object({template:r.string().required(),options:r.object()}),value:r.object({value:r.alternatives([r.object(),r.array()]).required()})},i.desc.entity=r.alternatives([r.array().items(r.link("...")),r.boolean(),r.function(),r.number(),r.string(),i.desc.buffer,i.desc.func,i.desc.ref,i.desc.regex,i.desc.special,i.desc.template,i.desc.value,r.link("/")]),i.desc.values=r.array().items(null,r.boolean(),r.function(),r.number().allow(1/0,-1/0),r.string().allow(""),r.symbol(),i.desc.buffer,i.desc.func,i.desc.override,i.desc.ref,i.desc.regex,i.desc.template,i.desc.value),i.desc.messages=r.object().pattern(/.+/,[r.string(),i.desc.template,r.object().pattern(/.+/,[r.string(),i.desc.template])]),t.description=r.object({type:r.string().required(),flags:r.object({cast:r.string(),default:r.any(),description:r.string(),empty:r.link("/"),failover:i.desc.entity,id:r.string(),label:r.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:r.boolean(),unit:r.string()}).unknown(),preferences:{allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),convert:r.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:r.boolean(),label:["path","key"],language:[r.string(),i.desc.ref],wrap:{label:i.wrap,array:i.wrap}},externals:r.boolean(),messages:i.desc.messages,noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:["required","optional","forbidden"],skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()},allow:i.desc.values,invalid:i.desc.values,rules:r.array().min(1).items({name:r.string().required(),args:r.object().min(1),keep:r.boolean(),message:[r.string(),i.desc.messages],warn:r.boolean()}),keys:r.object().pattern(/.*/,r.link("/")),link:i.desc.ref}).pattern(/^[a-z]\w*$/,r.any())},493:(e,t,n)=>{"use strict";const r=n(8571),i=n(9621),o=n(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,n){this.path=e,this.ancestors=t,this.mainstay=n.mainstay,this.schemas=n.schemas,this.debug=null}localize(e,t=null,n=null){const r=new s.State(e,t,this);return n&&r.schemas&&(r.schemas=[s.schemas(n),...r.schemas]),r}nest(e,t){const n=new s.State(this.path,this.ancestors,this);return n.schemas=n.schemas&&[s.schemas(e),...n.schemas],n.debug=t,n}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=r(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return o.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,n){if(!e.length)return;if("strip"===n&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let r=this._values;for(let t=0;t<e.length;++t){const n=e[t];let i=r.get(n);i||(i=new Map,r.set(n,i)),r=i}r[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return i(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const n=e.slice(0,-1),r=e[e.length-1],o=i(this._values,n,{iterables:!0});t?o.set(r,t):o&&o.delete(r)}}},3328:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(5277),s=n(1447),a=n(8160),l=n(6354),u=n(6133),c={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=c.Template=class{constructor(e,t){if(r("string"==typeof e,"Template source must be a string"),r(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...n}=t;this._settings=Object.keys(n).length?i(n):void 0,this._functions=e,this._functions&&(r(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),r(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=c.encode(this.source),t=c.split(e);let n=!1;const r=[],i=t.shift();i&&r.push(i);for(const e of t){const t="{"!==e[0],i=t?"}":"}}",o=e.indexOf(i);if(-1===o||"{"===e[1]){r.push(`{${c.decode(e)}`);continue}let s=e.slice(t?0:1,o);const a=":"===s[0];a&&(s=s.slice(1));const l=this._ref(c.decode(s),{raw:t,wrapped:a});r.push(l),"string"!=typeof l&&(n=!0);const u=e.slice(o+i.length);u&&r.push(c.decode(u))}n?this._template=r:this.rendered=r.join("")}static date(e,t){return c.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new c.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[a.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,n,r){return this._template&&1===this._template.length?this._part(this._template[0],e,t,n,r,{}):this.render(e,t,n,r)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,n,r,i={}){if(!this.isDynamic())return this.rendered;const s=[];for(const a of this._template)if("string"==typeof a)s.push(a);else{const l=this._part(a,e,t,n,r,i),u=c.stringify(l,e,t,n,r,i);if(void 0!==u){const e=a.raw||!1===(i.errors&&i.errors.escapeHtml)?u:o(u);s.push(c.wrap(e,a.wrapped&&n.errors.wrap.label))}}return s.join("")}_ref(e,{raw:t,wrapped:n}){const r=[],i=e=>{const t=u.create(e,this._settings);return r.push(t),e=>{const n=t.resolve(...e);return void 0!==n?n:null}};try{const t=this._functions?{...c.functions,...this._functions}:c.functions;var o=new s.Parser(e,{reference:i,functions:t,constants:c.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(o.single){if("reference"===o.single.type){const e=r[0];return{ref:e,raw:t,refs:r,wrapped:n||"local"===e.type&&"label"===e.key}}return c.stringify(o.single.value)}return{formula:o,raw:t,refs:r}}toString(){return this.source}},c.Template.prototype[a.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>c.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>c.closes.slice(0,t.length)))},c.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(e){const t=[];let n="";for(let r=0;r<e.length;++r){const i=e[r];if("{"===i){let i="";for(;r+1<e.length&&"{"===e[r+1];)i+="{",++r;t.push(n),n=i}else n+=i}return t.push(n),t},c.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},c.stringify=function(e,t,n,r,i,o={}){const s=typeof e,a=r&&r.errors&&r.errors.wrap||{};let l=!1;if(u.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,n,r,i,{in:e.in,...o})),null===e)return"null";if("string"===s)return c.wrap(e,o.arrayItems&&a.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return c.Template.date(e,r);if(e instanceof Map){const t=[];for(const[n,r]of e.entries())t.push(`${n.toString()} -> ${r.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const d=[];for(const s of e)d.push(c.stringify(s,t,n,r,i,{arrayItems:!0,...o}));return c.wrap(d.join(", "),!l&&a.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(e,t,n)=>e?t:n,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,n,r,i,o]=this,s=o.messages;if(!s)return"";const a=l.template(t,s[0],e,n,r)||l.template(t,s[1],e,n,r);return a?a.render(t,n,r,i,o):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,n)=>{"use strict";const r=n(375),i=n(1687),o=n(8068),s=n(8160),a=n(3292),l=n(6354),u=n(6133),c={};e.exports=o.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,t){const{schema:n,error:r,state:o,prefs:s}=t;if(n._flags.match){const t=[],a=[];for(let r=0;r<n.$_terms.matches.length;++r){const i=n.$_terms.matches[r],l=o.nest(i.schema,`match.${r}`);l.snapshot();const u=i.schema.$_validate(e,l,s);u.errors?(a.push(u.errors),l.restore()):(t.push(u.value),l.commit())}if(0===t.length)return{errors:r("alternatives.any",{details:a.map((e=>l.details(e,{override:!1})))})};if("one"===n._flags.match)return 1===t.length?{value:t[0]}:{errors:r("alternatives.one")};if(t.length!==n.$_terms.matches.length)return{errors:r("alternatives.all",{details:a.map((e=>l.details(e,{override:!1})))})};const u=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&u(e.schema)));return u(n)?{value:t.reduce(((e,t)=>i(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const a=[];for(let t=0;t<n.$_terms.matches.length;++t){const r=n.$_terms.matches[t];if(r.schema){const n=o.nest(r.schema,`match.${t}`);n.snapshot();const i=r.schema.$_validate(e,n,s);if(!i.errors)return n.commit(),i;n.restore(),a.push({schema:r.schema,reports:i.errors});continue}const i=r.ref?r.ref.resolve(e,o,s):e,l=r.is?[r]:r.switch;for(let n=0;n<l.length;++n){const a=l[n],{is:u,then:c,otherwise:d}=a,f=`match.${t}${r.switch?"."+n:""}`;if(u.$_match(i,o.nest(u,`${f}.is`),s)){if(c)return c.$_validate(e,o.nest(c,`${f}.then`),s)}else if(d)return d.$_validate(e,o.nest(d,`${f}.otherwise`),s)}}return c.errors(a,t)},rules:{conditional:{method(e,t){r(!this._flags._endedSwitch,"Unreachable condition"),r(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),r(void 0===t.break,"Cannot use break option with alternatives conditional");const n=this.clone(),i=a.when(n,e,t),o=i.is?[i]:i.switch;for(const e of o)if(e.then&&e.otherwise){n.$_setFlag("_endedSwitch",!0,{clone:!1});break}return n.$_terms.matches.push(i),n.$_mutateRebuild()}},match:{method(e){if(r(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)r(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){r(e.length,"Missing alternative schemas"),s.verifyFlat(e,"try"),r(!this._flags._endedSwitch,"Unreachable condition");const t=this.clone();for(const n of e)t.$_terms.matches.push({schema:t.$_compile(n)});return t.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,n)=>"is"!==n.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const n of t.matches){const{schema:t,ref:r,is:i,not:o,then:s,otherwise:a}=n;e=t?e.try(t):r?e.conditional(r,{is:i,then:s,not:o,otherwise:a,switch:n.switch}):e.conditional(i,{then:s,otherwise:a})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(e,{error:t,state:n}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const r=new Set,i=[];for(const{reports:o,schema:s}of e){if(o.length>1)return c.unmatched(e,t);const a=o[0];if(a instanceof l.Report==0)return c.unmatched(e,t);if(a.state.path.length!==n.path.length){i.push({type:s.type,report:a});continue}if("any.only"===a.code){for(const e of a.local.valids)r.add(e);continue}const[u,d]=a.code.split(".");"base"!==d?i.push({type:s.type,report:a}):"object.base"===a.code?r.add(a.local.type):r.add(u)}return i.length?1===i.length?{errors:i[0].report}:c.unmatched(e,t):{errors:t("alternatives.types",{types:[...r]})}},c.unmatched=function(e,t){const n=[];for(const t of e)n.push(...t.reports);return{errors:t("alternatives.match",l.details(n,{override:!1}))}}},8068:(e,t,n)=>{"use strict";const r=n(375),i=n(7629),o=n(8160),s=n(6914);e.exports=i.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:n}){try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){r(o.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return r(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:(e,t,{code:n,local:r})=>t.error(n,r),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=s.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const n in t){const r=t[n];if(["examples","externals","metas","notes","tags"].includes(n))for(const t of r)e=e[n.slice(0,-1)](t);else if("alterations"!==n)if("whens"!==n){if("shared"===n)for(const t of r)e=e.shared(t)}else for(const t of r){const{ref:n,is:r,not:i,then:o,otherwise:s,concat:a}=t;e=a?e.concat(a):n?e.when(n,{is:r,not:i,then:o,otherwise:s,switch:t.switch,break:t.break}):e.when(r,{then:o,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:n}of r)t[e]=n;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,n)=>{"use strict";const r=n(375),i=n(9474),o=n(9621),s=n(8068),a=n(8160),l=n(3292),u={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:n,prefs:r}){if(!Array.isArray(e))return;const i=t.$_getRule("sort");return i?u.sort(t,e,i.args.options,n,r):void 0}},validate(e,{schema:t,error:n}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[a.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:n,error:r},{schema:i}){const o=[e,...t.ancestors];for(let r=0;r<e.length;++r){const s=t.localize([...t.path,r],o,i);if(i.$_match(e[r],s,n))return e}const s=i._flags.label;return s?r("array.hasKnown",{patternLabel:s}):r("array.hasUnknown",null)},multi:!0},items:{method(...e){a.verifyFlat(e,"items");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const r=a.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});t.$_terms.items.push(r)}return t.$_mutateRebuild()},validate(e,{schema:t,error:n,state:r,prefs:i,errorsArray:o}){const s=t.$_terms._requireds.slice(),l=t.$_terms.ordered.slice(),c=[...t.$_terms._inclusions,...s],d=!e[a.symbols.arraySingle];delete e[a.symbols.arraySingle];const f=o();let p=e.length;for(let o=0;o<p;++o){const a=e[o];let h=!1,m=!1;const g=d?o:new Number(o),_=[...r.path,g];if(!t._flags.sparse&&void 0===a){if(f.push(n("array.sparse",{key:g,path:_,pos:o,value:void 0},r.localize(_))),i.abortEarly)return f;l.shift();continue}const y=[e,...r.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(a,r.localize(_,y,e),i,{presence:"ignore"})){if(f.push(n("array.excludes",{pos:o,value:a},r.localize(_))),i.abortEarly)return f;h=!0,l.shift();break}if(h)continue;if(t.$_terms.ordered.length){if(l.length){const s=l.shift(),c=s.$_validate(a,r.localize(_,y,s),i);if(c.errors){if(f.push(...c.errors),i.abortEarly)return f}else if("strip"===s._flags.result)u.fastSplice(e,o),--o,--p;else{if(!t._flags.sparse&&void 0===c.value){if(f.push(n("array.sparse",{key:g,path:_,pos:o,value:void 0},r.localize(_))),i.abortEarly)return f;continue}e[o]=c.value}continue}if(!t.$_terms.items.length){if(f.push(n("array.orderedLength",{pos:o,limit:t.$_terms.ordered.length})),i.abortEarly)return f;break}}const b=[];let v=s.length;for(let l=0;l<v;++l){const c=r.localize(_,y,s[l]);c.snapshot();const d=s[l].$_validate(a,c,i);if(b[l]=d,!d.errors){if(c.commit(),e[o]=d.value,m=!0,u.fastSplice(s,l),--l,--v,!t._flags.sparse&&void 0===d.value&&(f.push(n("array.sparse",{key:g,path:_,pos:o,value:void 0},r.localize(_))),i.abortEarly))return f;break}c.restore()}if(m)continue;const w=i.stripUnknown&&!!i.stripUnknown.arrays||!1;v=c.length;for(const l of c){let c;const d=s.indexOf(l);if(-1!==d)c=b[d];else{const s=r.localize(_,y,l);if(s.snapshot(),c=l.$_validate(a,s,i),!c.errors){s.commit(),"strip"===l._flags.result?(u.fastSplice(e,o),--o,--p):t._flags.sparse||void 0!==c.value?e[o]=c.value:(f.push(n("array.sparse",{key:g,path:_,pos:o,value:void 0},r.localize(_))),h=!0),m=!0;break}s.restore()}if(1===v){if(w){u.fastSplice(e,o),--o,--p,m=!0;break}if(f.push(...c.errors),i.abortEarly)return f;h=!0;break}}if(!h&&(t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!m){if(w){u.fastSplice(e,o),--o,--p;continue}if(f.push(n("array.includes",{pos:o,value:a},r.localize(_))),i.abortEarly)return f}}return s.length&&u.fillMissedErrors(t,f,s,e,r,i),l.length&&(u.fillOrderedErrors(t,f,l,e,r,i),f.length||u.fillDefault(l,e,r,i)),f.length?f:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:i,args:o})=>a.compare(e.length,n,i)?e:t.error("array."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){a.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let n=0;n<e.length;++n){const r=a.tryWithPath((()=>this.$_compile(e[n])),n,{append:!0});u.validateSingle(r,t),t.$_mutateRegister(r),t.$_terms.ordered.push(r)}return t.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return r(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){a.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),r(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:n,prefs:r,schema:i},{options:o}){const{value:s,errors:a}=u.sort(i,e,o,n,r);if(a)return a;for(let n=0;n<e.length;++n)if(e[n]!==s[n])return t("array.sort",{order:o.order,by:o.by?o.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){r(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),a.assertOptions(t,["ignoreUndefined","separator"]);const n={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const r=a.default(t.separator,".");n.path=r?e.split(r):[e]}else n.comparator=e;return this.$_addRule(n)},validate(e,{state:t,error:n,schema:s},{comparator:a,options:l},{comparator:u,path:c}){const d={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},f=u||i,p=l.ignoreUndefined;for(let i=0;i<e.length;++i){const s=c?o(e[i],c):e[i],l=u?d.custom:d[typeof s];if(r(l,"Failed to find unique map container for type",typeof s),l instanceof Map){const r=l.entries();let o;for(;!(o=r.next()).done;)if(f(o.value[0],s)){const r=t.localize([...t.path,i],[e,...t.ancestors]),s={pos:i,value:e[i],dupePos:o.value[1],dupeValue:e[o.value[1]]};return c&&(s.path=a),n("array.unique",s,r)}l.set(s,i)}else{if((!p||void 0!==s)&&void 0!==l[s]){const r={pos:i,value:e[i],dupePos:l[s],dupeValue:e[l[s]]};return c&&(r.path=a),n("array.unique",r,t.localize([...t.path,i],[e,...t.ancestors]))}l[s]=i}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)u.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)u.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(e,t,n,r,i,o){const s=[];let a=0;for(const e of n){const t=e._flags.label;t?s.push(t):++a}s.length?a?t.push(e.$_createError("array.includesRequiredBoth",r,{knownMisses:s,unknownMisses:a},i,o)):t.push(e.$_createError("array.includesRequiredKnowns",r,{knownMisses:s},i,o)):t.push(e.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:a},i,o))},u.fillOrderedErrors=function(e,t,n,r,i,o){const s=[];for(const e of n)"required"===e._flags.presence&&s.push(e);s.length&&u.fillMissedErrors(e,t,s,r,i,o)},u.fillDefault=function(e,t,n,r){const i=[];let o=!0;for(let s=e.length-1;s>=0;--s){const a=e[s],l=[t,...n.ancestors],u=a.$_validate(void 0,n.localize(n.path,l,a),r).value;if(o){if(void 0===u)continue;o=!1}i.unshift(u)}i.length&&t.push(...i)},u.fastSplice=function(e,t){let n=t;for(;n<e.length;)e[n++]=e[n];--e.length},u.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(r(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},u.sort=function(e,t,n,r,i){const o="ascending"===n.order?1:-1,s=-1*o,a=o,l=(l,c)=>{let d=u.compare(l,c,s,a);if(null!==d)return d;if(n.by&&(l=n.by.resolve(l,r,i),c=n.by.resolve(c,r,i)),d=u.compare(l,c,s,a),null!==d)return d;const f=typeof l;if(f!==typeof c)throw e.$_createError("array.sort.mismatching",t,null,r,i);if("number"!==f&&"string"!==f)throw e.$_createError("array.sort.unsupported",t,{type:f},r,i);return"number"===f?(l-c)*o:l<c?s:a};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},u.compare=function(e,t,n,r){return e===t?0:void 0===e?1:void 0===t?-1:null===e?r:null===t?n:null}},4937:(e,t,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(2036),a={isBool:function(e){return"boolean"==typeof e}};e.exports=i.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const n=t._flags.sensitive?e:e.toLowerCase();e="true"===n||"false"!==n&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){o.verifyFlat(e,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new s;for(let n=0;n<e.length;++n){const i=e[n];r(void 0!==i,"Cannot call truthy with undefined"),t.$_terms.truthy.add(i)}return t}},falsy:{method(...e){o.verifyFlat(e,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new s;for(let n=0;n<e.length;++n){const i=e[n];r(void 0!==i,"Cannot call falsy with undefined"),t.$_terms.falsy.add(i)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:a.isBool,to:(e,t)=>e?1:0},string:{from:a.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(3328),a={isDate:function(e){return e instanceof Date}};e.exports=i.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:a.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:n,prefs:r}){if(e instanceof Date&&!isNaN(e.getTime()))return;const i=t._flags.format;return r.convert&&i&&"string"==typeof e?{value:e,errors:n("date.format",{format:i})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:n},{name:r,operator:i,args:s}){const a="now"===n?Date.now():n.getTime();return o.compare(e.getTime(),a,i)?e:t.error("date."+r,{limit:s.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:a.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return r(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return r(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:a.isDate,to:(e,t)=>e.getTime()},string:{from:a.isDate,to:(e,{prefs:t})=>s.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),a.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return o.isIsoDate(e)?a.date(e.toString()):null;const n=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return a.date(1*e);if("unix"===t)return a.date(1e3*e);if("string"==typeof n)return null}return a.date(e)},a.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,n)=>{"use strict";const r=n(375),i=n(7824);e.exports=i.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:(e,t,{n})=>e.length===n?e:t.error("function.arity",{n})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return r(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:(e,t,{n})=>e.length>=n?e:t.error("function.minArity",{n})},maxArity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:(e,t,{n})=>e.length<=n?e:t.error("function.maxArity",{n})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,n)=>{"use strict";const r=n(978),i=n(375),o=n(8571),s=n(3652),a=n(8068),l=n(8160),u=n(3292),c=n(6354),d=n(6133),f=n(3328),p={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=a.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:n,state:r,prefs:i}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=p.clone(e,i);const o=[];if(t.$_terms.renames&&!p.rename(t,e,r,i,o))return{value:e,errors:o};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:o};const s=new Set(Object.keys(e));if(t.$_terms.keys){const n=[e,...r.ancestors];for(const a of t.$_terms.keys){const t=a.key,l=e[t];s.delete(t);const u=r.localize([...r.path,t],n,a),c=a.schema.$_validate(l,u,i);if(c.errors){if(i.abortEarly)return{value:e,errors:c.errors};void 0!==c.value&&(e[t]=c.value),o.push(...c.errors)}else"strip"===a.schema._flags.result||void 0===c.value&&void 0!==l?delete e[t]:void 0!==c.value&&(e[t]=c.value)}}if(s.size||t._flags._hasPatternMatch){const n=p.unknown(t,e,s,o,r,i);if(n)return n}if(t.$_terms.dependencies)for(const n of t.$_terms.dependencies){if(null!==n.key&&!1===p.isPresent(n.options)(n.key.resolve(e,r,i,null,{shadow:!1})))continue;const s=p.dependencies[n.rel](t,n,e,r,i);if(s){const n=t.$_createError(s.code,e,s.context,r,i);if(i.abortEarly)return{value:e,errors:n};o.push(n)}}return{value:e,errors:o}},rules:{and:{method(...e){return l.verifyFlat(e,"and"),p.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,n){f.isTemplate(e)||(e=u.ref(e)),i(void 0===n||"string"==typeof n,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const r=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:n}});return r.$_mutateRegister(e),r.$_mutateRegister(t),r},validate(e,{error:t,prefs:n,state:r},{subject:i,schema:o,message:s}){const a=i.resolve(e,r,n),l=d.isRef(i)?i.absolute(r):[];return o.$_match(a,r.localize(l,[e,...r.ancestors],o),n)?e:t("object.assert",{subject:i,message:s})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return i("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:(e,t,{constructor:n,name:r})=>e instanceof n?e:t.error("object.instance",{type:r,value:e}),args:["constructor","name"]},keys:{method(e){i(void 0===e||"object"==typeof e,"Object schema must be a valid object"),i(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new p.Keys;for(const n in e)l.tryWithPath((()=>t.$_terms.keys.push({key:n,schema:this.$_compile(e[n])})),n)}else t.$_terms.keys=new p.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:n},{name:r,operator:i,args:o})=>l.compare(Object.keys(e).length,n,i)?e:t.error("object."+r,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return l.verifyFlat(e,"nand"),p.dependency(this,"nand",null,e)}},or:{method(...e){return l.verifyFlat(e,"or"),p.dependency(this,"or",null,e)}},oxor:{method(...e){return p.dependency(this,"oxor",null,e)}},pattern:{method(e,t,n={}){const r=e instanceof RegExp;r||(e=this.$_compile(e,{appendPath:!0})),i(void 0!==t,"Invalid rule"),l.assertOptions(n,["fallthrough","matches"]),r&&i(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const s={[r?"regex":"schema"]:e,rule:t};return n.matches&&(s.matches=this.$_compile(n.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),o.$_mutateRegister(s.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),n.fallthrough&&(s.fallthrough=!0),o.$_terms.patterns.push(s),o.$_mutateRegister(t),o}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>d.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t,n={}){i("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),i("string"==typeof t||t instanceof f,"Invalid rename to argument"),i(t!==e,"Cannot rename key to same name:",e),l.assertOptions(n,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const t of o.$_terms.renames)i(t.from!==e,"Cannot rename the same key multiple times");return t instanceof f&&o.$_mutateRegister(t),o.$_terms.renames.push({from:e,to:t,options:r(p.renameDefaults,n)}),o}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:n})=>!l.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,n={}){return p.dependency(this,"with",e,t,n)}},without:{method(e,t,n={}){return p.dependency(this,"without",e,t,n)}},xor:{method(...e){return l.verifyFlat(e,"xor"),p.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const n of e.$_terms.keys)l.tryWithPath((()=>t.add(n,{after:n.schema.$_rootReferences(),group:n.key})),n.key);e.$_terms.keys=new p.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:n,key:r=null,peers:i,options:o}of t.dependencies)e=p.dependency(e,n,r,i,o);if(t.patterns)for(const{regex:n,schema:r,rule:i,fallthrough:o,matches:s}of t.patterns)e=e.pattern(n||r,i,{fallthrough:o,matches:s});if(t.renames)for(const{from:n,to:r,options:i}of t.renames)e=e.rename(n,r,i);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),p.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return o(e,{shallow:!0});const n=Object.create(Object.getPrototypeOf(e));return Object.assign(n,e),n}const n=function(...t){return e.apply(this,t)};return n.prototype=o(e.prototype),Object.defineProperty(n,"name",{value:e.name,writable:!1}),Object.defineProperty(n,"length",{value:e.length,writable:!1}),Object.assign(n,e),n},p.dependency=function(e,t,n,r,o){i(null===n||"string"==typeof n,t,"key must be a strings"),o||(o=r.length>1&&"object"==typeof r[r.length-1]?r.pop():{}),l.assertOptions(o,["separator","isPresent"]),r=[].concat(r);const s=l.default(o.separator,"."),a=[];for(const e of r)i("string"==typeof e,t,"peers must be strings"),a.push(u.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==n&&(n=u.ref(n,{separator:s,ancestor:0,prefix:!1}));const c=e.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new p.Dependency(t,n,a,r,o)),c},p.dependencies={and(e,t,n,r,i){const o=[],s=[],a=t.peers.length,l=p.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(n,r,i,null,{shadow:!1}))?o.push(e.key):s.push(e.key);if(o.length!==a&&s.length!==a)return{code:"object.and",context:{present:s,presentWithLabels:p.keysToLabels(e,s),missing:o,missingWithLabels:p.keysToLabels(e,o)}}},nand(e,t,n,r,i){const o=[],s=p.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(o.length!==t.peers.length)return;const a=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:p.keysToLabels(e,a),peers:l,peersWithLabels:p.keysToLabels(e,l)}}},or(e,t,n,r,i){const o=p.isPresent(t.options);for(const e of t.peers)if(o(e.resolve(n,r,i,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:p.keysToLabels(e,t.paths)}}},oxor(e,t,n,r,i){const o=[],s=p.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(!o.length||1===o.length)return;const a={peers:t.paths,peersWithLabels:p.keysToLabels(e,t.paths)};return a.present=o,a.presentWithLabels=p.keysToLabels(e,o),{code:"object.oxor",context:a}},with(e,t,n,r,i){const o=p.isPresent(t.options);for(const s of t.peers)if(!1===o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:p.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:p.keysToLabels(e,s.key)}}},without(e,t,n,r,i){const o=p.isPresent(t.options);for(const s of t.peers)if(o(s.resolve(n,r,i,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:p.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:p.keysToLabels(e,s.key)}}},xor(e,t,n,r,i){const o=[],s=p.isPresent(t.options);for(const e of t.peers)s(e.resolve(n,r,i,null,{shadow:!1}))&&o.push(e.key);if(1===o.length)return;const a={peers:t.paths,peersWithLabels:p.keysToLabels(e,t.paths)};return 0===o.length?{code:"object.missing",context:a}:(a.present=o,a.presentWithLabels=p.keysToLabels(e,o),{code:"object.xor",context:a})}},p.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},p.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},p.rename=function(e,t,n,r,i){const o={};for(const s of e.$_terms.renames){const a=[],l="string"!=typeof s.from;if(l)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const n=s.from.exec(e);n&&a.push({from:e,to:s.to,match:n})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||a.push(s);for(const u of a){const a=u.from;let c=u.to;if(c instanceof f&&(c=c.render(t,n,r,u.match)),a!==c){if(!s.options.multiple&&o[c]&&(i.push(e.$_createError("object.rename.multiple",t,{from:a,to:c,pattern:l},n,r)),r.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,c)&&!s.options.override&&!o[c]&&(i.push(e.$_createError("object.rename.override",t,{from:a,to:c,pattern:l},n,r)),r.abortEarly))return!1;void 0===t[a]?delete t[c]:t[c]=t[a],o[c]=!0,s.options.alias||delete t[a]}}}return!0},p.unknown=function(e,t,n,r,i,o){if(e.$_terms.patterns){let s=!1;const a=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),l=[t,...i.ancestors];for(const s of n){const u=t[s],c=[...i.path,s];for(let d=0;d<e.$_terms.patterns.length;++d){const f=e.$_terms.patterns[d];if(f.regex){const e=f.regex.test(s);if(i.mainstay.tracer.debug(i,"rule",`pattern.${d}`,e?"pass":"error"),!e)continue}else if(!f.schema.$_match(s,i.nest(f.schema,`pattern.${d}`),o))continue;n.delete(s);const p=i.localize(c,l,{schema:f.rule,key:s}),h=f.rule.$_validate(u,p,o);if(h.errors){if(o.abortEarly)return{value:t,errors:h.errors};r.push(...h.errors)}if(f.matches&&a[d].push(s),t[s]=h.value,!f.fallthrough)break}}if(s)for(let n=0;n<a.length;++n){const s=a[n];if(!s)continue;const u=e.$_terms.patterns[n].matches,d=i.localize(i.path,l,u),f=u.$_validate(s,d,o);if(f.errors){const n=c.details(f.errors,{override:!1});n.matches=s;const a=e.$_createError("object.pattern.match",t,n,i,o);if(o.abortEarly)return{value:t,errors:a};r.push(a)}}}if(n.size&&(e.$_terms.keys||e.$_terms.patterns)){if(o.stripUnknown&&void 0===e._flags.unknown||o.skipFunctions){const e=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const r of n)e?(delete t[r],n.delete(r)):"function"==typeof t[r]&&n.delete(r)}if(!l.default(e._flags.unknown,o.allowUnknown))for(const s of n){const n=i.localize([...i.path,s],[]),a=e.$_createError("object.unknown",t[s],{child:s},n,o,{flags:!1});if(o.abortEarly)return{value:t,errors:a};r.push(a)}}},p.Dependency=class{constructor(e,t,n,r,i){this.rel=e,this.key=t,this.peers=n,this.paths=r,this.options=i}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},p.Keys=class extends Array{concat(e){const t=this.slice(),n=new Map;for(let e=0;e<t.length;++e)n.set(t[e].key,e);for(const r of e){const e=r.key,i=n.get(e);void 0!==i?t[i]={key:e,schema:t[i].schema.concat(r.schema)}:t.push(r)}return t}}},8785:(e,t,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s=n(3292),a=n(6354),l={};e.exports=i.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,{schema:t,state:n,prefs:i}){r(t.$_terms.link,"Uninitialized link schema");const o=l.generate(t,e,n,i),s=t.$_terms.link[0].ref;return o.$_validate(e,n.nest(o,`link:${s.display}:${o.type}`),i)},generate:(e,t,n,r)=>l.generate(e,t,n,r),rules:{ref:{method(e){r(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),r("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),r("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){r(this.$_terms.link,"Uninitialized link schema"),r(o.isSchema(e),"Invalid schema object"),r("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(r(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,n,r){let i=n.mainstay.links.get(e);if(i)return i._generate(t,n,r).schema;const o=e.$_terms.link[0].ref,{perspective:s,path:a}=l.perspective(o,n);l.assert(s,"which is outside of schema boundaries",o,e,n,r);try{i=a.length?s.$_reach(a):s}catch(t){l.assert(!1,"to non-existing schema",o,e,n,r)}return l.assert("link"!==i.type,"which is another link",o,e,n,r),e._flags.relative||n.mainstay.links.set(e,i),i._generate(t,n,r).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:n,key:r}of t.schemas){if((n._flags.id||r)===e.path[0])return{perspective:n,path:e.path.slice(1)};if(n.$_terms.shared)for(const t of n.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,n,i,o,s){e||r(!1,`"${a.label(i._flags,o,s)}" contains link reference "${n.display}" ${t}`)}},3832:(e,t,n)=>{"use strict";const r=n(375),i=n(8068),o=n(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=e.toString(),n=t.indexOf("."),r=t.indexOf("e");return(n<0?0:(r<0?t.length:r)-n-1)+(r<0?0:Math.max(0,-parseInt(t.slice(r+1))))}};e.exports=i.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:n}){if(!e.match(s.numberRx))return;e=e.trim();const r={value:parseFloat(e)};if(0===r.value&&(r.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(r.value)))return r.errors=n("number.unsafe"),r}else{const t=r.value.toString();if(t.match(/e/i))return r;if(t!==s.normalizeDecimal(e))return r.errors=n("number.unsafe"),r}return r}},validate(e,{schema:t,error:n,prefs:r}){if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!o.isNumber(e))return{value:e,errors:n("number.base")};const i={value:e};if(r.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);i.value=Math.round(i.value*t)/t}}return 0===i.value&&(i.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(i.errors=n("number.unsafe")),i},rules:{compare:{method:!1,validate:(e,t,{limit:n},{name:r,operator:i,args:s})=>o.compare(e,n,i)?e:t.error("number."+r,{limit:s.limit,value:e}),args:[{name:"limit",ref:!0,assert:o.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?s.decimalPlaces(e):null,n=Math.pow(10,t);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:n}})},validate:(e,t,{base:n,baseDecimalPlace:r,pfactor:i},o)=>s.decimalPlaces(e)>r?t.error("number.multiple",{multiple:o.args.base,value:e}):Math.round(i*e)%Math.round(i*n)==0?e:t.error("number.multiple",{multiple:o.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return r(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:n}){const r=e.toString().match(s.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return r(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,t,{sign:n})=>"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)},unsafe:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,n)=>{"use strict";const r=n(7824);e.exports=r.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,n)=>{"use strict";const r=n(375),i=n(5380),o=n(1745),s=n(9959),a=n(6064),l=n(9926),u=n(5752),c=n(8068),d=n(8160),f={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:n,prefs:r}){const i=t.$_getRule("normalize");i&&(e=e.normalize(i.args.form));const o=t.$_getRule("case");o&&(e="upper"===o.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const s=t.$_getRule("trim");if(s&&s.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const n of t.$_terms.replacements)e=e.replace(n.pattern,n.replacement);const a=t.$_getRule("hex");if(a&&a.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),t.$_getRule("isoDate")){const t=f.isoDate(e);t&&(e=t)}if(t._flags.truncate){const i=t.$_getRule("max");if(i){let o=i.args.limit;if(d.isResolvable(o)&&(o=o.resolve(e,n,r),!d.limit(o)))return{value:e,errors:t.$_createError("any.ref",o,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},n,r)};e=e.slice(0,o)}}return{value:e}}},validate(e,{schema:t,error:n}){if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const r=t.$_getRule("min");if(r&&0===r.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(e={}){return d.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),r("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:(e,t,{options:n})=>f.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")},case:{method(e){return r(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:(e,t,{direction:n})=>"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let n=e.length,r=0,i=1;for(;n--;){const t=e.charAt(n)*i;r+=t-9*(t>9),i^=3}return r>0&&r%10==0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return d.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:n}){const r=e.match(f.dataUriRegex);if(r){if(!r[2])return e;if("base64"!==r[2])return e;if(f.base64Regex[n.paddingRequired].false.test(r[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&d.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=f.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,t,n,{address:r})=>i.isValid(e,r)?e:t.error("string.domain")},email:{method(e={}){d.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),r(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=f.addressOptions(e),n=new RegExp(`\\s*[${e.separator?a(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:n,address:t})},validate(e,t,{options:n},{regex:r,address:i}){const s=n.multiple?e.split(r):[e],a=[];for(const e of s)o.isValid(e,i)||a.push(e);return a.length?t.error("string.email",{value:e,invalids:a}):e}},guid:{alias:"uuid",method(e={}){d.assertOptions(e,["version","separator"]);let t="";if(e.version){const n=[].concat(e.version);r(n.length>=1,"version must have at least 1 valid version specified");const i=new Set;for(let e=0;e<n.length;++e){const o=n[e];r("string"==typeof o,"version at position "+e+" must be a string");const s=f.guidVersions[o.toLowerCase()];r(s,"version at position "+e+" must be one of "+Object.keys(f.guidVersions).join(", ")),r(!i.has(s),"version at position "+e+" must not be a duplicate"),t+=s,i.add(s)}}r(f.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const n=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,i=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${n})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:i})},validate(e,t,n,{regex:r}){const i=r.exec(e);return i?f.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(e={}){return d.assertOptions(e,["byteAligned","prefix"]),e={byteAligned:!1,prefix:!1,...e},r("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),r("boolean"==typeof e.prefix||"optional"===e.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:e}})},validate:(e,t,{options:n})=>("optional"===n.prefix?f.hexRegex.withOptionalPrefix:!0===n.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>i.isValid(e,{minDomainSegments:1})||f.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){d.assertOptions(e,["cidr","version"]);const{cidr:t,versions:n,regex:r}=s.regex(e),i=e.version?n:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:i}},regex:r})},validate:(e,t,{options:n},{regex:r})=>r.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>f.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>f.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return f.length(this,"length",e,"=",t)},validate(e,t,{limit:n,encoding:r},{name:i,operator:o,args:s}){const a=!r&&e.length;return d.compare(a,n,o)?e:t.error("string."+i,{limit:s.limit,value:e,encoding:r})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return f.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return f.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return r(f.normalizationForms.includes(e),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:(e,{error:t},{form:n})=>e===e.normalize(n)?e:t("string.normalize",{value:e,form:n}),convert:!0},pattern:{alias:"regex",method(e,t={}){r(e instanceof RegExp,"regex must be a RegExp"),r(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),d.assertOptions(t,["invert","name"]);const n=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:n})},validate:(e,t,{regex:n,options:r},{errorCode:i})=>n.test(e)^r.invert?e:t.error(i,{name:r.name,regex:n,value:e}),args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(a(e),"g")),r(e instanceof RegExp,"pattern must be a RegExp"),r("string"==typeof t,"replacement must be a String");const n=this.clone();return n.$_terms.replacements||(n.$_terms.replacements=[]),n.$_terms.replacements.push({pattern:e,replacement:t}),n}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:(e,t,{enabled:n})=>n&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(e=!0){return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){d.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&d.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:n}=u.regex(e),r=e.domain?f.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:r,scheme:n})},validate(e,t,{options:n},{regex:r,domain:o,scheme:s}){if(["http:/","https:/"].includes(e))return t.error("string.uri");let a=r.exec(e);if(!a&&t.prefs.convert&&n.encodeUri){const t=encodeURI(e);a=r.exec(t),a&&(e=t)}if(a){const r=a[1]||a[2];return!o||n.allowRelative&&!r||i.isValid(r,o)?e:t.error("string.domain",{value:r})}return n.relativeOnly?t.error("string.uriRelativeOnly"):n.scheme?t.error("string.uriCustomScheme",{scheme:s,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:n,replacement:r}of t.replacements)e=e.replace(n,r);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(e){if(!e)return f.tlds||e;if(r(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),r(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return r(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds);r("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),r(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),r(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(e.tlds.deny,"tlds.deny"),e;const n=e.tlds.allow;return n?!0===n?(r(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds)):(Array.isArray(n)&&(e=Object.assign({},e,{tlds:{allow:new Set(n)}})),r(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(e.tlds.allow,"tlds.allow"),e):e},f.validateTlds=function(e,t){for(const n of e)r(i.isValid(n,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},f.isoDate=function(e){if(!d.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},f.length=function(e,t,n,i,o){return r(!o||!1,"Invalid encoding:",o),e.$_addRule({name:t,method:"length",args:{limit:n,encoding:o},operator:i})}},8826:(e,t,n)=>{"use strict";const r=n(375),i=n(8068),o={};o.Map=class extends Map{slice(){return new o.Map(this)}},e.exports=i.extend({type:"symbol",terms:{map:{init:new o.Map}},coerce:{method(e,{schema:t,error:n}){const r=t.$_terms.map.get(e);return r&&(e=r),t._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),r(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),n=[];for(const i of e){r(i&&i[Symbol.iterator],"Entry must be an iterable");const[e,o]=i;r("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),r("symbol"==typeof o,"Value must be a Symbol"),t.$_terms.map.set(e,o),n.push(o)}return t.valid(...n)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(738),s=n(9621),a=n(8160),l=n(6354),u=n(493),c={result:Symbol("result")};t.entry=function(e,t,n){let i=a.defaults;n&&(r(void 0===n.warnings,"Cannot override warnings preference in synchronous validation"),r(void 0===n.artifacts,"Cannot override artifacts preference in synchronous validation"),i=a.preferences(a.defaults,n));const o=c.entry(e,t,i);r(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:o.value};return o.error&&(s.error=o.error),o.mainstay.warnings.length&&(s.warning=l.details(o.mainstay.warnings)),o.mainstay.debug&&(s.debug=o.mainstay.debug),o.mainstay.artifacts&&(s.artifacts=o.mainstay.artifacts),s},t.entryAsync=async function(e,t,n){let r=a.defaults;n&&(r=a.preferences(a.defaults,n));const i=c.entry(e,t,r),o=i.mainstay;if(i.error)throw o.debug&&(i.error.debug=o.debug),i.error;if(o.externals.length){let t=i.value;const u=[];for(const i of o.externals){const d=i.state.path,f="link"===i.schema.type?o.links.get(i.schema):null;let p,h,m=t;const g=d.length?[t]:[],_=d.length?s(e,d):e;if(d.length){p=d[d.length-1];let e=t;for(const t of d.slice(0,-1))e=e[t],g.unshift(e);h=g[0],m=h[p]}try{const e=(e,t)=>(f||i.schema).$_createError(e,m,t,i.state,r),s=await i.method(m,{schema:i.schema,linked:f,state:i.state,prefs:n,original:_,error:e,errorsArray:c.errorsArray,warn:(e,t)=>o.warnings.push((f||i.schema).$_createError(e,m,t,i.state,r)),message:(e,t)=>(f||i.schema).$_createError("external",m,t,i.state,r,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(o.tracer.log(i.schema,i.state,"rule","external","error"),u.push(s),r.abortEarly)break;continue}if(Array.isArray(s)&&s[a.symbols.errors]){if(o.tracer.log(i.schema,i.state,"rule","external","error"),u.push(...s),r.abortEarly)break;continue}h?(o.tracer.value(i.state,"rule",m,s,"external"),h[p]=s):(o.tracer.value(i.state,"rule",t,s,"external"),t=s)}catch(e){throw r.errors.label&&(e.message+=` (${i.label})`),e}}if(i.value=t,u.length)throw i.error=l.process(u,e,r),o.debug&&(i.error.debug=o.debug),i.error}if(!r.warnings&&!r.debug&&!r.artifacts)return i.value;const u={value:i.value};return o.warnings.length&&(u.warning=l.details(o.warnings)),o.debug&&(u.debug=o.debug),o.artifacts&&(u.artifacts=o.artifacts),u},c.Mainstay=class{constructor(e,t,n){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=n,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},c.entry=function(e,n,r){const{tracer:i,cleanup:o}=c.tracer(n,r),s=r.debug?[]:null,a=n._ids._schemaChain?new Map:null,d=new c.Mainstay(i,s,a),f=n._ids._schemaChain?[{schema:n}]:null,p=new u([],[],{mainstay:d,schemas:f}),h=t.validate(e,n,p,r);o&&n.$_root.untrace();const m=l.process(h.errors,e,r);return{value:h.value,error:m,mainstay:d}},c.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(r(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:c.ignore}},t.validate=function(e,t,n,r,i={}){if(t.$_terms.whens&&(t=t._generate(e,n,r).schema),t._preferences&&(r=c.prefs(t,r)),t._cache&&r.cache){const r=t._cache.get(e);if(n.mainstay.tracer.debug(n,"validate","cached",!!r),r)return r}const o=(i,o,s)=>t.$_createError(i,e,o,s||n,r),s={original:e,prefs:r,schema:t,state:n,error:o,errorsArray:c.errorsArray,warn:(e,t,r)=>n.mainstay.warnings.push(o(e,t,r)),message:(i,o)=>t.$_createError("custom",e,o,n,r,{messages:i})};n.mainstay.tracer.entry(t,n);const l=t._definition;if(l.prepare&&void 0!==e&&r.convert){const t=l.prepare(e,s);if(t){if(n.mainstay.tracer.value(n,"prepare",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(l.coerce&&void 0!==e&&r.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,s);if(t){if(n.mainstay.tracer.value(n,"coerced",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),s);e=t.value}}const u=t._flags.empty;u&&u.$_match(c.trim(e,t),n.nest(u),a.defaults)&&(n.mainstay.tracer.value(n,"empty",e,void 0),e=void 0);const d=i.presence||t._flags.presence||(t._flags._endedSwitch?null:r.presence);if(void 0===e){if("forbidden"===d)return c.finalize(e,null,s);if("required"===d)return c.finalize(e,[t.$_createError("any.required",e,null,n,r)],s);if("optional"===d){if(t._flags.default!==a.symbols.deepDefault)return c.finalize(e,null,s);n.mainstay.tracer.value(n,"default",e,{}),e={}}}else if("forbidden"===d)return c.finalize(e,[t.$_createError("any.unknown",e,null,n,r)],s);const f=[];if(t._valids){const i=t._valids.get(e,n,r,t._flags.insensitive);if(i)return r.convert&&(n.mainstay.tracer.value(n,"valids",e,i.value),e=i.value),n.mainstay.tracer.filter(t,n,"valid",i),c.finalize(e,null,s);if(t._flags.only){const i=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(e,[i],s);f.push(i)}}if(t._invalids){const i=t._invalids.get(e,n,r,t._flags.insensitive);if(i){n.mainstay.tracer.filter(t,n,"invalid",i);const o=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},n,r);if(r.abortEarly)return c.finalize(e,[o],s);f.push(o)}}if(l.validate){const t=l.validate(e,s);if(t&&(n.mainstay.tracer.value(n,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return f.push(t.errors),c.finalize(e,f,s);if(t.errors.length)return f.push(...t.errors),c.finalize(e,f,s)}}return t._rules.length?c.rules(e,f,s):c.finalize(e,f,s)},c.rules=function(e,t,n){const{schema:r,state:i,prefs:o}=n;for(const s of r._rules){const l=r._definition.rules[s.method];if(l.convert&&o.convert){i.mainstay.tracer.log(r,i,"rule",s.name,"full");continue}let u,d=s.args;if(s._resolve.length){d=Object.assign({},d);for(const t of s._resolve){const n=l.argsByName.get(t),s=d[t].resolve(e,i,o),c=n.normalize?n.normalize(s):s,f=a.validateArg(c,null,n);if(f){u=r.$_createError("any.ref",s,{arg:t,ref:d[t],reason:f},i,o);break}d[t]=c}}u=u||l.validate(e,n,d,s);const f=c.rule(u,s);if(f.errors){if(i.mainstay.tracer.log(r,i,"rule",s.name,"error"),s.warn){i.mainstay.warnings.push(...f.errors);continue}if(o.abortEarly)return c.finalize(e,f.errors,n);t.push(...f.errors)}else i.mainstay.tracer.log(r,i,"rule",s.name,"pass"),i.mainstay.tracer.value(i,"rule",e,f.value,s.name),e=f.value}return c.finalize(e,t,n)},c.rule=function(e,t){return e instanceof l.Report?(c.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[a.symbols.errors]?(e.forEach((e=>c.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},c.error=function(e,t){return t.message&&e._setTemplate(t.message),e},c.finalize=function(e,t,n){t=t||[];const{schema:i,state:o,prefs:s}=n;if(t.length){const r=c.default("failover",void 0,t,n);void 0!==r&&(o.mainstay.tracer.value(o,"failover",e,r),e=r,t=[])}if(t.length&&i._flags.error)if("function"==typeof i._flags.error){t=i._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)r(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[i._flags.error];if(void 0===e){const r=c.default("default",e,t,n);o.mainstay.tracer.value(o,"default",e,r),e=r}if(i._flags.cast&&void 0!==e){const t=i._definition.cast[i._flags.cast];if(t.from(e)){const r=t.to(e,n);o.mainstay.tracer.value(o,"cast",e,r,i._flags.cast),e=r}}if(i.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of i.$_terms.externals)o.mainstay.externals.push({method:e,schema:i,state:o,label:l.label(i._flags,o,s)});const a={value:e,errors:t.length?t:null};return i._flags.result&&(a.value="strip"===i._flags.result?void 0:n.original,o.mainstay.tracer.value(o,i._flags.result,e,a.value),o.shadow(e,i._flags.result)),i._cache&&!1!==s.cache&&!i._refs.length&&i._cache.set(n.original,a),void 0===e||a.errors||void 0===i._flags.artifact||(o.mainstay.artifacts=o.mainstay.artifacts||new Map,o.mainstay.artifacts.has(i._flags.artifact)||o.mainstay.artifacts.set(i._flags.artifact,[]),o.mainstay.artifacts.get(i._flags.artifact).push(o.path)),a},c.prefs=function(e,t){const n=t===a.defaults;return n&&e._preferences[a.symbols.prefs]?e._preferences[a.symbols.prefs]:(t=a.preferences(t,e._preferences),n&&(e._preferences[a.symbols.prefs]=t),t)},c.default=function(e,t,n,r){const{schema:o,state:s,prefs:l}=r,u=o._flags[e];if(l.noDefaults||void 0===u)return t;if(s.mainstay.tracer.log(o,s,"rule",e,"full"),!u)return u;if("function"==typeof u){const a=u.length?[i(s.ancestors[0]),r]:[];try{return u(...a)}catch(t){return void n.push(o.$_createError(`any.${e}`,null,{error:t},s,l))}}return"object"!=typeof u?u:u[a.symbols.literal]?u.literal:a.isResolvable(u)?u.resolve(t,s,l):i(u)},c.trim=function(e,t){if("string"!=typeof e)return e;const n=t.$_getRule("trim");return n&&n.args.enabled?e.trim():e},c.ignore={active:!1,debug:o,entry:o,filter:o,log:o,resolve:o,value:o},c.errorsArray=function(){const e=[];return e[a.symbols.errors]=!0,e}},2036:(e,t,n)=>{"use strict";const r=n(375),i=n(9474),o=n(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){o.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,n){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const n of[...t._values,...t._refs])e.add(n)}if(n)for(const t of[...n._values,...n._refs])e.remove(t);return e.length?e:null}remove(e){o.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,n,r){return!!this.get(e,t,n,r)}get(e,t,n,r){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&r){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(i(t,e))return{value:t};if(t)for(const o of this._refs){const s=o.resolve(e,t,n,null,{in:!0});if(void 0===s)continue;const a=o.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of a)if(typeof t==typeof e)if(r&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:o}}else if(i(t,e))return{value:t,ref:o}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){r(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[o.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const n of e)"string"==typeof n&&t.set(n.toLowerCase(),n);return t}},978:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(1687),s=n(9621),a={};e.exports=function(e,t,n={}){if(r(e&&"object"==typeof e,"Invalid defaults value: must be an object"),r(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),r("object"==typeof n,"Invalid options: must be an object"),!t)return null;if(n.shallow)return a.applyToDefaultsWithShallow(e,t,n);const s=i(e);if(!0===t)return s;const l=void 0!==n.nullOverride&&n.nullOverride;return o(s,t,{nullOverride:l,mergeArrays:!1})},a.applyToDefaultsWithShallow=function(e,t,n){const l=n.shallow;r(Array.isArray(l),"Invalid keys");const u=new Map,c=!0===t?null:new Set;for(let n of l){n=Array.isArray(n)?n:n.split(".");const r=s(e,n);r&&"object"==typeof r?u.set(r,c&&s(t,n)||r):c&&c.add(n)}const d=i(e,{},u);if(!c)return d;for(const e of c)a.reachCopy(d,t,e);const f=void 0!==n.nullOverride&&n.nullOverride;return o(d,t,{nullOverride:f,mergeArrays:!1})},a.reachCopy=function(e,t,n){for(const e of n){if(!(e in t))return;const n=t[e];if("object"!=typeof n||null===n)return;t=n}const r=t;let i=e;for(let e=0;e<n.length-1;++e){const t=n[e];"object"!=typeof i[t]&&(i[t]={}),i=i[t]}i[n[n.length-1]]=r}},375:(e,t,n)=>{"use strict";const r=n(7916);e.exports=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new r(t)}}},8571:(e,t,n)=>{"use strict";const r=n(9621),i=n(4277),o=n(7043),s={needsProtoHack:new Set([i.set,i.map,i.weakSet,i.weakMap])};e.exports=s.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let r=s.clone,a=n;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);r=e=>e}else if(a){const t=a.get(e);if(t)return t}else a=new Map;const l=i.getInternalProto(e);if(l===i.buffer)return!1;if(l===i.date)return new Date(e.getTime());if(l===i.regex)return new RegExp(e);const u=s.base(e,l,t);if(u===e)return e;if(a&&a.set(e,u),l===i.set)for(const n of e)u.add(r(n,t,a));else if(l===i.map)for(const[n,i]of e)u.set(n,r(i,t,a));const c=o.keys(e,t);for(const n of c){if("__proto__"===n)continue;if(l===i.array&&"length"===n){u.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,n);o?o.get||o.set?Object.defineProperty(u,n,o):o.enumerable?u[n]=r(e[n],t,a):Object.defineProperty(u,n,{enumerable:!1,writable:!0,configurable:!0,value:r(e[n],t,a)}):Object.defineProperty(u,n,{enumerable:!0,writable:!0,configurable:!0,value:r(e[n],t,a)})}return u},s.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const i=new Map;for(const t of n){const n=r(e,t);"object"!=typeof n&&"function"!=typeof n||i.set(n,n)}return s.clone(e,t,i)},s.base=function(e,t,n){if(!1===n.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===i.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===i.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(s.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)}},9474:(e,t,n)=>{"use strict";const r=n(4277),i={mismatched:null};e.exports=function(e,t,n){return n=Object.assign({prototype:!0},n),!!i.isDeepEqual(e,t,n,[])},i.isDeepEqual=function(e,t,n,o){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!n.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const a=i.getSharedType(e,t,!!n.prototype);switch(a){case r.buffer:return!1;case r.promise:return e===t;case r.regex:return e.toString()===t.toString();case i.mismatched:return!1}for(let n=o.length-1;n>=0;--n)if(o[n].isSame(e,t))return!0;o.push(new i.SeenEntry(e,t));try{return!!i.isDeepEqualObj(a,e,t,n,o)}finally{o.pop()}},i.getSharedType=function(e,t,n){if(n)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?i.mismatched:r.getInternalProto(e);const o=r.getInternalProto(e);return o!==r.getInternalProto(t)?i.mismatched:o},i.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},i.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},i.isSetSimpleEqual=function(e,t){for(const n of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,n))return!1;return!0},i.isDeepEqualObj=function(e,t,n,o,s){const{isDeepEqual:a,valueOf:l,hasOwnEnumerableProperty:u}=i,{keys:c,getOwnPropertySymbols:d}=Object;if(e===r.array){if(!o.part){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!a(t[e],n[e],o,s))return!1;return!0}for(const e of t)for(const t of n)if(a(e,t,o,s))return!0}else if(e===r.set){if(t.size!==n.size)return!1;if(!i.isSetSimpleEqual(t,n)){const e=new Set(Set.prototype.values.call(n));for(const n of Set.prototype.values.call(t)){if(e.delete(n))continue;let t=!1;for(const r of e)if(a(n,r,o,s)){e.delete(r),t=!0;break}if(!t)return!1}}}else if(e===r.map){if(t.size!==n.size)return!1;for(const[e,r]of Map.prototype.entries.call(t)){if(void 0===r&&!Map.prototype.has.call(n,e))return!1;if(!a(r,Map.prototype.get.call(n,e),o,s))return!1}}else if(e===r.error&&(t.name!==n.name||t.message!==n.message))return!1;const f=l(t),p=l(n);if((t!==f||n!==p)&&!a(f,p,o,s))return!1;const h=c(t);if(!o.part&&h.length!==c(n).length&&!o.skip)return!1;let m=0;for(const e of h)if(o.skip&&o.skip.includes(e))void 0===n[e]&&++m;else{if(!u(n,e))return!1;if(!a(t[e],n[e],o,s))return!1}if(!o.part&&h.length-m!==c(n).length)return!1;if(!1!==o.symbols){const e=d(t),r=new Set(d(n));for(const i of e){if(!o.skip||!o.skip.includes(i))if(u(t,i)){if(!u(n,i))return!1;if(!a(t[i],n[i],o,s))return!1}else if(u(n,i))return!1;r.delete(i)}for(const e of r)if(u(n,e))return!1}return!0},i.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,n)=>{"use strict";const r=n(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:r(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let n="";for(let r=0;r<e.length;++r){const i=e.charCodeAt(r);t.isSafe(i)?n+=e[r]:n+=t.escapeHtmlChar(i)}return n},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,n)=>{"use strict";const r=n(375),i=n(8571),o=n(7043),s={};e.exports=s.merge=function(e,t,n){if(r(e&&"object"==typeof e,"Invalid target value: must be an object"),r(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(n=Object.assign({nullOverride:!0,mergeArrays:!0},n),Array.isArray(t)){r(Array.isArray(e),"Cannot merge array onto an object"),n.mergeArrays||(e.length=0);for(let r=0;r<t.length;++r)e.push(i(t[r],{symbols:n.symbols}));return e}const a=o.keys(t,n);for(let r=0;r<a.length;++r){const o=a[r];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(t,o))continue;const l=t[o];if(l&&"object"==typeof l){if(e[o]===l)continue;!e[o]||"object"!=typeof e[o]||Array.isArray(e[o])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[o]=i(l,{symbols:n.symbols}):s.merge(e[o],l,n)}else(null!=l||n.nullOverride)&&(e[o]=l)}return e}},9621:(e,t,n)=>{"use strict";const r=n(375),i={};e.exports=function(e,t,n){if(!1===t||null==t)return e;"string"==typeof(n=n||{})&&(n={separator:n});const o=Array.isArray(t);r(!o||!n.separator,"Separator option is not valid for array-based chain");const s=o?t:t.split(n.separator||".");let a=e;for(let e=0;e<s.length;++e){let o=s[e];const l=n.iterables&&i.iterables(a);if(Array.isArray(a)||"set"===l){const e=Number(o);Number.isInteger(e)&&(o=e<0?a.length+e:e)}if(!a||"function"==typeof a&&!1===n.functions||!l&&void 0===a[o]){r(!n.strict||e+1===s.length,"Missing segment",o,"in reach path ",t),r("object"==typeof a||!0===n.functions||"function"!=typeof a,"Invalid segment",o,"in reach path ",t),a=n.default;break}a=l?"set"===l?[...a][o]:a.get(o):a[o]}return a},i.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const n={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},n.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r=Object.prototype.toString.call(e);return n.typeMap.get(r)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,n)=>{"use strict";const r=n(375),i={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const n=[].concat((t=t||{}).before||[]),i=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;r(!n.includes(o),`Item cannot come before itself: ${o}`),r(!n.includes("?"),"Item cannot come before unassociated items"),r(!i.includes(o),`Item cannot come after itself: ${o}`),r(!i.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:n,after:i,group:o,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();r(e,"item","?"!==o?`added into group ${o}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(i.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return r(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return r(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),n=Object.create(null);for(const r of this._items){const i=r.seq,o=r.group;n[o]=n[o]||[],n[o].push(i),e[i]=r.before;for(const e of r.after)t[e]=t[e]||[],t[e].push(i)}for(const t in e){const r=[];for(const i in e[t]){const o=e[t][i];n[o]=n[o]||[],r.push(...n[o])}e[t]=r}for(const r in t)if(n[r])for(const i of n[r])e[i].push(...t[r]);const r={};for(const t in e){const n=e[t];for(const e of n)r[e]=r[e]||[],r[e].push(t)}const i={},o=[];for(let e=0;e<this._items.length;++e){let t=e;if(r[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===i[e])continue;r[e]||(r[e]=[]);const n=r[e].length;let o=0;for(let t=0;t<n;++t)i[r[e][t]]&&++o;if(o===n){t=e;break}}}null!==t&&(i[t]=!0,o.push(t))}if(o.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of o){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},i.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,n)=>{"use strict";const r=n(443),i=n(2178),o={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:r.URL||URL};t.analyze=function(e,t={}){if(!e)return i.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return i.code("DOMAIN_TOO_LONG");if(o.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return i.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(o.domainControlRx.test(e))return i.code("DOMAIN_INVALID_CHARS");e=o.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const n=t.minDomainSegments||o.minDomainSegments,r=e.split(".");if(r.length<n)return i.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&r.length>t.maxDomainSegments)return i.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=r[r.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return i.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<r.length;++e){const t=r[e];if(!t.length)return i.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return i.code("DOMAIN_LONG_SEGMENT");if(e<r.length-1){if(!o.domainSegmentRx.test(t))return i.code("DOMAIN_INVALID_CHARS")}else if(!o.tldSegmentRx.test(t))return i.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,n){return!t.analyze(e,n)},o.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new o.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,n)=>{"use strict";const r=n(9848),i=n(5380),o=n(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(r.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return o.code("EMPTY_STRING");const n=!s.nonAsciiRx.test(e);if(!n){if(!1===t.allowUnicode)return o.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const r=e.split("@");if(2!==r.length)return r.length>2?o.code("MULTIPLE_AT_CHAR"):o.code("MISSING_AT_CHAR");const[a,l]=r;if(!a)return o.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return o.code("ADDRESS_TOO_LONG");if(s.encoder.encode(a).length>64)return o.code("LOCAL_TOO_LONG")}return s.local(a,n)||i.analyze(l,t)},s.local=function(e,t){const n=e.split(".");for(const e of n){if(!e.length)return o.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return o.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return o.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,n)=>{"use strict";const r=n(375),i=n(5752);t.regex=function(e={}){r(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";r(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),r(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let n=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(n)||(n=[n]),r(n.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<n.length;++e)r("string"==typeof n[e],"options.version must only contain strings"),n[e]=n[e].toLowerCase(),r(["ipv4","ipv6","ipvfuture"].includes(n[e]),"options.version contains unknown version "+n[e]+" - must be one of ipv4, ipv6, ipvfuture");n=Array.from(new Set(n));const o=`(?:${n.map((e=>{if("forbidden"===t)return i.ip[e];const n=`\\/${"ipv4"===e?i.ip.v4Cidr:i.ip.v6Cidr}`;return"required"===t?`${i.ip[e]}${n}`:`${i.ip[e]}(?:${n})?`})).join("|")})`,s=new RegExp(`^${o}$`);return{cidr:t,versions:n,regex:s,raw:o}}},5752:(e,t,n)=>{"use strict";const r=n(375),i=n(6064),o={generate:function(){const e={},t="\\dA-Fa-f",n="["+t+"]",r="\\w-\\.~",i="!\\$&'\\(\\)\\*\\+,;=",o="%"+t,s=r+o+i+":@",a="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const u=n+"{1,4}",c="(?:"+u+":"+u+"|"+e.ipv4address+")",d="(?:"+u+":){6}"+c,f="::(?:"+u+":){5}"+c,p="(?:"+u+")?::(?:"+u+":){4}"+c,h="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,m="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,g="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,_="(?:(?:"+u+":){0,4}"+u+")?::"+c,y="(?:(?:"+u+":){0,5}"+u+")?::"+u,b="(?:(?:"+u+":){0,6}"+u+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+d+"|"+f+"|"+p+"|"+h+"|"+m+"|"+g+"|"+_+"|"+y+"|"+b+")",e.ipvFuture="v"+n+"+\\.["+r+i+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const v="["+r+o+i+":]*",w="["+r+o+i+"]{1,255}",E="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+w+")",S="(?:"+v+"@)?"+E+"(?::\\d*)?",x="(?:"+v+"@)?("+E+")(?::\\d*)?",R=a+"*",T=a+"+",A="(?:\\/"+R+")*",O="\\/(?:"+T+A+")?",I=T+A,N="["+r+o+i+"@]+"+A,P="(?:\\/\\/\\/"+R+A+")";return e.hierPart="(?:(?:\\/\\/"+S+A+")|"+O+"|"+I+"|"+P+")",e.hierPartCapture="(?:(?:\\/\\/"+x+A+")|"+O+"|"+I+")",e.relativeRef="(?:(?:\\/\\/"+S+A+")|"+O+"|"+N+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+x+A+")|"+O+"|"+N+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};o.rfc3986=o.generate(),t.ip={v4Cidr:o.rfc3986.ipv4Cidr,v6Cidr:o.rfc3986.ipv6Cidr,ipv4:o.rfc3986.ipv4address,ipv6:o.rfc3986.ipv6address,ipvfuture:o.rfc3986.ipvFuture},o.createRegex=function(e){const t=o.rfc3986,n="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return o.wrap(s+n);let a="";if(e.scheme){r(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const n=[].concat(e.scheme);r(n.length>=1,"scheme must have at least 1 scheme specified");const o=[];for(let e=0;e<n.length;++e){const s=n[e];r(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?o.push(s.source.toString()):(r(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),o.push(i(s)))}a=o.join("|")}const l="(?:"+(a?"(?:"+a+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",u=e.allowRelative?"(?:"+l+"|"+s+")":l;return o.wrap(u+n,a)},o.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},o.uriRegex=o.createRegex({}),t.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?o.createRegex(e):o.uriRegex}},1447:(e,t)=>{"use strict";const n={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e,t={}){if(!t[n.settings]&&t.constants)for(const e in t.constants){const n=t.constants[e];if(null!==n&&!["boolean","number","string"].includes(typeof n))throw new Error(`Formula constant ${e} contains invalid ${typeof n} value type`)}this.settings=t[n.settings]?t:Object.assign({[n.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let r=[],i="",o=0,s=!1;const a=e=>{if(o)throw new Error("Formula missing closing parenthesis");const a=r.length?r[r.length-1]:null;if(s||i||e){if(a&&"reference"===a.type&&")"===e)return a.type="function",a.value=this._subFormula(i,a.value),void(i="");if(")"===e){const e=new t.Parser(i,this.settings);r.push({type:"segment",value:e})}else if(s){if("]"===s)return r.push({type:"reference",value:i}),void(i="");r.push({type:"literal",value:i})}else if(n.operatorCharacters.includes(i))a&&"operator"===a.type&&n.operators.includes(a.value+i)?a.value+=i:r.push({type:"operator",value:i});else if(i.match(n.numberRx))r.push({type:"constant",value:parseFloat(i)});else if(void 0!==this.settings.constants[i])r.push({type:"constant",value:this.settings.constants[i]});else{if(!i.match(n.tokenRx))throw new Error(`Formula contains invalid token: ${i}`);r.push({type:"reference",value:i})}i=""}};for(const t of e)s?t===s?(a(),s=!1):i+=t:o?"("===t?(i+=t,++o):")"===t?(--o,o?i+=t:a(t)):i+=t:t in n.literals?s=n.literals[t]:"("===t?(a(),++o):n.operatorCharacters.includes(t)?(a(),i=t,a()):" "!==t?i+=t:a();a(),r=r.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==r[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of r){if("operator"===e.type){if(n.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!n.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map((e=>{if("operator"===e.type)return n.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):n.reference(e.value)}))}_subFormula(e,r){const i=this.settings.functions[r];if("function"!=typeof i)throw new Error(`Formula contains unknown function ${r}`);let o=[];if(e){let t="",i=0,s=!1;const a=()=>{if(!t)throw new Error(`Formula contains function ${r} with invalid arguments ${e}`);o.push(t),t=""};for(let r=0;r<e.length;++r){const o=e[r];s?(t+=o,o===s&&(s=!1)):o in n.literals&&!i?(t+=o,s=n.literals[o]):","!==o||i?(t+=o,"("===o?++i:")"===o&&--i):a()}a()}return o=o.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const n of o)t.push(n.evaluate(e));return i.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let r=t.length-2;r>=0;--r){const i=t[r];if(i&&"operator"===i.type){const o=t[r+1];t.splice(r+1,1);const s=n.evaluate(o,e);t[r]=n.single(i.value,s)}}return n.operatorsOrder.forEach((r=>{for(let i=1;i<t.length-1;)if(r.includes(t[i])){const r=t[i],o=n.evaluate(t[i-1],e),s=n.evaluate(t[i+1],e);t.splice(i,2);const a=n.calculate(r,o,s);t[i-1]=0===a?0:a}else i+=2})),n.evaluate(t[0],e)}},t.Parser.prototype[n.symbol]=!0,n.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},n.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[n.symbol]?e.evaluate(t):e},n.single=function(e,t){if("!"===e)return!t;const n=-t;return 0===n?0:n},n.calculate=function(e,t,r){if("??"===e)return n.exists(t)?t:r;if("string"==typeof t||"string"==typeof r){if("+"===e)return(t=n.exists(t)?t:"")+(n.exists(r)?r:"")}else switch(e){case"^":return Math.pow(t,r);case"*":return t*r;case"/":return t/r;case"%":return t%r;case"+":return t+r;case"-":return t-r}switch(e){case"<":return t<r;case"<=":return t<=r;case">":return t>r;case">=":return t>=r;case"==":return t===r;case"!=":return t!==r;case"&&":return t&&r;case"||":return t||r}return null},n.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports=JSON.parse('{"version":"17.13.3"}')}},t={},function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(5107);var e,t},e.exports=t()},16543:()=>{},16827:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.makeVariableResolver=t.makeFunctionResolver=t.convertValue=t.makeNSResolver=void 0;const r=n(67608),i=n(3629),o=n(19592),s=n(74272),a=n(52950),l=new s.XPathParser,u=new i.NamespaceResolverImpl,c=new r.FunctionResolverImpl,d=new o.VariableResolverImpl;function f(e){return{getNamespace:(t,n)=>e(t,n)||u.getNamespace(t,n)}}function p(e){return e&&"function"==typeof e.getNamespace?f((t=e).getNamespace.bind(t)):"function"==typeof e?f(e):"object"==typeof e?(n=e,f((e=>n[e]))):u;var t,n}function h(e){if(null==e)return null;if(e instanceof a.XString||e instanceof a.XBoolean||e instanceof a.XNumber||e instanceof a.XNodeSet)return e;switch(typeof e){case"string":return new a.XString(e);case"boolean":return new a.XBoolean(e);case"number":return new a.XNumber(e)}const t=new a.XNodeSet;return t.addArray([].concat(e)),t}function m(e){return{getFunction(t,n){const r=e(t,n);return null!=r?function(e){return(t,...n)=>(n=n.map((e=>e.evaluate(t))),h(e(t,...n)))}(r):c.getFunction(t,n)}}}function g(e){return e&&"function"==typeof e.getFunction?m((t=e).getFunction.bind(t)):"function"==typeof e?m(e):"object"==typeof e?(n=e,m((e=>n[e]))):c;var t,n}function _(e){return{getVariable:(t,n)=>h(e(t,n))}}function y(e){if(e){if("function"==typeof e.getVariable)return _(e.getVariable.bind(e));if("function"==typeof e)return _(e);if("object"==typeof e)return _((t=>e[t]))}return d}function b(e,t,n){e in n&&(t[e]=n[e])}t.makeNSResolver=p,t.convertValue=h,t.makeFunctionResolver=g,t.makeVariableResolver=y,t.parse=function(e){const t=l.parse(e);return new class{expression=t;evaluate(e){return function(e,t){const n=function(e){const t=new a.XPathContext(new o.VariableResolverImpl,new i.NamespaceResolverImpl,new r.FunctionResolverImpl);return void 0!==e?(t.namespaceResolver=p(e.namespaces),t.functionResolver=g(e.functions),t.variableResolver=y(e.variables),t.expressionContextNode=e.node,b("allowAnyNamespaceForNoPrefix",t,e),b("isHtml",t,e)):t.namespaceResolver=u,t}(t);return e.evaluate(n)}(this.expression,e)}evaluateNumber(e){return this.evaluate(e).numberValue}evaluateString(e){return this.evaluate(e).stringValue}evaluateBoolean(e){return this.evaluate(e).booleanValue}evaluateNodeSet(e){return this.evaluate(e).nodeset}select(e){return this.evaluateNodeSet(e).toArray()}select1(e){return this.select(e)[0]}}}},16874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},17318:(e,t,n)=>{"use strict";var r=n(65606);Object.defineProperty(t,"__esModule",{value:!0}),t.quitCommand=void 0;const i=n(19742);t.quitCommand={description:"End the repl",aliases:["q","exit"],usageExample:":quit",script:!1,fn:()=>{i.log.info("bye"),r.exit(0)}}},17568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeFunctionDefinition=function(e,t){const n=t[0];if(n.name!==l.RawRType.Function&&n.name!==l.RawRType.Lambda)return void r.parseLog.trace(`expected function definition to be identified by keyword, yet received ${n.name}`);const{content:c,location:d}=(0,i.retrieveMetaStructure)(n.content),f=t[1];(0,o.guard)(f.name===l.RawRType.ParenLeft,(()=>`expected opening parenthesis, yet received ${f.name}`));const p=t.findIndex((e=>e.name===l.RawRType.ParenRight));(0,o.guard)(-1!==p,(()=>`expected closing parenthesis, yet received ${JSON.stringify(t)}`));const h=(0,s.splitArrayOn)(t.slice(2,p),(e=>e.name===l.RawRType.Comma)).map((t=>(0,a.tryNormalizeParameter)(e,t)));if(h.some((e=>void 0===e)))return void r.parseLog.error(`function had unexpected unknown parameters: ${JSON.stringify(h.filter(o.isNotUndefined))}, aborting.`);const m=t.slice(p+1);(0,o.guard)(1===m.length,(()=>`expected function body to be unique, yet received ${m.length}`));const g=(0,u.normalizeExpressions)(e,m);return(0,o.guard)(1===g.length&&g[0].type!==l.RType.Delimiter,(()=>`expected function body to yield one normalized expression, but ${g.length}`)),{type:l.RType.FunctionDefinition,location:d,lexeme:c,parameters:h,body:(0,i.ensureExpressionList)(g[0]),info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(56293),i=n(36604),o=n(57012),s=n(83584),a=n(21950),l=n(49375),u=n(93086)},17579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeHappensBefore=function({ast:e,dataflow:t},n){const l=Date.now(),u={},c=(0,o.extractCFG)(e,t.graph);for(const t of n){const{a:n,b:o}=t,l=`${n}<${o}`;l in u&&i.log.warn("Duplicate happens-before query",t,"ignoring");try{const t=(0,a.slicingCriterionToId)(n,e.idMap),r=(0,a.slicingCriterionToId)(o,e.idMap);u[l]=(0,s.happensBefore)(c.graph,t,r)}catch(e){i.log.error("Error while executing happens-before query",t,e),u[l]=r.Ternary.Maybe}}return{".meta":{timing:Date.now()-l},results:u}};const r=n(95758),i=n(19742),o=n(15459),s=n(27402),a=n(21578)},17949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeIdToNumberIfPossible=function(e){return"string"==typeof e&&o.test(e)?Number(e):e},t.recoverName=function(e,t){return t?.get(e)?.lexeme},t.recoverContent=function(e,t){const n=t.getVertex(e);if(n&&n.tag===r.VertexType.FunctionCall&&n.name)return n.name;const o=t.idMap?.get(e);if(void 0===o)return;const s=o.lexeme??o.info.fullLexeme??"";return n?.tag===r.VertexType.Use?(0,i.removeRQuotes)(s):s};const r=n(18841),i=n(72814),o=/^\d+$/},18327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.foldAstStateful=function e(t,n,s){const a=t.type;switch(n=s.down(t,n),a){case i.RType.Number:return s.foldNumber(t,n);case i.RType.String:return s.foldString(t,n);case i.RType.Logical:return s.foldLogical(t,n);case i.RType.Symbol:return s.foldSymbol(t,n);case i.RType.Comment:return s.other.foldComment(t,n);case i.RType.LineDirective:return s.other.foldLineDirective(t,n);case i.RType.Pipe:return s.foldPipe(t,e(t.lhs,n,s),e(t.rhs,n,s),n);case i.RType.BinaryOp:return s.foldBinaryOp(t,e(t.lhs,n,s),e(t.rhs,n,s),n);case i.RType.UnaryOp:return s.foldUnaryOp(t,e(t.operand,n,s),n);case i.RType.Access:return s.foldAccess(t,e(t.accessed,n,s),t.access.map((t=>t===o.EmptyArgument?o.EmptyArgument:e(t,n,s))),n);case i.RType.ForLoop:return s.loop.foldFor(t,e(t.variable,n,s),e(t.vector,n,s),e(t.body,n,s),n);case i.RType.WhileLoop:return s.loop.foldWhile(t,e(t.condition,n,s),e(t.body,n,s),n);case i.RType.RepeatLoop:return s.loop.foldRepeat(t,e(t.body,n,s),n);case i.RType.FunctionCall:return s.functions.foldFunctionCall(t,e(t.named?t.functionName:t.calledFunction,n,s),t.arguments.map((t=>t===o.EmptyArgument?t:e(t,n,s))),n);case i.RType.FunctionDefinition:return s.functions.foldFunctionDefinition(t,t.parameters.map((t=>e(t,n,s))),e(t.body,n,s),n);case i.RType.Parameter:return s.functions.foldParameter(t,e(t.name,n,s),t.defaultValue?e(t.defaultValue,n,s):void 0,n);case i.RType.Argument:return s.functions.foldArgument(t,t.name?e(t.name,n,s):void 0,t.value?e(t.value,n,s):void 0,n);case i.RType.Next:return s.loop.foldNext(t,n);case i.RType.Break:return s.loop.foldBreak(t,n);case i.RType.IfThenElse:return s.foldIfThenElse(t,e(t.condition,n,s),e(t.then,n,s),void 0===t.otherwise?void 0:e(t.otherwise,n,s),n);case i.RType.ExpressionList:return s.foldExprList(t,t.grouping?[e(t.grouping[0],n,s),e(t.grouping[1],n,s)]:void 0,t.children.map((t=>e(t,n,s))),n);default:(0,r.assertUnreachable)(a)}};const r=n(57012),i=n(49375),o=n(25377)},18741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slicerLogger=void 0,t.staticSlicing=function(e,{idMap:n},p,h=75){(0,r.guard)(p.length>0,"must have at least one seed id to calculate slice");const m=(0,l.convertAllSlicingCriteriaToIds)(p,n);(0,i.expensiveTrace)(t.slicerLogger,(()=>`calculating slice for ${m.length} seed criteria: ${m.map((e=>JSON.stringify(e))).join(", ")}`));const g=new s.VisitingQueue(h);let _=Number.MAX_SAFE_INTEGER;const y=new Set;{const t=(0,u.initializeCleanEnvironments)(),r=(0,o.envFingerprint)(t);for(const{id:e}of m)g.add(e,t,r,!1),_=Math.min(_,n.get(e)?.info.nesting??_),y.add(e);for(const n of e.unknownSideEffects)"object"!=typeof n&&g.add(n,t,r,!0)}for(;g.nonEmpty();){const r=g.next(),{baseEnvironment:i,id:s,onlyForSideEffects:l}=r,u=(0,o.envFingerprint)(i),p=e.get(s,!0);if(void 0===p){t.slicerLogger.warn(`id: ${s} must be in graph but can not be found, keep in slice to be sure`);continue}const[h,m]=p;if(h.controlDependencies&&h.controlDependencies.length>0){const t=e.isRoot(s)||y.has(s);for(const e of h.controlDependencies.filter((({id:e})=>!g.hasId(e))))(!t||(n.get(e.id)?.info.nesting??0)>=_)&&g.add(e.id,i,u,!1)}if(l||(h.tag!==c.VertexType.FunctionCall||h.onlyBuiltin||(0,a.sliceForCall)(r,h,e,g),!(0,a.handleReturns)(s,g,m,u,i)))for(const[e,{types:t}]of m){if((0,d.edgeIncludesType)(t,d.EdgeType.NonStandardEvaluation))continue;const n=(0,d.shouldTraverseEdge)(t);3===n?g.add(e,i,u,!1):2===n?f(g,s,e,i):1===n&&g.add(e,i,u,!0)}}return{...g.status(),decodedCriteria:m}},t.updatePotentialAddition=f;const r=n(57012),i=n(19742),o=n(10972),s=n(33713),a=n(90663),l=n(21578),u=n(73326),c=n(18841),d=n(34966);function f(e,t,n,r){const i=e.potentialAdditions.get(n);if(i){const[r,{baseEnvironment:s,onlyForSideEffects:a}]=i;r!==t&&(e.add(n,s,(0,o.envFingerprint)(s),a),e.potentialAdditions.delete(n))}else e.potentialAdditions.set(n,[t,{id:n,baseEnvironment:r,onlyForSideEffects:!1}])}t.slicerLogger=i.log.getSubLogger({name:"slicer"})},18841:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ValidVertexTypeReverse=t.ValidVertexTypes=t.VertexType=void 0,t.isParentContainerIndex=function(e){return"subIndices"in e},t.isValueVertex=function(e){return e?.tag===n.Value},t.isUseVertex=function(e){return e?.tag===n.Use},t.isFunctionCallVertex=function(e){return e?.tag===n.FunctionCall},t.isVariableDefinitionVertex=function(e){return e?.tag===n.VariableDefinition},t.isFunctionDefinitionVertex=function(e){return e?.tag===n.FunctionDefinition},function(e){e.Value="value",e.Use="use",e.FunctionCall="function-call",e.VariableDefinition="variable-definition",e.FunctionDefinition="function-definition"}(n||(t.VertexType=n={})),t.ValidVertexTypes=new Set(Object.values(n)),t.ValidVertexTypeReverse=Object.fromEntries(Object.entries(n).map((([e,t])=>[t,e])))},19123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARSE_WITH_TREE_SITTER_STEP=void 0;const r=n(23644),i=n(26481);t.PARSE_WITH_TREE_SITTER_STEP={name:"parse",humanReadableName:"parse with tree-sitter",description:"Parse the given R code into an AST using tree-sitter",processor:i.parseRequests,executed:0,printer:{0:r.internalPrinter,2:JSON.stringify},dependencies:[],requiredInput:void 0}},19154:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnaryOperatorsInRAst=t.OperatorsInRAst=t.Operators=t.OperatorDatabase=void 0;const r=n(49375);function i(e){return new Set(e.map((e=>t.OperatorDatabase[e].stringUsedInRAst)))}t.OperatorDatabase={"~":{name:"model formulae",stringUsedInRAst:r.RawRType.Tilde,stringUsedInternally:"~",writtenAs:"infix",arity:3,usedAs:"operation",capabilities:["binary-operator","infix-calls","model-formula","function-calls"]},"+":{name:"addition or unary +",stringUsedInRAst:r.RawRType.Plus,stringUsedInternally:"+",writtenAs:"infix",arity:3,usedAs:"operation",capabilities:["function-calls"]},"-":{name:"subtraction or unary -",stringUsedInRAst:r.RawRType.Minus,stringUsedInternally:"-",writtenAs:"infix",arity:3,usedAs:"operation",capabilities:["function-calls"]},"*":{name:"multiplication",stringUsedInRAst:r.RawRType.Times,stringUsedInternally:"*",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"/":{name:"division",stringUsedInRAst:r.RawRType.Div,stringUsedInternally:"/",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"^":{name:"exponentiation",stringUsedInRAst:r.RawRType.Exp,stringUsedInternally:"^",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"**":{name:"alternative exponentiation",stringUsedInRAst:r.RawRType.Exp,stringUsedInternally:"**",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"%%":{name:"modulus",stringUsedInRAst:"%%",stringUsedInternally:"%%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"%/%":{name:"integer division",stringUsedInRAst:"%/%",stringUsedInternally:"%/%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"%*%":{name:"matrix product",stringUsedInRAst:"%*%",stringUsedInternally:"%*%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"%o%":{name:"outer product",stringUsedInRAst:"%o%",stringUsedInternally:"%o%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"%x%":{name:"kronecker product",stringUsedInRAst:"%x%",stringUsedInternally:"%x%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"==":{name:"equal to",stringUsedInRAst:r.RawRType.Eq,stringUsedInternally:"==",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"!=":{name:"not equal to",stringUsedInRAst:r.RawRType.Ne,stringUsedInternally:"!=",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},">":{name:"greater than",stringUsedInRAst:r.RawRType.Gt,stringUsedInternally:">",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},">=":{name:"greater than or equal to",stringUsedInRAst:r.RawRType.Ge,stringUsedInternally:">=",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"<":{name:"less than",stringUsedInRAst:r.RawRType.Lt,stringUsedInternally:"<",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"<=":{name:"less than or equal to",stringUsedInRAst:r.RawRType.Le,stringUsedInternally:"<=",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"&":{name:"logical and (vectorized)",stringUsedInRAst:r.RawRType.And,stringUsedInternally:"&",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls","non-strict-logical-operators"]},"&&":{name:"logical and (non-vectorized)",stringUsedInRAst:r.RawRType.And2,stringUsedInternally:"&&",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls","non-strict-logical-operators"]},"|":{name:"logical or (vectorized)",stringUsedInRAst:r.RawRType.Or,stringUsedInternally:"|",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls","non-strict-logical-operators"]},"||":{name:"logical or (not-vectorized)",stringUsedInRAst:r.RawRType.Or2,stringUsedInternally:"||",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls","non-strict-logical-operators"]},"!":{name:"unary not",stringUsedInRAst:r.RawRType.Exclamation,stringUsedInternally:"!",writtenAs:"prefix",arity:1,usedAs:"operation",capabilities:["unary-operator","function-calls"]},"%in%":{name:"matching operator",stringUsedInRAst:"%in%",stringUsedInternally:"%in%",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","special-operator","function-calls"]},"<-":{name:"left assignment",stringUsedInRAst:r.RawRType.LeftAssign,stringUsedInternally:"<-",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","local-left-assignment","function-calls"]},":=":{name:"left assignment",stringUsedInRAst:r.RawRType.LeftAssign,stringUsedInternally:":=",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","local-table-assignment","function-calls"]},"<<-":{name:"left global assignment",stringUsedInRAst:r.RawRType.LeftAssign,stringUsedInternally:"<<-",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","super-left-assignment","function-calls"]},"->":{name:"right assignment",stringUsedInRAst:r.RawRType.RightAssign,stringUsedInternally:"->",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","local-right-assignment","function-calls"]},"->>":{name:"right global assignment",stringUsedInRAst:r.RawRType.RightAssign,stringUsedInternally:"->>",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","super-right-assignment","function-calls"]},"=":{name:"equal assignment",stringUsedInRAst:r.RawRType.EqualAssign,stringUsedInternally:"=",writtenAs:"infix",arity:2,usedAs:"assignment",capabilities:["binary-operator","infix-calls","assignment-functions","local-equal-assignment","function-calls"]},":":{name:"sequence operator",stringUsedInRAst:r.RawRType.Colon,stringUsedInternally:":",writtenAs:"infix",arity:2,usedAs:"operation",capabilities:["binary-operator","infix-calls","function-calls"]},"?":{name:"question",stringUsedInRAst:r.RawRType.Question,stringUsedInternally:"?",writtenAs:"prefix",arity:1,usedAs:"operation",capabilities:["unary-operator","built-in-help"]}},t.Operators=Object.keys(t.OperatorDatabase),t.OperatorsInRAst=i(t.Operators),t.UnaryOperatorsInRAst=i(t.Operators.filter((e=>2!==t.OperatorDatabase[e].arity)))},19339:(e,t,n)=>{"use strict";var r=n(48287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.escapeMarkdown=function(e){for(const[t,n]of Object.entries(i))e=e.replaceAll(t,n);return e},t.mermaidCodeToUrl=function(e,t=!1){const n={code:e,mermaid:{autoSync:!0}};return`https://mermaid.live/${t?"edit":"view"}#base64:${r.from(JSON.stringify(n)).toString("base64")}`};const i={"\\n":"\n","`":"#96;","[":"#91;","]":"#93;","<":"#60;",">":"#62;","*":"#42;","+":"#43;","-":"#45;",'"':"#34;","\\":"#92;",_:"#95;","{":"#123;","}":"#125;","&":"#38;","'":"#39;",":":"#58;","∨":"#8744;","∧":"#8743;","¬":"#172;","→":"#8594;","↔":"#8596;","⇒":"#8658;","⇔":"#8660;","∀":"#8704;","∃":"#8707;","∈":"#8712;","∉":"#8713;","∋":"#8715;","∌":"#8716;","∩":"#8745;","∪":"#8746;","∫":"#8747;","⊕":"#8853;"}},19439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processWhileLoop=function(e,t,n,p){if(2!==t.length||t[1]===l.EmptyArgument)return u.dataflowLogger.warn(`While-Loop ${e.content} does not have 2 arguments, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:p}).information;const h=t.map((e=>(0,a.unpackArgument)(e)));if(h.some(s.isUndefined))return u.dataflowLogger.warn(`While-Loop ${e.content} has empty arguments in ${JSON.stringify(t)}, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:p}).information;const{information:m,processedArguments:g}=(0,o.processKnownFunctionCall)({name:e,args:h,rootId:n,data:p,markAsNSE:[1],patchData:(t,n)=>1===n?{...t,controlDependencies:[...t.controlDependencies??[],{id:e.info.id,when:!0}]}:t}),[_,y]=g;(0,s.guard)(void 0!==_&&void 0!==y,(()=>`While-Loop ${e.content} has no condition or body, impossible!`));const b=p.controlDependencies;if((0,r.alwaysExits)(_))return u.dataflowLogger.warn(`While-Loop ${n} forces exit in condition, skipping rest`),_;const v=(0,i.linkInputs)([...(0,c.makeAllMaybe)(y.unknownReferences,m.graph,m.environment,!1),...(0,c.makeAllMaybe)(y.in,m.graph,m.environment,!1)],m.environment,[..._.in,..._.unknownReferences],m.graph,!0);return(0,i.linkCircularRedefinitionsWithinALoop)(m.graph,(0,i.produceNameSharedIdMap)((0,i.findNonLocalReads)(m.graph,_.in)),y.out),m.graph.addEdge(e.info.id,_.entryPoint,d.EdgeType.Reads),{unknownReferences:[],in:[{nodeId:e.info.id,name:e.lexeme,controlDependencies:b,type:f.ReferenceType.Function},...v],out:[...(0,c.makeAllMaybe)(y.out,m.graph,m.environment,!0),..._.out],entryPoint:e.info.id,exitPoints:(0,r.filterOutLoopExitPoints)(y.exitPoints),graph:m.graph,environment:m.environment}};const r=n(47318),i=n(56533),o=n(92397),s=n(57012),a=n(55143),l=n(25377),u=n(22438),c=n(73326),d=n(34966),f=n(46044)},19592:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableResolverImpl=void 0,t.VariableResolverImpl=class{getVariable(e,t){return null}}},19628:(e,t,n)=>{const r=n(53908),i=n(78311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},19742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.FlowrLogger=t.expensiveTrace=void 0;const r=n(32737),i=n(48086);t.expensiveTrace=(e,t)=>{e.settings.minLevel<=1&&e.trace(t())};class o extends r.Logger{childLoggers=[];getSubLogger(e,t){const n=super.getSubLogger(e,t);return this.childLoggers.push(n),n}updateSettings(e){e(this),this.childLoggers.forEach((t=>{e(t)}))}logToFile(e="flowr.log",n={size:"10M",interval:"1d",compress:"gzip"}){const r=(0,i.createStream)(e,n);t.log.attachTransport((e=>{r.write(`${JSON.stringify(e)}\n`)}))}}t.FlowrLogger=o,t.log=new o({minLevel:4,type:"pretty",name:"main",stylePrettyLogs:!0,prettyLogStyles:{logLevelName:{"*":["bold","black","dim"]}}})},19744:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setSourceProvider=function(e){v=e},t.processSourceCall=function(e,t,n,r,i){const p=i.includeFunctionCall?(0,a.processKnownFunctionCall)({name:e,args:t,rootId:n,data:r}).information:(0,o.initializeCleanDataflowInformation)(n,r),m=t[0];if(!i.forceFollow&&(0,s.getConfig)().ignoreSourceCalls)return(0,h.expensiveTrace)(d.dataflowLogger,(()=>`Skipping source call ${JSON.stringify(m)} (disabled in config file)`)),p.graph.markIdForUnknownSideEffects(n),p;let g;if(m!==c.EmptyArgument&&m?.value?.type===f.RType.String?g=[(0,l.removeRQuotes)(m.lexeme)]:m!==c.EmptyArgument&&(g=(0,y.resolveValueOfVariable)(m.value?.lexeme,r.environment,r.completeAst.idMap)?.map((e=>"object"==typeof e&&e&&"str"in e?e.str:void 0)).filter(b.isNotUndefined)),g&&1===g.length){const t=(0,l.removeRQuotes)(g[0]),i=v.createRequest(t);return r.referenceChain.includes((0,l.requestFingerprint)(i))?((0,h.expensiveTrace)(d.dataflowLogger,(()=>`Found loop in dataflow analysis for ${JSON.stringify(i)}: ${JSON.stringify(r.referenceChain)}, skipping further dataflow analysis`)),p.graph.markIdForUnknownSideEffects(n),p):w(n,i,r,p,(0,u.sourcedDeterministicCountingIdGenerator)(t,e.location))}return(0,h.expensiveTrace)(d.dataflowLogger,(()=>`Non-constant argument ${JSON.stringify(g)} for source is currently not supported, skipping`)),p.graph.markIdForUnknownSideEffects(n),p},t.sourceRequest=w,t.standaloneSourceFile=function(e,t,n,r){const i="file"===e.request?e.content:"-inline-",o="file"===e.request?v.createRequest(e.content):e,s=(0,l.requestFingerprint)(o);return t.referenceChain.includes(s)?(d.dataflowLogger.info(`Found loop in dataflow analysis for ${JSON.stringify(o)}: ${JSON.stringify(t.referenceChain)}, skipping further dataflow analysis`),r.graph.markIdForUnknownSideEffects(n),r):w(n,o,{...t,currentRequest:o,environment:r.environment,referenceChain:[...t.referenceChain,s]},r,(0,u.deterministicPrefixIdGenerator)(i+"@"+n))};const i=n(22476),o=n(47318),s=n(67481),a=n(92397),l=n(72814),u=n(57608),c=n(25377),d=n(22438),f=n(49375),p=n(10682),h=n(19742),m=r(n(39125)),g=n(56293),_=n(62806),y=n(85193),b=n(57012);let v=(0,l.requestProviderFromFile)();function w(e,t,n,r,o){if("file"===t.request&&!m.default.existsSync(t.content))return d.dataflowLogger.warn(`Failed to analyze sourced file ${JSON.stringify(t)}: file does not exist`),r.graph.markIdForUnknownSideEffects(e),r;let s,a;try{const e="file"===t.request?t.content:void 0,u=(n.parser.async?new _.RShellExecutor:n.parser).parse(t);s="string"!=typeof u?(0,g.normalizeTreeSitter)({parsed:u},o,e):(0,g.normalize)({parsed:u},o,e),a=(0,i.processDataflowFor)(s.ast,{...n,currentRequest:t,environment:r.environment,referenceChain:[...n.referenceChain,(0,l.requestFingerprint)(t)]})}catch(n){return d.dataflowLogger.warn(`Failed to analyze sourced file ${JSON.stringify(t)}, skipping: ${n.message}`),r.graph.markIdForUnknownSideEffects(e),r}a.graph.hasVertex(a.entryPoint)&&a.graph.addControlDependency(a.entryPoint,e,!0);for(const t of a.out)a.graph.addControlDependency(t.nodeId,e,!0);const u={...r};u.environment=(0,p.overwriteEnvironment)(r.environment,a.environment),u.graph.mergeWith(a.graph);for(const[e,t]of s.idMap)n.completeAst.idMap.set(e,t);return u}},20144:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const i={singleBracket:new Map,doubleBracket:new Map,chainedOrNestedAccess:(0,o.emptySummarizedWithProject)(),longestChain:(0,o.emptySummarizedWithProject)(),deepestNesting:(0,o.emptySummarizedWithProject)(),byName:(0,o.emptySummarizedWithProject)(),bySlot:(0,o.emptySummarizedWithProject)()};i.singleBracket.set(0,(0,o.emptySummarizedWithProject)()),i.doubleBracket.set(0,(0,o.emptySummarizedWithProject)());for(const[e,n]of t.entries()){const t=n.dataAccess;c(i.chainedOrNestedAccess,t.chainedOrNestedAccess,e,r),c(i.longestChain,t.longestChain,e,r),c(i.deepestNesting,t.deepestNesting,e,r),c(i.byName,t.byName,e,r),c(i.bySlot,t.bySlot,e,r),d(t.singleBracket,i.singleBracket,e,r),d(t.doubleBracket,i.doubleBracket,e,r)}const l=s.default.createWriteStream(a.default.join(n,"data-access-meta.csv"));l.write(`kind,unique-projects,unique-files,${(0,u.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(i)){const r=t;"uniqueProjects"in r?l.write(`${JSON.stringify(e)},${r.uniqueProjects.size},${r.uniqueFiles.size},${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(r.count))}\n`):p(r,n,e)}l.close()};const i=n(67102),o=n(61685),s=r(n(88595)),a=r(n(57975)),l=n(13078),u=n(71339);function c(e,t,n,r){e.count.push(t),t>0&&(0,o.recordFilePath)(e,n,r)}function d(e,t,n,r){for(const[s,a]of Object.entries(e)){const e=Number(s),u=t.get(e)??(0,i.emptyCommonSyntaxTypeCounts)((()=>[]));if("bigint"==typeof a||"string"==typeof a){const e=u,t=(0,l.bigint2number)(a);e.count.push(t),t>0&&(0,o.recordFilePath)(e,n,r)}else(0,i.appendCommonSyntaxTypeCounter)(u,a);t.set(e,u)}}function f(e,t,n,r){const i=s.default.createWriteStream(a.default.join(e,`data-access-type-${t}-${n}.csv`));i.write(`kind,unique-projects,unique-files,${(0,u.summarizedMeasurement2CsvHeader)()}\n`),i.write(`"0",${r.uniqueProjects.size},${r.uniqueFiles.size},${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(r.count))}\n`),i.close()}function p(e,t,n){for(const[r,i]of e.entries())if("uniqueProjects"in i)f(t,n,r,i);else{const e=s.default.createWriteStream(a.default.join(t,`data-access-type-${n}-${r}.csv`));e.write(`kind,name,${(0,u.summarizedMeasurement2CsvHeader)()}\n`);for(const[t,n]of Object.entries(i))if(Array.isArray(n))e.write(`${JSON.stringify(t)},"",${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(n.flat()))}\n`);else for(const[r,i]of Object.entries(n))e.write(`${JSON.stringify(t)},${JSON.stringify(r)},${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(i.flat()))}\n`);e.close()}}},20271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyAndBuildPipeline=function(e){if(0===e.length)throw new r.InvalidPipelineError("0) Pipeline is empty");const[t,n]=(0,o.partitionArray)(e,(e=>0===e.executed)),i=new Map,a=[],l=new Set;d(t,i,a,l);const c=u(a,i,l);s(c,i,e);const f=new Map(i),p=[];d(n,f,p,l);const h=u(p,f,l),m=[...c,...h];return s(m,f,e),{steps:f,order:m,firstStepPerRequest:c.length}};const r=n(39279),i=n(91884),o=n(83584);function s(e,t,n){if(e.length!==t.size)throw function(e,t){for(const n of e){for(const e of n.dependencies)if(!t.has(e))throw new r.InvalidPipelineError(`2) Step "${n.name}" depends on step "${e}" which does not exist`);if(n.decorates&&!t.has(n.decorates))throw new r.InvalidPipelineError(`4) Step "${n.name}" decorates step "${n.decorates}" which does not exist`)}}(n,t),new r.InvalidPipelineError(`3) Pipeline contains at least one cycle; sorted: ${JSON.stringify(e)}, steps: ${JSON.stringify([...t.keys()])}`)}function a(e,t){return e.dependencies.every((e=>t.has(e)))}function l(e,t,n,r,i,o,s){e.decorates===t?a(e,n)?(r.push(i),n.add(i)):o.add(i):void 0===e.decorates&&a(e,n)&&s.push(i)}function u(e,t,n){const r=[];for(;e.length>0;){const i=e.pop();r.push(i),n.add(i);const o=new Set;for(const[s,a]of t.entries())n.has(s)||l(a,i,n,r,s,o,e);c(o,t,n,r)}return r}function c(e,t,n,o){if(0===e.size)return;let s=!0;for(;s;){s=!1;for(const r of[...e])a(t.get(r),n)&&(e.delete(r),o.push(r),n.add(r),s=!0)}if(e.size>0)throw new r.InvalidPipelineError(`5) Pipeline contains at least one decoration cycle: ${JSON.stringify(e,i.jsonReplacer)}`)}function d(e,t,n,i){for(const o of e){const e=o.name;if(t.has(e))throw new r.InvalidPipelineError(`1) Step name "${e}" is not unique in the pipeline`);t.set(e,o),a(o,i)&&(void 0===o.decorates||i.has(o.decorates))&&n.push(e)}}},20518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathException=void 0;class n extends Error{static INVALID_EXPRESSION_ERR=51;static TYPE_ERR=52;static fromMessage(e,t){return new n(void 0,t,e)}code;exception;constructor(e,t,r){super(function(e,t){const r=t?": "+t.toString():"";switch(e){case n.INVALID_EXPRESSION_ERR:return"Invalid expression"+r;case n.TYPE_ERR:return"Type error"+r}}(e,t)||r),this.code=e,this.exception=t}toString(){return this.message}}t.XPathException=n},20757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeDataflowClusterQuery=function({dataflow:{graph:e}},t){1!==t.length&&r.log.warn("The dataflow cluster query expects only up to one query, but got",t.length);const n=Date.now(),o=(0,i.findAllClusters)(e);return{".meta":{timing:Date.now()-n},clusters:o}};const r=n(19742),i=n(96238)},21578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaParseError=void 0,t.slicingCriterionToId=l,t.convertAllSlicingCriteriaToIds=function(e,t){return e.map((e=>({criterion:e,id:l(e,t)})))};const r=n(19742),i=n(17949),o=n(18741),s=n(49375);class a extends Error{constructor(e){super(e),this.name="CriteriaParseError"}}function l(e,t){let n;if(e.startsWith("$"))n=(0,i.normalizeIdToNumberIfPossible)(e.substring(1));else if(e.includes(":")){const[i,a]=e.split(":").map((e=>parseInt(e)));n=function(e,t){let n;for(const[i,a]of t.entries())void 0!==a.location&&a.location[0]===e[0]&&a.location[1]===e[1]&&((0,r.expensiveTrace)(o.slicerLogger,(()=>`can resolve id ${i} (${JSON.stringify(a.location)}) for location ${JSON.stringify(e)}`)),void 0!==n&&a.type!==s.RType.FunctionCall||a.type===s.RType.Argument||a.type===s.RType.ExpressionList||(n=a));const i=n?.info.id;return i&&(0,r.expensiveTrace)(o.slicerLogger,(()=>`resolve id ${i} (${JSON.stringify(n?.info)}) for location ${JSON.stringify(e)}`)),i}([i,a],t)}else if(e.includes("@")){const[r,i]=e.split(/@(.*)/s);n=function(e,t,n){let r;for(const[i,a]of n.entries())void 0!==a.location&&a.location[0]===e&&a.lexeme===t&&(o.slicerLogger.trace(`can resolve id ${i} (${JSON.stringify(a)}) for line ${e} and name ${t}`),void 0!==r&&a.type!==s.RType.FunctionCall||a.type===s.RType.Argument||a.type===s.RType.ExpressionList||(r=a));const i=r?.info.id;return i&&o.slicerLogger.trace(`resolve id ${i} (${JSON.stringify(r?.info)}) for line ${e} and name ${t}`),i}(parseInt(r),i,t)}if(void 0===n)throw new a(`invalid slicing criterion ${e}`);return n}t.CriteriaParseError=a},21903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATIC_SLICE=void 0;const r=n(23644),i=n(18741);t.STATIC_SLICE={name:"slice",humanReadableName:"static slice",description:"Calculate the actual static slice from the dataflow graph and the given slicing criteria",processor:function(e,t){return(0,i.staticSlicing)(e.dataflow.graph,e.normalize,t.criterion,t.threshold)},executed:1,printer:{0:r.internalPrinter},dependencies:["dataflow"],requiredInput:void 0}},21950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeParameter=function(e,t){if(1!==t.length&&3!==t.length)return void r.parseLog.warn(`Either [SYMBOL_FORMALS] or [SYMBOL_FORMALS, EQ_FORMALS, expr], but got: ${JSON.stringify(t)}`);const n=t[0];if(n.name!==s.RawRType.SymbolFormals)return void r.parseLog.warn(`expected symbol for parameter, yet received ${JSON.stringify(t)}`);const l=3===t.length?function(e,t){(0,o.guard)(t[1].name===s.RawRType.EqualFormals,(()=>`[arg-default] second element of parameter must be ${s.RawRType.EqualFormals}, but: ${JSON.stringify(t)}`));const n=t[2];return(0,o.guard)(n.name===s.RawRType.Expression,(()=>`[arg-default] third element of parameter must be an Expression but: ${JSON.stringify(t)}`)),(0,a.normalizeSingleNode)(e,n)}(e,t):void 0,{location:u,content:c}=(0,i.retrieveMetaStructure)(n.content),d=l?.type===s.RType.Delimiter;return{type:s.RType.Parameter,location:u,special:"..."===c,lexeme:c,name:{type:s.RType.Symbol,location:u,content:c,namespace:void 0,lexeme:c,info:{fullRange:u,additionalTokens:[],fullLexeme:c}},defaultValue:d?void 0:l,info:{fullRange:u,fullLexeme:c,additionalTokens:d?[l]:[]}}};const r=n(56293),i=n(36604),o=n(57012),s=n(49375),a=n(10570)},21973:(e,t,n)=>{const r=n(65606),i=n(48287),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:l,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:d,isReadableStream:f,isWritableStream:p}=n(136),h=n(89365),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:_}}=n(68526),{destroyer:y}=n(57647),b=n(43559),v=n(23125),w=n(77221),{createDeferredPromise:E}=n(56017),S=n(40333),x=globalThis.Blob||i.Blob,R=void 0!==x?function(e){return e instanceof x}:function(e){return!1},T=globalThis.AbortController||n(25568).AbortController,{FunctionPrototypeCall:A}=n(74641);class O extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function I(e){const t=e.readable&&"function"!=typeof e.readable.read?v.wrap(e.readable):e.readable,n=e.writable;let r,i,a,l,u,c=!!o(t),d=!!s(n);function f(e){const t=l;l=null,t?t(e):e&&u.destroy(e)}return u=new O({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:c,writable:d}),d&&(h(n,(e=>{d=!1,e&&y(t,e),f(e)})),u._write=function(e,t,i){n.write(e,t)?i():r=i},u._final=function(e){n.end(),i=e},n.on("drain",(function(){if(r){const e=r;r=null,e()}})),n.on("finish",(function(){if(i){const e=i;i=null,e()}}))),c&&(h(t,(e=>{c=!1,e&&y(t,e),f(e)})),t.on("readable",(function(){if(a){const e=a;a=null,e()}})),t.on("end",(function(){u.push(null)})),u._read=function(){for(;;){const e=t.read();if(null===e)return void(a=u._read);if(!u.push(e))return}}),u._destroy=function(e,o){e||null===l||(e=new m),a=null,r=null,i=null,null===l?o(e):(l=o,y(n,e),y(t,e))},u}e.exports=function e(t,n){if(d(t))return t;if(u(t))return I({readable:t});if(c(t))return I({writable:t});if(l(t))return I({writable:!1,readable:!1});if(f(t))return I({readable:v.fromWeb(t)});if(p(t))return I({writable:w.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:n}=E();const i=new T,o=i.signal;return{value:e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:s,cb:a}=await e;if(r.nextTick(a),s)return;if(o.aborted)throw new m(void 0,{cause:o.reason});({promise:t,resolve:n}=E()),yield i}}(),{signal:o}),write(e,t,r){const i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return S(O,e,{objectMode:!0,write:i,final:o,destroy:s});const l=null==e?void 0:e.then;if("function"==typeof l){let t;const n=A(l,e,(e=>{if(null!=e)throw new _("nully","body",e)}),(e=>{y(t,e)}));return t=new O({objectMode:!0,readable:!1,write:i,final(e){o((async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}}))},destroy:s})}throw new _("Iterable, AsyncIterable or AsyncFunction",n,e)}if(R(t))return e(t.arrayBuffer());if(a(t))return S(O,t,{objectMode:!0,writable:!1});if(f(null==t?void 0:t.readable)&&p(null==t?void 0:t.writable))return O.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return I({readable:null!=t&&t.readable?u(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});const i=null==t?void 0:t.then;if("function"==typeof i){let e;return A(i,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{y(e,t)})),e=new O({objectMode:!0,writable:!1,read(){}})}throw new g(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},22140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathExpr=void 0;const r=n(53133),i=n(35459),o=n(40318),s=n(93672),a=n(52950);class l extends a.Expression{static predicateMatches(e,t){const n=e.evaluate(t);return n instanceof a.XNumber?t.contextPosition===n.numberValue:n.booleanValue}static applyLocationPath(e,t,n){if(!e)return n;const r=e.absolute?[l.getRoot(t,n)]:n;return l.applySteps(e.steps,t,r)}static applyStep(e,t,n){const a=[];switch(t.contextNode=n,e.axis){case i.Step.ANCESTOR:{if(t.contextNode===t.virtualRoot)break;let n;for(n=(0,o.isAttribute)(t.contextNode)?l.getOwnerElement(t.contextNode):t.contextNode.parentNode;null!=n&&(e.nodeTest.matches(n,t)&&a.push(n),n!==t.virtualRoot);)n=n.parentNode;break}case i.Step.ANCESTORORSELF:for(let n=t.contextNode;null!=n&&(e.nodeTest.matches(n,t)&&a.push(n),n!==t.virtualRoot);n=(0,o.isAttribute)(n)?l.getOwnerElement(n):n.parentNode);break;case i.Step.ATTRIBUTE:{const n=t.contextNode.attributes;if(null!=n)for(let r=0;r<n.length;r++){const i=n.item(r);e.nodeTest.matches(i,t)&&a.push(i)}break}case i.Step.CHILD:for(let n=t.contextNode.firstChild;null!=n;n=n.nextSibling)e.nodeTest.matches(n,t)&&a.push(n);break;case i.Step.DESCENDANT:{const n=[t.contextNode.firstChild];for(;n.length>0;)for(let r=n.pop();null!=r;)e.nodeTest.matches(r,t)&&a.push(r),null!=r.firstChild?(n.push(r.nextSibling),r=r.firstChild):r=r.nextSibling;break}case i.Step.DESCENDANTORSELF:{e.nodeTest.matches(t.contextNode,t)&&a.push(t.contextNode);const n=[t.contextNode.firstChild];for(;n.length>0;)for(let r=n.pop();null!=r;)e.nodeTest.matches(r,t)&&a.push(r),null!=r.firstChild?(n.push(r.nextSibling),r=r.firstChild):r=r.nextSibling;break}case i.Step.FOLLOWING:if(t.contextNode===t.virtualRoot)break;for(let n=t.contextNode;null!=n;n=n.parentNode)for(let r=n.nextSibling;null!=r;r=r.nextSibling)e.nodeTest.matches(r,t)&&a.push(r);break;case i.Step.FOLLOWINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(let n=t.contextNode.nextSibling;null!=n;n=n.nextSibling)e.nodeTest.matches(n,t)&&a.push(n);break;case i.Step.NAMESPACE:{const n={};if((0,o.isElement)(t.contextNode)){n.xml=r.XML_NAMESPACE_URI,n.xmlns=r.XMLNS_NAMESPACE_URI;for(let e=t.contextNode;null!=e&&(0,o.isElement)(e);e=e.parentNode)for(let t=0;t<e.attributes.length;t++){const r=e.attributes.item(t),i=String(r.name);if("xmlns"===i)void 0===n[""]&&(n[""]=r.value);else if(i.length>6&&"xmlns:"===i.substring(0,6)){const e=i.substring(6,i.length);void 0===n[e]&&(n[e]=r.value)}}for(const r in n){const i=new s.XPathNamespace(r,n[r],t.contextNode);e.nodeTest.matches(i,t)&&a.push(i)}}break}case i.Step.PARENT:{let n=null;t.contextNode!==t.virtualRoot&&(n=(0,o.isAttribute)(t.contextNode)?l.getOwnerElement(t.contextNode):t.contextNode.parentNode),null!=n&&e.nodeTest.matches(n,t)&&a.push(n);break}case i.Step.PRECEDING:if(t.contextNode===t.virtualRoot)break;for(let n=t.contextNode;null!=n;n=n.parentNode)for(let r=n.previousSibling;null!=r;r=r.previousSibling)e.nodeTest.matches(r,t)&&a.push(r);break;case i.Step.PRECEDINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(let n=t.contextNode.previousSibling;null!=n;n=n.previousSibling)e.nodeTest.matches(n,t)&&a.push(n);break;case i.Step.SELF:e.nodeTest.matches(t.contextNode,t)&&a.push(t.contextNode)}return a}static getRoot(e,t){const n=t[0];if((0,o.isDocument)(n))return n;if(e.virtualRoot)return e.virtualRoot;const r=n.ownerDocument;if(r)return r;let i=n;for(;null!=i.parentNode;)i=i.parentNode;return i}static applySteps(e,t,n){return e.reduce(((e,n)=>e.map((e=>l.applyPredicates(n.predicates,t,l.applyStep(n,t,e)))).flat()),n)}static getOwnerElement(e){return e.ownerElement?e.ownerElement:null}static applyPredicates(e,t,n){return e.reduce(((e,n)=>{const r=t.extend({contextSize:e.length});return e.filter(((e,t)=>l.predicateMatches(n,r.extend({contextNode:e,contextPosition:t+1}))))}),n)}static predicateString=e=>`[${e.toString()}]`;static predicatesString=e=>e.map(l.predicateString).join("");filter;filterPredicates;locationPath;constructor(e,t,n){super(),this.filter=e,this.filterPredicates=t,this.locationPath=n}applyFilter(e,t){if(!this.filter)return{nodes:[e.contextNode]};const n=this.filter.evaluate(e);if(!(n instanceof a.XNodeSet)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:n}}return{nodes:l.applyPredicates(this.filterPredicates||[],t,n.toUnsortedArray())}}evaluate(e){const t=e.clone(),n=this.applyFilter(e,t);if(void 0!==n.nonNodes)return n.nonNodes;const r=new a.XNodeSet;return r.addArray(l.applyLocationPath(this.locationPath,t,n.nodes)),r}toString(){if(void 0!==this.filter){const e=this.filter.toString();return this.filter instanceof a.XString?`'${e}'`:void 0!==this.filterPredicates&&this.filterPredicates.length?`(${e})`+l.predicatesString(this.filterPredicates):void 0!==this.locationPath?e+(this.locationPath.absolute?"":"/")+this.locationPath.toString():e}return void 0!==this.locationPath?this.locationPath.toString():"<Empty PathExpr>"}}t.PathExpr=l},22251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LessThanOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"}}t.LessThanOperation=i},22438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataflowLogger=void 0;const r=n(19742);t.dataflowLogger=r.log.getSubLogger({name:"dataflow"})},22452:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObjectOrArray=function(e){return"object"==typeof e},t.deepMergeObject=function e(t,n){if(!t)return n;if(!n)return t;if("object"!=typeof t||"object"!=typeof n)throw new Error("illegal types for deepMergeObject!");i(t,n);const r={...t},o=Array.isArray(t),s=Array.isArray(n);if(o||s){if(o&&s)return[...t,...n];throw new Error("cannot merge object with array!")}return function(t,n,r){for(const o of Object.keys(t))void 0!==t[o]&&("object"==typeof t[o]?r[o]=o in n?e(n[o],t[o]):t[o]:(i(r[o],t[o]),r[o]=t[o]))}(n,t,r),r},t.compactRecord=function(e){if(void 0===e)return;const t={};for(const n of Object.keys(e))void 0!==e[n]&&(t[n]=e[n]);return t};const r=n(91884);function i(e,t){if(void 0!==e&&void 0!==t&&typeof e!=typeof t)throw new Error(`cannot merge different types! ${typeof e} (${JSON.stringify(e,r.jsonReplacer)}) !== ${typeof t} (${JSON.stringify(t,r.jsonReplacer)})`)}},22476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDataflowFor=function(e,t){return t.processors[e.type](e,t)}},22660:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeIfThen=function(e,[t,n,l,u,c]){if(t.name!==s.RawRType.If)return void i.parseLog.debug("encountered non-if token for supposed if-then structure");if(n.name!==s.RawRType.ParenLeft)throw new r.ParseError(`expected left-parenthesis for if but found ${JSON.stringify(n)}`);if(u.name!==s.RawRType.ParenRight)throw new r.ParseError(`expected right-parenthesis for if but found ${JSON.stringify(u)}`);const d=(0,a.normalizeSingleNode)(e,l),f=(0,a.normalizeSingleNode)(e,c);if(d.type===s.RType.Delimiter||f.type===s.RType.Delimiter)throw new r.ParseError(`unexpected missing parts of if, received ${JSON.stringify([d,f])} for ${JSON.stringify([t,n,l,u,c])}`);const{location:p,content:h}=(0,o.retrieveMetaStructure)(t.content);return{type:s.RType.IfThenElse,condition:d,then:(0,o.ensureExpressionList)(f),location:p,lexeme:h,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(66197),i=n(56293),o=n(36604),s=n(49375),a=n(10570)},22728:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructLogger=void 0,t.reconstructToCode=function(e,n,i=l.doNotAutoSelect){t.reconstructLogger.settings.minLevel<=1&&t.reconstructLogger.trace(`reconstruct ast with ids: ${JSON.stringify([...n])}`);const o=new Set,s=(0,a.foldAstStateful)(e.ast,{selection:n,autoSelectIf:t=>{const n=i(t,e);if(n&&t.location)for(let e=t.location[0];e<=t.location[2];e++)o.add(e);return n},fullAst:e},b);return(0,r.expensiveTrace)(t.reconstructLogger,(()=>`reconstructed ast before string conversion: ${JSON.stringify(s)}`)),function(e,t){return e.length>1&&"{"===e[0].line&&"}"===e[e.length-1].line?{code:w(p(e.slice(1,e.length-1),-1)),linesWithAutoSelected:t}:{code:w(e),linesWithAutoSelected:t}}(s,o.size)};const r=n(19742),i=n(57012),o=n(49375),s=n(25377),a=n(18327),l=n(87752);function u(e){return[{line:e,indent:0}]}function c(e){return e.info.fullLexeme??e.lexeme??""}function d(e,t){return t.selection.has(e.info.id)||t.autoSelectIf(e,t.fullAst)?f(e):[]}function f(e){return u(c(e))}function p(e,t){return e.map((({line:e,indent:n})=>({line:e,indent:n+t})))}function h(e,t){return e.selection.has(t.info.id)||e.autoSelectIf(t,e.fullAst)}function m(e,t,n,r){return 0===t.length&&0===n.length?h(r,e)?u(c(e)):[]:0===t.length?n:0===n.length?h(r,e)?u(c(e)):t:function(e,t,n){return[...e.slice(0,e.length-1),{line:`${e[e.length-1].line} ${t} ${n[0].line}`,indent:0},...p(n.slice(1,n.length),1)]}(t,e.type===o.RType.Pipe?"|>":e.operator,n)}function g(e,t,n){return 0===t.length?[{line:`${e.line}${n}`,indent:e.indent}]:1===t.length?[{line:`${e.line} ${t[0].line}`,indent:e.indent}]:"{"===t[0].line&&"}"===t[t.length-1].line?[{line:`${e.line} {`,indent:e.indent},...t.slice(1,t.length-1),{line:"}",indent:e.indent}]:[e,...p(t,1)]}function _(e){return e.map((e=>void 0!==e.defaultValue?`${c(e.name)}=${c(e.defaultValue)}`:c(e)))}function y(e){return e!==s.EmptyArgument}t.reconstructLogger=r.log.getSubLogger({name:"reconstruct"});const b={down:(e,t)=>t,foldNumber:d,foldString:d,foldLogical:d,foldSymbol:d,foldAccess:function(e,t,n){return 0===t.length?n.filter(y).flat():n.every((e=>e===s.EmptyArgument||0===e.length))?t:u(c(e))},foldBinaryOp:m,foldPipe:m,foldUnaryOp:function(e,t,n){return n.selection.has(e.info.id)?f(e):0===t.length?[]:f(e)},other:{foldComment:d,foldLineDirective:d},loop:{foldFor:function(e,t,n,r,i){return h(i,e)||0!==t.length||0!==n.length?0===r.length&&0===t.length&&0===n.length?[]:r.length<=1?[{line:`for(${c(e.variable)} in ${c(e.vector)}) ${0===r.length?"{}":r[0].line}`,indent:0}]:"{"===r[0].line&&"}"===r[r.length-1].line?[{line:`for(${c(e.variable)} in ${c(e.vector)}) {`,indent:0},...r.slice(1,r.length-1),{line:"}",indent:0}]:[{line:`for(${c(e.variable)} in ${c(e.vector)})`,indent:0},...p(r,1)]:r},foldRepeat:function(e,t,n){return h(n,e)?g({line:"repeat",indent:0},t,"{}"):t},foldWhile:function(e,t,n,r){return h(r,e)||0!==t.length?0===n.length&&0===t.length?[]:n.length<=1?[{line:`while(${c(e.condition)}) ${0===n.length?"{}":n[0].line}`,indent:0}]:"{"===n[0].line&&"}"===n[n.length-1].line?[{line:`while(${c(e.condition)}) {`,indent:0},...n.slice(1,n.length-1),{line:"}",indent:0}]:[{line:`while(${c(e.condition)})`,indent:0},...p(n,1)]:n},foldBreak:d,foldNext:d},foldIfThenElse:function(e,t,n,r,i){if(r??=[],0===n.length&&0===r.length)return h(i,e)?[{line:`if(${c(e.condition)}) { }`,indent:0}]:t.length>0?t:[];if(0===r.length)return h(i,e)?g({line:`if(${c(e.condition)})`,indent:0},n,"{}"):n;if(0===n.length)return h(i,e)?g({line:`if(${c(e.condition)}) { } else`,indent:0},n,"{}"):r;{const t=p(n.slice(1),1);return t.length>0&&(t[t.length-1].line.trim().endsWith("else")||(t[t.length-1].line+=" else ")),[{line:`if(${c(e.condition)}) ${n[0].line} ${1===n.length?"else":""}`,indent:0},...t,{line:`${r[0].line}`,indent:0},...p(r.splice(1),1)]}},foldExprList:function(e,t,n,r){const i=n.filter((e=>e.length>0));if(0===i.length)return h(r,e)?u("{}"):[];if(1===i.length){if(!h(r,e))return i[0];const[t]=i,n=e.grouping;if(n&&t.length>0){const e=n[0].content,r=n[1].content;t[0].line=`${e}${"{"===e?" ":""}${t[0].line}`,t[t.length-1].line=`${t[t.length-1].line}${"}"===r?" ":""}${r}`}return t}{const t=e.grouping;return[...u(t?t[0].content:"{"),...p(i.flat(),1),...u(t?t[1].content:"}")]}},functions:{foldFunctionDefinition:function(e,t,n,r){if(t.every((e=>0===e.length))){const t=void 0===n||0===n.length,i=h(r,e);if(t&&i)return u(`${e.lexeme}(${_(e.parameters).join(", ")}) { }`);if(!i)return n}const i=_(e.parameters).join(", ");if(n.length<=1){const t=0===n.length?"{ }":`${n[0].line}`;return[{line:`${e.lexeme}(${i}) ${t}`,indent:0}]}return[{line:`${e.lexeme}(${i}) ${n[0].line}`,indent:0},...n.slice(1)]},foldFunctionCall:function(e,t,n,r){const o=h(r,e);if(!o){const e=n.filter((e=>e!==s.EmptyArgument&&0!==e.length));if(0===e.length)return[];if(1===e.length)return e[0]}if(!0===e.infixSpecial)return function(e,t){(0,i.guard)(2===e.length,(()=>`infix special call must have exactly two arguments, got: ${e.length} (${JSON.stringify(e)})`)),(0,i.guard)(t.named,`infix special call must be named, got: ${t.named}`);const[n,r]=e;if(!(void 0!==n&&0!==n.length||void 0!==r&&0!==r.length))return[];if(n!==s.EmptyArgument&&n.length>0){const e=n.map((e=>`${v(e.indent)}${e.line}`)).join("\n");if(r!==s.EmptyArgument&&r.length>0){const n=r.map((e=>`${v(e.indent)}${e.line}`)).join("\n");return u(`${e} ${t.functionName.content} ${n}`)}return u(e)}return u(`${c(t.arguments[0])} ${t.functionName.content} ${c(t.arguments[1])}`)}(n,e);if(e.named&&o)return u(c(e));const a=n.filter((e=>void 0!==e&&e.length>0));if(0===t.length&&0===a.length)return[];if(0===n.length){(0,i.guard)(t.length>0,`without args, we need the function name to be present! got: ${JSON.stringify(t)}`);const n=t[t.length-1];return e.named||n.line.endsWith(")")||(t[0].line=`(${t[0].line}`,n.line+=")"),n.line+="()",t}return u(c(e))},foldParameter:function(e,t,n,r){return h(r,e)?u(c(e)):void 0!==e.defaultValue&&t.length>0?u(`${c(e.name)}=${c(e.defaultValue)}`):void 0!==e.defaultValue&&0===t.length?n??[]:t},foldArgument:function(e,t,n){return void 0!==e.name&&void 0!==t&&t.length>0?u(`${c(e.name)}=${e.value?c(e.value):""}`):n??[]}}};function v(e){return" ".repeat(4*e)}function w(e,t="\n"){return e.map((({line:e,indent:t})=>`${v(t)}${e}`)).join(t)}},23125:(e,t,n)=>{"use strict";const r=n(65606),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:l,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:d,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:h,Symbol:m}=n(74641);e.exports=H,H.ReadableState=G;const{EventEmitter:g}=n(37007),{Stream:_,prependListener:y}=n(80334),{Buffer:b}=n(48287),{addAbortSignal:v}=n(30810),w=n(89365);let E=n(56017).debuglog("stream",(e=>{E=e}));const S=n(85586),x=n(57647),{getHighWaterMark:R,getDefaultHighWaterMark:T}=n(13920),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_OUT_OF_RANGE:N,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$},AbortError:C}=n(68526),{validateObject:M}=n(2224),k=m("kPaused"),{StringDecoder:j}=n(66600),L=n(40333);c(H.prototype,_.prototype),c(H,_);const F=()=>{},{errorOrDestroy:D}=x,B=1,U=16,q=32,V=2048,z=4096;function W(e){return{enumerable:!1,get(){return!!(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function G(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(43559)),this.state=V|z|U|q,e&&e.objectMode&&(this.state|=B),r&&e&&e.readableObjectMode&&(this.state|=B),this.highWaterMark=e?R(this,e,"readableHighWaterMark",r):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[k]=null,e&&!1===e.emitClose&&(this.state&=~V),e&&!1===e.autoDestroy&&(this.state&=~z),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new j(e.encoding),this.encoding=e.encoding)}function H(e){if(!(this instanceof H))return new H(e);const t=this instanceof n(43559);this._readableState=new G(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&v(e.signal,this)),_.call(this,e),x.construct(this,(()=>{this._readableState.needReadable&&K(this,this._readableState)}))}function J(e,t,n,r){E("readableAddChunk",t);const i=e._readableState;let o;if(i.state&B||("string"==typeof t?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=b.from(t,n).toString(i.encoding):(t=b.from(t,n),n=""))):t instanceof b?n="":_._isUint8Array(t)?(t=_._uint8ArrayToBuffer(t),n=""):null!=t&&(o=new O("chunk",["string","Buffer","Uint8Array"],t))),o)D(e,o);else if(null===t)i.state&=-9,function(e,t){if(E("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Y(e):(t.needReadable=!1,t.emittedReadable=!0,Z(e))}}(e,i);else if(i.state&B||t&&t.length>0)if(r)if(4&i.state)D(e,new $);else{if(i.destroyed||i.errored)return!1;Q(e,i,t,!0)}else if(i.ended)D(e,new P);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?Q(e,i,t,!1):K(e,i)):Q(e,i,t,!1)}else r||(i.state&=-9,K(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Q(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),64&t.state&&Y(e)),K(e,t)}function X(e,t){return e<=0||0===t.length&&t.ended?0:t.state&B?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Y(e){const t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(Z,e))}function Z(e){const t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function K(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(E("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[k]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ne(e){E("readable nexttick read 0"),e.read(0)}function re(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=H.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=F;function i(t){this===e?(r(),r=F):r=t}e.on("readable",i);const o=w(e,{writable:!1},(e=>{n=e?A(n,e):null,r(),r=F}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(i)}}}catch(e){throw n=A(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",i),o()):x.destroyer(e,null)}}(e,t);return n.stream=e,n}function se(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function ae(e){const t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(le,t,e))}function le(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(ue,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function ue(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ce;function de(){return void 0===ce&&(ce={}),ce}l(G.prototype,{objectMode:W(B),ended:W(2),endEmitted:W(4),reading:W(8),constructed:W(U),sync:W(q),needReadable:W(64),emittedReadable:W(128),readableListening:W(256),resumeScheduled:W(512),errorEmitted:W(1024),emitClose:W(V),autoDestroy:W(z),destroyed:W(8192),closed:W(16384),closeEmitted:W(32768),multiAwaitDrain:W(65536),readingMore:W(1<<17),dataEmitted:W(1<<18)}),H.prototype.destroy=x.destroy,H.prototype._undestroy=x.undestroy,H.prototype._destroy=function(e,t){t(e)},H.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},H.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new C,this.destroy(e)),new d(((t,n)=>w(this,(r=>r&&r!==e?n(r):t(null)))))},H.prototype.push=function(e,t){return J(this,e,t,!1)},H.prototype.unshift=function(e,t){return J(this,e,t,!0)},H.prototype.isPaused=function(){const e=this._readableState;return!0===e[k]||!1===e.flowing},H.prototype.setEncoding=function(e){const t=new j(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this},H.prototype.read=function(e){E("read",e),void 0===e?e=NaN:o(e)||(e=a(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new N("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ae(this):Y(this),null;if(0===(e=X(e,t))&&t.ended)return 0===t.length&&ae(this),null;let r,i=!!(64&t.state);if(E("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,E("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,E("reading, ended or constructing",i);else if(i){E("do read"),t.state|=8|q,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){D(this,e)}t.state&=~q,t.reading||(e=X(n,t))}return r=e>0?se(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ae(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},H.prototype._read=function(e){throw new I("_read()")},H.prototype.pipe=function(e,t){const n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new f(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),E("pipe count=%d opts=%j",i.pipes.length,t);const o=t&&!1===t.end||e===r.stdout||e===r.stderr?m:s;function s(){E("onend"),e.end()}let a;i.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",(function t(r,o){E("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,E("cleanup"),e.removeListener("close",p),e.removeListener("finish",h),a&&e.removeListener("drain",a),e.removeListener("error",d),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",c),l=!0,a&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&a())}));let l=!1;function u(){l||(1===i.pipes.length&&i.pipes[0]===e?(E("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(E("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),a||(a=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(E("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(E("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",a))}function c(t){E("ondata");const n=e.write(t);E("dest.write",n),!1===n&&u()}function d(t){if(E("onerror",t),m(),e.removeListener("error",d),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?D(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",h),m()}function h(){E("onfinish"),e.removeListener("close",p),m()}function m(){E("unpipe"),n.unpipe(e)}return n.on("data",c),y(e,"error",d),e.once("close",p),e.once("finish",h),e.emit("pipe",n),!0===e.writableNeedDrain?u():i.flowing||(E("pipe resume"),n.resume()),e},H.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=i(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},H.prototype.on=function(e,t){const n=_.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,E("on readable",i.length,i.reading),i.length?Y(this):i.reading||r.nextTick(ne,this))),n},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(e,t){const n=_.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(te,this),n},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(e){const t=_.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(te,this),t},H.prototype.resume=function(){const e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(re,e,t))}(this,e)),e[k]=!1,this},H.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[k]=!0,this},H.prototype.wrap=function(e){let t=!1;e.on("data",(n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{D(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=u(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},H.prototype[h]=function(){return oe(this)},H.prototype.iterator=function(e){return void 0!==e&&M(e,"options"),oe(this,e)},l(H.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[k]},set(e){this[k]=!!e}}}),H._fromList=se,H.from=function(e,t){return L(H,e,t)},H.fromWeb=function(e,t){return de().newStreamReadableFromReadableStream(e,t)},H.toWeb=function(e,t){return de().newReadableStreamFromStreamReadable(e,t)},H.wrap=function(e,t){var n,r;return new H({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){x.destroyer(e,t),n(t)}}).wrap(e)}},23196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationPath=void 0,t.LocationPath=class{absolute;steps;constructor(e,t){this.absolute=e,this.steps=t}toString(){return(this.absolute?"/":"")+this.steps.map((e=>e.toString())).join("/")}}},23310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATIC_DATAFLOW=void 0;const r=n(23644),i=n(32066),o=n(82856),s={name:"dataflow",description:"Construct the dataflow graph",executed:0,printer:{0:r.internalPrinter,2:i.dataflowGraphToJson,5:i.dataflowGraphToQuads,3:i.dataflowGraphToMermaid,4:i.dataflowGraphToMermaidUrl},dependencies:["normalize"]};t.STATIC_DATAFLOW={...s,humanReadableName:"dataflow",processor:function(e,t){return(0,o.produceDataFlowGraph)(t.parser,t.request,e.normalize)},requiredInput:{}}},23644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.internalPrinter=function(e){return e},t.printStepResult=function(e,t,n,...i){const o=e.printer[n];return(0,r.guard)(void 0!==o,`printer for ${e.name} does not support ${String(n)}`),o(t,...i)};const r=n(57012)},24088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processSymbol=function(e,t){return e.content===i.RNull||e.content===i.RNa?(0,r.processValue)(e,t):{unknownReferences:[{nodeId:e.info.id,name:e.content,controlDependencies:t.controlDependencies,type:a.ReferenceType.Unknown}],in:[],out:[],environment:t.environment,graph:new o.DataflowGraph(t.completeAst.idMap).addVertex({tag:s.VertexType.Use,id:e.info.id,controlDependencies:t.controlDependencies}),entryPoint:e.info.id,exitPoints:[{nodeId:e.info.id,type:0,controlDependencies:t.controlDependencies}]}};const r=n(27999),i=n(48060),o=n(60347),s=n(18841),a=n(46044)},24493:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).patch},24860:()=>{},25018:(e,t,n)=>{"use strict";const{ArrayPrototypePop:r,Promise:i}=n(74641),{isIterable:o,isNodeStream:s,isWebStream:a}=n(136),{pipelineImpl:l}=n(28431),{finished:u}=n(89365);n(42825),e.exports={finished:u,pipeline:function(...e){return new i(((t,n)=>{let i,u;const c=e[e.length-1];if(c&&"object"==typeof c&&!s(c)&&!o(c)&&!a(c)){const t=r(e);i=t.signal,u=t.end}l(e,((e,r)=>{e?n(e):t(r)}),{signal:i,end:u})}))}}},25200:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<=0},25377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyArgument=void 0,t.EmptyArgument="<>"},25568:e=>{"use strict";const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},25767:(e,t,n)=>{"use strict";var r=n(82682),i=n(39209),o=n(10487),s=n(36556),a=n(75795),l=s("Object.prototype.toString"),u=n(49092)(),c="undefined"==typeof globalThis?n.g:globalThis,d=i(),f=s("String.prototype.slice"),p=Object.getPrototypeOf,h=s("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},m={__proto__:null};r(d,u&&a&&p?function(e){var t=new c[e];if(Symbol.toStringTag in t){var n=p(t),r=a(n,Symbol.toStringTag);if(!r){var i=p(n);r=a(i,Symbol.toStringTag)}m["$"+e]=o(r.get)}}:function(e){var t=new c[e],n=t.slice||t.set;n&&(m["$"+e]=o(n))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u){var t=f(l(e),8,-1);return h(d,t)>-1?t:"Object"===t&&function(e){var t=!1;return r(m,(function(n,r){if(!t)try{n(e),t=f(r,1)}catch(e){}})),t}(e)}return a?function(e){var t=!1;return r(m,(function(n,r){if(!t)try{"$"+n(e)===r&&(t=f(r,1))}catch(e){}})),t}(e):null}},26345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowrFilterCombinator=t.FlowrFilters=t.ValidFlowrFiltersReverse=t.ValidFlowrFilters=t.FlowrFilter=void 0,t.binaryTreeToString=function(e){const t=l(e,0);return t.startsWith("(")&&t.endsWith(")")?t.slice(1,-1):t},t.isBinaryTree=function(e){return"object"==typeof e&&null!==e&&"tree"in e},t.evalFilter=function(e,t){return c(s.is(e).get(),t)};const r=n(49375),i=n(18841);var o;!function(e){e.DropEmptyArguments="drop-empty-arguments"}(o||(t.FlowrFilter=o={})),t.ValidFlowrFilters=new Set(Object.values(o)),t.ValidFlowrFiltersReverse=Object.fromEntries(Object.entries(o).map((([e,t])=>[t,e]))),t.FlowrFilters={[o.DropEmptyArguments]:e=>e.type!==r.RType.Argument||void 0!==e.name};class s{tree;constructor(e){this.tree=this.unpack(e)}static is(e){if("object"==typeof e)return new this(e);if(r.ValidRTypes.has(e))return new this({type:"r-type",value:e});if(i.ValidVertexTypes.has(e))return new this({type:"vertex-type",value:e});if(t.ValidFlowrFilters.has(e))return new this({type:"special",value:e});throw new Error(`Invalid filter value: ${e}`)}and(e){return this.binaryRight("and",e)}or(e){return this.binaryRight("or",e)}xor(e){return this.binaryRight("xor",e)}binaryRight(e,t){return this.tree={type:e,left:this.tree,right:this.unpack(s.is(t))},this}not(){return this.unary("not")}unary(e){return this.tree={type:e,operand:this.tree},this}unpack(e){return e instanceof s?e.tree:e}get(){return this.tree}}t.FlowrFilterCombinator=s;const a={and:"∧",or:"∨",xor:"⊕",not:"¬"};function l(e,t){if("r-type"===e.type||"vertex-type"===e.type||"special"===e.type)return e.value;if("not"===e.type)return`${a[e.type]}${l(e.operand,t)}`;const n=l(e.left,t+1),r=l(e.right,t+1);return`(${n} ${a[e.type]} ${r})`}const u={and:({left:e,right:t},n)=>c(e,n)&&c(t,n),or:({left:e,right:t},n)=>c(e,n)||c(t,n),xor:({left:e,right:t},n)=>c(e,n)!==c(t,n),not:({operand:e},t)=>!c(e,t),"r-type":({value:e},{node:t})=>t.type===e,"vertex-type":({value:e},{dataflow:{graph:t},node:n})=>t.getVertex(n.info.id)?.tag===e,special:({value:e},{node:n})=>{const r=t.FlowrFilters[e];if(r)return r(n);throw new Error(`Special filter not implemented: ${e}`)}};function c(e,t){return u[e.type](e,t)}},26481:(e,t)=>{"use strict";function n(e){let t=1;for(const r of e.children)t+=n(r);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseRequests=async function(e,t){const r=Array.isArray(t.request)?t.request[0]:t.request;if(t.parser?.async){const e=await t.parser.parse(r);return{parsed:e,".parse-meta":"object"==typeof e&&"rootNode"in e?{tokenCount:n(e.rootNode)}:void 0}}{const e=t.parser.parse(r);return{parsed:e,".parse-meta":"object"==typeof e&&"rootNode"in e?{tokenCount:n(e.rootNode)}:void 0}}}},26954:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeUnary=function(e,[t,n]){return(0,s.expensiveTrace)(r.parseLog,(()=>`unary op for ${t.name} ${n.name}`)),a.UnaryOperatorsInRAst.has(t.name)?function(e,t,n){const r=(0,l.normalizeSingleNode)(e,n);(0,o.guard)(r.type!==u.RType.Delimiter,"unexpected under-sided unary op");const s=(0,i.retrieveOpName)(t),{location:a,content:c}=(0,i.retrieveMetaStructure)(t.content);return{type:u.RType.UnaryOp,location:a,operator:s,lexeme:c,operand:r,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}}(e,t,n):void 0};const r=n(56293),i=n(36604),o=n(57012),s=n(19742),a=n(19154),l=n(10570),u=n(49375)},27402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.happensBefore=function(e,t,n){const i=new Set,o=[[n,void 0]];for(;o.length>0;){const[n,s]=o.pop();let a=s;if(n===t)return s?r.Ternary.Maybe:r.Ternary.Always;if(!i.has(n)){s&&(n===s||i.has(s))&&(a=void 0),i.add(n);for(const[t,r]of e.outgoing(n)??[]){const e="CD"===r.label?`${r.caused}-exit`:a;o.push([t,a??e])}}}return r.Ternary.Never};const r=n(95758)},27454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAndEndsWith=function(e,t){return e.startsWith(t)&&e.endsWith(t)},t.withoutWhitespace=function(e){return e.replace(/\s/g,"")},t.longestCommonPrefix=function(e){if(0===e.length)return"";let t=e[0];for(const n of e){if(0===t.length)break;let e=0;for(;e<t.length&&t[e]===n[e];)e++;e!==t.length&&(t=t.slice(0,e))}return t},t.joinWithLast=function(e,{join:t=", ",last:n=", and ",joinTwo:r=" and "}={}){return e.length<=1?e.join(""):2===e.length?e.join(r):e.slice(0,-1).join(t)+n+e[e.length-1]}},27787:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.showRepl=function(e,t){const n=new a.EventEmitter,r=new c.Stream.Readable({read(){}}),i=new c.Stream.Writable({write(e,t,r){n.fire(e.toString()),r()}});a.window.createTerminal({name:"flowr REPL",pty:{onDidWrite:n.event,open:()=>{t.runRepl({allowRSessionAccess:!0,history:[],output:{formatter:l.ansiFormatter,stdout(e){n.fire(e.replaceAll("\n","\r\n")+"\r\n")},stderr(e){n.fire(e.replaceAll("\n","\r\n")+"\r\n")}},rl:u.createInterface({input:r,output:i,tabSize:4,terminal:!0,history:[],removeHistoryDuplicates:!0,completer:d.replCompleter})})},close:()=>{},handleInput:e=>{r.push(e)}}}).show()};const a=s(n(91398)),l=n(77529),u=s(n(99299)),c=n(88310),d=n(42995)},27999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processValue=function(e,t){return{unknownReferences:[],in:[{nodeId:e.info.id,name:void 0,controlDependencies:t.controlDependencies,type:o.ReferenceType.Constant}],out:[],environment:t.environment,graph:new r.DataflowGraph(t.completeAst.idMap).addVertex({tag:i.VertexType.Value,id:e.info.id,controlDependencies:t.controlDependencies}),exitPoints:[{nodeId:e.info.id,type:0,controlDependencies:t.controlDependencies}],entryPoint:e.info.id}};const r=n(60347),i=n(18841),o=n(46044)},28075:()=>{},28333:()=>{},28431:(e,t,n)=>{const r=n(65606),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:s,SymbolDispose:a}=n(74641),l=n(89365),{once:u}=n(56017),c=n(57647),d=n(43559),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:y}=n(68526),{validateFunction:b,validateAbortSignal:v}=n(2224),{isIterable:w,isReadable:E,isReadableNodeStream:S,isNodeStream:x,isTransformStream:R,isWebStream:T,isReadableStream:A,isReadableFinished:O}=n(136),I=globalThis.AbortController||n(25568).AbortController;let N,P,$;function C(e,t,n){let r=!1;return e.on("close",(()=>{r=!0})),{destroy:t=>{r||(r=!0,c.destroyer(e,t||new g("pipe")))},cleanup:l(e,{readable:t,writable:n},(e=>{r=!e}))}}function M(e){if(w(e))return e;if(S(e))return async function*(e){P||(P=n(23125)),yield*P.prototype[s].call(e)}(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function k(e,t,n,{end:r}){let i,s=null;const a=e=>{if(e&&(i=e),s){const e=s;s=null,e()}},u=()=>new o(((e,t)=>{i?t(i):s=()=>{i?t(i):e()}}));t.on("drain",a);const c=l(t,{readable:!1},a);try{t.writableNeedDrain&&await u();for await(const n of e)t.write(n)||await u();r&&(t.end(),await u()),n()}catch(e){n(i!==e?f(i,e):e)}finally{c(),t.off("drain",a)}}async function j(e,t,n,{end:r}){R(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch((()=>{}));await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function L(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new m("streams");const s=new I,l=s.signal,u=null==o?void 0:o.signal,c=[];function f(){B(new y)}let g,_,b;v(u,"options.signal"),$=$||n(56017).addAbortListener,u&&(g=$(u,f));const O=[];let P,L=0;function D(e){B(e,0==--L)}function B(e,n){var i;if(!e||_&&"ERR_STREAM_PREMATURE_CLOSE"!==_.code||(_=e),_||n){for(;O.length;)O.shift()(_);null===(i=g)||void 0===i||i[a](),s.abort(),n&&(_||c.forEach((e=>e())),r.nextTick(t,_,b))}}for(let z=0;z<e.length;z++){const W=e[z],G=z<e.length-1,H=z>0,J=G||!1!==(null==o?void 0:o.end),Q=z===e.length-1;if(x(W)){if(J){const{destroy:X,cleanup:Y}=C(W,G,H);O.push(X),E(W)&&Q&&c.push(Y)}function U(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&D(e)}W.on("error",U),E(W)&&Q&&c.push((()=>{W.removeListener("error",U)}))}if(0===z)if("function"==typeof W){if(P=W({signal:l}),!w(P))throw new h("Iterable, AsyncIterable or Stream","source",P)}else P=w(W)||S(W)||R(W)?W:d.from(W);else if("function"==typeof W){var q;if(P=R(P)?M(null===(q=P)||void 0===q?void 0:q.readable):M(P),P=W(P,{signal:l}),G){if(!w(P,!0))throw new h("AsyncIterable",`transform[${z-1}]`,P)}else{var V;N||(N=n(62091));const Z=new N({objectMode:!0}),K=null===(V=P)||void 0===V?void 0:V.then;if("function"==typeof K)L++,K.call(P,(e=>{b=e,null!=e&&Z.write(e),J&&Z.end(),r.nextTick(D)}),(e=>{Z.destroy(e),r.nextTick(D,e)}));else if(w(P,!0))L++,k(P,Z,D,{end:J});else{if(!A(P)&&!R(P))throw new h("AsyncIterable or Promise","destination",P);{const ne=P.readable||P;L++,k(ne,Z,D,{end:J})}}P=Z;const{destroy:ee,cleanup:te}=C(P,!1,!0);O.push(ee),Q&&c.push(te)}}else if(x(W)){if(S(P)){L+=2;const re=F(P,W,D,{end:J});E(W)&&Q&&c.push(re)}else if(R(P)||A(P)){const ie=P.readable||P;L++,k(ie,W,D,{end:J})}else{if(!w(P))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);L++,k(P,W,D,{end:J})}P=W}else if(T(W)){if(S(P))L++,j(M(P),W,D,{end:J});else if(A(P)||w(P))L++,j(P,W,D,{end:J});else{if(!R(P))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);L++,j(P.readable,W,D,{end:J})}P=W}else P=d.from(W)}return(null!=l&&l.aborted||null!=u&&u.aborted)&&r.nextTick(f),P}function F(e,t,n,{end:i}){let o=!1;if(t.on("close",(()=>{o||n(new _)})),e.pipe(t,{end:!1}),i){function s(){o=!0,t.end()}O(e)?r.nextTick(s):e.once("end",s)}else n();return l(e,{readable:!0,writable:!1},(t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)})),l(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:L,pipeline:function(...e){return L(e,u(function(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},29549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryStarCommand=t.queryCommand=void 0;const r=n(6777),i=n(72814),o=n(16007),s=n(77529),a=n(68613),l=n(49144),u=n(91884),c=n(5350);function d(e){e.stderr(`Format: ${(0,s.italic)(':query "<query>" <code>',e.formatter)}`),e.stdout("The query is an array of query objects to represent multiple queries. Each query object may have the following properties:"),e.stdout((0,a.describeSchema)((0,l.AnyQuerySchema)(),e.formatter)),e.stdout(`\n\nThe example ${(0,s.italic)(':query "[{\\"type\\": \\"call-context\\", \\"callName\\": \\"mean\\" }]" mean(1:10)',e.formatter)} would return the call context of the mean function.`),e.stdout("As a convenience, we interpret any (non-help, non-@) string not starting with '[' as a regex for the simple call-context query."),e.stdout(`Hence, ${(0,s.italic)(':query "mean" mean(1:10)',e.formatter)} is equivalent to the above example.`),e.stdout("Similarly, '@<type>' is interpreted as a query of the given type."),e.stdout(`With this, ${(0,s.italic)(":query @config",e.formatter)} prints the result of the config query.`)}async function f(e,t,n){const s=(0,o.splitAtEscapeSensitive)(e),a=s.shift();if(!a)return void n.stderr("No query provided, use ':query help' to get more information.");if("help"===a)return void d(n);let u=[];if(a.startsWith("@")){u=[{type:a.slice(1)}];const e=(0,l.QueriesSchema)().validate(u);if(e.error)return n.stderr(`Invalid query: ${e.error.message}`),void d(n)}else if(a.startsWith("[")){u=JSON.parse(a);const e=(0,l.QueriesSchema)().validate(u);if(e.error)return n.stderr(`Invalid query: ${e.error.message}`),void d(n)}else u=[{type:"call-context",callName:a}];const c=await async function(e,t){return await(0,r.createDataflowPipeline)(e,{request:(0,i.requestFromInput)(t.trim())}).allRemainingSteps()}(t,s.join(" "));return{query:(0,l.executeQueries)({dataflow:c.dataflow,ast:c.normalize},u),processed:c}}t.queryCommand={description:`Query the given R code, start with '${i.fileProtocol}' to indicate a file. The query is to be a valid query in json format (use 'help' to get more information).`,usageExample:':query "<query>" <code>',aliases:[],script:!1,fn:async(e,t,n)=>{const r=Date.now(),i=await f(n,t,e),o=Date.now();i&&e.stdout((0,c.asciiSummaryOfQueryResult)(s.ansiFormatter,o-r,i.query,i.processed))}},t.queryStarCommand={description:"Similar to query, but returns the output in json format.",usageExample:":query* <query> <code>",aliases:[],script:!1,fn:async(e,t,n)=>{const r=await f(n,t,e);r&&e.stdout(JSON.stringify(r.query,u.jsonReplacer))}}},29591:()=>{},29828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardReplOutput=void 0;const r=n(77529);t.standardReplOutput={formatter:r.formatter,stdout:console.log,stderr:console.error}},29942:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cfgToMermaid=i,t.cfgToMermaidUrl=function(e,t,n=""){return(0,r.mermaidCodeToUrl)(i(e,t,n))};const r=n(19339);function i(e,t,n=""){let i=n+"flowchart TD\n";for(const[n,s]of e.graph.vertices()){const e=(o=t.idMap.get(n))?o.info.fullLexeme??o.lexeme??"<unknown>":"";e.length>0?i+=`    n${n}["\`${(0,r.escapeMarkdown)(s.name)} (${n})\n${(0,r.escapeMarkdown)(JSON.stringify(e))}\`"]\n`:i+=String(n).endsWith("-exit")?`    n${n}((${n}))\n`:`    n${n}[[${n}]]\n`}var o;for(const[t,n]of e.graph.edges())for(const[e,o]of n){const n="CD"===o.label?"--\x3e":"-.->",s="CD"===o.label?` (${o.when})`:"";i+=`    n${t} ${n}|"${(0,r.escapeMarkdown)(o.label)}${s}"| n${e}\n`}for(const t of e.entryPoints)i+=`    style n${t} stroke:cyan,stroke-width:6.5px;`;for(const t of e.exitPoints)i+=`    style n${t} stroke:green,stroke-width:6.5px;`;return i}},30041:(e,t,n)=>{"use strict";var r=n(30655),i=n(58068),o=n(69675),s=n(75795);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],d=!!s&&s(e,t);if(r)r(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===a&&d?d.enumerable:!a,value:n,writable:null===l&&d?d.writable:!l});else{if(!c&&(a||l||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},30144:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},30348:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLogger=t.Runtime=void 0;const o=n(6724),s=n(30905),a=n(44400),l=n(31428);t.Runtime=l.default,i(n(92721),t),t.BaseLogger=class{constructor(e,t,n=4){this.logObj=t,this.stackDepthLevel=n,this.runtime=l.default,this.settings={type:e?.type??"pretty",name:e?.name,parentNames:e?.parentNames,minLevel:e?.minLevel??0,argumentsArrayName:e?.argumentsArrayName,hideLogPositionForProduction:e?.hideLogPositionForProduction??!1,prettyLogTemplate:e?.prettyLogTemplate??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}\t{{logLevelName}}\t{{filePathWithLine}}{{nameWithDelimiterPrefix}}\t",prettyErrorTemplate:e?.prettyErrorTemplate??"\n{{errorName}} {{errorMessage}}\nerror stack:\n{{errorStack}}",prettyErrorStackTemplate:e?.prettyErrorStackTemplate??"  • {{fileName}}\t{{method}}\n\t{{filePathWithLine}}",prettyErrorParentNamesSeparator:e?.prettyErrorParentNamesSeparator??":",prettyErrorLoggerNameDelimiter:e?.prettyErrorLoggerNameDelimiter??"\t",stylePrettyLogs:e?.stylePrettyLogs??!0,prettyLogTimeZone:e?.prettyLogTimeZone??"UTC",prettyLogStyles:e?.prettyLogStyles??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:e?.prettyInspectOptions??{colors:!0,compact:!1,depth:1/0},metaProperty:e?.metaProperty??"_meta",maskPlaceholder:e?.maskPlaceholder??"[***]",maskValuesOfKeys:e?.maskValuesOfKeys??["password"],maskValuesOfKeysCaseInsensitive:e?.maskValuesOfKeysCaseInsensitive??!1,maskValuesRegEx:e?.maskValuesRegEx,prefix:[...e?.prefix??[]],attachedTransports:[...e?.attachedTransports??[]],overwrite:{mask:e?.overwrite?.mask,toLogObj:e?.overwrite?.toLogObj,addMeta:e?.overwrite?.addMeta,addPlaceholders:e?.overwrite?.addPlaceholders,formatMeta:e?.overwrite?.formatMeta,formatLogObj:e?.overwrite?.formatLogObj,transportFormatted:e?.overwrite?.transportFormatted,transportJSON:e?.overwrite?.transportJSON}}}log(e,t,...n){if(e<this.settings.minLevel)return;const r=[...this.settings.prefix,...n],i=null!=this.settings.overwrite?.mask?this.settings.overwrite?.mask(r):null!=this.settings.maskValuesOfKeys&&this.settings.maskValuesOfKeys.length>0?this._mask(r):r,o=null!=this.logObj?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,s=null!=this.settings.overwrite?.toLogObj?this.settings.overwrite?.toLogObj(i,o):this._toLogObj(i,o),a=null!=this.settings.overwrite?.addMeta?this.settings.overwrite?.addMeta(s,e,t):this._addMetaToLogObj(s,e,t);let l,u;return null!=this.settings.overwrite?.formatMeta&&(l=this.settings.overwrite?.formatMeta(a?.[this.settings.metaProperty])),null!=this.settings.overwrite?.formatLogObj&&(u=this.settings.overwrite?.formatLogObj(i,this.settings)),"pretty"===this.settings.type&&(l=l??this._prettyFormatLogObjMeta(a?.[this.settings.metaProperty]),u=u??this.runtime.prettyFormatLogObj(i,this.settings)),null!=l&&null!=u?null!=this.settings.overwrite?.transportFormatted?this.settings.overwrite?.transportFormatted(l,u.args,u.errors,this.settings):this.runtime.transportFormatted(l,u.args,u.errors,this.settings):null!=this.settings.overwrite?.transportJSON?this.settings.overwrite?.transportJSON(a):"hidden"!==this.settings.type&&this.runtime.transportJSON(a),null!=this.settings.attachedTransports&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach((e=>{e(a)})),a}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){const n={...this.settings,...e,parentNames:null!=this.settings?.parentNames&&null!=this.settings?.name?[...this.settings.parentNames,this.settings.name]:null!=this.settings?.name?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...e?.prefix??[]]};return new this.constructor(n,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=!0!==this.settings.maskValuesOfKeysCaseInsensitive?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map((e=>e.toLowerCase()));return e?.map((e=>this._recursiveCloneAndMaskValuesOfKeys(e,t)))}_recursiveCloneAndMaskValuesOfKeys(e,t,n=[]){if(n.includes(e))return{...e};if("object"==typeof e&&null!==e&&n.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map((e=>this._recursiveCloneAndMaskValuesOfKeys(e,t,n)));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return(0,a.urlToObject)(e);if(null!==e&&"object"==typeof e){const r=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce(((r,i)=>(r[i]=t.includes(!0!==this.settings?.maskValuesOfKeysCaseInsensitive?i:i.toLowerCase())?this.settings.maskPlaceholder:(()=>{try{return this._recursiveCloneAndMaskValuesOfKeys(e[i],t,n)}catch(e){return null}})(),r)),r)}if("string"==typeof e){let t=e;for(const e of this.settings?.maskValuesRegEx||[])t=t.replace(e,this.settings?.maskPlaceholder||"");return t}return e}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map((e=>this._recursiveCloneAndExecuteFunctions(e,t))):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce(((n,r)=>{const i=Object.getOwnPropertyDescriptor(e,r);if(i){Object.defineProperty(n,r,i);const o=e[r];n[r]="function"==typeof o?o():this._recursiveCloneAndExecuteFunctions(o,t)}return n}),Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return"object"==typeof e&&null!==e}isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e?.map((e=>this.runtime.isError(e)?this._toErrorObject(e):e)),null==this.settings.argumentsArrayName?1!==e.length||Array.isArray(e[0])||!0===this.runtime.isBuffer(e[0])||e[0]instanceof Date?{...t,...e}:"object"==typeof e[0]&&null!=e[0]?{...e[0],...t}:{0:e[0],...t}:{...t,[this.settings.argumentsArrayName]:e}}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach((n=>{t[n]=e[n]})),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,n){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,n,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){if(null==e)return"";let t=this.settings.prettyLogTemplate;const n={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):"UTC"===this.settings.prettyLogTimeZone?(n.yyyy=e?.date?.getUTCFullYear()??"----",n.mm=(0,s.formatNumberAddZeros)(e?.date?.getUTCMonth(),2,1),n.dd=(0,s.formatNumberAddZeros)(e?.date?.getUTCDate(),2),n.hh=(0,s.formatNumberAddZeros)(e?.date?.getUTCHours(),2),n.MM=(0,s.formatNumberAddZeros)(e?.date?.getUTCMinutes(),2),n.ss=(0,s.formatNumberAddZeros)(e?.date?.getUTCSeconds(),2),n.ms=(0,s.formatNumberAddZeros)(e?.date?.getUTCMilliseconds(),3)):(n.yyyy=e?.date?.getFullYear()??"----",n.mm=(0,s.formatNumberAddZeros)(e?.date?.getMonth(),2,1),n.dd=(0,s.formatNumberAddZeros)(e?.date?.getDate(),2),n.hh=(0,s.formatNumberAddZeros)(e?.date?.getHours(),2),n.MM=(0,s.formatNumberAddZeros)(e?.date?.getMinutes(),2),n.ss=(0,s.formatNumberAddZeros)(e?.date?.getSeconds(),2),n.ms=(0,s.formatNumberAddZeros)(e?.date?.getMilliseconds(),3));const r="UTC"===this.settings.prettyLogTimeZone?e?.date:new Date(e?.date?.getTime()-6e4*e?.date?.getTimezoneOffset());n.rawIsoStr=r?.toISOString(),n.dateIsoStr=r?.toISOString().replace("T"," ").replace("Z",""),n.logLevelName=e?.logLevelName,n.fileNameWithLine=e?.path?.fileNameWithLine??"",n.filePathWithLine=e?.path?.filePathWithLine??"",n.fullFilePath=e?.path?.fullFilePath??"";let i=this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);return i=null!=i&&null!=e?.name?i+this.settings.prettyErrorParentNamesSeparator:void 0,n.name=null!=e?.name||null!=i?(i??"")+e?.name??"":"",n.nameWithDelimiterPrefix=n.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+n.name:"",n.nameWithDelimiterSuffix=n.name.length>0?n.name+this.settings.prettyErrorLoggerNameDelimiter:"",null!=this.settings.overwrite?.addPlaceholders&&this.settings.overwrite?.addPlaceholders(e,n),(0,o.formatTemplate)(this.settings,t,n)}}},30592:(e,t,n)=>{"use strict";var r=n(30655),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},30655:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},30810:(e,t,n)=>{"use strict";const{SymbolDispose:r}=n(74641),{AbortError:i,codes:o}=n(68526),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:l}=n(136),u=n(89365),{ERR_INVALID_ARG_TYPE:c}=o;let d;e.exports.addAbortSignal=function(t,n){if((e=>{if("object"!=typeof e||!("aborted"in e))throw new c("signal","AbortSignal",e)})(t),!s(n)&&!a(n))throw new c("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=s(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[l](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{d=d||n(56017).addAbortListener;const i=d(e,o);u(t,i[r])}return t}},30905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumberAddZeros=void 0,t.formatNumberAddZeros=function(e,t=2,n=0){return null!=e&&isNaN(e)?"":(e=null!=e?e+n:e,2===t?null==e?"--":e<10?"0"+e:e.toString():null==e?"---":e<10?"00"+e:e<100?"0"+e:e.toString())}},31115:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.controlflowStarCommand=t.controlflowCommand=void 0;const a=n(15459),l=n(6777),u=n(72814),c=n(29942),d=n(77529),f=Promise.resolve().then((()=>s(n(11676))));async function p(e,t){return await(0,l.createDataflowPipeline)(e,{request:(0,u.requestFromInput)(t.trim())}).allRemainingSteps()}function h(e){return e.startsWith('"')?JSON.parse(e):e}function m(e,t){return e.formatter.format(`Copied ${t} to clipboard.`,{color:7,effect:d.ColorEffect.Foreground,style:3})}t.controlflowCommand={description:`Get mermaid code for the control-flow graph of R code, start with '${u.fileProtocol}' to indicate a file`,usageExample:":controlflow",aliases:["cfg","cf"],script:!1,fn:async(e,t,n)=>{const r=await p(t,h(n)),i=(0,a.extractCFG)(r.normalize,r.dataflow.graph),o=(0,c.cfgToMermaid)(i,r.normalize);e.stdout(o);try{(await f).default.writeSync(o),e.stdout(m(e,"mermaid code"))}catch{}}},t.controlflowStarCommand={description:"Returns the URL to mermaid.live",usageExample:":controlflow*",aliases:["cfg*","cf*"],script:!1,fn:async(e,t,n)=>{const r=await p(t,h(n)),i=(0,a.extractCFG)(r.normalize,r.dataflow.graph),o=(0,c.cfgToMermaidUrl)(i,r.normalize);e.stdout(o);try{(await f).default.writeSync(o),e.stdout(m(e,"mermaid url"))}catch{}}}},31315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeComment=function(e,t){const{location:n,content:s}=(0,r.retrieveMetaStructure)(t);return(0,i.guard)(s.startsWith("#"),"comment must start with #"),{type:o.RType.Comment,location:n,content:s.slice(1),lexeme:s,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:s}}};const r=n(36604),i=n(57012),o=n(49375)},31428:(e,t,n)=>{"use strict";var r=n(65606),i=n(48287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.isBuffer=t.transportJSON=t.transportFormatted=t.prettyFormatErrorObj=t.prettyFormatLogObj=t.isError=t.getErrorTrace=t.getCallerStackFrame=t.getMeta=void 0;const o=n(51072),s=n(57975),a=n(40537),l=n(6724);t.default={getCallerStackFrame:d,getErrorTrace:f,getMeta:c,transportJSON:y,transportFormatted:_,isBuffer:b,isError:h,prettyFormatLogObj:m,prettyFormatErrorObj:g};const u={runtime:"Nodejs",runtimeVersion:r?.version,hostname:o.hostname?(0,o.hostname)():void 0};function c(e,t,n,r,i,o){return Object.assign({},u,{name:i,parentNames:o,date:new Date,logLevelId:e,logLevelName:t,path:r?void 0:d(n)})}function d(e,t=Error()){return p(t?.stack?.split("\n")?.filter((e=>e.includes("    at ")))?.[e])}function f(e){return e?.stack?.split("\n")?.reduce(((e,t)=>(t.includes("    at ")&&e.push(p(t)),e)),[])}function p(e){const t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(null!=e&&e.includes("    at ")){const n=(e=e.replace(/^\s+at\s+/gm,"")).split(" ("),i=")"===e?.slice(-1)?e?.match(/\(([^)]+)\)/)?.[1]:e,o=i?.includes(":")?i?.replace("file://","")?.replace(r.cwd(),"")?.split(":"):void 0,a=o?.pop(),l=o?.pop(),u=o?.pop(),c=(0,s.normalize)(`${u}:${l}`),d=u?.split("/")?.pop(),f=`${d}:${l}`;null!=u&&u.length>0&&(t.fullFilePath=i,t.fileName=d,t.fileNameWithLine=f,t.fileColumn=a,t.fileLine=l,t.filePath=u,t.filePathWithLine=c,t.method=null!=n?.[1]?n?.[0]:void 0)}return t}function h(e){return null!=a.types?.isNativeError?a.types.isNativeError(e):e instanceof Error}function m(e,t){return e.reduce(((e,n)=>(h(n)?e.errors.push(g(n,t)):e.args.push(n),e)),{args:[],errors:[]})}function g(e,t){const n=f(e).map((e=>(0,l.formatTemplate)(t,t.prettyErrorStackTemplate,{...e},!0))),r={errorName:` ${e.name} `,errorMessage:Object.getOwnPropertyNames(e).reduce(((t,n)=>("stack"!==n&&t.push(e[n]),t)),[]).join(", "),errorStack:n.join("\n")};return(0,l.formatTemplate)(t,t.prettyErrorTemplate,r)}function _(e,t,n,r){const i=(n.length>0&&t.length>0?"\n":"")+n.join("\n");r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(e+(0,a.formatWithOptions)(r.prettyInspectOptions,...t)+i)}function y(e){console.log(function(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(t.has(n))return"[Circular]";t.add(n)}return"bigint"==typeof n?`${n}`:void 0===n?"[undefined]":n}))}(e))}function b(e){return i.isBuffer(e)}t.getMeta=c,t.getCallerStackFrame=d,t.getErrorTrace=f,t.isError=h,t.prettyFormatLogObj=m,t.prettyFormatErrorObj=g,t.transportFormatted=_,t.transportJSON=y,t.isBuffer=b},31508:()=>{},31540:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDelimiter=function(e){const{location:t,content:n}=(0,r.retrieveMetaStructure)(e.content);return{type:i.RType.Delimiter,location:t,lexeme:n,subtype:e.name}};const r=n(36604),i=n(49375)},31729:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},32018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPipeline=function(...e){return(0,r.verifyAndBuildPipeline)(e)};const r=n(20271)},32066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataflowGraphToJson=function(e){return a(e)},t.dataflowGraphToMermaid=function(e){return(0,o.graphToMermaid)({graph:e.graph}).string},t.dataflowGraphToMermaidUrl=function(e){return(0,o.graphToMermaidUrl)(e.graph)},t.dataflowGraphToQuads=function(e,t){return(0,i.df2quads)(e.graph,t)};const r=n(91884),i=n(32843),o=n(82627);function s(e){return"object"==typeof e?a(e):JSON.stringify(e,r.jsonReplacer)}function a(e){if(null===e)return"null";const t=[];for(const[n,i]of Object.entries(e))switch(typeof i){case"undefined":case"function":continue;case"object":Array.isArray(i)?t.push([n,`[${i.map((e=>s(e))).join(",")}]`]):i instanceof Set?t.push([n,`[${[...i].map((e=>s(e))).join(",")}]`]):i instanceof Map?t.push([n,`[${[...i].map((([e,t])=>`[${s(e)},${s(t)}]`)).join(",")}]`]):t.push([n,a(i)]);break;case"bigint":t.push([n,`${i.toString()}n`]);break;default:t.push([n,JSON.stringify(i,r.jsonReplacer)])}return`{${t.map((([e,t])=>`"${e}":${t}`)).join(",")}}`}},32145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processApply=function(e,t,n,c,{indexOfFunction:d=1,nameOfFunctionArgument:f,unquoteFunction:p}){const h=new Array(d).fill(!1);h.push(!0);const{information:m,processedArguments:g}=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:c,forceArgs:h});let _=d;if(void 0!==f){const e=t.findIndex((e=>e!==i.EmptyArgument&&e.name&&e.name.content===f));e>=0&&(_=e)}if(_>=t.length)return o.dataflowLogger.warn(`Function argument at index ${_} not found, skipping`),m;const y=t[_];if(y===i.EmptyArgument||!y.value||!p&&y.value.type!==s.RType.Symbol)return o.dataflowLogger.warn(`Expected symbol as argument at index ${_}, but got ${JSON.stringify(y)} instead.`),m;let b,v;const w=y.value;if(p&&w.type===s.RType.String)b=w.info.id,v=w.content.str;else{if(w.type!==s.RType.Symbol)return o.dataflowLogger.warn(`Expected symbol or string as function argument at index ${_}, but got ${JSON.stringify(w)} instead.`),m;b=w.info.id,v=w.content}const E=g.filter(((e,t)=>t!==_)).map(((e,n)=>{const r=t[n];return e&&r!==i.EmptyArgument&&r.name?{name:r.name.content,controlDependencies:c.controlDependencies,type:u.ReferenceType.Argument,nodeId:e.entryPoint}:i.EmptyArgument}));m.graph.updateToFunctionCall({tag:a.VertexType.FunctionCall,id:b,name:v,args:E,environment:c.environment,onlyBuiltin:!1,controlDependencies:c.controlDependencies});for(const e of g)e&&m.graph.addEdge(b,e.entryPoint,l.EdgeType.Argument);return m};const r=n(92397),i=n(25377),o=n(22438),s=n(49375),a=n(18841),l=n(34966),u=n(46044)},32737:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const o=n(30348);i(n(92721),t),i(n(30348),t);class s extends o.BaseLogger{constructor(e,t){const n="undefined"!=typeof window&&"undefined"!=typeof document,r=!!n&&void 0!==window.chrome&&void 0!==window.CSS&&window.CSS.supports("color","green"),i=!!n&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(e=e||{}).stylePrettyLogs=!(e.stylePrettyLogs&&n&&!r)&&e.stylePrettyLogs,super(e,t,i?4:5)}log(e,t,...n){return super.log(e,t,...n)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}t.Logger=s},32787:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CascadeAction=void 0,function(e){e.Stop="stop",e.Continue="continue",e.Skip="skip"}(n||(t.CascadeAction=n={}))},32843:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.df2quads=function(e,t){return(0,r.graph2quads)({rootIds:[...e.rootIds()],vertices:[...e.vertices(!0)].map((([e,t])=>({...t,id:e}))),edges:[...e.edges()].flatMap((([e,t])=>[...t].map((([t,n])=>({from:e,to:t,type:[...(0,i.edgeTypesToNames)(n.types)]})))))},t)};const r=n(78936),i=n(34966)},32938:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).major},33152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAssignment=function(e,t,n,o,d){if(2!=t.length)return c.dataflowLogger.warn(`Assignment ${e.content} has something else than 2 arguments, skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:o,forceArgs:d.forceArgs}).information;const f=w(d,t),{target:h,source:m}=function(e,t){const n=(0,s.unpackArgument)(e[1],!1),r=(0,s.unpackArgument)(e[0],!1);return(0,i.guard)(void 0!==n,(()=>`Assignment ${t.content} has no source, impossible!`)),(0,i.guard)(void 0!==r,(()=>`Assignment ${t.content} has no target, impossible!`)),{source:n,target:r}}(f,e),{type:g,named:_}=h;if(!d.targetVariable&&g===u.RType.Symbol){const i=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:o,reverseOrder:!d.swapSourceAndTarget,forceArgs:d.forceArgs});return S({...d,nameOfAssignmentFunction:e.content,source:m,target:h,args:w(d,i.processedArguments),rootId:n,data:o,information:i.information})}if(d.canBeReplacement&&g===u.RType.FunctionCall&&_){c.dataflowLogger.debug(`Assignment ${e.content} has a function call as target => replacement function ${h.lexeme}`);const t=v(h,h.functionName.content,d.superAssignment??!1);return(0,a.processAsNamedCall)(t,o,t.content,[...h.arguments,m])}if(d.canBeReplacement&&g===u.RType.Access){c.dataflowLogger.debug(`Assignment ${e.content} has an access as target => replacement function ${h.lexeme}`);const t=v(h,h.operator,d.superAssignment??!1);return(0,a.processAsNamedCall)(t,o,t.content,[(0,l.toUnnamedArgument)(h.accessed,o.completeAst.idMap),...h.access,m])}if(g===u.RType.Access){const t=function(e){let t=e;for(;t.type===u.RType.Access;)t=t.accessed;return t.type===u.RType.Symbol?t:void 0}(h);if(t){const i=(0,r.processKnownFunctionCall)({name:e,args:[t,m],rootId:n,data:o,reverseOrder:!d.swapSourceAndTarget,forceArgs:d.forceArgs});return S({...d,nameOfAssignmentFunction:e.content,source:m,target:t,args:w(d,i.processedArguments),rootId:n,data:o,information:i.information})}}else if(g===u.RType.String)return function(e,t,n,i,o,s,a){const l={type:u.RType.Symbol,info:e.info,content:(0,p.removeRQuotes)(e.lexeme),lexeme:e.lexeme,location:e.location,namespace:void 0},c=s.swapSourceAndTarget?[t[0],{...t[1],value:l}]:[{...t[0],value:l},t[1]],d=(0,r.processKnownFunctionCall)({name:n,args:c,rootId:i,data:o,reverseOrder:!s.swapSourceAndTarget,forceArgs:s.forceArgs});return S({...s,nameOfAssignmentFunction:n.content,source:a,target:l,args:w(s,d.processedArguments),rootId:i,data:o,information:d.information})}(h,t,e,n,o,d,m);c.dataflowLogger.warn(`Assignment ${e.content} has an unknown target type ${h.type} => unknown impact`);const y=(0,r.processKnownFunctionCall)({name:e,args:f,rootId:n,data:o,forceArgs:d.forceArgs}).information;return y.graph.markIdForUnknownSideEffects(n),y},t.markAsAssignment=E;const r=n(92397),i=n(57012),o=n(19742),s=n(55143),a=n(63872),l=n(62027),u=n(49375),c=n(22438),d=n(46044),f=n(10682),p=n(72814),h=n(18841),m=n(62948),g=n(34966),_=n(85193),y=n(3565),b=n(67481);function v(e,t,n){return{type:u.RType.Symbol,info:e.info,content:`${t}${n?"<<-":"<-"}`,lexeme:e.lexeme,location:e.location,namespace:void 0}}function w(e,t){return e.swapSourceAndTarget?[t[1],t[0]]:t}function E(e,t,n,r,i){if((0,b.getConfig)().solver.pointerTracking){let r;1===n.length&&(r=e.graph.getVertex(n[0])?.indicesCollection),void 0!==i?.indicesCollection&&(r=r?(0,y.addSubIndicesToLeafIndices)(i.indicesCollection,r):i.indicesCollection),t.indicesCollection??=r}if(e.environment=(0,m.define)(t,i?.superAssignment,e.environment),e.graph.setDefinitionOfVertex(t),!i?.quoteSource)for(const r of n)e.graph.addEdge(t,r,g.EdgeType.DefinedBy);if(e.graph.addEdge(t,r,g.EdgeType.DefinedBy),(0,b.getConfig)().solver.pointerTracking){const n=e.graph.outgoingEdges(t.nodeId);for(const[e,t]of n??[])t.types&=~g.EdgeType.Reads,0==t.types&&n?.delete(e)}}function S(e){const{nameOfAssignmentFunction:t,source:n,args:[r,i],target:s,rootId:a,data:l,information:u,makeMaybe:c,quoteSource:p}=e,m=function(e,t){const n=t.graph.getVertex(e.info.id,!0);switch(n?.tag){case h.VertexType.FunctionDefinition:return d.ReferenceType.Function;case h.VertexType.Use:case h.VertexType.FunctionCall:return d.ReferenceType.Unknown;default:return d.ReferenceType.Variable}}(n,i),y=function(e,t,n,r,i,o){return[...t.in,...t.unknownReferences].map((t=>({...t,type:n,definedAt:e,controlDependencies:r.controlDependencies??(i?[]:void 0),value:o})))}(a,r,m,l,c??!1,(0,_.getAliases)([n.info.id],u.graph,u.environment));1!==y.length&&o.log.settings.minLevel<=4&&o.log.warn(`Unexpected write number in assignment: ${JSON.stringify(y)}`);const b=i.out.slice(1),v=[{nodeId:a,name:t,controlDependencies:l.controlDependencies,type:d.ReferenceType.Function},...i.unknownReferences,...i.in,...r.in.filter((e=>e.nodeId!==s.info.id)),...b];u.environment=(0,f.overwriteEnvironment)(r.environment,i.environment);for(const t of y)E(u,t,[n.info.id],a,e);return u.graph.addEdge(a,r.entryPoint,g.EdgeType.Returns),p&&u.graph.addEdge(a,n.info.id,g.EdgeType.NonStandardEvaluation),{...u,unknownReferences:[],entryPoint:a,in:v,out:[...y,...b]}}},33267:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAllFiles=f,t.allRFiles=h,t.allRFilesFrom=async function*(e,t){if(t??=Number.MAX_VALUE,0===e.length)return c.log.info("No inputs given, nothing to do"),0;let n=0;for(const r of e)n+=(yield*h(r,t-n));return n},t.writeTableAsCsv=function(e,t,n=",",r="\n"){const i=[e.header.join(n),...e.rows.map((e=>e.join(n)))].join(r);l.default.writeFileSync(t,i)},t.readLineByLine=async function(e,t){const n=new d.default(e);let r,i=0;for(;r=n.next();)await t(r,i++)},t.readLineByLineSync=function(e,t){if(!l.default.existsSync(e))return void c.log.warn(`File ${e} does not exist`);const n=new d.default(e);let r,i=0;for(;r=n.next();)t(r,i++)},t.getParentDirectory=function(e){return e.split(u.default.sep).slice(0,-1).join(u.default.sep)};const l=s(n(16543)),u=a(n(57975)),c=n(19742),d=a(n(6416));async function*f(e,t=/.*/){const n=await l.promises.readdir(e,{withFileTypes:!0,recursive:!1});for(const r of n){const n=u.default.resolve(e,r.name);r.isDirectory()?yield*f(n,t):t.test(r.name)&&(yield n)}}const p=/\.[rR]$/;async function*h(e,t=Number.MAX_VALUE){let n=0;if(l.default.statSync(e).isFile())return p.test(e)?(yield{request:"file",content:e},1):(c.log.warn(`Input ${e} is not an R file`),0);for await(const r of f(e,p)){if(++n>t)return n;yield{request:"file",content:r}}return n}},33713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VisitingQueue=void 0;const r=n(10972),i=n(18741),o=n(57012);t.VisitingQueue=class{threshold;timesHitThreshold=0;seen=new Map;idThreshold=new Map;queue=[];potentialAdditions=new Map;constructor(e){this.threshold=e}add(e,t,n,o){const s=this.idThreshold.get(e)??0;if(s>this.threshold)return i.slicerLogger.warn(`id: ${e} has been visited ${s} times, skipping`),void this.timesHitThreshold++;const a=(0,r.fingerprint)(e,n,o);this.seen.has(a)||(this.idThreshold.set(e,s+1),this.seen.set(a,e),this.queue.push({id:e,baseEnvironment:t,onlyForSideEffects:o}))}next(){return this.queue.pop()}nonEmpty(){return this.queue.length>0}hasId(e){return this.idThreshold.has(e)}status(){return{timesHitThreshold:this.timesHitThreshold,result:new Set([...this.seen.values()].filter(o.isNotUndefined))}}}},33942:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAIVE_RECONSTRUCT=void 0;const r=n(23644),i=n(22728);t.NAIVE_RECONSTRUCT={name:"reconstruct",humanReadableName:"static code reconstruction",description:"Reconstruct R code from the static slice",processor:function(e,t){return(0,i.reconstructToCode)(e.normalize,e.slice.result,t.autoSelectIf)},executed:1,printer:{0:r.internalPrinter},dependencies:["slice"],requiredInput:void 0}},34306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flowrSearchToMermaid=function(e,t){const n=[t?.header??"flowchart LR"];let i=0;return n.push((0,r.traverseFlowrSearchBuilderType)(e,(({type:e,name:t,args:n})=>`${i}("<b>${t}</b>(${l(n)})<br/>_${e}_")`),((e,{name:t,args:n,type:r})=>`${e} --\x3e ${++i}["<b>${t}</b>(${l(n)})<br/>_${r}_"]`))),n.join("\n")},t.flowrSearchToAscii=function(e){return(0,r.traverseFlowrSearchBuilderType)(e,(({name:e,args:t})=>`${e}(${u(t)})`),((e,{name:t,args:n})=>`${e} --\x3e ${t}(${u(n)})`))},t.flowrSearchToCode=function(e){return(0,r.traverseFlowrSearchBuilderType)(e,(e=>`Q.${function(e){if("get"!==e.name)return`${e.name}(${c(e.args)})`;const t=e.args.filter;if(1===Object.keys(t).length){if(t.name)return`var(${JSON.stringify(t.name)})`}else if(2===Object.keys(t).length&&t.name&&t.line)return`varInLine(${JSON.stringify(t.name)}, ${JSON.stringify(t.line)})`;return`${e.name}(${c(e.args)})`}(e)}`),((e,t)=>`${e}.${function(e){if("filter"===e.name){const t=e.args.filter;if(s.ValidVertexTypes.has(String(t)))return`${e.name}(VertexType.${s.ValidVertexTypeReverse[String(t)]})`;if(a.ValidRTypes.has(String(t)))return`${e.name}(RType.${a.ValidRTypesReverse[String(t)]})`;if(o.ValidFlowrFilters.has(String(t)))return`${e.name}(FlowrFilter.${o.ValidFlowrFiltersReverse[String(t)]})`}return`${e.name}(${c(e.args)})`}(t)}`))};const r=n(91142),i=n(19339),o=n(26345),s=n(18841),a=n(49375);function l(e){return void 0===e?"":Object.entries(e).map((([e,t])=>`${e}: ${(0,o.isBinaryTree)(t)?"_"+(0,i.escapeMarkdown)((0,o.binaryTreeToString)(t.tree))+"_":(0,i.escapeMarkdown)(JSON.stringify(t))}`)).join(", ")}function u(e){if(void 0===e)return"";if(1===Object.keys(e).length){const t=Object.keys(e)[0],n=e[t];return`${t}: ${(0,o.isBinaryTree)(n)?"_"+(0,o.binaryTreeToString)(n.tree)+"_":JSON.stringify(n)}`}return Object.entries(e).map((([e,t])=>`${e}: ${(0,o.isBinaryTree)(t)?"_"+(0,o.binaryTreeToString)(t.tree)+"_":JSON.stringify(t)}`)).join(", ")}function c(e){return void 0===e?"":Object.entries(e).map((([,e])=>`${JSON.stringify(e)}`)).join(", ")}},34966:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeType=void 0,t.edgeTypeToName=function(e){return r.get(e)},t.splitEdgeTypes=function(e){const t=[];for(const n of r.keys())e&n&&t.push(n);return t},t.edgeTypesToNames=function(e){const t=new Set;for(const[n,i]of r.entries())e&n&&t.add(i);return t},t.edgeIncludesType=i,t.edgeDoesNotIncludeType=function(e,t){return!(t&e)},t.shouldTraverseEdge=function(e){return i(e,o)?3:i(e,s)?2:i(e,n.SideEffectOnCall)?1:0},function(e){e[e.Reads=1]="Reads",e[e.DefinedBy=2]="DefinedBy",e[e.Calls=4]="Calls",e[e.Returns=8]="Returns",e[e.DefinesOnCall=16]="DefinesOnCall",e[e.DefinedByOnCall=32]="DefinedByOnCall",e[e.Argument=64]="Argument",e[e.SideEffectOnCall=128]="SideEffectOnCall",e[e.NonStandardEvaluation=256]="NonStandardEvaluation"}(n||(t.EdgeType=n={}));const r=new Map([[n.Reads,"reads"],[n.DefinedBy,"defined-by"],[n.Calls,"calls"],[n.Returns,"returns"],[n.DefinesOnCall,"defines-on-call"],[n.DefinedByOnCall,"defined-by-on-call"],[n.Argument,"argument"],[n.SideEffectOnCall,"side-effect-on-call"],[n.NonStandardEvaluation,"non-standard-evaluation"]]);function i(e,t){return!!(t&e)}const o=n.Reads|n.DefinedBy|n.Argument|n.Calls,s=n.DefinesOnCall|n.DefinedByOnCall},35277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARSE_WITH_R_SHELL_STEP=void 0;const r=n(23644),i=n(70445),o=n(26481);t.PARSE_WITH_R_SHELL_STEP={name:"parse",humanReadableName:"parse with R shell",description:"Parse the given R code into an AST",processor:o.parseRequests,executed:0,printer:{0:r.internalPrinter,2:JSON.stringify,5:({parsed:e},t)=>(0,i.parseToQuads)(e,t)},dependencies:[],requiredInput:void 0}},35345:e=>{"use strict";e.exports=URIError},35459:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step=void 0;class n{static ANCESTOR=0;static ANCESTORORSELF=1;static ATTRIBUTE=2;static CHILD=3;static DESCENDANT=4;static DESCENDANTORSELF=5;static FOLLOWING=6;static FOLLOWINGSIBLING=7;static NAMESPACE=8;static PARENT=9;static PRECEDING=10;static PRECEDINGSIBLING=11;static SELF=12;static STEPNAMES=[[n.ANCESTOR,"ancestor"],[n.ANCESTORORSELF,"ancestor-or-self"],[n.ATTRIBUTE,"attribute"],[n.CHILD,"child"],[n.DESCENDANT,"descendant"],[n.DESCENDANTORSELF,"descendant-or-self"],[n.FOLLOWING,"following"],[n.FOLLOWINGSIBLING,"following-sibling"],[n.NAMESPACE,"namespace"],[n.PARENT,"parent"],[n.PRECEDING,"preceding"],[n.PRECEDINGSIBLING,"preceding-sibling"],[n.SELF,"self"]].reduce(((e,t)=>(e[t[0]]=t[1],e)),{});static predicateString=e=>`[${e.toString()}]`;static predicatesString=e=>e.map(n.predicateString).join("");axis;nodeTest;predicates;constructor(e,t,n){this.axis=e,this.nodeTest=t,this.predicates=n}toString(){return n.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+n.predicatesString(this.predicates)}}t.Step=n},35493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVLTree=void 0;const r=n(40318);class i{left;right;node;depth;constructor(e){this.left=null,this.right=null,this.node=e,this.depth=1}balance(){const e=null==this.left?0:this.left.depth,t=null==this.right?0:this.right.depth;if(e>t+1)(null==this.left.left?0:this.left.left.depth)<(null==this.left.right?0:this.left.right.depth)&&this.left.rotateRR(),this.rotateLL();else if(e+1<t){const e=null==this.right.right?0:this.right.right.depth;(null==this.right.left?0:this.right.left.depth)>e&&this.right.rotateLL(),this.rotateRR()}}rotateLL(){const e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()}rotateRR(){const e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()}updateInNewLocation(){this.getDepthFromChildren()}getDepthFromChildren(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)}add(e){if(e===this.node)return!1;const t=function(e,t){if(e===t)return 0;if(void 0!==e.compareDocumentPosition&&void 0!==t.compareDocumentPosition)try{const n=e.compareDocumentPosition(t);return 1&n||10&n?1:20&n?-1:0}catch(e){}let n=0,i=0;for(let t=e;null!=t;t=o(t))n++;for(let e=t;null!=e;e=o(e))i++;if(n>i){for(;n>i;)e=o(e),n--;if(e===t)return 1}else if(i>n){for(;i>n;)t=o(t),i--;if(e===t)return-1}let s=o(e),a=o(t);for(;s!==a;)t=a,s=o(e=s),a=o(t);const l=(0,r.isAttribute)(e),u=(0,r.isAttribute)(t);if(l&&!u)return-1;if(!l&&u)return 1;if(s){const n=l?s.attributes:s.childNodes,r=n.length;for(let i=0;i<r;i+=1){const r=n[i];if(r===e)return-1;if(r===t)return 1}}throw new Error("Unexpected: could not determine node order")}(e,this.node);let n=!1;return-1===t?null==this.left?(this.left=new i(e),n=!0):(n=this.left.add(e),n&&this.balance()):1===t&&(null==this.right?(this.right=new i(e),n=!0):(n=this.right.add(e),n&&this.balance())),n&&this.getDepthFromChildren(),n}}function o(e){return(0,r.isAttribute)(e)?e.ownerElement:e.parentNode}t.AVLTree=i},35580:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>0},35680:(e,t,n)=>{"use strict";var r=n(25767);e.exports=function(e){return!!r(e)}},35813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loops=void 0;const r=n(67102),i=n(61082),o=n(49375),s=n(6737),a=n(6945),l={forLoops:(0,r.emptyCommonSyntaxTypeCounts)(),forLoopVar:(0,r.emptyCommonSyntaxTypeCounts)(),forBody:(0,r.emptyCommonSyntaxTypeCounts)(),whileLoops:(0,r.emptyCommonSyntaxTypeCounts)(),whileBody:(0,r.emptyCommonSyntaxTypeCounts)(),repeatLoops:0n,repeatBody:(0,r.emptyCommonSyntaxTypeCounts)(),breakStatements:0,nextStatements:0,implicitLoops:0,nestedExplicitLoops:0,deepestExplicitNesting:0},u=/[lsvmt]?apply/;t.loops={name:"Loops",description:"All looping structures in the document",process:(e,n)=>(function(e,n){const i=[];(0,a.visitAst)(n.normalizedRAst.ast,(a=>{switch(a.type){case o.RType.Next:return void e.nextStatements++;case o.RType.Break:return void e.breakStatements++;case o.RType.FunctionCall:return void(a.named&&u.test(a.functionName.lexeme)&&(e.implicitLoops++,(0,s.appendStatisticsFile)(t.loops.name,"implicit-loop",[a.functionName.info.fullLexeme??a.functionName.lexeme],n.filepath)));case o.RType.ForLoop:(0,r.updateCommonSyntaxTypeCounts)(e.forLoops,a.vector),(0,r.updateCommonSyntaxTypeCounts)(e.forLoopVar,a.variable),(0,r.updateCommonSyntaxTypeCounts)(e.forBody,...a.body.children);break;case o.RType.WhileLoop:(0,r.updateCommonSyntaxTypeCounts)(e.whileLoops,a.condition),(0,r.updateCommonSyntaxTypeCounts)(e.whileBody,...a.body.children);break;case o.RType.RepeatLoop:e.repeatLoops++,(0,r.updateCommonSyntaxTypeCounts)(e.repeatBody,...a.body.children);break;default:return}(0,s.appendStatisticsFile)(t.loops.name,"all-loops",[a.info.fullLexeme??a.lexeme],n.filepath),i.length>0&&(e.nestedExplicitLoops++,e.deepestExplicitNesting=Math.max(e.deepestExplicitNesting,i.length)),i.push(a)}),(e=>{e.type!==o.RType.ForLoop&&e.type!==o.RType.WhileLoop&&e.type!==o.RType.RepeatLoop||i.pop()}))}(e,n),e),initialValue:l,postProcess:i.postProcess}},35852:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const l={},u=o.default.createWriteStream(s.default.join(n,"deepest-nesting-per-file.csv"));u.write("file,deepest-nesting\n");for(const[e,n]of t.entries()){const t=n.expressionList;for(const[n,o]of Object.entries(t)){let t=l[n];t||(t=(0,i.emptySummarizedWithProject)(),l[n]=t),"deepestNesting"===n&&u.write(`${JSON.stringify(e)},${o}\n`),t.count.push(o),o>0&&(0,i.recordFilePath)(t,e,r)}}u.close();const c=o.default.createWriteStream(s.default.join(n,"used-expression-lists.csv"));c.write(`kind,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(l)){const n=t,r=(0,a.summarizeMeasurement)(n.count);c.write(`${JSON.stringify(e)},${n.uniqueProjects.size},${n.uniqueFiles.size},${(0,a.summarizedMeasurement2Csv)(r)}\n`)}c.close()};const i=n(61685),o=r(n(64351)),s=r(n(57975)),a=n(71339)},36049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeFunctionCall=function(e,t){const n=t[0];if(n.name!==u.RawRType.Expression&&n.name!==u.RawRType.ExprOfAssignOrHelp&&n.name!==u.RawRType.LegacyEqualAssign)return void r.parseLog.trace(`expected function call name to be wrapped an expression, yet received ${n.name}`);if(t.length<3||t[1].name!==u.RawRType.ParenLeft||t[t.length-1].name!==u.RawRType.ParenRight)return void r.parseLog.trace("expected function call to have parenthesis for a call, but was not");const{content:o,location:s}=(0,i.retrieveMetaStructure)(n.content),a=n.content.children,d=(0,i.getWithTokenType)(a);return 1===d.length&&d[0].name===u.RawRType.StringConst?h(e,d,t,s,o):d.findIndex((e=>e.name===u.RawRType.SymbolFunctionCall))<0?(r.parseLog.trace(`is not named function call, as the name is not of type ${u.RType.FunctionCall}, but: ${d.map((e=>e.name)).join(",")}`),function(e,t,n,i){if(t.length<3)return void r.parseLog.trace("expected unnamed function call to have 3 elements [like (<func>)], but was not");r.parseLog.trace("Assuming structure to be a function call");const o=(0,c.normalizeExpression)(e,t[0].content),s=p(t,e);if(0===s.length){if(o.type===u.RType.Next)return{type:u.RType.Next,lexeme:i,location:n,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}};if(o.type===u.RType.Break)return{type:u.RType.Break,lexeme:i,location:n,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}}return{type:u.RType.FunctionCall,named:void 0,location:n,lexeme:i,calledFunction:o,arguments:s.map((e=>e??l.EmptyArgument)),info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}}(e,t,s,o)):h(e,d,t,s,o)};const r=n(56293),i=n(36604),o=n(83584),s=n(57012),a=n(4510),l=n(25377),u=n(49375),c=n(73670),d=n(80065),f=n(6056);function p(e,t){const n=e.slice(1);return(0,s.guard)(n.length>1&&n[0].name===u.RawRType.ParenLeft&&n[n.length-1].name===u.RawRType.ParenRight,"expected args in parenthesis"),(0,o.splitArrayOn)(n.slice(1,n.length-1),(e=>e.name===u.RawRType.Comma)).map((e=>(r.parseLog.trace("trying to parse argument"),(0,a.tryToNormalizeArgument)(t,e))))}function h(e,t,n,r,i){let o;if(1===t.length&&t[0].name===u.RawRType.StringConst){const n=(0,d.normalizeString)(e,t[0].content);o={type:u.RType.Symbol,namespace:void 0,lexeme:n.lexeme,info:n.info,location:n.location,content:n.content.str}}else o=(0,f.tryNormalizeSymbol)(e,t);(0,s.guard)(void 0!==o,"expected function name to be a symbol, yet received none"),(0,s.guard)(o.type===u.RType.Symbol,(()=>`expected function name to be a symbol, yet received ${JSON.stringify(o)}`));const a=p(n,e);return{type:u.RType.FunctionCall,named:!0,location:r,lexeme:i,functionName:o,arguments:a.map((e=>e??l.EmptyArgument)),info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}}},36158:()=>{},36179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeMagicCommentHandler=function(e){let t;return(n,s)=>{if(!t){t=new Set;const e=[];(0,r.visitAst)(s.ast,(n=>{const r=n.info.additionalTokens;if(r)for(const n of r){if(n.type!==i.RType.Comment||!n.content.startsWith(" flowr@"))continue;const r=l.exec(n.content);(0,o.guard)(null!==r,`invalid magic comment: ${n.content}`);const s=a[r[1]];(0,o.guard)(void 0!==s,`unknown magic comment: ${r[1]}`);const u=s(n,e);if(void 0!==u)for(const e of u)t.add(e)}})),(0,o.guard)(0===e.length,`mismatched magic start and end at end of file (${JSON.stringify(e)})`)}const u=n.location??n.info.fullRange;return!(!u||!t.has(u[0]))||(e?.(n,s)??!1)}};const r=n(6945),i=n(49375),o=n(57012);function s({location:e,info:{fullRange:t}}){const n=e??t;return(0,o.guard)(void 0!==n,"TODO: support location-less nodes!"),n}const a={include_next_line:e=>[s(e)[0]+1],include_this_line:e=>[s(e)[0]],include_start:(e,t)=>{t.push(s(e)[0]+1)},include_end:(e,t)=>{const n=s(e)[0];(0,o.guard)(t.length>=1,`mismatched magic start and end at ${n}`);const r=t.pop(),i=new Array(n-r-1);for(let e=r;e<n;e++)i[e-r]=e;return i}},l=/ flowr@(\w+)/},36444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataflowDifferenceReport=void 0,t.diffOfDataflowGraphs=function(e,t,n){if(e.graph===t.graph)return new p;const r=function(e,t,n){return{left:e.graph,leftname:e.name,right:t.graph,rightname:t.name,report:new p,position:"",config:{rightIsSubgraph:!1,leftIsSubgraph:!1,...n}}}(e,t,n);return function(e){(function(e){(0,i.setDifference)(e.left.rootIds(),e.right.rootIds(),{...e,position:`${e.position}Root vertices differ in graphs. `}),(0,i.setDifference)(new Set([...e.left.unknownSideEffects].map((e=>"object"==typeof e?e.id:e))),new Set([...e.right.unknownSideEffects].map((e=>"object"==typeof e?e.id:e))),{...e,position:`${e.position}Unknown side effects differ in graphs. `})})(e),g(e),function(e){const t=new Map([...e.left.edges()]),n=new Map([...e.right.edges()]);(t.size<n.size&&!e.config.leftIsSubgraph||t.size>n.size&&!e.config.rightIsSubgraph)&&e.report.addComment(`Detected different number of edges! ${e.leftname} has ${t.size} (${JSON.stringify(t,o.jsonReplacer)}). ${e.rightname} has ${n.size} ${JSON.stringify(n,o.jsonReplacer)}`);for(const[r,i]of t)e.left.hasVertex(r)||e.config.leftIsSubgraph?y(e,r,i,n.get(r)):e.report.addComment(`The source ${r} of edges ${JSON.stringify(i,o.jsonReplacer)} is not present in ${e.leftname}. This means that the graph contains an edge but not the corresponding vertex.`);for(const[r,i]of n)e.right.hasVertex(r)||e.config.rightIsSubgraph?e.config.leftIsSubgraph||t.has(r)||y(e,r,void 0,i):e.report.addComment(`The source ${r} of edges ${JSON.stringify(i,o.jsonReplacer)} is not present in ${e.rightname}. This means that the graph contains an edge but not the corresponding vertex.`)}(e)}(r),r.report},t.equalFunctionArguments=function(e,t,n){const r={report:new p,leftname:"left",rightname:"right",position:"",config:{}};return m(e,t,n,r),r.report.isEqual()},t.diffFunctionArguments=m,t.diffVertices=g,t.diffEdges=y;const r=n(60347),i=n(49553),o=n(91884),s=n(83584),a=n(18841),l=n(34966),u=n(17949),c=n(6696),d=n(25377),f=n(47318);class p{_comments=void 0;_problematic=void 0;addComment(e,...t){void 0===this._comments?this._comments=[e]:this._comments.push(e),t.length>0&&(void 0===this._problematic?this._problematic=[...t]:this._problematic.push(...t))}comments(){return this._comments}problematic(){return this._problematic}isEqual(){return void 0===this._comments}}function h(e,t,n,r){"<value>"!==t&&"<value>"!==n?(0,c.diffIdentifierReferences)(t,n,r):t!==n&&r.report.addComment(`${r.position}${r.leftname}: ${JSON.stringify(t,o.jsonReplacer)} vs ${r.rightname}: ${JSON.stringify(n,o.jsonReplacer)}`,{tag:"vertex",id:e})}function m(e,t,n,i){if(!1!==t&&!1!==n)if(t.length===n.length)for(let o=0;o<t.length;++o){const s=t[o],a=n[o];if(s===d.EmptyArgument||a===d.EmptyArgument)s!==a&&i.report.addComment(`${i.position}In argument #${o} (of ${i.leftname}, empty) the argument differs: ${JSON.stringify(s)} vs ${JSON.stringify(a)}.`);else if((0,r.isNamedArgument)(s)&&(0,r.isNamedArgument)(a)){if(s.name!==a.name){i.report.addComment(`${i.position}In argument #${o} (of ${i.leftname}, named) the name differs: ${s.name} vs ${a.name}.`);continue}h(e,s,a,{...i,position:`${i.position} In argument #${o} (of ${i.leftname}, named). `})}else s.name!==a.name&&i.report.addComment(`${i.position}In argument #${o} (of ${i.leftname}, unnamed) the name differs: ${s.name} vs ${a.name}.`),(0,f.diffControlDependencies)(s.controlDependencies,a.controlDependencies,{...i,position:`${i.position}In argument #${o} (of ${i.leftname}, unnamed) the control dependency differs: ${JSON.stringify(s.controlDependencies)} vs ${JSON.stringify(a.controlDependencies)}.`})}else i.report.addComment(`${i.position}Differs in number of arguments. ${i.leftname}: ${JSON.stringify(t,o.jsonReplacer)} vs ${i.rightname}: ${JSON.stringify(n,o.jsonReplacer)}`,{tag:"vertex",id:e});else t!==n&&i.report.addComment(`${i.position}${i.leftname}: ${JSON.stringify(t,o.jsonReplacer)} vs ${i.rightname}: ${JSON.stringify(n,o.jsonReplacer)}`,{tag:"vertex",id:e})}function g(e){const t=[...e.left.vertices(!0)].map((([e,t])=>[e,t])),n=[...e.right.vertices(!0)].map((([e,t])=>[e,t]));(t.length<n.length&&!e.config.leftIsSubgraph||t.length>n.length&&!e.config.rightIsSubgraph)&&e.report.addComment(`Detected different number of vertices! ${e.leftname} has ${t.length}, ${e.rightname} has ${n.length}`);for(const[n,r]of t){const t=e.right.get(n);if(void 0===t){e.config.rightIsSubgraph||e.report.addComment(`Vertex ${n} is not present in ${e.rightname}`,{tag:"vertex",id:n});continue}const[l]=t;if(r.tag!==l.tag&&e.report.addComment(`Vertex ${n} differs in tags. ${e.leftname}: ${r.tag} vs. ${e.rightname}: ${l.tag}`,{tag:"vertex",id:n}),void 0!==r.name||void 0!==l.name){const t=r.name??(0,u.recoverName)(n,e.left.idMap)??"??",i=l.name??(0,u.recoverName)(n,e.right.idMap)??"??";t!==i&&e.report.addComment(`Vertex ${n} differs in names. ${e.leftname}: ${String(t)} vs ${e.rightname}: ${String(i)}`,{tag:"vertex",id:n})}(0,f.diffControlDependencies)(r.controlDependencies,l.controlDependencies,{...e,position:`Vertex ${n} differs in controlDependencies. `}),(void 0===r.environment&&void 0!==l.environment&&!e.config.leftIsSubgraph||void 0!==r.environment&&void 0===l.environment&&!e.config.rightIsSubgraph)&&(0,c.diffEnvironmentInformation)(r.environment,l.environment,{...e,position:`${e.position}Vertex ${n} differs in environment. `}),r.tag===a.VertexType.FunctionCall&&(l.tag!==a.VertexType.FunctionCall?e.report.addComment(`Vertex ${n} differs in tags. ${e.leftname}: ${r.tag} vs. ${e.rightname}: ${l.tag}`):(r.onlyBuiltin!==l.onlyBuiltin&&e.report.addComment(`Vertex ${n} differs in onlyBuiltin. ${e.leftname}: ${r.onlyBuiltin} vs ${e.rightname}: ${l.onlyBuiltin}`,{tag:"vertex",id:n}),(0===r.args.length&&0!==l.args.length&&!e.config.leftIsSubgraph||0!==r.args.length&&0===l.args.length&&!e.config.rightIsSubgraph)&&m(r.id,r.args,l.args,{...e,position:`${e.position}Vertex ${n} (function call) differs in arguments. `}))),"function-definition"===r.tag&&("function-definition"!==l.tag?e.report.addComment(`Vertex ${n} differs in tags. ${e.leftname}: ${r.tag} vs. ${e.rightname}: ${l.tag}`,{tag:"vertex",id:n}):((0,s.arrayEqual)(r.exitPoints,l.exitPoints)||e.report.addComment(`Vertex ${n} differs in exit points. ${e.leftname}: ${JSON.stringify(r.exitPoints,o.jsonReplacer)} vs ${e.rightname}: ${JSON.stringify(l.exitPoints,o.jsonReplacer)}`,{tag:"vertex",id:n}),(void 0===r.subflow.environment&&void 0!==l.subflow.environment&&!e.config.leftIsSubgraph||void 0!==r.subflow.environment&&void 0===l.subflow.environment&&!e.config.rightIsSubgraph)&&(0,c.diffEnvironmentInformation)(r.subflow.environment,l.subflow.environment,{...e,position:`${e.position}Vertex ${n} (function definition) differs in subflow environments. `}),(0,i.setDifference)(r.subflow.graph,l.subflow.graph,{...e,position:`${e.position}Vertex ${n} differs in subflow graph. `})))}}function _(e,t,n,r,i){const o=(0,l.splitEdgeTypes)(e.types),s=(0,l.splitEdgeTypes)(t.types);(o.length<s.length&&!n.config.leftIsSubgraph||o.length>s.length&&!n.config.rightIsSubgraph)&&n.report.addComment(`Target of ${r}->${i} in ${n.leftname} differs in number of edge types: ${JSON.stringify([...o])} vs ${JSON.stringify([...s])}`,{tag:"edge",from:r,to:i}),e.types!==t.types&&n.report.addComment(`Target of ${r}->${i} in ${n.leftname} differs in edge types: ${JSON.stringify([...(0,l.edgeTypesToNames)(e.types)])} vs ${JSON.stringify([...(0,l.edgeTypesToNames)(t.types)])}`,{tag:"edge",from:r,to:i})}function y(e,t,n,r){if(void 0!==n&&void 0!==r){(n.size<r.size&&!e.config.leftIsSubgraph||n.size>r.size&&!e.config.rightIsSubgraph)&&e.report.addComment(`Vertex ${t} differs in number of outgoing edges. ${e.leftname}: [${[...n.keys()].join(",")}] vs ${e.rightname}: [${[...r.keys()].join(",")}] `,{tag:"vertex",id:t});for(const[i,o]of n){const n=r.get(i);void 0!==n?_(o,n,e,t,i):e.config.rightIsSubgraph||e.report.addComment(`Target of ${t}->${i} in ${e.leftname} is not present in ${e.rightname}`,{tag:"edge",from:t,to:i})}}else(void 0===n&&!e.config.leftIsSubgraph||void 0===r&&!e.config.rightIsSubgraph)&&e.report.addComment(`Vertex ${t} has undefined outgoing edges. ${e.leftname}: ${JSON.stringify(n,o.jsonReplacer)} vs ${e.rightname}: ${JSON.stringify(r,o.jsonReplacer)}`,{tag:"vertex",id:t})}t.DataflowDifferenceReport=p},36556:(e,t,n)=>{"use strict";var r=n(70453),i=n(73126),o=i([r("%String.prototype.indexOf%")]);e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i([n]):n}},36604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractLocation=s,t.retrieveMetaStructure=function(e){return{location:s(e),content:e.text}},t.assureTokenType=function(e,t){if(e!==t)throw new r.ParseError(`expected name to be ${t}, yet received ${e}`)},t.getTokenType=a,t.getWithTokenType=function(e){return e.map((e=>({name:a(e),content:e})))},t.retrieveOpName=function(e){return e.content.text},t.ensureChildrenAreLhsAndRhsOrdered=function(e,t){const n=s(e),o=s(t);if(!(0,i.rangeStartsCompletelyBefore)(n,o))throw new r.ParseError(`expected the first child to be the lhs, yet received ${JSON.stringify(e)} & ${JSON.stringify(t)}`)},t.ensureExpressionList=function(e){return e.type!==o.RType.ExpressionList?{type:o.RType.ExpressionList,grouping:void 0,location:e.location,info:e.info,lexeme:void 0,children:[e]}:e};const r=n(66197),i=n(44441),o=n(49375);function s(e){return(0,i.rangeFrom)(e.line1,e.col1,e.line2,e.col2)}function a(e){return e.token}},36965:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HappensBeforeQueryDefinition=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(17579);t.HappensBeforeQueryDefinition={executor:a.executeHappensBefore,asciiSummarizer:(e,t,n,r)=>{const s=n;r.push(`Query: ${(0,i.bold)("happens-before",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`);for(const[e,t]of Object.entries(s.results))r.push(`   ╰ ${e}: ${t}`);return!0},schema:s.default.object({type:s.default.string().valid("happens-before").required().description("The type of the query."),a:s.default.string().required().description("The first slicing criterion."),b:s.default.string().required().description("The second slicing criterion.")}).description("Happens-Before tracks whether a always happens before b.")}},37007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,s,u;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var u=l.length,c=h(l,u);for(n=0;n<u;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},37016:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpecialSymbol=function(e){return e.content===r.RNull||e.content===r.RNa};const r=n(48060)},37478:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStarCommand=t.normalizeCommand=void 0;const a=n(6777),l=n(72814),u=n(67820),c=Promise.resolve().then((()=>s(n(11676)))),d=n(77529);async function f(e,t){return await(0,a.createNormalizePipeline)(e,{request:(0,l.requestFromInput)(t.trim())}).allRemainingSteps()}function p(e){return e.startsWith('"')?JSON.parse(e):e}function h(e,t,n){return e.formatter.format(`Copied ${t} to clipboard (normalize: ${n}ms).`,{color:7,effect:d.ColorEffect.Foreground,style:3})}t.normalizeCommand={description:`Get mermaid code for the normalized AST of R code, start with '${l.fileProtocol}' to indicate a file`,usageExample:":normalize",aliases:["n"],script:!1,fn:async(e,t,n)=>{const r=await f(t,p(n)),i=(0,u.normalizedAstToMermaid)(r.normalize.ast);e.stdout(i);try{(await c).default.writeSync(i),e.stdout(h(e,"mermaid url",r.normalize[".meta"].timing))}catch{}}},t.normalizeStarCommand={description:"Returns the URL to mermaid.live",usageExample:":normalize*",aliases:["n*"],script:!1,fn:async(e,t,n)=>{const r=await f(t,p(n)),i=(0,u.normalizedAstToMermaidUrl)(r.normalize.ast);e.stdout(i);try{(await c).default.writeSync(i),e.stdout(h(e,"mermaid url",r.normalize[".meta"].timing))}catch{}}}},38314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLineDirective=function(e,t){const{location:n,content:l}=(0,i.retrieveMetaStructure)(t);(0,o.guard)(l.startsWith("#line"),"line directive must start with #line");const u=a.exec(l);return null===u?(r.parseLog.debug(`[line-directive] does not match the regex ${a.source} given ${JSON.stringify(l)}`),{type:s.RType.Comment,location:n,lexeme:l,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:l},content:l.slice(1)}):{type:s.RType.LineDirective,location:n,line:parseInt(u[1]),file:u[2],lexeme:l,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:l}}};const r=n(56293),i=n(36604),o=n(57012),s=n(49375),a=/^#line\s+(\d+)\s+"([^"]+)"\s*$/},39125:()=>{},39209:(e,t,n)=>{"use strict";var r=n(76578),i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}},39279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPipelineError=void 0;class n extends Error{constructor(e){super(e),this.name="InvalidPipelineError"}}t.InvalidPipelineError=n},39767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyBuiltInMemory=t.BuiltInMemory=t.BuiltInProcessorMapper=t.BuiltIn=void 0,t.registerBuiltInFunctions=function(e,n,r,i){for(const o of n){(0,p.guard)(void 0!==r,`Processor for ${o} is undefined, maybe you have an import loop? You may run 'npm run detect-circular-deps' - although by far not all are bad`);const n=[{type:f.ReferenceType.BuiltInFunction,definedAt:t.BuiltIn,controlDependencies:void 0,processor:(e,t,n,o)=>r(e,t,n,o,i),name:o,nodeId:t.BuiltIn}];t.BuiltInMemory.set(o,n),e&&t.EmptyBuiltInMemory.set(o,n)}};const r=n(92397),i=n(3967),o=n(11556),s=n(33152),a=n(49360),l=n(96117),u=n(41873),c=n(46013),d=n(19439),f=n(46044),p=n(57012),h=n(3645),m=n(74205),g=n(90271),_=n(87584),y=n(79133),b=n(34966),v=n(85178),w=n(19744),E=n(32145),S=n(60766),x=n(52659),R=n(82429);t.BuiltIn="built-in",t.BuiltInProcessorMapper={"builtin:default":function(e,t,n,i,o){const{information:s,processedArguments:a}=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:i,forceArgs:o.forceArgs});if(void 0!==o.returnsNthArgument){const e="last"===o.returnsNthArgument?a[t.length-1]:a[o.returnsNthArgument];void 0!==e&&s.graph.addEdge(n,e.entryPoint,b.EdgeType.Returns)}if(o.readAllArguments)for(const e of a)e&&s.graph.addEdge(n,e.entryPoint,b.EdgeType.Reads);return o.hasUnknownSideEffects&&("boolean"!=typeof o.hasUnknownSideEffects?s.graph.markIdForUnknownSideEffects(n,o.hasUnknownSideEffects):s.graph.markIdForUnknownSideEffects(n)),void 0!==o.cfg&&(s.exitPoints=[...s.exitPoints,{type:o.cfg,nodeId:n,controlDependencies:i.controlDependencies}]),s},"builtin:apply":E.processApply,"builtin:expression-list":_.processExpressionList,"builtin:source":w.processSourceCall,"builtin:access":i.processAccess,"builtin:if-then-else":o.processIfThenElse,"builtin:get":y.processGet,"builtin:library":v.processLibrary,"builtin:assignment":s.processAssignment,"builtin:special-bin-op":a.processSpecialBinOp,"builtin:pipe":l.processPipe,"builtin:function-definition":g.processFunctionDefinition,"builtin:quote":m.processQuote,"builtin:for-loop":u.processForLoop,"builtin:repeat-loop":c.processRepeatLoop,"builtin:while-loop":d.processWhileLoop,"builtin:replacement":h.processReplacementFunction,"builtin:list":R.processList},t.BuiltInMemory=new Map,t.EmptyBuiltInMemory=new Map,(0,S.registerBuiltInDefinitions)(x.DefaultBuiltinConfig)},40015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textWithTooltip=function(e,t){return t?`<span title=${JSON.stringify(t)}>${e}</span>`:e}},40245:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.FlowrInternalSession=void 0;const a=s(n(91398)),l=n(74265),u=n(51451),c=n(32066),d=n(15459),f=n(62288),p=n(8238),h=n(6777),m=n(72814),g=n(67820),_=n(29942),y=n(86675),b=n(49144),v=n(42995),w=n(70728),E=n(67481);class S{static treeSitterInitialized=!1;state;rVersion;working=!1;parser;outputChannel;forcedEngine;constructor(e,t){this.outputChannel=e,this.forcedEngine=t,this.state="inactive",(0,l.updateStatusBar)()}async workingOnSlice(e,t){try{return this.setWorking(!0),t(e)}finally{this.setWorking(!1)}}setWorking(e){this.working=e,(0,l.updateStatusBar)()}async initialize(){switch(this.state="loading",(0,l.updateStatusBar)(),this.outputChannel.appendLine("Starting internal flowR engine"),this.forcedEngine??(0,l.getConfig)().get(u.Settings.Rengine)){case"r-shell":{let e={revive:2,sessionName:"flowr - vscode"};const t=(0,l.getConfig)().get(u.Settings.Rexecutable)?.trim();let n;void 0!==t&&t.length>0&&(e={...e,pathToRExecutable:t}),this.outputChannel.appendLine(`Using options ${JSON.stringify(e)}`),this.parser=new p.RShell(e),this.parser.tryToInjectHomeLibPath();const r=new Promise((e=>n=setTimeout((()=>e(null)),5e3)));await Promise.race([this.parser.usedRVersion(),r]).then((e=>{if(clearTimeout(n),e)this.outputChannel.appendLine(`Using R version ${e.toString()}`),e.major<l.MINIMUM_R_MAJOR?a.window.showErrorMessage(`You are using R version ${e.toString()}, but ${l.MINIMUM_R_MAJOR}.0.0 or higher is required.`):e.major<l.BEST_R_MAJOR&&a.window.showWarningMessage(`You are using R version ${e.toString()}, which flowR has not been tested for. Version ${l.BEST_R_MAJOR}.0.0 or higher is recommended.`),this.state="active",this.rVersion=e.toString(),(0,l.updateStatusBar)();else{const e="See documentation";a.window.showErrorMessage("The R version could not be determined. R needs to be installed and part of your PATH environment variable.",e).then((t=>{t===e&&a.env.openExternal(a.Uri.parse("https://github.com/flowr-analysis/vscode-flowr/blob/main/README.md#using"))})),this.state="failure",(0,l.updateStatusBar)()}}));break}case"tree-sitter":if(!S.treeSitterInitialized)try{const e=(0,l.getWasmRootPath)();this.outputChannel.appendLine("Initializing tree-sitter... (wasm at: "+e+")"),(0,E.amendConfig)({engines:[{type:"tree-sitter",wasmPath:`${e}/tree-sitter-r.wasm`,treeSitterWasmPath:`${e}/tree-sitter.wasm`}]}),await y.TreeSitterExecutor.initTreeSitter(),S.treeSitterInitialized=!0}catch(e){this.outputChannel.appendLine("Error in init: "+e?.message)}this.outputChannel.appendLine("Tree-sitter loaded!"),this.parser=new y.TreeSitterExecutor,this.outputChannel.appendLine("Tree-sitter initialized!"),this.state="active",this.rVersion=await this.parser.rVersion(),(0,l.updateStatusBar)()}}destroy(){this.parser?.close()}async retrieveSlice(e,t,n=!0){if(!this.parser)return{code:"",sliceElements:[]};try{return await this.workingOnSlice(this.parser,(async()=>await this.extractSlice(t,e)))}catch(e){return this.outputChannel.appendLine("Error: "+e?.message),e.stack?.split("\n").forEach((e=>this.outputChannel.appendLine(e))),n&&a.window.showErrorMessage(`There was an error while extracting a slice: ${e?.message}. See the flowR output for more information.`),{code:"",sliceElements:[]}}}async retrieveDataflowMermaid(e){if(!this.parser)return"";const t=await(0,h.createDataflowPipeline)(this.parser,{request:(0,m.requestFromInput)((0,f.consolidateNewlines)(e.getText()))}).allRemainingSteps();return(0,c.dataflowGraphToMermaid)(t.dataflow)}async retrieveAstMermaid(e){return this.parser?await this.workingOnSlice(this.parser,(async t=>{const n=await(0,h.createNormalizePipeline)(t,{request:(0,m.requestFromInput)((0,f.consolidateNewlines)(e.getText()))}).allRemainingSteps();return(0,g.normalizedAstToMermaid)(n.normalize.ast)})):""}async retrieveCfgMermaid(e){return this.parser?await this.workingOnSlice(this.parser,(async t=>{const n=await(0,h.createNormalizePipeline)(t,{request:(0,m.requestFromInput)((0,f.consolidateNewlines)(e.getText()))}).allRemainingSteps();return(0,_.cfgToMermaid)((0,d.extractCFG)(n.normalize),n.normalize)})):""}async extractSlice(e,t){const n=(0,f.consolidateNewlines)(e.getText()),r=(0,h.createSlicePipeline)(this.parser,{criterion:t,request:(0,m.requestFromInput)(n)}),i=await r.allRemainingSteps(),o=(0,f.makeSliceElements)(i.slice.result,(e=>i.normalize.idMap.get(e)?.location));return(0,l.isVerbose)()&&this.outputChannel.appendLine("slice: "+JSON.stringify([...i.slice.result])),{code:i.reconstruct.code,sliceElements:o}}async retrieveQuery(e,t){if(!this.parser)throw new Error("No parser available");const n=await(0,h.createDataflowPipeline)(this.parser,{request:(0,m.requestFromInput)((0,f.consolidateNewlines)(e.getText()))}).allRemainingSteps();return n.normalize.hasError?[{},!0]:[(0,b.executeQueries)({ast:n.normalize,dataflow:n.dataflow},t),n.normalize.hasError??!1]}async runRepl(e){this.parser&&(e.output.stdout(await(0,w.versionReplString)(this.parser)),await(0,v.repl)({...e,parser:this.parser}))}}t.FlowrInternalSession=S},40246:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ReconstructionContentProvider=t.flowrScheme=void 0,t.makeUri=function(e,n){return e&&n&&!n.startsWith("/")&&(n="/"+n),a.Uri.from({scheme:t.flowrScheme,authority:e,path:n})},t.showUri=async function(e,t="r",n=a.ViewColumn.Beside){for(const t of a.window.visibleTextEditors)if(t.document.uri.toString()===e.toString())return t;const r=await a.workspace.openTextDocument(e);await a.languages.setTextDocumentLanguage(r,t);const i=await a.window.showTextDocument(r,{viewColumn:n,preserveFocus:!0,selection:new a.Selection(r.lineCount-1,0,r.lineCount-1,0)}),o=i.document.lineCount,s=i.document.lineAt(o-1);return i.selection=new a.Selection(s.range.end,s.range.end),i.revealRange(s.range,a.TextEditorRevealType.Default),setTimeout((()=>{i.revealRange(s.range,a.TextEditorRevealType.Default)}),50),i},t.getReconstructionContentProvider=function(){return u||(u=new l,a.workspace.registerTextDocumentContentProvider(t.flowrScheme,u)),u};const a=s(n(91398));t.flowrScheme="flowr";class l{listeners=[];contents=new Map;onDidChange(e){return this.listeners.push(e),new a.Disposable((()=>{this.listeners=this.listeners.filter((t=>t!==e))}))}notifyListeners(e){for(const t of this.listeners)t(e)}updateContents(e,t){void 0!==t?this.contents.set(e.toString(),t):this.contents.delete(e.toString()),this.notifyListeners(e)}provideTextDocumentContent(e){return this.contents.get(e.toString())}}let u;t.ReconstructionContentProvider=l},40318:(e,t)=>{"use strict";function n(e){return null!=e&&(2===e.nodeType||e.specified)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNSResolver=t.isNamespaceNode=t.isProcessingInstruction=t.isFragment=t.isDocument=t.isCData=t.isText=t.isAttribute=t.isElement=void 0,t.isElement=function(e){return null!=e&&1===e.nodeType},t.isAttribute=n,t.isText=function(e){return null!=e&&3===e.nodeType},t.isCData=function(e){return null!=e&&4===e.nodeType},t.isDocument=function(e){return null!=e&&9===e.nodeType},t.isFragment=function(e){return null!=e&&11===e.nodeType},t.isProcessingInstruction=function(e){return null!=e&&7===e.nodeType},t.isNamespaceNode=function(e){return!!n(e)&&("xmlns"===e.localName||"xmlns"===e.prefix)},t.isNSResolver=function(e){return null!=e&&void 0!==e.lookupNamespaceURI}},40333:(e,t,n)=>{"use strict";const r=n(65606),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:s}=n(74641),{Buffer:a}=n(48287),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:u}=n(68526).codes;e.exports=function(e,t,n){let c,d;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,c=t[o]();else{if(!t||!t[s])throw new l("iterable",["Iterable"],t);d=!1,c=t[s]()}const f=new e({objectMode:!0,highWaterMark:1,...n});let p=!1;return f._read=function(){p||(p=!0,async function(){for(;;){try{const{value:e,done:t}=d?await c.next():c.next();if(t)f.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new u;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){i(async function(e){const t=null!=e,n="function"==typeof c.throw;if(t&&n){const{value:t,done:n}=await c.throw(e);if(await t,n)return}if("function"==typeof c.return){const{value:e}=await c.return();await e}}(e),(()=>r.nextTick(t,e)),(n=>r.nextTick(t,n||e)))},f}},40394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPath=void 0,t.XPath=class{expression;constructor(e){this.expression=e}toString(){return this.expression.toString()}evaluate(e){return e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.isHtml&&(void 0===e.caseInsensitive&&(e.caseInsensitive=!0),void 0===e.allowAnyNamespaceForNoPrefix&&(e.allowAnyNamespaceForNoPrefix=!0)),void 0===e.caseInsensitive&&(e.caseInsensitive=!1),this.expression.evaluate(e)}}},40537:(e,t,n)=>{var r=n(65606),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<i;a=r[++n])_(a)||!E(a)?s+=" "+a:s+=" "+u(a);return s},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var s={},a=/^$/;if(r.env.NODE_DEBUG){var l=r.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+l+"$","i")}function u(e,n){var r={seen:[],stylize:d};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,e,r.depth)}function c(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function d(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&R(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=f(e,i,r)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(R(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return p(n)}var u,c="",d=!1,E=["{","}"];return m(n)&&(d=!0,E=["[","]"]),R(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(c=" "+RegExp.prototype.toString.call(n)),S(n)&&(c=" "+Date.prototype.toUTCString.call(n)),x(n)&&(c=" "+p(n)),0!==s.length||d&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=d?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)I(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,d)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,E)):E[0]+c+E[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),I(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=_(n)?f(e,l.value,null):f(e,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===T(e)}function E(e){return"object"==typeof e&&null!==e}function S(e){return E(e)&&"[object Date]"===T(e)}function x(e){return E(e)&&("[object Error]"===T(e)||e instanceof Error)}function R(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(a.test(e)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(49032),t.isArray=m,t.isBoolean=g,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=w,t.types.isRegExp=w,t.isObject=E,t.isDate=S,t.types.isDate=S,t.isError=x,t.types.isNativeError=x,t.isFunction=R,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(81135);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[A((e=new Date).getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":"),[e.getDate(),O[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(56698),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t;if("function"!=typeof(t=e[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=N,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){r.nextTick(s.bind(null,null,e))}),(function(e){r.nextTick(P.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},40771:()=>{},40909:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},41096:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeBreak=function(e,t){(0,i.expensiveTrace)(r.parseLog,(()=>`[break] ${JSON.stringify(t)}`));const{location:n,content:a}=(0,o.retrieveMetaStructure)(t);return{type:s.RType.Break,location:n,lexeme:a,info:{fullRange:n,additionalTokens:[],fullLexeme:a}}};const r=n(56293),i=n(19742),o=n(36604),s=n(49375)},41229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fingerPrintOfQuery=a,t.executeResolveValueQuery=function({dataflow:{graph:e,environment:t},ast:n},l){const u=Date.now(),c={};for(const u of l){const l=a(u);c[l]&&r.log.warn(`Duplicate Key for resolve-value-query: ${l}, skipping...`);const d=u.criteria.map((e=>(0,s.recoverName)((0,i.slicingCriterionToId)(e,n.idMap),n.idMap))).flatMap((r=>(0,o.resolveToValues)(r,t,e.idMap??n.idMap)));c[l]={values:[...new Set(d)]}}return{".meta":{timing:Date.now()-u},results:c}};const r=n(19742),i=n(21578),o=n(85193),s=n(17949);function a(e){return JSON.stringify(e)}},41237:e=>{"use strict";e.exports=EvalError},41261:(e,t,n)=>{const r=n(53908),i=n(78311),o=n(35580);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},41333:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var r in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},41396:(e,t,n)=>{e.exports=n(37007).EventEmitter},41873:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processForLoop=function(e,t,n,_){if(3!==t.length)return c.dataflowLogger.warn(`For-Loop ${e.content} does not have three arguments, skipping`),(0,s.processKnownFunctionCall)({name:e,args:t,rootId:n,data:_}).information;const[y,b,v]=t.map((e=>(0,u.unpackArgument)(e)));(0,a.guard)(void 0!==y&&void 0!==b&&void 0!==v,(()=>`For-Loop ${JSON.stringify(t)} has missing arguments! Bad!`));const w=(0,r.processDataflowFor)(b,_);if((0,i.alwaysExits)(w))return c.dataflowLogger.warn(`For-Loop ${n} forces exit in vector, skipping rest`),w;const E=(0,r.processDataflowFor)(y,_),S=_.controlDependencies;_={..._,controlDependencies:[..._.controlDependencies??[],{id:e.info.id,when:!0}]};let x=(0,d.overwriteEnvironment)(w.environment,E.environment);const R=E.graph.mergeWith(w.graph),T=[...E.unknownReferences,...E.in];for(const t of T)x=(0,f.define)({...t,definedAt:e.info.id,type:g.ReferenceType.Variable},!1,x);_={..._,environment:x};const A=(0,r.processDataflowFor)(v,_),O=R.mergeWith(A.graph),I=(0,p.appendEnvironment)(x,A.environment),N=(0,o.produceNameSharedIdMap)((0,o.findNonLocalReads)(O,T));for(const e of T)O.addEdge(e.nodeId,w.entryPoint,m.EdgeType.DefinedBy),O.setDefinitionOfVertex(e);const P=[...E.out,...T,...(0,h.makeAllMaybe)(A.out,O,I,!0)];return(0,o.linkCircularRedefinitionsWithinALoop)(O,N,A.out),(0,l.patchFunctionCall)({nextGraph:O,rootId:n,name:e,data:{..._,controlDependencies:S},argumentProcessResult:[E,w,A]}),O.addEdge(n,A.entryPoint,m.EdgeType.NonStandardEvaluation),O.addEdge(e.info.id,E.entryPoint,m.EdgeType.Reads),O.addEdge(e.info.id,w.entryPoint,m.EdgeType.Reads),{unknownReferences:[],in:[{nodeId:n,name:e.content,controlDependencies:S,type:g.ReferenceType.Function},...w.unknownReferences,...[...N.values()].flat()],out:P,graph:O,entryPoint:e.info.id,exitPoints:(0,i.filterOutLoopExitPoints)(A.exitPoints),environment:I}};const r=n(22476),i=n(47318),o=n(56533),s=n(92397),a=n(57012),l=n(80876),u=n(55143),c=n(22438),d=n(10682),f=n(62948),p=n(4683),h=n(73326),m=n(34966),g=n(46044)},42097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeConfigQuery=function(e,t){return 1!==t.length&&r.log.warn("Config query expects only up to one query, but got",t.length),{".meta":{timing:0},config:(0,i.getConfig)()}};const r=n(19742),i=n(67481)},42284:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMarker=void 0,t.initCommand=function(e){return`flowr_output<-NULL;flowr_get_ast<-compiler::cmpfun(function(...){tryCatch({flowr_output<<-getParseData(parse(...,keep.source=TRUE),includeText=TRUE);cat(paste0(sprintf("[%s,%s,%s,%s,%s,%s,%s,%s,%s]",flowr_output$line1,flowr_output$col1,flowr_output$line2,flowr_output$col2,flowr_output$id,flowr_output$parent,encodeString(flowr_output$token,quote="\\""),ifelse(flowr_output$terminal,"true","false"),encodeString(flowr_output$text,quote="\\"")),collapse=","))},error=function(e){cat("${t.ErrorMarker}")});cat(${(0,r.ts2r)(e)})},options=compiler::setCompilerOptions(optimize=3));`};const r=n(48060);t.ErrorMarker="err"},42825:(e,t,n)=>{"use strict";const{Buffer:r}=n(48287),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:s}=n(74641),{promisify:{custom:a}}=n(56017),{streamReturningOperators:l,promiseReturningOperators:u}=n(1284),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=n(68526),d=n(8489),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:p}=n(13920),{pipeline:h}=n(28431),{destroyer:m}=n(57647),g=n(89365),_=n(25018),y=n(136),b=e.exports=n(80334).Stream;b.isDestroyed=y.isDestroyed,b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.isWritable=y.isWritable,b.Readable=n(23125);for(const w of o(l)){const E=l[w];function S(...e){if(new.target)throw c();return b.Readable.from(s(E,this,e))}i(S,"name",{__proto__:null,value:E.name}),i(S,"length",{__proto__:null,value:E.length}),i(b.Readable.prototype,w,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const x of o(u)){const R=u[x];function T(...e){if(new.target)throw c();return s(R,this,e)}i(T,"name",{__proto__:null,value:R.name}),i(T,"length",{__proto__:null,value:R.length}),i(b.Readable.prototype,x,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}b.Writable=n(77221),b.Duplex=n(43559),b.Transform=n(68649),b.PassThrough=n(62091),b.pipeline=h;const{addAbortSignal:v}=n(30810);b.addAbortSignal=v,b.finished=g,b.destroy=m,b.compose=d,b.setDefaultHighWaterMark=f,b.getDefaultHighWaterMark=p,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>_}),i(h,a,{__proto__:null,enumerable:!0,get:()=>_.pipeline}),i(g,a,{__proto__:null,enumerable:!0,get:()=>_.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},42995:function(e,t,n){"use strict";var r,i=n(65606),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),i=0;i<n.length;i++)"default"!==n[i]&&o(t,e,n[i]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replCompleter=R,t.makeDefaultReplReadline=T,t.replProcessAnswer=O,t.repl=async function({parser:e=new v.RShell({revive:2}),rl:t=c.createInterface(T()),output:n=b.standardReplOutput,historyFile:r=x,allowRSessionAccess:i=!1}){for(r&&t.on("history",(e=>h.default.writeFileSync(r,e.join("\n"),{encoding:"utf-8"})));;)await new Promise(((r,o)=>{t.question((0,u.prompt)(),(s=>{t.pause(),O(n,s,e,i).then((()=>{t.resume(),r()})).catch(o)}))}))},t.loadReplHistory=I;const u=n(90774),c=a(n(99602)),d=n(53998),f=l(n(51072)),p=l(n(57975)),h=l(n(89801)),m=n(16007),g=n(48339),_=n(10891),y=n(72814),b=n(29828),v=n(8238),w=n(19742);let E;function S(){return void 0===E&&(E=Array.from((0,g.getCommandNames)(),(e=>`:${e}`))),E}const x=p.default.join(f.default.tmpdir(),".flowrhistory");function R(e){const t=(0,m.splitAtEscapeSensitive)(e),n=e.endsWith(" ");if(t.length>1||n){const e=S().find((e=>t[0]===e));if(e){const r=[],i=e.slice(1);if(!0===(0,g.getCommand)(i)?.script){const e=_.scripts[i].options;r.push(...(0,_.getValidOptionsForCompletion)(e,t).map((e=>`${e} `)))}else r.push(y.fileProtocol);r.push(" ");const o=n?"":t[t.length-1];return[r.filter((e=>e.startsWith(o))),o]}}return[S().filter((t=>t.startsWith(e))).map((e=>`${e} `)),e]}function T(){return{input:i.stdin,output:i.stdout,tabSize:4,terminal:!0,history:I(x),removeHistoryDuplicates:!0,completer:R}}async function A(e,t,n,r){if(t.startsWith(":")){const i=t.slice(1).split(" ")[0].toLowerCase(),o=(0,g.getCommand)(i),s=t=>e.formatter.format(t,{style:1});if(o)try{await o.fn(e,n,t.slice(i.length+2).trim(),r)}catch(t){e.stdout(`${s(`Failed to execute command ${i}`)}: ${t?.message}. Using the ${s("--verbose")} flag on startup may provide additional information.\n`),w.log.settings.minLevel<6&&console.error(t)}else e.stdout(`the command '${i}' is unknown, try ${s(":help")} for more information\n`)}else await(0,d.tryExecuteRShellCommand)(e,n,t,r)}async function O(e,t,n,r){const i=(0,m.splitAtEscapeSensitive)(t,!1,";");for(const t of i)await A(e,t,n,r)}function I(e){try{if(!h.default.existsSync(e))return;return h.default.readFileSync(e,{encoding:"utf-8"}).split("\n")}catch(t){return w.log.error(`Failed to load repl history from ${e}: ${t?.message}`),void w.log.error(t?.stack)}}},43559:(e,t,n)=>{"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:s}=n(74641);e.exports=u;const a=n(23125),l=n(77221);s(u.prototype,a.prototype),s(u,a);{const e=o(l.prototype);for(let t=0;t<e.length;t++){const n=e[t];u.prototype[n]||(u.prototype[n]=l.prototype[n])}}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,d;function f(){return void 0===c&&(c={}),c}r(u.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),u.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},u.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},u.from=function(e){return d||(d=n(21973)),d(e,"body")}},43927:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},44400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlToObject=void 0,t.urlToObject=function(e){return{href:e.href,protocol:e.protocol,username:e.username,password:e.password,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,searchParams:[...e.searchParams].map((([e,t])=>({key:e,value:t}))),hash:e.hash,origin:e.origin}}},44441:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeStart=function(e){return void 0===e?void 0:[e[0],e[1]]},t.getRangeEnd=function(e){return void 0===e?void 0:[e[2],e[3]]},t.rangeFrom=function(e,t,n,r){return[Number(e),Number(t),Number(n),Number(r)]},t.mergeRanges=function(...e){return(0,r.guard)(e.length>0,"Cannot merge no ranges"),e.reduce((([e,t,n,r],[i,o,s,a])=>[...e<i||e===i&&t<o?[e,t]:[i,o],...n>s||n===s&&r>a?[n,r]:[s,a]]),e[0])},t.rangeStartsCompletelyBefore=function([,,e,t],[n,r,,]){return e<n||e===n&&t<r},t.rangesOverlap=function([e,t,n,r],[i,o,s,a]){return e<=s&&i<=n&&t<=a&&o<=r},t.addRanges=function([e,t,n,r],[i,o,s,a]){return[e+i,t+o,n+s,r+a]},t.rangeCompare=function([e,t,,],[n,r,,]){return e===n?t-r:e-n};const r=n(57012)},44862:()=>{},44918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeNext=function(e,t){(0,r.expensiveTrace)(i.parseLog,(()=>`[next] ${JSON.stringify(t)}`));const{location:n,content:a}=(0,o.retrieveMetaStructure)(t);return{type:s.RType.Next,location:n,lexeme:a,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(19742),i=n(56293),o=n(36604),s=n(49375)},45550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeTest=void 0;const r=n(40318),i=n(93672);class o{static NAMETESTANY=0;static NAMETESTPREFIXANY=1;static NAMETESTQNAME=2;static COMMENT=3;static TEXT=4;static PI=5;static NODE=6;static isNodeType(e){return t=>e.includes(t.nodeType)||t.specified&&e.includes(2)}static makeNodeTypeTest(e,t,n){return new class extends o{constructor(){super(e)}matches=o.isNodeType(t);toString=()=>n}}static hasPrefix(e){return e.prefix||-1!==(e.nodeName||e.tagName).indexOf(":")}static isElementOrAttribute=o.isNodeType([1,2]);static nameSpaceMatches(e,t,n){const i=((0,r.isElement)(n)||(0,r.isAttribute)(n)?n.namespaceURI:void 0)||"";if(!e)return!i||t.allowAnyNamespaceForNoPrefix&&!o.hasPrefix(n);const s=t.namespaceResolver.getNamespace(e,n);return null!=s&&s===i}static localNameMatches=(e,t,n)=>{const r=n.localName||n.nodeName;return t.caseInsensitive?e.toLowerCase()===r.toLowerCase():e===r};static NameTestPrefixAny=class extends o{prefix;constructor(e){super(o.NAMETESTPREFIXANY),this.prefix=e}matches(e,t){return o.isElementOrAttribute(e)&&o.nameSpaceMatches(this.prefix,t,e)}toString(){return this.prefix+":*"}};static NameTestQName=class extends o{name;prefix;localName;constructor(e){super(o.NAMETESTQNAME);const t=e.split(":");this.name=e,this.prefix=t.length>1?t[0]:null,this.localName=t[t.length>1?1:0]}matches(e,t){return o.isNodeType([1,2,i.XPathNamespace.XPATH_NAMESPACE_NODE])(e)&&o.nameSpaceMatches(this.prefix,t,e)&&o.localNameMatches(this.localName,t,e)}toString(){return this.name}};static PITest=class extends o{name;constructor(e){super(o.PI),this.name=e}matches(e,t){return o.isNodeType([7])(e)&&(e.target||e.nodeName)===this.name}toString(){return`processing-instruction("${this.name}")`}};static nameTestAny=o.makeNodeTypeTest(o.NAMETESTANY,[1,2,i.XPathNamespace.XPATH_NAMESPACE_NODE],"*");static textTest=o.makeNodeTypeTest(o.TEXT,[3,4],"text()");static commentTest=o.makeNodeTypeTest(o.COMMENT,[8],"comment()");static nodeTest=o.makeNodeTypeTest(o.NODE,[1,2,3,4,7,8,9],"node()");static anyPiTest=o.makeNodeTypeTest(o.PI,[7],"processing-instruction()");type;constructor(e){this.type=e}toString(){return"<unknown nodetest type>"}matches(e,t){return console.warn("unknown node test type"),!1}}t.NodeTest=o},45946:()=>{},46013:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processRepeatLoop=function(e,t,n,c){if(1!==t.length||t[0]===l.EmptyArgument)return u.dataflowLogger.warn(`Repeat-Loop ${e.content} does not have 1 argument, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:c}).information;const d=(0,a.unpackArgument)(t[0]),{information:f,processedArguments:p}=(0,o.processKnownFunctionCall)({name:e,args:d?[d]:t,rootId:n,data:c,patchData:(t,n)=>0===n?{...t,controlDependencies:[...t.controlDependencies??[],{id:e.info.id}]}:t,markAsNSE:[0]}),h=p[0];return(0,s.guard)(void 0!==h,(()=>`Repeat-Loop ${e.content} has no body, impossible!`)),(0,i.linkCircularRedefinitionsWithinALoop)(f.graph,(0,i.produceNameSharedIdMap)((0,i.findNonLocalReads)(f.graph,[])),h.out),f.exitPoints=(0,r.filterOutLoopExitPoints)(f.exitPoints),f};const r=n(47318),i=n(56533),o=n(92397),s=n(57012),a=n(55143),l=n(25377),u=n(22438)},46044:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReferenceTypeReverseMapping=t.ReferenceType=void 0,t.isReferenceType=function(e,t){return!!(e&t)},function(e){e[e.Unknown=1]="Unknown",e[e.Function=2]="Function",e[e.Variable=4]="Variable",e[e.Constant=8]="Constant",e[e.Parameter=16]="Parameter",e[e.Argument=32]="Argument",e[e.BuiltInConstant=64]="BuiltInConstant",e[e.BuiltInFunction=128]="BuiltInFunction"}(n||(t.ReferenceType=n={})),t.ReferenceTypeReverseMapping=new Map(Object.entries(n).map((([e,t])=>[t,e])))},46170:(e,t,n)=>{const r=n(53908),i=n(30144),{safeRe:o,t:s}=n(99718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),r.lastIndex=i.index+i[1].length+i[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],l=n[3]||"0",u=n[4]||"0",c=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return i(`${a}.${l}.${u}${c}${d}`,t)}},46225:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const u={ifThen:(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),thenBody:(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),ifThenElse:(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),elseBody:(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),nestedIfThen:(0,o.emptySummarizedWithProject)(),nestedIfThenElse:(0,o.emptySummarizedWithProject)(),deepestNesting:(0,o.emptySummarizedWithProject)(),switchCase:(0,i.emptyCommonSyntaxTypeCounts)((()=>[]))};for(const[e,n]of t.entries()){const t=n.controlflow;for(const[n,s]of Object.entries(t))if("object"==typeof s)(0,i.appendCommonSyntaxTypeCounter)(u[n],s);else{const t=u[n];t.count.push(s),s>0&&(0,o.recordFilePath)(t,e,r)}}const c=s.default.createWriteStream(a.default.join(n,"control-flow-meta.csv"));c.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(u)){const r=t;if("uniqueProjects"in r)c.write(`${JSON.stringify(e)},${r.uniqueProjects.size},${r.uniqueFiles.size},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(r.count))}\n`);else{const t=s.default.createWriteStream(a.default.join(n,`control-flow-type-${e}.csv`));t.write(`kind,name,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,n]of Object.entries(r))if(Array.isArray(n))t.write(`${JSON.stringify(e)},"",${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(n.flat()))}\n`);else for(const[r,i]of Object.entries(n))t.write(`${JSON.stringify(e)},${JSON.stringify(r)},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(i.flat()))}\n`);t.close()}}};const i=n(67102),o=n(61685),s=r(n(14348)),a=r(n(57975)),l=n(71339)},46254:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).minor},46287:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IdMapQueryDefinition=void 0;const i=n(76005),o=n(77529),s=n(87247),a=r(n(16075)),l=n(5350);t.IdMapQueryDefinition={executor:i.executeIdMapQuery,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("id-map",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push(`   ╰ Id List: {${(0,l.summarizeIdsIfTooLong)(e,[...i.idMap.keys()])}}`),!0},schema:a.default.object({type:a.default.string().valid("id-map").required().description("The type of the query.")}).description("The id map query retrieves the id map from the normalized AST.")}},46714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionCall=void 0;const r=n(67608),i=n(52950);class o extends i.Expression{functionName;arguments;constructor(e,t){super(),this.functionName=e,this.arguments=t}evaluate(e){const t=r.FunctionResolverImpl.getFunctionFromContext(this.functionName,e);if(void 0===t)throw new Error("Unknown function "+this.functionName);return t(e,...this.arguments)}toString(){const e=this.arguments.map((e=>e.toString())).join(", ");return`${this.functionName}(${e})`}}t.FunctionCall=o},46891:(e,t,n)=>{"use strict";var r,i=n(65606);e.exports=R,R.ReadableState=x,n(37007).EventEmitter;var o,s=function(e,t){return e.listeners(t).length},a=n(41396),l=n(48287).Buffer,u=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=n(77199);o=c&&c.debuglog?c.debuglog("stream"):function(){};var d,f,p,h=n(81766),m=n(54347),g=n(66644).getHighWaterMark,_=n(12463).F,y=_.ERR_INVALID_ARG_TYPE,b=_.ERR_STREAM_PUSH_AFTER_EOF,v=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(56698)(R,a);var E=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function x(e,t,i){r=r||n(88101),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(83141).I),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function R(e){if(r=r||n(88101),!(this instanceof R))return new R(e);var t=this instanceof r;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,n,r,i){o("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,a);else if(i||(s=function(e,t){var n,r;return r=t,l.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(a,t)),s)E(e,s);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r)a.endEmitted?E(e,new w):A(e,a,t,!0);else if(a.ended)E(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?A(e,a,t,!1):$(e,a)):A(e,a,t,!1)}else r||(a.reading=!1,$(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function A(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&N(e)),$(e,t)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),R.prototype.destroy=m.destroy,R.prototype._undestroy=m.undestroy,R.prototype._destroy=function(e,t){t(e)},R.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},R.prototype.unshift=function(e){return T(this,e,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(e){d||(d=n(83141).I);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var O=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function N(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(P,e))}function P(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function $(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){o("readable nexttick read 0"),e.read(0)}function j(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(B,t,e))}function B(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}R.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):N(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},R.prototype._read=function(e){E(this,new v("_read()"))},R.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,o("pipe count=%d opts=%j",r.pipesCount,t);var a=t&&!1===t.end||e===i.stdout||e===i.stderr?m:l;function l(){o("onend"),e.end()}r.endEmitted?i.nextTick(a):n.once("end",a),e.on("unpipe",(function t(i,s){o("onunpipe"),i===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",p),e.removeListener("finish",h),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",l),n.removeListener("end",m),n.removeListener("data",d),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",u);var c=!1;function d(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==U(r.pipes,e))&&!c&&(o("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function f(t){o("onerror",t),m(),e.removeListener("error",f),0===s(e,"error")&&E(e,t)}function p(){e.removeListener("finish",h),m()}function h(){o("onfinish"),e.removeListener("close",p),m()}function m(){o("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",h),e.emit("pipe",n),r.flowing||(o("pipe resume"),n.resume()),e},R.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},R.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,o("on readable",r.length,r.reading),r.length?N(this):r.reading||i.nextTick(k,this))),n},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(M,this),n},R.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(M,this),t},R.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(j,e,t))}(this,e)),e.paused=!1,this},R.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(65034)),f(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),R._fromList=F,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(e,t){return void 0===p&&(p=n(90968)),p(R,e,t)})},47119:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},47146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlusOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).number.plus(this.rhs.evaluate(e).number)}toString(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"}}t.PlusOperation=i},47244:(e,t,n)=>{"use strict";var r=n(49092)(),i=n(36556)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"callee"in e&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},47318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNonDefaultExitPoints=function(e,t){e.push(...t.filter((({type:e})=>0!==e)))},t.initializeCleanDataflowInformation=function(e,t){return{unknownReferences:[],in:[],out:[],environment:t.environment,graph:new r.DataflowGraph(t.completeAst.idMap),entryPoint:e,exitPoints:[{nodeId:e,type:0,controlDependencies:void 0}]}},t.happensInEveryBranch=i,t.alwaysExits=function(e){return e.exitPoints?.some((e=>0!==e.type&&i(e.controlDependencies)))??!1},t.filterOutLoopExitPoints=function(e){return e.filter((({type:e})=>1===e||0===e))},t.diffControlDependency=o,t.diffControlDependencies=function(e,t,n){if(void 0!==e&&void 0!==t){e.length!==t.length&&n.report.addComment(`${n.position}Different control dependency lengths: ${e.length} vs. ${t.length}`);for(let r=0;r<e.length;++r)o(e[r],t[r],{...n,position:`${n.position}Control dependency at index: ${r}: `})}else e!==t&&n.report.addComment(`${n.position}Different control dependencies: ${JSON.stringify(e)} vs. ${JSON.stringify(t)}`)};const r=n(60347);function i(e){if(void 0===e)return!0;if(0===e.length)return!1;const t=[],n=new Set;for(const{id:r,when:i}of e)i?t.push(r):n.add(r);return t.every((e=>n.has(e)))}function o(e,t,n){void 0!==e&&void 0!==t?(e.id!==t.id&&n.report.addComment(`${n.position}Different control dependency ids. ${n.leftname}: ${e.id} vs. ${n.rightname}: ${t.id}`),e.when!==t.when&&n.report.addComment(`${n.position}Different control dependency when. ${n.leftname}: ${e.when} vs. ${n.rightname}: ${t.when}`)):e!==t&&n.report.addComment(`${n.position}Different control dependencies. ${n.leftname}: ${JSON.stringify(e)} vs. ${n.rightname}: ${JSON.stringify(t)}`)}},47453:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GreaterThanOrEqualOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"}}t.GreaterThanOrEqualOperation=i},48060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RNull=t.RNa=t.RInf=t.RIntegerMarker=t.RImaginaryMarker=t.RNumHexFloatRegex=t.RFalse=t.RTrue=void 0,t.ts2r=function e(r){if("string"==typeof r)return JSON.stringify(r);if("number"==typeof r)return isNaN(r)?t.RNa:isFinite(r)?r.toString():t.RInf;if("boolean"==typeof r)return r?"TRUE":"FALSE";if(null===r)return"NULL";if(void 0===r)return"NA";if(Array.isArray(r))return`c(${r.map(e).join(", ")})`;if("object"==typeof r)return`list(${Object.entries(r).map((([t,n])=>`${t} = ${e(n)}`)).join(", ")})`;throw new n(`cannot convert value of type ${typeof r} to R code`)},t.isBoolean=function(e){return e===t.RTrue||e===t.RFalse},t.boolean2ts=function(e){if(e===t.RTrue)return!0;if(e===t.RFalse)return!1;throw new n(`value ${e} is not a legal R boolean`)},t.number2ts=function(e){let n=e.toLowerCase();const r=e[e.length-1],i=r===t.RIntegerMarker,o=r===t.RImaginaryMarker;if((i||o)&&(n=n.slice(0,-1)),e===t.RInf)return{num:1/0,complexNumber:o,markedAsInt:i};if(e===t.RNa)return{num:NaN,complexNumber:o,markedAsInt:i};const s=n.match(t.RNumHexFloatRegex);if(null==s)return{num:Number(n),complexNumber:o,markedAsInt:i};{const{intPart:e,floatPart:t,exp:n}=s.groups,r=void 0===e?0:parseInt(`${e}`,16),a=void 0===t?0:function(e){return[...e].reduce(((e,t,n)=>e+parseInt(t,16)/16**(n+1)),0)}(t),l=parseInt(n,10);return{num:(r+a)*Math.pow(2,l),complexNumber:o,markedAsInt:i}}},t.string2ts=function(e){if(e.length<2)throw new n(`cannot parse string '${e}' as it is too short`);const t=e[0];if('"'===t||"'"===t)return{str:e.slice(1,-1),quotes:t};if("r"===t||"R"===t&&e.length>=3){const t=e[1];if('"'===t||"'"===t)return{str:e.slice(2,-1),quotes:t,flag:"raw"};throw new n(`expected string to start with a known quote (' or "), or raw, yet received ${e}`)}throw new n(`expected string to start with a known quote (' or "), or raw, yet received ${e}`)},t.isNA=function(e){return e===t.RNa};class n extends Error{constructor(e){super(e),this.name="ValueConversionError"}}t.RTrue="TRUE",t.RFalse="FALSE",t.RNumHexFloatRegex=/^\s*0x(?<intPart>[0-9a-f]+)?(\.(?<floatPart>[0-9a-f]*))?p(?<exp>[-+]?\d+)\s*$/,t.RImaginaryMarker="i",t.RIntegerMarker="L",t.RInf="Inf",t.RNa="NA",t.RNull="NULL"},48086:()=>{},48184:(e,t,n)=>{"use strict";var r,i=n(36556),o=n(99721)(/^\s*(?:function)?\*/),s=n(49092)(),a=n(93628),l=i("Object.prototype.toString"),u=i("Function.prototype.toString");e.exports=function(e){if("function"!=typeof e)return!1;if(o(u(e)))return!0;if(!s)return"[object GeneratorFunction]"===l(e);if(!a)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&a(t)}return a(e)===r}},48287:(e,t,n)=>{"use strict";const r=n(67526),i=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=a(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|h(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),a(e<0?0:0|h(e))}function f(e){const t=e.length<0?0:0|h(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function h(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return r?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function v(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(X(r))return s;e[n+s]=r}return s}function w(e,t,n,r){return J(G(t,e.length-n),e,n,r)}function E(e,t,n,r){return J(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J(H(t),e,n,r)}function x(e,t,n,r){return J(function(e,t){let n,r,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Q(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n);for(let e=0;e<a;++e)if(u[e]!==c[e]){o=u[e],s=c[e];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function O(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Y[e[r]];return i}function P(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function $(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,i){q(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function k(e,t,n,r,i){q(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function j(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return t=+t,n>>>=0,o||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return t=+t,n>>>=0,o||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||$(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||$(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||$(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||$(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||$(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||$(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||$(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||$(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||$(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||$(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Z((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Z((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}let i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Z((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Z((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};const D={};function B(e,t,n){D[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function q(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new D.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(r,i,o)}function V(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?K:e}function K(){throw new Error("BigInt not supported")}},48339:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helpCommand=void 0,t.getReplCommands=R,t.getCommandNames=function(){return void 0===v&&T(),v},t.getCommand=function(e){return void 0===w&&T(),R()[w[e]]},t.asOptionName=function(e){return 1==e.length?`-${e}`:`--${e}`},t.longestCommandName=A,t.padCmd=O;const r=n(17318),i=n(14093),o=n(90774),s=n(79725),a=n(75786),l=n(53998),u=n(37478),c=n(69421),d=n(31115),f=n(77529),p=n(16007),h=n(57012),m=n(10891),g=n(49204),_=n(29549);function y(e,t,n){let r=`  ${(0,f.bold)(O(":"+e[0]+(n?"[*]":"")),t)}${e[1].description}`;if(n&&(r+=` (star: ${n.description})`),0===e[1].aliases.length)return r;const i=e[1].aliases;return`${r} (alias${i.length>1?"es":""}: ${i.map((e=>(0,f.bold)(":"+e,t))).join(", ")})`}t.helpCommand={description:"Show help information",script:!1,usageExample:":help",aliases:["h","?"],fn:e=>{T(),e.stdout(`\nIf enabled ('--r-session-access'), you can just enter R expressions which get evaluated right away:\n${o.rawPrompt} ${(0,f.bold)("1 + 1",e.formatter)}\n${(0,f.italic)("[1] 2",e.formatter)}\n\nBesides that, you can use the following commands. The scripts ${(0,f.italic)("can",e.formatter)} accept further arguments. In general, those ending with [*] may be called with and without the star. \nThere are the following basic commands:\n${function(e){const t=[],n=R();for(const r of Object.entries(n)){if(r[1].script||r[0].endsWith("*"))continue;const i=n[r[0]+"*"];t.push(y(r,e,i))}return t.sort().join("\n")}(e.formatter)}\n\nFurthermore, you can directly call the following scripts which accept arguments. If you are unsure, try to add ${(0,f.italic)("--help",e.formatter)} after the command.\n${Array.from(Object.entries(R())).filter((([,{script:e}])=>e)).map((([t,{description:n}])=>`  ${(0,f.bold)(O(":"+t),e.formatter)}${n}`)).sort().join("\n")}\n\nYou can combine commands by separating them with a semicolon ${(0,f.bold)(";",e.formatter)}.\n`)}};const b={help:t.helpCommand,quit:r.quitCommand,version:s.versionCommand,execute:l.executeCommand,parse:a.parseCommand,normalize:u.normalizeCommand,"normalize*":u.normalizeStarCommand,dataflow:c.dataflowCommand,"dataflow*":c.dataflowStarCommand,controlflow:d.controlflowCommand,"controlflow*":d.controlflowStarCommand,lineage:g.lineageCommand,query:_.queryCommand,"query*":_.queryStarCommand};let v,w,E,S=!1;function x(e){try{return n(6120).resolve(e),!0}catch{return!1}}function R(){if(S)return b;S=!0;for(const[e,{target:t,description:n,type:r}]of Object.entries(m.scripts))"master script"===r&&(b[e]={description:n,aliases:[],script:!0,usageExample:`:${e} --help`,fn:async(e,n,r)=>{let o=`//${t}`;x(o)||(o=`//../../${t}`,x(o))?await(0,i.waitOnScript)(o,(0,p.splitAtEscapeSensitive)(r),(t=>(0,i.stdioCaptureProcessor)(t,(t=>e.stdout(t)),(t=>e.stderr(t))))):e.stderr(`Could not find the target script ${t} in the current directory or two directories up.`)}});return b}function T(){w={},v=[];for(const[e,{aliases:t}]of Object.entries(R())){(0,h.guard)(void 0===w[e],`Command ${e} is already registered!`),w[e]=e;for(const n of t)(0,h.guard)(void 0===w[n],`Command (alias) ${n} is already registered!`),w[n]=e;v.push(e),v.push(...t)}}function A(){return void 0===E&&(E=Array.from(Object.keys(R()),(e=>e.endsWith("*")?e.length+3:e.length)).reduce(((e,t)=>Math.max(e,t)),0)),E}function O(e){return String(e).padEnd(A()+2," ")}},48387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rolesOfParents=function(e,t){const n=[];let r=e;for(;void 0!==r;)n.push(r.info.role),r=r.info.parent?t.get(r.info.parent):void 0;return n}},48434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneEnvironmentInformation=function(e,t=!0){return{current:i(e.current,t),level:e.level}};const r=n(73326);function i(e,t){if(void 0===e)return;if(e.id===r.BuiltInEnvironment.id)return r.BuiltInEnvironment;const n=new r.Environment(t?i(e.parent,t):e.parent);return n.memory=new Map(JSON.parse(JSON.stringify([...e.memory]))),n}},48624:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const l=function(e,t){const n={};for(const[r,o]of e.entries()){const e=o.variables;for(const[o,s]of Object.entries(e)){let e=n[o];e||(e=(0,i.emptySummarizedWithProject)(),n[o]=e),e.count.push(s),s>0&&(0,i.recordFilePath)(e,r,t)}}return n}(t,r);(function(e,t){const n=o.default.createWriteStream(s.default.join(e,"variable-counts.csv"));n.write(`kind,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,r]of Object.entries(t)){if("unknownVariables"===e)continue;const t=r,i=(0,a.summarizeMeasurement)(t.count);n.write(`${JSON.stringify(e)},${t.uniqueProjects.size},${t.uniqueFiles.size},${(0,a.summarizedMeasurement2Csv)(i)}\n`)}n.close()})(n,l),function(e,t,n,r){const i=c(s.default.join(e,"usedVariables.txt"),t,n);u(r,"used-variables.csv",i),i.clear()}(e,t,r,n),function(e,t,n,r){const i=c(s.default.join(e,"definedVariables.txt"),t,n);u(r,"defined-variables.csv",i),i.clear()}(e,t,r,n),function(e,t,n,r){const i=c(s.default.join(e,"redefinedVariables.txt"),t,n);u(r,"redefined-variables.csv",i),i.clear()}(e,t,r,n)},t.writeVariableInfoToCsv=u;const i=n(61685),o=r(n(75203)),s=r(n(57975)),a=n(71339),l=n(33267);function u(e,t,n){const r=o.default.createWriteStream(s.default.join(e,t));r.write(`variable,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)("count")},${(0,a.summarizedMeasurement2CsvHeader)("line-frac")}\n`);for(const[e,t]of n.entries()){const{count:n,uniqueProjects:i,uniqueFiles:o,linePercentageInFile:s}=t,l=(0,a.summarizeMeasurement)(n),u=(0,a.summarizeMeasurement)(s.flat());r.write(`${JSON.stringify(e)},${i.size},${o.size},${(0,a.summarizedMeasurement2Csv)(l)},${(0,a.summarizedMeasurement2Csv)(u)}\n`)}r.close()}function c(e,t,n){const r=new Map;return(0,l.readLineByLineSync)(e,((o,s)=>{if(0===o.length)return;s%2500==0&&console.log(`    Processed ${s} lines of ${e}`);const[a,l]=JSON.parse(o.toString()),u=t.get(l??"")?.stats.lines[0].length,c=new Map;for(const[e,[t]]of a){let n=c.get(e);n||(n={...(0,i.emptySummarizedWithProject)(),linePercentageInFile:[]},c.set(e,n)),n.count.push(1),u&&n.linePercentageInFile.push(t/u)}for(const[e,t]of c.entries()){let o=r.get(e);o||(o={...(0,i.emptySummarizedWithProject)(),linePercentageInFile:[]},r.set(e,o)),o.count.push(t.count.length),o.linePercentageInFile.push(t.linePercentageInFile),t.count.length>0&&(0,i.recordFilePath)(o,l,n)}})),r}},48648:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},49032:(e,t,n)=>{"use strict";var r=n(47244),i=n(48184),o=n(25767),s=n(35680);function a(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=a(Object.prototype.toString),d=a(Number.prototype.valueOf),f=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(l)var h=a(BigInt.prototype.valueOf);if(u)var m=a(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function _(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function v(e){return"[object WeakSet]"===c(e)}function w(e){return"[object ArrayBuffer]"===c(e)}function E(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===c(e)}function x(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||x(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},_.working="undefined"!=typeof Map&&_(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(_.working?_(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},v.working="undefined"!=typeof WeakSet&&v(new WeakSet),t.isWeakSet=function(e){return v(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=E,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=x;var R="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function T(e){return"[object SharedArrayBuffer]"===c(e)}function A(e){return void 0!==R&&(void 0===T.working&&(T.working=T(new R)),T.working?T(e):e instanceof R)}function O(e){return g(e,d)}function I(e){return g(e,f)}function N(e){return g(e,p)}function P(e){return l&&g(e,h)}function $(e){return u&&g(e,m)}t.isSharedArrayBuffer=A,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=O,t.isStringObject=I,t.isBooleanObject=N,t.isBigIntObject=P,t.isSymbolObject=$,t.isBoxedPrimitive=function(e){return O(e)||I(e)||N(e)||P(e)||$(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(E(e)||A(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},49092:(e,t,n)=>{"use strict";var r=n(41333);e.exports=function(){return r()&&!!Symbol.toStringTag}},49144:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundQuerySchema=t.SupportedQueries=void 0,t.executeQueriesOfSameType=v,t.executeQueries=function(e,t){const n=Date.now(),r=function(e){const t={};function n(e){void 0===t[e.type]&&(t[e.type]=[]),t[e.type].push(e)}for(const t of e)if(w(t)){const e=(0,s.SupportedVirtualQueries[t.type])(t);for(const t of e)n(t)}else n(t);return t}(t),i={};for(const t of Object.keys(r))i[t]=v(e,...r[t]);return i[".meta"]={timing:Date.now()-n},i},t.SupportedQueriesSchema=E,t.VirtualQuerySchema=S,t.AnyQuerySchema=x,t.QueriesSchema=function(){return h.default.array().items(x()).description("Queries to run on the file analysis information (in the form of an array)")};const i=n(74015),o=n(57012),s=n(1611),a=n(84407),l=n(46287),u=n(3735),c=n(72419),d=n(73921),f=n(78623),p=n(78921),h=r(n(16075)),m=n(55535),g=n(81827),_=n(53335),y=n(36965),b=n(2391);function v(e,...n){(0,o.guard)(n.length>0,"At least one query must be provided"),(0,o.guard)(n.every((e=>e.type===n[0].type)),"All queries must have the same type");const r=t.SupportedQueries[n[0].type];return(0,o.guard)(void 0!==r,`Unsupported query type: ${n[0].type}`),r.executor(e,n)}function w(e){return void 0!==s.SupportedVirtualQueries[e.type]}function E(){return h.default.alternatives(Object.values(t.SupportedQueries).map((e=>e.schema))).description("Supported queries")}function S(){return h.default.alternatives(t.CompoundQuerySchema).description("Virtual queries (used for structure)")}function x(){return h.default.alternatives(E(),S()).description("Any query")}t.SupportedQueries={"call-context":i.CallContextQueryDefinition,config:g.ConfigQueryDefinition,dataflow:a.DataflowQueryDefinition,"id-map":l.IdMapQueryDefinition,"normalized-ast":u.NormalizedAstQueryDefinition,"dataflow-cluster":f.ClusterQueryDefinition,"static-slice":d.StaticSliceQueryDefinition,lineage:c.LineageQueryDefinition,dependencies:p.DependenciesQueryDefinition,"location-map":m.LocationMapQueryDefinition,search:_.SearchQueryDefinition,"happens-before":y.HappensBeforeQueryDefinition,"resolve-value":b.ResolveValueQueryDefinition},t.CompoundQuerySchema=h.default.object({type:h.default.string().valid("compound").required().description("The type of the query."),query:h.default.string().required().description("The query to run on the file analysis information."),commonArguments:h.default.object().required().description("Common arguments for all queries."),arguments:h.default.array().items(h.default.object()).required().description("Arguments for each query.")}).description("Compound query used to combine queries of the same type")},49204:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineageCommand=void 0,t.getLineage=u;const r=n(6777),i=n(72814),o=n(21578),s=n(34966),a=n(57012);function l(e,t){e.push(...[...t].filter((([e,t])=>function(e){return(0,s.edgeIncludesType)(s.EdgeType.DefinedBy|s.EdgeType.DefinedByOnCall|s.EdgeType.Returns|s.EdgeType.Reads,e.types)}(t))))}function u(e,t,n){n??=t.idMap,(0,a.guard)(void 0!==n,"The ID map is required to get the lineage of a node");const r=t.get((0,o.slicingCriterionToId)(e,n));(0,a.guard)(void 0!==r,"The ID pointed to by the criterion does not exist in the dataflow graph");const[i,s]=r,u=new Set([i.id]),c=[];for(l(c,s);c.length>0;){const[e]=c.shift();if(u.has(e))continue;u.add(e);const n=t.outgoingEdges(e);void 0!==n&&l(c,n)}return u}t.lineageCommand={description:"Get the lineage of an R object",usageExample:":lineage",aliases:["lin"],script:!1,fn:async(e,t,n)=>{const[o,s]=(a=n,l=n.indexOf(" "),[a.slice(0,l),a.slice(l)]);var a,l;const{dataflow:c}=await async function(e,t){return await(0,r.createDataflowPipeline)(e,{request:(0,i.requestFromInput)(t.trim())}).allRemainingSteps()}(t,s),d=u(o,c.graph);e.stdout([...d].join("\n"))}}},49245:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSitterType=void 0,function(e){e.Program="program",e.BracedExpression="braced_expression",e.ParenthesizedExpression="parenthesized_expression",e.BinaryOperator="binary_operator",e.UnaryOperator="unary_operator",e.NamespaceOperator="namespace_operator",e.Identifier="identifier",e.IfStatement="if_statement",e.ElseStatement="else",e.ForStatement="for_statement",e.WhileStatement="while_statement",e.RepeatStatement="repeat_statement",e.Call="call",e.Return="return",e.FunctionDefinition="function_definition",e.String="string",e.Float="float",e.Integer="integer",e.Complex="complex",e.Inf="inf",e.Nan="nan",e.Na="na",e.Null="null",e.True="true",e.False="false",e.Break="break",e.Next="next",e.Subset="subset",e.Subset2="subset2",e.ExtractOperator="extract_operator",e.Parameter="parameter",e.Argument="argument",e.Dots="dots",e.DotDotI="dot_dot_i",e.Comment="comment",e.Error="ERROR"}(n||(t.TreeSitterType=n={}))},49360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processSpecialBinOp=function(e,t,n,s,a){if(!a.lazy)return(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:s}).information;if(2!=t.length)return i.dataflowLogger.warn(`Logical bin-op ${e.content} has something else than 2 arguments, skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:s,forceArgs:a.forceArgs}).information;const{information:l,processedArguments:u}=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:s,forceArgs:a.forceArgs,patchData:(t,n)=>1===n?{...t,controlDependencies:[...t.controlDependencies??[],{id:e.info.id,when:a.evalRhsWhen}]}:t});for(const t of u)if(t&&l.graph.addEdge(e.info.id,t.entryPoint,o.EdgeType.Reads),a.lazy)break;return l};const r=n(92397),i=n(22438),o=n(34966)},49375:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValidRTypesReverse=t.ValidRTypes=t.RType=t.RawRType=void 0,t.isSymbol=function(e){return i.has(e)},function(e){e.NullConst="NULL_CONST",e.NumericConst="NUM_CONST",e.StringConst="STR_CONST",e.EqualAssign="EQ_ASSIGN",e.EqualFormals="EQ_FORMALS",e.EqualSub="EQ_SUB",e.LeftAssign="LEFT_ASSIGN",e.RightAssign="RIGHT_ASSIGN",e.And="AND",e.And2="AND2",e.Eq="EQ",e.Ge="GE",e.Gt="GT",e.Le="LE",e.Lt="LT",e.Ne="NE",e.Or="OR",e.Or2="OR2",e.Pipe="PIPE",e.Pipebind="PIPEBIND",e.Special="SPECIAL",e.Plus="+",e.Minus="-",e.Times="*",e.Div="/",e.Colon=":",e.Exclamation="!",e.Exp="^",e.Question="?",e.Tilde="~",e.Break="BREAK",e.Else="ELSE",e.For="FOR",e.ForCondition="forcond",e.If="IF",e.ForIn="IN",e.Next="NEXT",e.Repeat="REPEAT",e.While="WHILE",e.Function="FUNCTION",e.Lambda="\\\\",e.DoubleBracketLeft="LBB",e.Slot="SLOT",e.Dollar="$",e.At="@",e.BracketLeft="[",e.BracketRight="]",e.NsGet="::",e.NsGetInt=":::",e.Symbol="SYMBOL",e.SymbolFunctionCall="SYMBOL_FUNCTION_CALL",e.SymbolPackage="SYMBOL_PACKAGE",e.SymbolSub="SYMBOL_SUB",e.SymbolFormals="SYMBOL_FORMALS",e.Comment="COMMENT",e.LineDirective="LINE_DIRECTIVE",e.ParenLeft="(",e.ParenRight=")",e.Comma=",",e.Semicolon=";",e.BraceLeft="{",e.BraceRight="}",e.Expression="expr",e.ExprOfAssignOrHelp="expr_or_assign_or_help",e.LegacyEqualAssign="equal_assign",e.ExpressionList="exprlist"}(n||(t.RawRType=n={})),function(e){e.Access="RAccess",e.Argument="RArgument",e.BinaryOp="RBinaryOp",e.ExpressionList="RExpressionList",e.ForLoop="RForLoop",e.FunctionCall="RFunctionCall",e.FunctionDefinition="RFunctionDefinition",e.IfThenElse="RIfThenElse",e.Parameter="RParameter",e.Pipe="RPipe",e.RepeatLoop="RRepeatLoop",e.UnaryOp="RUnaryOp",e.WhileLoop="RWhileLoop",e.Break="RBreak",e.Comment="RComment",e.LineDirective="RLineDirective",e.Logical="RLogical",e.Next="RNext",e.Number="RNumber",e.String="RString",e.Symbol="RSymbol",e.Delimiter="RDelimiter"}(r||(t.RType=r={})),t.ValidRTypes=new Set(Object.values(r)),t.ValidRTypesReverse=Object.fromEntries(Object.entries(r).map((([e,t])=>[t,e])));const i=new Set([n.Symbol,n.SymbolPackage,n.SymbolFunctionCall,n.NullConst,n.StringConst,n.ParenLeft,n.ParenRight,n.BraceLeft,n.BraceRight,n.Slot])},49428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeBinary=function(e,[t,n,f]){return(0,a.expensiveTrace)(i.parseLog,(()=>`binary op for ${t.name} [${n.name}] ${f.name}`)),n.name===u.RawRType.Special||c.OperatorsInRAst.has(n.name)||n.name===u.RawRType.Pipe?function(e,t,n,i){(0,o.ensureChildrenAreLhsAndRhsOrdered)(t.content,i.content);const a=(0,d.normalizeSingleNode)(e,t),c=(0,d.normalizeSingleNode)(e,i);if(a.type===u.RType.Delimiter||c.type===u.RType.Delimiter)throw new r.ParseError(`unexpected under-sided binary op, received ${JSON.stringify([a,c])} for ${JSON.stringify([t,n,i])}`);const f=(0,o.retrieveOpName)(n),{location:p,content:h}=(0,o.retrieveMetaStructure)(n.content);if((0,l.startAndEndsWith)(f,"%")){const t=a.type===u.RType.ExpressionList?a.grouping?.[0].location:a.location,n=c.type===u.RType.ExpressionList?c.grouping?.[0].location:c.location;return(0,s.guard)(void 0!==t&&void 0!==n,(()=>`special op lhs and rhs must have a locations, but ${JSON.stringify(a)} || ${JSON.stringify(t)} and ${JSON.stringify(c)} ||  || ${JSON.stringify(n)})`)),{type:u.RType.FunctionCall,named:!0,infixSpecial:!0,lexeme:e.currentLexeme??h,location:p,functionName:{type:u.RType.Symbol,location:p,lexeme:h,content:h,namespace:void 0,info:{}},arguments:[{type:u.RType.Argument,location:t,value:a,name:void 0,lexeme:a.lexeme??"",info:{}},{type:u.RType.Argument,location:n,value:c,name:void 0,lexeme:c.lexeme??"",info:{}}],info:{}}}return n.name===u.RawRType.Pipe?((0,s.guard)(void 0!==a.location,(()=>`pipe lhs must have a location, but ${JSON.stringify(a)})`)),(0,s.guard)(void 0!==a.lexeme,(()=>`pipe lhs must have a full lexeme, but ${JSON.stringify(a)})`)),{type:u.RType.Pipe,location:p,lhs:{type:u.RType.Argument,location:a.location,value:a,name:void 0,lexeme:a.lexeme,info:{}},rhs:c,lexeme:h,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}):{type:u.RType.BinaryOp,location:p,lhs:a,rhs:c,operator:f,lexeme:h,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}}(e,t,n,f):void 0};const r=n(66197),i=n(56293),o=n(36604),s=n(57012),a=n(19742),l=n(27454),u=n(49375),c=n(19154),d=n(10570)},49525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usedFunctions=t.AllCallsFileBase=void 0;const r=n(67102),i=n(89962),o=n(44441),s=n(55143),a=n(6945),l=n(49375),u=n(6737),c=n(34966),d={allFunctionCalls:0,args:{0:0n,1:(0,r.emptyCommonSyntaxTypeCounts)()},nestedFunctionCalls:0,deepestNesting:0,unnamedCalls:0};t.AllCallsFileBase="all-calls",t.usedFunctions={name:"Used Functions",description:"All functions called, split into various sub-categories",process:(e,n)=>(function(e,n){const i=[],d=[];(0,a.visitAst)(n.normalizedRAst.ast,(a=>{if(a.type!==l.RType.FunctionCall)return;i.length>0&&(e.nestedFunctionCalls++,(0,u.appendStatisticsFile)(t.usedFunctions.name,"nested-calls",[a.lexeme],n.filepath),e.deepestNesting=Math.max(e.deepestNesting,i.length));const f=n.dataflow.graph.get(a.info.id);let p=!1;f&&(p=[...f[1].values()].some((e=>(0,c.edgeIncludesType)(e.types,c.EdgeType.Calls)))),a.named?d.push([a.functionName.lexeme,(0,o.getRangeStart)(a.location),a.arguments.length,a.functionName.namespace??"",p?1:0]):(e.unnamedCalls++,(0,u.appendStatisticsFile)(t.usedFunctions.name,"unnamed-calls",[a.lexeme],n.filepath),d.push([void 0,(0,o.getRangeStart)(a.location),a.arguments.length,"",p?1:0])),function(e,t){if(0===e.length)return void t[0]++;let n=1;for(const i of e)void 0!==i?(t[n]=(0,r.updateCommonSyntaxTypeCounts)(t[n]??(0,r.emptyCommonSyntaxTypeCounts)(),i),n++):t[0]++}(a.arguments.map((e=>(0,s.unpackArgument)(e))),e.args),i.push(a)}),(e=>{e.type===l.RType.FunctionCall&&i.pop()})),e.allFunctionCalls+=d.length,(0,u.appendStatisticsFile)(t.usedFunctions.name,t.AllCallsFileBase,d,n.filepath)}(e,n),e),initialValue:d,postProcess:i.postProcess}},49553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDifference=function(e,t,n){const i=(0,r.setMinus)(e,t),o=(0,r.setMinus)(t,e);if(0===i.size&&0===o.size)return;let s=n.position;i.size>0&&!n.config.rightIsSubgraph&&(s+=` More elements in ${n.leftname}: ${JSON.stringify([...i])}`),o.size>0&&!n.config.leftIsSubgraph&&(s+=i.size>0?" and m":"M",s+=`ore in ${n.rightname}: ${JSON.stringify([...o])}`),(o.size>0&&!n.config.leftIsSubgraph||i.size>0&&!n.config.rightIsSubgraph)&&n.report.addComment(s)};const r=n(71916)},49995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMap=void 0,t.DefaultMap=class{internal;generator;constructor(e,t=new Map){this.generator=e,this.internal=t}set(e,t){return this.internal.set(e,t),this}get(e){const t=this.internal.get(e);if(void 0!==t)return t;{const t=this.generator(e);return this.internal.set(e,t),t}}entries(){return this.internal.entries()}keys(){return this.internal.keys()}values(){return this.internal.values()}delete(e){return this.internal.delete(e)}size(){return this.internal.size}}},50072:()=>{},50560:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},50653:function(e,t,n){"use strict";var r=n(65606),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StatisticFileProvider=t.defaultStatisticsFileSuffix=t.DummyAppendProvider=void 0;const o=i(n(57975)),s=i(n(45946)),a=n(19742),l=n(57012);t.DummyAppendProvider=class{map;constructor(e=void 0){this.map=e}append(e,t,n){if(a.log.settings.minLevel>=1&&a.log.trace(`DummyAppendProvider: ${e} ${String(t)} ${n}`),this.map){const r=this.map.get(e),i=n.split("\n");if(r){const e=r.get(t);e?e.push(...i):r.set(t,i)}else this.map.set(e,new Map([[t,i]]))}}},t.defaultStatisticsFileSuffix=".txt",t.StatisticFileProvider=class{statisticsDirectory;connections=new Map;constructor(e){(0,l.guard)(void 0!==e,"Please supply an output directory!"),this.statisticsDirectory=e,r.on("beforeExit",(()=>{this.connections.forEach((e=>{s.default.closeSync(e)}))}))}statisticsFile(e,n){return o.default.join(this.statisticsDirectory,e,`${n}${t.defaultStatisticsFileSuffix}`)}append(e,t,n){const r=this.getHandle(e,String(t));s.default.appendFileSync(r,n+"\n","utf8")}getHandle(e,t){const n=`${e}-${t}`,r=this.connections.get(n);if(r)return r;const i=this.statisticsFile(e,String(t)),a=o.default.dirname(i);s.default.existsSync(a)||s.default.mkdirSync(a,{recursive:!0});const l=s.default.openSync(i,"a");return this.connections.set(n,l),l}}},51072:(e,t)=>{t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},51378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplyOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).number.multiply(this.rhs.evaluate(e).number)}toString(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"}}t.MultiplyOperation=i},51451:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,function(e){e.Category="vscode-flowr",e.VerboseLog="verboseLog",e.ServerHost="server.host",e.ServerPort="server.port",e.ServerAutoConnect="server.autoConnect",e.ServerConnectionType="server.connectionType",e.StyleSliceOpacity="style.sliceOpacity",e.StyleSliceDisplay="style.sliceDisplay",e.StyleOnlyHighlightActiveSelection="style.onlyHighlightActiveSelection",e.StyleMermaidMaxTextLength="style.mermaidMaxTextLength",e.ErrorMessageTimer="errorMessage.Timer",e.Rengine="r.engine",e.Rexecutable="r.executable"}(n||(t.Settings=n={}))},51591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},51832:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),o=n.compare(i);if(0===o)return null;const s=o>0,a=s?n:i,l=s?i:n,u=!!a.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return n.major!==i.major?c+"major":n.minor!==i.minor?c+"minor":n.patch!==i.patch?c+"patch":"prerelease"}},52093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeCompoundQueries=function(e){const t=[];for(const n of e.arguments)t.push({type:e.query,...e.commonArguments,...n});return t}},52659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBuiltinConfig=void 0;const r=n(82178),i=n(49375),o=n(32787);t.DefaultBuiltinConfig=[{type:"constant",names:["NULL","NA"],value:null,assumePrimitive:!0},{type:"constant",names:["TRUE","T"],value:!0,assumePrimitive:!0},{type:"constant",names:["FALSE","F"],value:!1,assumePrimitive:!0},{type:"function",names:["~","+","-","*","/","^","!","?","**","==","!=",">","<",">=","<=","%%","%/%","%*%","%in%",":","rep","seq","seq_len","seq_along","seq.int","gsub","which","class","dimnames","min","max","intersect","subset","match","sqrt","abs","round","floor","ceiling","signif","trunc","log","log10","log2","sum","mean","unique","paste","paste0","read.csv","stop","is.null","numeric","as.character","as.integer","as.logical","as.numeric","as.matrix","rbind","nrow","ncol","tryCatch","expression","factor","missing","as.data.frame","data.frame","na.omit","rownames","names","order","length","any","dim","matrix","cbind","nchar","pdf","jpeg","png","windows","postscript","xfig","bitmap","pictex","cairo_pdf","svg","bmp","tiff","X11","quartz"],processor:"builtin:default",config:{readAllArguments:!0},assumePrimitive:!0},{type:"function",names:["c","t","aperm"],processor:"builtin:default",config:{readAllArguments:!0},assumePrimitive:!1},{type:"function",names:["options"],processor:"builtin:default",config:{hasUnknownSideEffects:!0,forceArgs:"all"},assumePrimitive:!1},{type:"function",names:["mapply","Mapply"],processor:"builtin:apply",config:{indexOfFunction:0,nameOfFunctionArgument:"FUN"},assumePrimitive:!1},{type:"function",names:["lapply","sapply","vapply"],processor:"builtin:apply",config:{indexOfFunction:1,nameOfFunctionArgument:"FUN"},assumePrimitive:!1},{type:"function",names:["Lapply","Sapply","Vapply"],processor:"builtin:apply",config:{indexOfFunction:1,nameOfFunctionArgument:"FUN"},assumePrimitive:!1},{type:"function",names:["apply","tapply","Tapply"],processor:"builtin:apply",config:{indexOfFunction:2,nameOfFunctionArgument:"FUN"},assumePrimitive:!1},{type:"function",names:["print","message","warning"],processor:"builtin:default",config:{returnsNthArgument:0,forceArgs:"all",hasUnknownSideEffects:{type:"link-to-last-call",callName:/^sink$/}},assumePrimitive:!1},{type:"function",names:["plot","plot.new","curve","map","image","boxplot","dotchart","sunflowerplot","barplot","matplot","hist","stem","density","smoothScatter","contour","persp"],processor:"builtin:default",config:{forceArgs:"all",hasUnknownSideEffects:{type:"link-to-last-call",ignoreIf:(e,t)=>"map"===e.name&&!0===(0,r.getValueOfArgument)(t,e,{index:11,name:"add"},[i.RType.Logical])?.content,callName:/^(pdf|jpeg|png|windows|postscript|xfig|bitmap|pictex|cairo_pdf|svg|bmp|tiff|X11|quartz)$/}},assumePrimitive:!0},{type:"function",names:["points","abline","map","mtext","lines","text","legend","title","axis","polygon","polypath","pie","rect","segments","arrows","symbols","tiplabels"],processor:"builtin:default",config:{forceArgs:"all",hasUnknownSideEffects:{type:"link-to-last-call",callName:/^(dev\.new|dev\.copy|plot\.new|xspline|sunflowerplot|dotchart|plot|map|image|curve|boxplot|barplot|matplot|hist|stem|density|smoothScatter|contour|persp)$/,ignoreIf:(e,t)=>{const n=t.getVertex(e);return"map"===n?.name&&!0!==(0,r.getValueOfArgument)(t,n,{index:11,name:"add"},[i.RType.Logical])?.content},cascadeIf:(e,t,n)=>"map"===e.name&&!0===(0,r.getValueOfArgument)(n,e,{index:11,name:"add"},[i.RType.Logical])?.content?o.CascadeAction.Continue:o.CascadeAction.Stop}},assumePrimitive:!0},{type:"function",names:["("],processor:"builtin:default",config:{returnsNthArgument:0},assumePrimitive:!0},{type:"function",names:["load","load_all","setwd","set.seed"],processor:"builtin:default",config:{hasUnknownSideEffects:!0,forceArgs:[!0]},assumePrimitive:!1},{type:"function",names:["eval","body","formals","environment"],processor:"builtin:default",config:{hasUnknownSideEffects:!0,forceArgs:[!0]},assumePrimitive:!1},{type:"function",names:["cat"],processor:"builtin:default",config:{forceArgs:"all",hasUnknownSideEffects:{type:"link-to-last-call",callName:/^sink$/}},assumePrimitive:!1},{type:"function",names:["switch"],processor:"builtin:default",config:{forceArgs:[!0]},assumePrimitive:!1},{type:"function",names:["return"],processor:"builtin:default",config:{returnsNthArgument:0,cfg:1},assumePrimitive:!1},{type:"function",names:["break"],processor:"builtin:default",config:{cfg:2},assumePrimitive:!1},{type:"function",names:["next"],processor:"builtin:default",config:{cfg:3},assumePrimitive:!1},{type:"function",names:["{"],processor:"builtin:expression-list",config:{},assumePrimitive:!0},{type:"function",names:["source"],processor:"builtin:source",config:{includeFunctionCall:!0,forceFollow:!1},assumePrimitive:!1},{type:"function",names:["[","[["],processor:"builtin:access",config:{treatIndicesAsString:!1},assumePrimitive:!0},{type:"function",names:["$","@"],processor:"builtin:access",config:{treatIndicesAsString:!0},assumePrimitive:!0},{type:"function",names:["if","ifelse"],processor:"builtin:if-then-else",config:{},assumePrimitive:!0},{type:"function",names:["get"],processor:"builtin:get",config:{},assumePrimitive:!1},{type:"function",names:["library","require"],processor:"builtin:library",config:{},assumePrimitive:!1},{type:"function",names:["<-","="],processor:"builtin:assignment",config:{canBeReplacement:!0},assumePrimitive:!0},{type:"function",names:[":="],processor:"builtin:assignment",config:{},assumePrimitive:!0},{type:"function",names:["assign"],processor:"builtin:assignment",config:{targetVariable:!0},assumePrimitive:!0},{type:"function",names:["delayedAssign"],processor:"builtin:assignment",config:{quoteSource:!0,targetVariable:!0},assumePrimitive:!0},{type:"function",names:["<<-"],processor:"builtin:assignment",config:{superAssignment:!0,canBeReplacement:!0},assumePrimitive:!0},{type:"function",names:["->"],processor:"builtin:assignment",config:{swapSourceAndTarget:!0,canBeReplacement:!0},assumePrimitive:!0},{type:"function",names:["->>"],processor:"builtin:assignment",config:{superAssignment:!0,swapSourceAndTarget:!0,canBeReplacement:!0},assumePrimitive:!0},{type:"function",names:["&&","&"],processor:"builtin:special-bin-op",config:{lazy:!0,evalRhsWhen:!0},assumePrimitive:!0},{type:"function",names:["||","|"],processor:"builtin:special-bin-op",config:{lazy:!0,evalRhsWhen:!1},assumePrimitive:!0},{type:"function",names:["|>","%>%"],processor:"builtin:pipe",config:{},assumePrimitive:!0},{type:"function",names:["function","\\"],processor:"builtin:function-definition",config:{},assumePrimitive:!0},{type:"function",names:["quote","substitute","bquote"],processor:"builtin:quote",config:{quoteArgumentsWithIndex:0},assumePrimitive:!0},{type:"function",names:["for"],processor:"builtin:for-loop",config:{},assumePrimitive:!0},{type:"function",names:["repeat"],processor:"builtin:repeat-loop",config:{},assumePrimitive:!0},{type:"function",names:["while"],processor:"builtin:while-loop",config:{},assumePrimitive:!0},{type:"function",names:["do.call"],processor:"builtin:apply",config:{indexOfFunction:0,unquoteFunction:!0},assumePrimitive:!0},{type:"function",names:["list"],processor:"builtin:list",config:{},assumePrimitive:!0},{type:"function",names:["on.exit","sys.on.exit","par","setnames","setNames","setkey","setkeyv","setindex","setindexv","setattr","sink","requireNamespace","loadNamespace","attachNamespace","asNamespace","library.dynam","install.packages","install","install_github","install_gitlab","install_bitbucket","install_url","install_git","install_svn","install_local","install_version","update_packages","attach","unname","data"],processor:"builtin:default",config:{hasUnknownSideEffects:!0},assumePrimitive:!1},{type:"replacement",suffixes:["<-","<<-"],names:["[","[[","$","@","names","dimnames","attributes","attr","class","levels","rownames","colnames","body","environment","formals"]}]},52817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeLineageQuery=function({dataflow:{graph:e},ast:t},n){const o=Date.now(),s={};for(const{criterion:o}of n)s[o]&&r.log.warn("Duplicate criterion in lineage query:",o),s[o]=(0,i.getLineage)(o,e,t.idMap);return{".meta":{timing:Date.now()-o},lineages:s}};const r=n(19742),i=n(49204)},52950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operators=t.XPathContext=t.XNodeSet=t.XString=t.XNumber=t.XBoolean=t.Expression=void 0;const r=n(35493),i=n(40318);class o{toString(){return"<Expression>"}evaluate(e){throw new Error("Could not evaluate expression.")}get string(){throw new Error("Could not evaluate expression.")}get number(){throw new Error("Could not evaluate expression.")}get bool(){throw new Error("Could not evaluate expression.")}get nodeset(){throw new Error("Could not evaluate expression.")}get stringValue(){throw new Error("Could not evaluate expression.")}get numberValue(){throw new Error("Could not evaluate expression.")}get booleanValue(){throw new Error("Could not evaluate expression.")}equals(e){throw new Error("Could not evaluate expression.")}notequal(e){throw new Error("Could not evaluate expression.")}lessthan(e){throw new Error("Could not evaluate expression.")}greaterthan(e){throw new Error("Could not evaluate expression.")}lessthanorequal(e){throw new Error("Could not evaluate expression.")}greaterthanorequal(e){throw new Error("Could not evaluate expression.")}}t.Expression=o;class s extends o{static TRUE=new s(!0);static FALSE=new s(!1);b;constructor(e){super(),this.b=Boolean(e)}toString(){return this.b.toString()}evaluate(e){return this}get string(){return new l(this.b)}get number(){return new a(this.b)}get bool(){return this}get nodeset(){throw new Error("Cannot convert boolean to nodeset")}get stringValue(){return this.string.stringValue}get numberValue(){return this.number.numberValue}get booleanValue(){return this.b}not(){return new s(!this.b)}equals(e){if(e instanceof l||e instanceof a)return this.equals(e.bool);if(e instanceof u)return e.compareWithBoolean(this,d.equals);if(e instanceof s)return new s(this.b===e.b);throw new Error("Unsupported type")}notequal(e){if(e instanceof l||e instanceof a)return this.notequal(e.bool);if(e instanceof u)return e.compareWithBoolean(this,d.notequal);if(e instanceof s)return new s(this.b!==e.b);throw new Error("Unsupported type")}lessthan(e){return this.number.lessthan(e)}greaterthan(e){return this.number.greaterthan(e)}lessthanorequal(e){return this.number.lessthanorequal(e)}greaterthanorequal(e){return this.number.greaterthanorequal(e)}}t.XBoolean=s;class a extends o{num;constructor(e){super(),this.num="string"==typeof e?this.parse(e):Number(e)}get numberFormat(){return/^\s*-?[0-9]*\.?[0-9]+\s*$/}parse(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN}toString(){const e=this.num.toString();return-1!==e.indexOf("e-")?function(e){const t=e.split("e-");let n=t[0].replace(".","");const r=Number(t[1]);for(let e=0;e<r-1;e+=1)n="0"+n;return"0."+n}(e):-1!==e.indexOf("e")?function(e){const t=e.split("e");let n=t[0].replace(".","");const r=Number(t[1])+1-n.length;for(let e=0;e<r;e+=1)n+="0";return n}(e):e}evaluate(e){return this}get string(){return new l(this.toString())}get number(){return this}get bool(){return new s(this.num)}get nodeset(){throw new Error("Cannot convert string to nodeset")}get stringValue(){return this.string.stringValue}get numberValue(){return this.num}get booleanValue(){return this.bool.booleanValue}negate(){return new a(-this.num)}equals(e){if(e instanceof s)return this.bool.equals(e);if(e instanceof l)return this.string.equals(e);if(e instanceof u)return e.compareWithNumber(this,d.equals);if(e instanceof a)return new s(this.num===e.num);throw new Error("Unsupported type")}notequal(e){if(e instanceof s)return this.bool.notequal(e);if(e instanceof l)return this.notequal(e.number);if(e instanceof u)return e.compareWithNumber(this,d.notequal);if(e instanceof a)return new s(this.num!==e.num);throw new Error("Unsupported type")}lessthan(e){if(e instanceof u)return e.compareWithNumber(this,d.greaterthan);if(e instanceof s||e instanceof l)return this.lessthan(e.number);if(e instanceof a)return new s(this.num<e.num);throw new Error("Unsupported type")}greaterthan(e){if(e instanceof u)return e.compareWithNumber(this,d.lessthan);if(e instanceof s||e instanceof l)return this.greaterthan(e.number);if(e instanceof a)return new s(this.num>e.num);throw new Error("Unsupported type")}lessthanorequal(e){if(e instanceof u)return e.compareWithNumber(this,d.greaterthanorequal);if(e instanceof s||e instanceof l)return this.lessthanorequal(e.number);if(e instanceof a)return new s(this.num<=e.num);throw new Error("Unsupported type")}greaterthanorequal(e){if(e instanceof u)return e.compareWithNumber(this,d.lessthanorequal);if(e instanceof s||e instanceof l)return this.greaterthanorequal(e.number);if(e instanceof a)return new s(this.num>=e.num);throw new Error("Unsupported type")}plus(e){return new a(this.num+e.num)}minus(e){return new a(this.num-e.num)}multiply(e){return new a(this.num*e.num)}div(e){return new a(this.num/e.num)}mod(e){return new a(this.num%e.num)}}t.XNumber=a;class l extends o{str;constructor(e){super(),this.str=String(e)}toString(){return this.str}evaluate(e){return this}get string(){return this}get number(){return new a(this.str)}get bool(){return new s(this.str)}get nodeset(){throw new Error("Cannot convert string to nodeset")}get stringValue(){return this.str}get numberValue(){return this.number.numberValue}get booleanValue(){return this.bool.booleanValue}equals(e){if(e instanceof s)return this.bool.equals(e);if(e instanceof a)return this.number.equals(e);if(e instanceof u)return e.compareWithString(this,d.equals);if(e instanceof l)return new s(this.str===e.str);throw new Error("Unsupported type")}notequal(e){if(e instanceof s)return this.bool.notequal(e);if(e instanceof a)return this.number.notequal(e);if(e instanceof u)return e.compareWithString(this,d.notequal);if(e instanceof l)return new s(this.str!==e.str);throw new Error("Unsupported type")}lessthan(e){return this.number.lessthan(e)}greaterthan(e){return this.number.greaterthan(e)}lessthanorequal(e){return this.number.lessthanorequal(e)}greaterthanorequal(e){return this.number.greaterthanorequal(e)}}t.XString=l;class u extends o{static compareWith(e){return function(t){if(t instanceof l)return this.compareWithString(t,e);if(t instanceof a)return this.compareWithNumber(t,e);if(t instanceof s)return this.compareWithBoolean(t,e);if(t instanceof u)return this.compareWithNodeSet(t,e);throw new Error("Unsupported type")}}tree;nodes;size;constructor(){super(),this.tree=null,this.nodes=[],this.size=0}toString(){const e=this.first();return null==e?"":this.stringForNode(e)||""}evaluate(e){return this}get string(){return new l(this.toString())}get stringValue(){return this.toString()}get number(){return new a(this.string)}get numberValue(){return Number(this.string)}get bool(){return new s(this.booleanValue)}get booleanValue(){return!!this.size}get nodeset(){return this}stringForNode(e){return(0,i.isDocument)(e)||(0,i.isElement)(e)||(0,i.isFragment)(e)?this.stringForContainerNode(e):(0,i.isAttribute)(e)?e.value||e.nodeValue||"":(0,i.isNamespaceNode)(e)?e.value:e.nodeValue||""}stringForContainerNode(e){let t="";for(let n=e.firstChild;null!=n;n=n.nextSibling)((0,i.isElement)(n)||(0,i.isText)(n)||(0,i.isCData)(n)||(0,i.isDocument)(n)||(0,i.isFragment)(n))&&(t+=this.stringForNode(n));return t}buildTree(){if(!this.tree&&this.nodes.length){this.tree=new r.AVLTree(this.nodes[0]);for(let e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree}first(){let e=this.buildTree();if(null==e)return null;for(;null!=e.left;)e=e.left;return e.node}add(e){for(let t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1}addArray(e){const t=this;e.forEach((e=>t.add(e)))}toArray(){const e=[];return this.toArrayRec(this.buildTree(),e),e}toArrayRec(e,t){null!=e&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))}toUnsortedArray(){return this.nodes.slice()}compareWithString(e,t){const n=this.toUnsortedArray();for(let r=0;r<n.length;r++){const i=n[r],o=t(new l(this.stringForNode(i)),e);if(o.booleanValue)return o}return new s(!1)}compareWithNumber(e,t){const n=this.toUnsortedArray();for(let r=0;r<n.length;r++){const i=n[r],o=t(new a(this.stringForNode(i)),e);if(o.booleanValue)return o}return new s(!1)}compareWithBoolean(e,t){return t(this.bool,e)}compareWithNodeSet(e,t){const n=this.toUnsortedArray(),r=(e,n)=>t(n,e);for(let t=0;t<n.length;t++){const i=new l(this.stringForNode(n[t])),o=e.compareWithString(i,r);if(o.booleanValue)return o}return new s(!1)}equals=u.compareWith(d.equals);notequal=u.compareWith(d.notequal);lessthan=u.compareWith(d.lessthan);greaterthan=u.compareWith(d.greaterthan);lessthanorequal=u.compareWith(d.lessthanorequal);greaterthanorequal=u.compareWith(d.greaterthanorequal);union(e){const t=new u;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t}}t.XNodeSet=u;class c{variableResolver;namespaceResolver;functionResolver;contextNode=void 0;virtualRoot;expressionContextNode=void 0;isHtml=void 0;contextSize;contextPosition;allowAnyNamespaceForNoPrefix=void 0;caseInsensitive=void 0;constructor(e,t,n){this.variableResolver=e,this.namespaceResolver=t,this.functionResolver=n,this.virtualRoot=null,this.contextSize=0,this.contextPosition=0}clone(){return Object.assign(new c(this.variableResolver,this.namespaceResolver,this.functionResolver),this)}extend(e){return Object.assign(new c(this.variableResolver,this.namespaceResolver,this.functionResolver),this,e)}}t.XPathContext=c;class d{static equals(e,t){return e.equals(t)}static notequal(e,t){return e.notequal(t)}static lessthan(e,t){return e.lessthan(t)}static greaterthan(e,t){return e.greaterthan(t)}static lessthanorequal(e,t){return e.lessthanorequal(t)}static greaterthanorequal(e,t){return e.greaterthanorequal(t)}}t.Operators=d},53133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLNS_NAMESPACE_URI=t.XML_NAMESPACE_URI=void 0,t.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",t.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/"},53335:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchQueryDefinition=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(5350),l=n(97613),u=n(34306),c=n(19339);t.SearchQueryDefinition={executor:l.executeSearch,asciiSummarizer:(e,t,n,r)=>{const s=n;r.push(`Query: ${(0,i.bold)("search",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`);for(const[,{ids:t,search:n}]of s.results.entries())r.push(`   ╰ [query](${(0,c.mermaidCodeToUrl)((0,u.flowrSearchToMermaid)(n))}): {${(0,a.summarizeIdsIfTooLong)(e,t)}}`);return!0},schema:s.default.object({type:s.default.string().valid("search").required().description("The type of the query."),search:s.default.object().required().description("The search query to execute.")}).description("The search query searches the normalized AST and dataflow graph for nodes that match the given search query.")}},53908:(e,t,n)=>{const r=n(57272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(16874),{safeRe:s,safeSrc:a,t:l}=n(99718),u=n(98587),{compareIdentifiers:c}=n(61123);class d{constructor(e,t){if(t=u(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++t)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?a[l.PRERELEASELOOSE]:a[l.PRERELEASE]}$`),n=`-${t}`.match(e);if(!n||n[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},53998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeCommand=void 0,t.tryExecuteRShellCommand=o;const r=n(77529),i=n(8238);async function o(e,t,n,o){o?t instanceof i.RShell?await async function(e,t,n){try{const i=await t.sendCommandWithOutput(n,{from:"both",automaticallyTrimOutput:!0});e.stdout(`${(0,r.italic)(i.join("\n"),e.formatter)}\n`)}catch(t){e.stderr(`Error while executing '${n}': ${t.message}`)}}(e,t,n):e.stderr(`Executing arbitrary R code is only possible when using the r-shell engine as the default engine. Enable it using the configuration file or the ${e.formatter.format("--default-engine r-shell",{style:1})} command line option.`):e.stderr(`${e.formatter.format("You are not allowed to execute arbitrary R code.",{style:1,color:1,effect:r.ColorEffect.Foreground})}\nIf you want to do so, please restart flowR with the ${e.formatter.format("--r-session-access",{style:1})} flag. Please be careful of the security implications of this action.`)}t.executeCommand={description:"Execute the given code as R code (essentially similar to using now command). This requires the `--r-session-access` flag to be set and requires the r-shell engine.",usageExample:":execute",aliases:["e","r"],script:!1,fn:o}},54089:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>=0},54347:(e,t,n)=>{"use strict";var r=n(65606);function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(s,this,e)):r.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},54630:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementById=t.resolveQName=t.splitQName=void 0;const r=n(40318);function i(e){const t=e.indexOf(":");return-1===t?[null,e]:[e.substring(0,t),e.substring(t+1)]}t.splitQName=i,t.resolveQName=function(e,t,n,r){const o=i(e);return null!=o[0]?o[0]=t.getNamespace(o[0],n):r?(o[0]=t.getNamespace("",n),null==o[0]&&(o[0]="")):o[0]="",o},t.getElementById=function e(t,n){if((0,r.isElement)(t)&&(t.getAttribute("id")===n||t.getAttributeNS(null,"id")===n))return t;for(let r=t.firstChild;null!=r;r=r.nextSibling){const t=e(r,n);if(null!=t)return t}return null}},54856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushLocalEnvironment=function(e){return{current:new r.Environment(e.current),level:e.level+1}},t.popLocalEnvironment=function(e){(0,i.guard)(e.level>0,"cannot remove the global/root environment");const t=e.current.parent;return(0,i.guard)(void 0!==t,"level is wrong, parent is undefined even though level suggested depth > 0 (starts with 0)"),{current:t,level:e.level-1}};const r=n(73326),i=n(57012)},55087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processNamedCall=function(e,t,n,o){const c=(0,s.resolveByName)(e.content,o.environment,l.ReferenceType.Function)??[];let d,f=0===c.length,p=!1;for(const r of c)r.type===l.ReferenceType.BuiltInFunction&&"function"==typeof r.processor?(p=!0,d=u(d,r.processor(e,t,n,o))):f=!0;if(f)d=function(e,t,n,r,o){const a=(0,s.resolveByName)(t.content,o.environment,l.ReferenceType.Function);return u(e,(0,i.processKnownFunctionCall)({name:t,args:n,rootId:r,data:o,forceArgs:(a?.length??0)>0?void 0:"all"}).information)}(d,e,t,n,o);else if(d&&p){const e=d.graph.getVertex(n);e?.tag===a.VertexType.FunctionCall&&(e.onlyBuiltin=!0,e.environment=void 0)}return d??(0,r.initializeCleanDataflowInformation)(n,o)};const r=n(47318),i=n(92397),o=n(4683),s=n(85193),a=n(18841),l=n(46044);function u(e,t){return void 0===e?t:{unknownReferences:[...e.unknownReferences,...t.unknownReferences],in:[...e.in,...t.in],out:[...e.out,...t.out],graph:e.graph.mergeWith(t.graph),environment:(0,o.appendEnvironment)(e.environment,t.environment),entryPoint:t.entryPoint,exitPoints:[...e.exitPoints,...t.exitPoints]}}},55143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackArgument=function(e,t=!0){if(e!==i.EmptyArgument){if(!t||void 0===e.name)return e.value;r.log.trace(`Argument ${JSON.stringify(e)} is not unnamed, skipping`)}else r.log.trace("Argument is empty, skipping")};const r=n(19742),i=n(25377)},55535:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocationMapQueryDefinition=void 0;const i=n(62853),o=n(77529),s=n(87247),a=r(n(16075)),l=n(5350);t.LocationMapQueryDefinition={executor:i.executeLocationMapQuery,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("location-map",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push(`   ╰ Id List: {${(0,l.summarizeIdsIfTooLong)(e,[...Object.keys(i.map)])}}`),!0},schema:a.default.object({type:a.default.string().valid("location-map").required().description("The type of the query.")}).description("The location map query retrieves the location of every id in the ast.")}},55959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeXPathNSResolver=void 0;const r=n(3629);t.NodeXPathNSResolver=class{node;namespaceResolver;constructor(e){this.node=e,this.namespaceResolver=new r.NamespaceResolverImpl}lookupNamespaceURI(e){return this.namespaceResolver.getNamespace(e,void 0!==this.node?this.node:null)}}},56017:(e,t,n)=>{"use strict";const r=n(48287),{format:i,inspect:o}=n(83430),{codes:{ERR_INVALID_ARG_TYPE:s}}=n(68526),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:u}=n(74641),c=globalThis.AbortSignal||n(25568).AbortSignal,d=globalThis.AbortController||n(25568).AbortController,f=Object.getPrototypeOf((async function(){})).constructor,p=globalThis.Blob||r.Blob,h=void 0!==p?function(e){return e instanceof p}:function(e){return!1},m=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new s(t,"AbortSignal",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}},promisify:e=>new Promise(((t,n)=>{e(((e,...r)=>e?n(e):t(...r)))})),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof f,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:h,deprecate:(e,t)=>e,addAbortListener:n(37007).addAbortListener||function(e,t){if(void 0===e)throw new s("signal","AbortSignal",e);let n;return m(e,"signal"),(e=>{if("function"!=typeof e)throw new s("listener","Function",e)})(t),e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[u](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:c.any||function(e){if(1===e.length)return e[0];const t=new d,n=()=>t.abort();return e.forEach((e=>{m(e,"signals"),e.addEventListener("abort",n,{once:!0})})),t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",n)))}),{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},56293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLog=void 0,t.normalize=function(e,t=(0,o.deterministicCountingIdGenerator)(0),n){return(0,o.decorateAst)(l(e),{getId:t,file:n})},t.normalizeButNotDecorated=l,t.normalizeTreeSitter=function({parsed:e},t=(0,o.deterministicCountingIdGenerator)(0),n){const r=(0,o.decorateAst)((0,a.normalizeTreeSitterTreeToAst)(e),{getId:t,file:n});return r.hasError=e.rootNode.hasError,r};const r=n(76629),i=n(19742),o=n(57608),s=n(58733),a=n(11291);function l({parsed:e}){const t=(0,r.convertPreparedParsedData)((0,r.prepareParsedData)(e));return(0,s.normalizeRootObjToAst)({currentRange:void 0,currentLexeme:void 0},t)}t.parseLog=i.log.getSubLogger({name:"ast-parser"})},56533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findNonLocalReads=function(e,t){const n=new Set(t.map((e=>e.nodeId))),r=new Set([...e.vertices(!0)].filter((([e,t])=>t.tag===p.VertexType.Use||t.tag===p.VertexType.FunctionCall)).map((([e,t])=>e))),i=[];for(const t of r){if(n.has(t))continue;const o=e.outgoingEdges(t),l=(0,s.recoverName)(t,e.idMap),c=e.getVertex(t,!0);if(void 0!==o){for(const[n,{types:f}]of o)if((0,d.edgeIncludesType)(f,d.EdgeType.Reads)&&!r.has(n)){l||u.dataflowLogger.warn("found non-local read without name for id "+t),i.push({name:(0,s.recoverName)(t,e.idMap),nodeId:t,controlDependencies:void 0,type:c?.tag===p.VertexType.FunctionCall?a.ReferenceType.Function:a.ReferenceType.Variable});break}}else i.push({name:(0,s.recoverName)(t,e.idMap),nodeId:t,controlDependencies:void 0,type:c?.tag===p.VertexType.FunctionCall?a.ReferenceType.Function:a.ReferenceType.Variable})}return i},t.produceNameSharedIdMap=function(e){const t=new r.DefaultMap((()=>[]));for(const n of e)n.name&&t.get(n.name).push(n);return t},t.linkArgumentsOnCall=_,t.linkFunctionCallWithSingleTarget=y,t.linkFunctionCalls=function(e,t,n){const r=[...n.vertices(!0)].filter((([e,t])=>t.tag===p.VertexType.FunctionCall)),i=[];for(const[o,s]of r)b(e,o,s,t,n,i);return i},t.getAllFunctionCallTargets=function(e,t,n){const r=[],i=t.get(e,!0);if(void 0===i)return[];const[o,s]=i;if(o.tag!==p.VertexType.FunctionCall)return[];if(void 0!==o.name&&(void 0!==n||void 0!==o.environment)){const e=(0,h.resolveByName)(o.name,n??o.environment,a.ReferenceType.Function)?.map((e=>e.nodeId))??[];for(const[t,n]of s.entries())(0,d.edgeIncludesType)(n.types,d.EdgeType.Calls)&&e.push(t);const i=v(new Set(e),t);for(const e of i)r.push(e.id);for(const t of e)r.push(t)}return r},t.getAllLinkedFunctionDefinitions=v,t.linkInputs=function(e,t,n,r,i){for(const s of e){const e=s.name?(0,h.resolveByName)(s.name,t,s.type):void 0;if(void 0===e)o.log.trace(`found no target for ${s.name}`),i&&(s.controlDependencies??=[]),n.push(s);else for(const t of e)r.addEdge(s,t,d.EdgeType.Reads)}return n},t.linkCircularRedefinitionsWithinALoop=function(e,t,n){const r=new Map;for(const e of n)e.name&&r.set(e.name,e);for(const[n,i]of t.entries())for(const t of r.values())if(t.name===n)for(const n of i)e.addEdge(n.nodeId,t.nodeId,d.EdgeType.Reads)};const r=n(49995),i=n(57012),o=n(19742),s=n(17949),a=n(46044),l=n(60347),u=n(22438),c=n(25377),d=n(34966),f=n(49375),p=n(18841),h=n(85193),m=n(39767),g=n(18741);function _(e,t,n){const r=new Map(e.filter(l.isNamedArgument).map((e=>[e.name,e]))),i=new Map(t.map((e=>[e.name.content,e]))),o=t.find((e=>e.special)),s=new Set;for(const[e,t]of r){const r=i.get(e);void 0!==r?(u.dataflowLogger.trace(`mapping named argument "${e}" to parameter "${r.name.content}"`),n.addEdge(t.nodeId,r.name.info.id,d.EdgeType.DefinesOnCall),n.addEdge(r.name.info.id,t.nodeId,d.EdgeType.DefinedByOnCall),s.add(e)):void 0!==o&&(u.dataflowLogger.trace(`mapping named argument "${e}" to dot-dot-dot parameter`),n.addEdge(t.nodeId,o.name.info.id,d.EdgeType.DefinesOnCall),n.addEdge(o.name.info.id,t.nodeId,d.EdgeType.DefinedByOnCall))}const a=t.filter((e=>!s.has(e.name.content))),f=e.filter((e=>!(0,l.isNamedArgument)(e)));for(let e=0;e<f.length;e++){const t=f[e];if(t===c.EmptyArgument){u.dataflowLogger.trace(`skipping value argument for ${e}`);continue}if(a.length<=e){void 0!==o?(u.dataflowLogger.trace(`mapping unnamed argument ${e} (id: ${t.nodeId}) to dot-dot-dot parameter`),n.addEdge(t.nodeId,o.name.info.id,d.EdgeType.DefinesOnCall),n.addEdge(o.name.info.id,t.nodeId,d.EdgeType.DefinedByOnCall)):u.dataflowLogger.warn(`skipping argument ${e} as there is no corresponding parameter - R should block that`);continue}const r=a[e];u.dataflowLogger.trace(`mapping unnamed argument ${e} (id: ${t.nodeId}) to parameter "${r.name.content}"`),n.addEdge(t.nodeId,r.name.info.id,d.EdgeType.DefinesOnCall),n.addEdge(r.name.info.id,t.nodeId,d.EdgeType.DefinedByOnCall)}}function y(e,t,n,r){const i=n.id;if(void 0!==n.environment)for(const r of t.subflow.in){const t=r.name?(0,h.resolveByName)(r.name,n.environment,r.type):void 0;if(void 0!==t)for(const n of t)e.addEdge(r,n,d.EdgeType.DefinedByOnCall),e.addEdge(i,n,d.EdgeType.DefinesOnCall)}const a=t.exitPoints;for(const t of a)e.addEdge(i,t,d.EdgeType.Returns);const l=(0,s.recoverName)(t.id,r);(0,o.expensiveTrace)(u.dataflowLogger,(()=>`recording expression-list-level call from ${(0,s.recoverName)(n.id,r)} to ${l}`)),e.addEdge(i,t.id,d.EdgeType.Calls),function(e,t,n,r,i,s){const a=t.get(e);void 0!==a?a.type===f.RType.FunctionDefinition?((0,o.expensiveTrace)(u.dataflowLogger,(()=>`linking arguments for ${n} (${r}) to ${JSON.stringify(a.location)}`)),_(i,a.parameters,s)):u.dataflowLogger.trace(`function call definition base ${n} does not lead to a function definition (${r}) but got ${a.type}`):u.dataflowLogger.trace(`no function definition found for ${n} (${r})`)}(t.id,r,l,i,n.args,e)}function b(e,t,n,r,o,s){const a=e.outgoingEdges(t);if(void 0===a)return;const l=d.EdgeType.Reads|d.EdgeType.Calls,u=[...a].filter((([e,t])=>(0,d.edgeDoesNotIncludeType)(t.types,d.EdgeType.Argument)&&(0,d.edgeIncludesType)(t.types,l))).map((([e,t])=>e)),c=v(new Set(u),e);for(const t of c.values())(0,i.guard)(t.tag===p.VertexType.FunctionDefinition,(()=>`expected function definition, but got ${t.tag}`)),y(e,t,n,r);o.isRoot(t)&&s.push({functionCall:t,called:[...c.values()]})}function v(e,t){const n=[...e],r=new Set,i=new Set;for(;n.length>0;){const e=n.pop();if(e===m.BuiltIn)continue;const o=t.get(e,!0);if(void 0===o){g.slicerLogger.trace("skipping unknown link");continue}r.add(e);const s=[...o[1]],a=s.filter((([e,t])=>(0,d.edgeIncludesType)(t.types,d.EdgeType.Returns)));if(a.length>0){n.push(...a.map((([e])=>e)).filter((e=>!r.has(e))));continue}const l=d.EdgeType.Reads|d.EdgeType.DefinedBy|d.EdgeType.DefinedByOnCall,u=s.filter((([e,t])=>(0,d.edgeIncludesType)(t.types,l)));void 0!==o[0].subflow&&i.add(o[0]),n.push(...u.map((([e])=>e)).filter((e=>!r.has(e))))}return i}},56698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},56953:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},57012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=function(e){throw new Error(`Unexpected object: ${JSON.stringify(e)}`)},t.isNotUndefined=function(e){return void 0!==e},t.isUndefined=function(e){return void 0===e},t.isNotNull=function(e){return null!==e},t.guard=function(e,t="Assertion failed"){if(!e)throw new n("string"==typeof t?t:t())};class n extends Error{constructor(e){super(e),this.name="GuardError"}}},57272:(e,t,n)=>{var r=n(65606);const i="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=i},57414:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},57608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deterministicCountingIdGenerator=l,t.deterministicPrefixIdGenerator=function(e,t=0){return()=>`${e}-${t++}`},t.sourcedDeterministicCountingIdGenerator=function(e,t,n=0){let r=n;return()=>`${e}-${u(t)}-${r++}`},t.nodeToLocationId=c,t.deterministicLocationIdGenerator=function(e=0){let t=e;return e=>void 0!==e.location?c(e):""+t++},t.decorateAst=function(e,{getId:t=l(0),file:n}){const r=new i.BiMap,a={idMap:r,getId:t,file:n},u=function(e){return(t,n)=>{const r=e.getId(t),i={...t,info:{...t.info,id:r,parent:void 0,...d,nesting:n}};return i.info.file=e.file,e.idMap.set(r,i),i}}(a),c=function(e){return(t,n,r,i)=>{const s=e.getId(t),a={...t,info:{...t.info,id:s,parent:void 0,nesting:i},lhs:n,rhs:r};e.idMap.set(s,a);const l=n.info;l.parent=s;const u=r.info;return u.parent=s,u.index=1,t.type===o.RType.Pipe?(l.role="pipe-lhs",u.role="pipe-rhs"):(l.role="binop-lhs",u.role="binop-rhs"),a.info.file=e.file,a}}(a),S=function(e){return(t,n,r)=>{const i=e.getId(t),o={...t,info:{...t.info,id:i,parent:void 0,nesting:r},operand:n};e.idMap.set(i,o);const s=n.info;return s.parent=i,s.role="unary-operand",o.info.file=e.file,o}}(a),x=(0,s.foldAstStateful)(e,0,{down:(e,t)=>f.has(e.type)?t+1:t,foldNumber:u,foldString:u,foldLogical:u,foldSymbol:u,foldAccess:p(a),foldBinaryOp:c,foldPipe:c,foldUnaryOp:S,other:{foldComment:u,foldLineDirective:u},loop:{foldFor:h(a),foldRepeat:m(a),foldWhile:g(a),foldBreak:u,foldNext:u},foldIfThenElse:_(a),foldExprList:y(a),functions:{foldFunctionDefinition:v(a),foldFunctionCall:b(a),foldArgument:E(a),foldParameter:w(a)}});return x.info.role="root",x.info.index=0,{ast:x,idMap:r}};const r=n(57012),i=n(12865),o=n(49375),s=n(18327),a=n(25377);function l(e=0){return()=>e++}function u([e,t,n,r]){return`${e}:${t}-${n}:${r}`}function c(e){const t=e.location;return(0,r.guard)(void 0!==t,"location must be defined to generate a location id"),u(t)}const d={role:"root",index:0},f=new Set([o.RType.FunctionDefinition,o.RType.ForLoop,o.RType.WhileLoop,o.RType.RepeatLoop,o.RType.IfThenElse]);function p(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},accessed:n,access:r};e.idMap.set(o,s);const l=n.info;if(l.parent=o,l.role="accessed","string"!=typeof r){let e=0;for(const t of r)if(e++,t!==a.EmptyArgument){const n=t.info;n.parent=o,n.index=e,n.role="index-access"}}return s.info.file=e.file,s}}function h(e){return(t,n,r,i,o)=>{const s=e.getId(t),a={...t,info:{...t.info,id:s,parent:void 0,nesting:o},variable:n,vector:r,body:i};e.idMap.set(s,a);const l=n.info;l.parent=s,l.role="for-variable";const u=r.info;u.parent=s,u.index=1,u.role="for-vector";const c=i.info;return c.parent=s,c.index=2,c.role="for-body",a.info.file=e.file,a}}function m(e){return(t,n,r)=>{const i=e.getId(t),o={...t,info:{...t.info,id:i,parent:void 0,nesting:r},body:n};e.idMap.set(i,o);const s=n.info;return s.parent=i,s.role="repeat-body",o.info.file=e.file,o}}function g(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},condition:n,body:r};e.idMap.set(o,s);const a=n.info;a.parent=o,a.role="while-cond";const l=r.info;return l.parent=o,l.index=1,l.role="while-body",s.info.file=e.file,s}}function _(e){return(t,n,r,i,o)=>{const s=e.getId(t),a={...t,info:{...t.info,id:s,parent:void 0,nesting:o},condition:n,then:r,otherwise:i};e.idMap.set(s,a);const l=n.info;l.parent=s,l.role="if-cond";const u=r.info;if(u.parent=s,u.index=1,u.role="if-then",i){const e=i.info;e.parent=s,e.index=2,e.role="if-otherwise"}return a.info.file=e.file,a}}function y(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},grouping:n,children:r};e.idMap.set(o,s);let a=0;for(const e of r){const t=e.info;t.parent=o,t.index=a++,t.role="expr-list-child"}return s.info.file=e.file,s}}function b(e){return(t,n,r,i)=>{const o=e.getId(t);let s;s=t.named?{...t,info:{...t.info,id:o,parent:void 0,nesting:i},functionName:n,arguments:r}:{...t,info:{...t.info,id:o,parent:void 0,nesting:i},calledFunction:n,arguments:r},e.idMap.set(o,s);const l=n.info;l.parent=o,l.role="call-name";let u=0;for(const e of r)if(u++,e!==a.EmptyArgument){const t=e.info;t.parent=o,t.index=u,t.role="call-argument"}return s.info.file=e.file,s}}function v(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},parameters:n,body:r};e.idMap.set(o,s);let a=0;for(const e of n){const t=e.info;t.parent=o,t.index=a++,t.role="function-def-param"}const l=r.info;return l.parent=o,l.index=a,l.role="function-def-body",s.info.file=e.file,s}}function w(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},name:n,defaultValue:r};e.idMap.set(o,s);const a=n.info;if(a.parent=o,a.role="param-name",r){const e=r.info;e.parent=o,e.index=1,e.role="param-value"}return s.info.file=e.file,s}}function E(e){return(t,n,r,i)=>{const o=e.getId(t),s={...t,info:{...t.info,id:o,parent:void 0,nesting:i},name:n,value:r};e.idMap.set(o,s);let a=0;if(n){const e=n.info;e.parent=o,e.role="arg-name",a++}if(r){const e=r.info;e.parent=o,e.index=a,e.role="arg-value"}return s.info.file=e.file,s}}},57647:(e,t,n)=>{"use strict";const r=n(65606),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=n(68526),{Symbol:a}=n(74641),{kIsDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:d}=n(136),f=a("kDestroy"),p=a("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t,n){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,s=e._writableState;h(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(g,e,t):r.nextTick(_,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function g(e,t){y(e,t),_(e)}function _(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function b(e,t,n){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(y,e,t):y(e,t))}function v(e){let t=!1;function n(n){if(t)return void b(e,null!=n?n:new o);t=!0;const i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(f,n):n?b(e,n,!0):r.nextTick(w,e)}try{e._construct((e=>{r.nextTick(n,e)}))}catch(e){r.nextTick(n,e)}}function w(e){e.emit(p)}function E(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function S(e){e.emit("close")}function x(e,t){e.emit("error",t),r.nextTick(S,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(p,t),e.listenerCount(p)>1||r.nextTick(v,e)},destroyer:function(e,t){e&&!u(e)&&(t||c(e)||(t=new s),d(e)?(e.socket=null,e.destroy(t)):E(e)?e.abort():E(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(x,e,t):r.nextTick(S,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,o=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),o.constructed?m(this,e,t):this.once(f,(function(n){m(this,i(n,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},57876:function(e,t,n){"use strict";var r=n(65606),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.summarizerOptions=t.statisticHelperOptions=t.statisticOptions=t.slicerOptions=t.exportQuadsOptions=t.benchmarkHelperOptions=t.benchmarkOptions=void 0;const o=i(n(51072)),s=n(87247),a=n(75885),l=(0,s.date2string)(new Date);t.benchmarkOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging [do not use for the real benchmark as this affects the time measurements, but only to find errors]"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"limit",alias:"l",type:Number,description:"Limit the number of files to process (if given, this will choose these files randomly and add the chosen names to the output"},{name:"runs",alias:"r",type:Number,description:"The amount of benchmark runs that should be done, out of which an average will be calculated"},{name:"input",alias:"i",type:String,description:"Pass a folder or file as src to read from",multiple:!0,defaultOption:!0,defaultValue:[],typeLabel:"{underline files/folders}"},{name:"parallel",alias:"p",type:String,description:"Number of parallel executors (defaults to {italic max(cpu.count-1, 1)})",defaultValue:Math.max(o.default.cpus().length-1,1),typeLabel:"{underline number}"},{name:"slice",alias:"s",type:String,description:"Automatically slice for *all* variables (default) or *no* slicing and only parsing/dataflow construction. Numbers will indicate: sample X random slices from all.",defaultValue:"all",typeLabel:"{underline all/no}"},{name:"output",alias:"o",type:String,description:`Directory to write all the measurements to in a per-file-basis (defaults to {italic benchmark-${l}})`,defaultValue:`benchmark-${l}`,typeLabel:"{underline file}"},{name:"parser",type:String,description:"The parser to use for the benchmark",defaultValue:"r-shell",typeLabel:"{underline parser}"}],t.benchmarkHelperOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging [do not use for the real benchmark as this affects the time measurements, but only to find errors]"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"input",alias:"i",type:String,description:"Pass a single file as src to read from",multiple:!1,defaultOption:!0,typeLabel:"{underline file}"},{name:"file-id",alias:"d",type:Number,description:"A numeric file id that can be used to match an input and run-num to a file"},{name:"run-num",alias:"r",type:Number,description:"The n-th time that the file with the given file-id is being benchmarked"},{name:"slice",alias:"s",type:String,description:"Automatically slice for *all* variables (default) or *no* slicing and only parsing/dataflow construction. Numbers will indicate: sample X random slices from all.",defaultValue:"all",typeLabel:"{underline all/no}"},{name:"output",alias:"o",type:String,description:"File to write the measurements to (appends a single line in JSON format)",typeLabel:"{underline file}"},{name:"parser",type:String,description:"The parser to use for the benchmark",defaultValue:"r-shell",typeLabel:"{underline parser}"}],t.exportQuadsOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"input",alias:"i",type:String,description:"Pass a folder or file as src to read from",multiple:!0,defaultOption:!0,defaultValue:[],typeLabel:"{underline files/folders}"},{name:"limit",alias:"l",type:Number,description:"Limit the number of files to process"},{name:"output",alias:"o",type:String,description:"File to write all the generated quads to (defaults to {italic out.quads})",typeLabel:"{underline file}"}],t.slicerOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"input",alias:"i",type:String,description:"(Required) Pass a single file to slice",multiple:!1,defaultOption:!0,typeLabel:"{underline files}"},{name:"input-is-text",alias:"r",type:Boolean,description:"Indicate, that the input is *not* a file, but R code to directly consume"},{name:"diff",alias:"d",type:Boolean,description:"This requires ansi-output and only works if the api option is not set. It visualizes the slice as a diff."},{name:"criterion",alias:"c",type:String,description:"(Required) Slicing criterion either in the form {underline line:col} or {underline line@variable}, multiple can be separated by '{bold ;}'. If you do not want to slice but only process the file, pass an empty string.",multiple:!1},{name:"stats",alias:"s",type:Boolean,description:"Print stats and write them to {italic <output>.stats} (runtimes etc.)",multiple:!1},{name:"output",alias:"o",type:String,description:"File to write all the generated quads to (defaults to the commandline)",typeLabel:"{underline file}"},{name:"no-magic-comments",alias:"m",type:Boolean,description:"Disable the effects of magic comments which force lines to be included."},{name:"api",type:Boolean,description:"Instead of human-readable output, dump a lot of json with the results of all intermediate steps."}];const u=[...a.allFeatureNames].map((e=>`"${e}"`)).join(", ");t.statisticOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"limit",alias:"l",type:Number,description:"Limit the number of files to process"},{name:"input",alias:"i",type:String,description:"Pass a folder or file as src to read from",multiple:!0,defaultOption:!0,defaultValue:[],typeLabel:"{underline files/folders}"},{name:"output-dir",alias:"o",type:String,description:"Folder to write the output to",defaultValue:`${r.cwd()}/statistics-out/${(0,s.date2string)(new Date)}`,typeLabel:"{underline folder}"},{name:"dump-json",type:Boolean,description:"Write JSON output during the extraction",typeLabel:"{underline folder}"},{name:"no-ansi",type:Boolean,description:"Disable ansi-escape-sequences in the output. Useful, if you want to redirect the output to a file."},{name:"parallel",alias:"p",type:String,description:"Number of parallel executors (defaults to {italic max(cpu.count-1, 1)})",defaultValue:Math.max(o.default.cpus().length-1,1),typeLabel:"{underline number}"},{name:"features",type:String,description:`Features to track, supported are "all" or ${u}`,multiple:!0,defaultValue:"all",typeLabel:"{underline names}"}],t.statisticHelperOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"input",alias:"i",type:String,description:"Pass single file as src to read from",multiple:!1,defaultOption:!0,typeLabel:"{underline file}"},{name:"output-dir",alias:"o",type:String,description:"Folder to write the output to",typeLabel:"{underline folder}"},{name:"root-dir",type:String,description:"Root dir for the statistics files",defaultValue:""},{name:"compress",type:Boolean,description:"Compress the output folder to a single file",defaultValue:!1},{name:"dump-json",type:Boolean,description:"Write JSON output during the extraction",typeLabel:"{underline folder}"},{name:"no-ansi",type:Boolean,description:"Disable ansi-escape-sequences in the output. Useful, if you want to redirect the output to a file."},{name:"features",type:String,description:`Features to track, supported are "all" or ${u}`,multiple:!0,defaultValue:"all",typeLabel:"{underline names}"}],t.summarizerOptions=[{name:"verbose",alias:"v",type:Boolean,description:"Run with verbose logging"},{name:"help",alias:"h",type:Boolean,description:"Print this usage guide"},{name:"type",alias:"t",type:String,description:"Manually specify if you want to post-process benchmark results, statistics, or compressed statistics (defaults to auto).",defaultValue:"auto"},{name:"graph",alias:"g",type:Boolean,description:"Produce data to be used for visualizing benchmarks over time"},{name:"categorize",type:Boolean,description:'Categorize the results (e.g., "test", "example", ...)',defaultValue:!1},{name:"project-skip",type:Number,description:"Skip the first n folders to find the location of projects",defaultValue:0},{name:"ultimate-only",alias:"u",type:Boolean,description:"Only perform the second summary-stage, with this, the input is used to find the summary-output."},{name:"input",alias:"i",type:String,description:"The {italic output} produced by the benchmark, the statistics, ...",defaultOption:!0,multiple:!1,typeLabel:"{underline file.json/output}"},{name:"output",alias:"o",type:String,description:"Basename of the summaries (defaults to {italic <input>-summary})",typeLabel:"{underline file}"}]},57975:(e,t,n)=>{"use strict";var r=n(65606);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var s={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=r.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,u=o<l?o:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===t.charCodeAt(a+d))return t.slice(a+d+1);if(0===d)return t.slice(a+d)}else o>u&&(47===e.charCodeAt(n+d)?c=d:0===d&&(c=0));break}var f=e.charCodeAt(n+d);if(f!==t.charCodeAt(a+d))break;47===f&&(c=d)}var p="";for(d=n+c+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===p.length?p+="..":p+="/..");return p.length>0?p+t.slice(a+c):(a+=c,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!s){r=n+1;break}}else-1===l&&(s=!1,l=n+1),a>=0&&(u===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=l))}return r===o?o=l:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===r&&(o=!1,r=a+1),46===l?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,l=-1,u=!0,c=e.length-1,d=0;c>=n;--c)if(47!==(r=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===r?-1===s?s=c:1!==d&&(d=1):-1!==s&&(d=-1);else if(!u){a=c+1;break}return-1===s||-1===l||0===d||1===d&&s===l-1&&s===a+1?-1!==l&&(t.base=t.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(a,s),t.base=e.slice(a,l)),t.ext=e.slice(s,l)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},58068:e=>{"use strict";e.exports=SyntaxError},58733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeRootObjToAst=function(e,t){const n=t.token;(0,r.assureTokenType)(n,a.RawRType.ExpressionList);let l=[];if(t.children.length>0){const n=t.children;l=(0,i.normalizeExpressions)(e,n)}else o.log.debug("no children found, assume empty input");const[u,c]=(0,s.partition)(l,(e=>e.type===a.RType.Delimiter||e.type===a.RType.Comment));return{type:a.RType.ExpressionList,children:c,grouping:void 0,lexeme:void 0,info:{fullRange:e.currentRange,additionalTokens:u,fullLexeme:e.currentLexeme}}};const r=n(36604),i=n(93086),o=n(19742),s=n(83584),a=n(49375)},58912:()=>{},58968:e=>{"use strict";e.exports=Math.floor},59083:(e,t,n)=>{"use strict";e.exports=c;var r=n(12463).F,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(88101);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(56698)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},59205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variables=void 0;const r=n(48624),i=n(44441),o=n(6945),s=n(49375),a=n(37016),l=n(6737);t.variables={name:"Variables",description:"Variable Usage, Assignments, and Redefinitions",process:(e,n)=>(function(e,n){(0,o.visitAst)(n.normalizedRAst.ast,(r=>{if(r.type!==s.RType.Symbol||(0,a.isSpecialSymbol)(r))return;const o=n.dataflow.graph.get(r.info.id);if(void 0===o)return e.unknownVariables++,void(0,l.appendStatisticsFile)(t.variables.name,"unknown",[[r.info.fullLexeme??r.lexeme,(0,i.getRangeStart)(r.location)]],n.filepath);const[u]=o;if("variable-definition"===u.tag){e.numberOfDefinitions++;const o=r.info.fullLexeme??r.lexeme;(0,l.appendStatisticsFile)(t.variables.name,"definedVariables",[[o,(0,i.getRangeStart)(r.location)]],n.filepath)}else"use"===u.tag&&(e.numberOfVariableUses++,(0,l.appendStatisticsFile)(t.variables.name,"usedVariables",[[r.info.fullLexeme??r.lexeme,(0,i.getRangeStart)(r.location)]],n.filepath))}))}(e,n),e),initialValue:{numberOfVariableUses:0,numberOfDefinitions:0,numberOfRedefinitions:0,unknownVariables:0},postProcess:r.postProcess}},59592:(e,t,n)=>{"use strict";var r=n(65606);Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatform=function(){if(null!==i)return i;const e=r.platform;return i="darwin"===e?"mac-os":"linux"===e?"linux":"win32"===e?"windows":"unknown",i};let i=null},59999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){const t=this.lhs.evaluate(e).bool;return t.booleanValue?t:this.rhs.evaluate(e).bool}toString(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"}}t.OrOperation=i},60347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataflowGraph=void 0,t.isPositionalArgument=function(e){return e!==a.EmptyArgument&&void 0===e.name},t.isNamedArgument=function(e){return e!==a.EmptyArgument&&void 0!==e.name},t.getReferenceOfArgument=function(e){if(e!==a.EmptyArgument)return e?.nodeId};const r=n(57012),i=n(36444),o=n(18841),s=n(83584),a=n(25377),l=n(17949),u=n(73326),c=n(48434),d=n(91884),f=n(39767),p=n(22438);class h{static DEFAULT_ENVIRONMENT=void 0;_idMap;_unknownSideEffects=new Set;constructor(e){h.DEFAULT_ENVIRONMENT??=(0,u.initializeCleanEnvironments)(),this._idMap=e}rootVertices=new Set;vertexInformation=new Map;edgeInformation=new Map;get(e,t=!0){const n=this.getVertex(e,t);return void 0===n?void 0:[n,this.outgoingEdges(e)??new Map]}getVertex(e,t=!0){return t||this.rootVertices.has(e)?this.vertexInformation.get(e):void 0}outgoingEdges(e){return this.edgeInformation.get(e)}ingoingEdges(e){const t=new Map;for(const[n,r]of this.edgeInformation.entries())r.has(e)&&t.set(n,r.get(e));return t}get idMap(){return this._idMap}get unknownSideEffects(){return this._unknownSideEffects}setIdMap(e){this._idMap=e}*vertices(e){if(e)yield*this.vertexInformation.entries();else for(const e of this.rootVertices)yield[e,this.vertexInformation.get(e)]}*edges(){yield*this.edgeInformation.entries()}hasVertex(e,t=!0){return t?this.vertexInformation.has(e):this.rootVertices.has(e)}isRoot(e){return this.rootVertices.has(e)}rootIds(){return this.rootVertices}addVertex(e,t=!0){if(void 0!==this.vertexInformation.get(e.id))return this;const n=e.tag===o.VertexType.VariableDefinition||e.tag===o.VertexType.Use||e.tag===o.VertexType.Value||e.tag===o.VertexType.FunctionCall&&e.onlyBuiltin?void 0:h.DEFAULT_ENVIRONMENT,r=e.environment?(0,c.cloneEnvironmentInformation)(e.environment):n;return this.vertexInformation.set(e.id,{...e,environment:r}),t&&this.rootVertices.add(e.id),this}addEdge(e,t,n){const[r,i]=function(e,t){return["object"==typeof e?e.nodeId:e,"object"==typeof t?t.nodeId:t]}(e,t);if(r===i||i===f.BuiltIn)return this;const o={types:n},s=this.edgeInformation.get(r),a=s?.get(i);return void 0===a?void 0===s?this.edgeInformation.set(r,new Map([[i,o]])):s.set(i,o):a.types|=n,this}mergeWith(e,t=!0){if(void 0===e)return this;if(t)for(const t of e.rootVertices)this.rootVertices.add(t);for(const t of e.unknownSideEffects)this._unknownSideEffects.add(t);for(const[t,n]of e.vertexInformation){const e=this.vertexInformation.get(t);this.vertexInformation.set(t,void 0===e?n:m(e,n))}return this.mergeEdges(e),this}mergeEdges(e){for(const[t,n]of e.edgeInformation.entries())for(const[e,r]of n){const n=this.edgeInformation.get(t);if(void 0===n)this.edgeInformation.set(t,new Map([[e,r]]));else{const t=n.get(e);void 0===t?n.set(e,r):t.types|=r.types}}}setDefinitionOfVertex(e){const t=this.getVertex(e.nodeId,!0);(0,r.guard)(void 0!==t,(()=>`node must be defined for ${JSON.stringify(e)} to set reference`)),t.tag===o.VertexType.FunctionDefinition||t.tag===o.VertexType.VariableDefinition?t.controlDependencies=e.controlDependencies:this.vertexInformation.set(e.nodeId,{...t,tag:o.VertexType.VariableDefinition})}updateToFunctionCall(e){const t=this.getVertex(e.id,!0);(0,r.guard)(void 0!==t&&(t.tag===o.VertexType.Use||t.tag===o.VertexType.Value),(()=>`node must be a use or value node for ${JSON.stringify(e.id)} to update it to a function call but is ${t?.tag}`)),this.vertexInformation.set(e.id,{...t,...e,tag:o.VertexType.FunctionCall})}addControlDependency(e,t,n){t=t?(0,l.normalizeIdToNumberIfPossible)(t):void 0;const i=this.getVertex(e,!0);if((0,r.guard)(void 0!==i,(()=>`node must be defined for ${e} to add control dependency`)),i.controlDependencies??=[],t){let e=!1;for(const{id:r,when:o}of i.controlDependencies)if(r===t&&n!==o){e=!0;break}e||i.controlDependencies.push({id:t,when:n})}return this}markIdForUnknownSideEffects(e,t){return t?(this._unknownSideEffects.add({id:(0,l.normalizeIdToNumberIfPossible)(e),linkTo:"string"==typeof t.callName?{...t,callName:new RegExp(t.callName)}:t}),this):(this._unknownSideEffects.add((0,l.normalizeIdToNumberIfPossible)(e)),this)}static fromJson(e){const t=new h(void 0);return t.rootVertices=new Set(e.rootVertices),t.vertexInformation=new Map(e.vertexInformation),t.edgeInformation=new Map(e.edgeInformation.map((([e,t])=>[e,new Map(t)]))),t}}function m(e,t){return e.tag!==t.tag?(p.dataflowLogger.warn((()=>`nodes to be joined for the same id should have the same tag, but ${JSON.stringify(e,d.jsonReplacer)} vs. ${JSON.stringify(t,d.jsonReplacer)} -- we are currently not handling cases in which vertices may be either! Keeping current.`)),e):(e.tag===o.VertexType.VariableDefinition?(0,r.guard)(e.scope===t.scope,"nodes to be joined for the same id must have the same scope"):e.tag===o.VertexType.FunctionCall?(0,r.guard)((0,i.equalFunctionArguments)(e.id,e.args,t.args),"nodes to be joined for the same id must have the same function call information"):e.tag===o.VertexType.FunctionDefinition&&((0,r.guard)(e.scope===t.scope,"nodes to be joined for the same id must have the same scope"),(0,r.guard)((0,s.arrayEqual)(e.exitPoints,t.exitPoints),"nodes to be joined must have same exist points")),e)}t.DataflowGraph=h},60440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeIfThenElse=function(e,[t,n,l,u,c,d,f]){const p=(0,r.tryNormalizeIfThen)(e,[t,n,l,u,c]);if(void 0===p)return;(0,i.guard)(d.name===a.RawRType.Else,(()=>`expected else token for if-then-else but found ${JSON.stringify(d)}`));const h=(0,s.normalizeSingleNode)(e,f);return(0,i.guard)(h.type!==a.RType.Delimiter,(()=>`unexpected missing else-part of if-then-else, received ${JSON.stringify([p,h])} for ${JSON.stringify([t,n,l,u,c,d,f])}`)),{...p,otherwise:(0,o.ensureExpressionList)(h)}};const r=n(22660),i=n(57012),o=n(36604),s=n(10570),a=n(49375)},60766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBuiltInFunctions=s,t.registerReplacementFunctions=a,t.registerBuiltInDefinition=l,t.registerBuiltInDefinitions=function(e){for(const t of e)l(t)};const r=n(39767),i=n(46044),o=n(57012);function s({names:e,processor:t,config:n,assumePrimitive:s}){const a=r.BuiltInProcessorMapper[t];(0,o.guard)(void 0!==a,(()=>`Processor for ${t} is undefined! Please pass a valid builtin name ${JSON.stringify(Object.keys(r.BuiltInProcessorMapper))}!`));for(const l of e){(0,o.guard)(void 0!==t,`Processor for ${l} is undefined, maybe you have an import loop? You may run 'npm run detect-circular-deps' - although by far not all are bad`);const e=[{type:i.ReferenceType.BuiltInFunction,definedAt:r.BuiltIn,controlDependencies:void 0,processor:(e,t,r,i)=>a(e,t,r,i,n),name:l,nodeId:r.BuiltIn}];r.BuiltInMemory.set(l,e),s&&r.EmptyBuiltInMemory.set(l,e)}}function a({names:e,suffixes:t,assumePrimitive:n}){const s=r.BuiltInProcessorMapper["builtin:replacement"];(0,o.guard)(void 0!==s,(()=>"Processor for builtin:replacement is undefined!"));for(const o of e)for(const e of t){const t=`${o}${e}`,a=[{type:i.ReferenceType.BuiltInFunction,definedAt:r.BuiltIn,processor:(t,n,r,i)=>s(t,n,r,i,{makeMaybe:!0,assignmentOperator:e}),name:t,controlDependencies:void 0,nodeId:r.BuiltIn}];r.BuiltInMemory.set(t,a),n&&r.EmptyBuiltInMemory.set(t,a)}}function l(e){switch(e.type){case"constant":return function({names:e,value:t,assumePrimitive:n}){for(const o of e){const e=[{type:i.ReferenceType.BuiltInConstant,definedAt:r.BuiltIn,controlDependencies:void 0,value:t,name:o,nodeId:r.BuiltIn}];r.BuiltInMemory.set(o,e),n&&r.EmptyBuiltInMemory.set(o,e)}}(e);case"function":return s(e);case"replacement":return a(e)}}},61082:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const c={forLoops:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),forLoopVar:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),forBody:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),whileLoops:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),whileBody:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),repeatLoops:(0,i.emptySummarizedWithProject)(),repeatBody:(0,o.emptyCommonSyntaxTypeCounts)((()=>[])),breakStatements:(0,i.emptySummarizedWithProject)(),nextStatements:(0,i.emptySummarizedWithProject)(),implicitLoops:(0,i.emptySummarizedWithProject)(),nestedExplicitLoops:(0,i.emptySummarizedWithProject)(),deepestExplicitNesting:(0,i.emptySummarizedWithProject)()};for(const[e,n]of t.entries()){const t=n.loops;for(const[n,s]of Object.entries(t))if("object"!=typeof s){const t=c[n];t.count.push("number"==typeof s?Number(s):(0,l.bigint2number)(s)),s>0&&(0,i.recordFilePath)(t,e,r)}else(0,o.appendCommonSyntaxTypeCounter)(c[n],s)}const d=a.default.createWriteStream(s.default.join(n,"loops-meta.csv"));d.write(`kind,unique-projects,unique-files,${(0,u.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(c)){const r=t;if("uniqueProjects"in r)d.write(`${JSON.stringify(e)},${r.uniqueProjects.size},${r.uniqueFiles.size},${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(r.count))}\n`);else{const t=a.default.createWriteStream(s.default.join(n,`loops-type-${e}.csv`));t.write(`kind,name,${(0,u.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,n]of Object.entries(r))if(Array.isArray(n))t.write(`${JSON.stringify(e)},"",${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(n.flat()))}\n`);else for(const[r,i]of Object.entries(n))t.write(`${JSON.stringify(e)},${JSON.stringify(r)},${(0,u.summarizedMeasurement2Csv)((0,u.summarizeMeasurement)(i.flat()))}\n`);t.close()}}d.close()};const i=n(61685),o=n(67102),s=r(n(57975)),a=r(n(94473)),l=n(13078),u=n(71339)},61123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},61685:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.emptySummarizedWithProject=function(){return{uniqueProjects:new Set,uniqueFiles:new Set,count:[]}},t.recordFilePath=function(e,t,n){e.uniqueFiles.add(t),e.uniqueProjects.add(t.split(i.default.sep)[n.projectSkip]??"")};const i=r(n(57975))},62027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUnnamedArgument=a,t.wrapArgumentsUnnamed=function(e,t){return e.map((e=>e===i.EmptyArgument||e?.type===o.RType.Argument?e:a(e,t)))};const r=n(44441),i=n(25377),o=n(49375),s=(0,r.rangeFrom)(-1,-1,-1,-1);function a(e,t){if(void 0===e)return i.EmptyArgument;const n={type:o.RType.Argument,lexeme:e.lexeme??"",location:e.location??s,info:{...e.info,id:e.info.id+"-arg"},name:void 0,value:e};return t.set(n.info.id,e),n}},62091:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r}=n(74641);e.exports=o;const i=n(68649);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r(o.prototype,i.prototype),r(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},62243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.controlflow=void 0;const r=n(67102),i=n(46225),o=n(55143),s=n(49375),a=n(6945),l={ifThen:(0,r.emptyCommonSyntaxTypeCounts)(),thenBody:(0,r.emptyCommonSyntaxTypeCounts)(),ifThenElse:(0,r.emptyCommonSyntaxTypeCounts)(),elseBody:(0,r.emptyCommonSyntaxTypeCounts)(),nestedIfThen:0,nestedIfThenElse:0,deepestNesting:0,switchCase:(0,r.emptyCommonSyntaxTypeCounts)()};t.controlflow={name:"Controlflow",description:"Deals with if-then-else and switch-case",process:(e,t)=>(function(e,t){const n=[];(0,a.visitAst)(t.normalizedRAst.ast,(t=>{if(t.type!==s.RType.IfThenElse){if(t.type===s.RType.FunctionCall&&t.named&&"switch"===t.functionName.content){const n=(0,o.unpackArgument)(t.arguments[0]);n&&(e.switchCase=(0,r.updateCommonSyntaxTypeCounts)(e.switchCase,n))}return}const i=void 0!==t.otherwise;n.length>0&&(i?e.nestedIfThenElse++:e.nestedIfThen++,e.deepestNesting=Math.max(e.deepestNesting,n.length)),n.push(t),e.thenBody=(0,r.updateCommonSyntaxTypeCounts)(e.thenBody,...t.then.children),i?(e.ifThenElse=(0,r.updateCommonSyntaxTypeCounts)(e.ifThenElse,t.condition),e.elseBody=(0,r.updateCommonSyntaxTypeCounts)(e.elseBody,...t.otherwise.children)):e.ifThen=(0,r.updateCommonSyntaxTypeCounts)(e.ifThen,t.condition)}),(e=>{e.type===s.RType.IfThenElse&&n.pop()}))}(e,t),e),initialValue:l,postProcess:i.postProcess}},62288:(e,t)=>{"use strict";function n(e,t){return t.getWordRangeAtPosition(e,/([a-zA-Z0-9._:])+/)}function r(e){return`${e.line+1}:${e.character+1}`}Object.defineProperty(t,"__esModule",{value:!0}),t.RotaryBuffer=void 0,t.getPositionAt=n,t.consolidateNewlines=function(e){return e.replace(/\r\n/g,"\n")},t.makeSlicingCriteria=function(e,t,i=!0){return(e=e.map((e=>{const r=n(e,t);return e=r?.start??e,i&&(console.log(`Extracting slice at ${e.line+1}:${e.character+1} in ${t.fileName}`),console.log(`Token: ${t.getText(r)}`)),e}))).map(r)},t.makeSliceElements=function(e,t){const n=[];for(const r of e){const e=t(r);e&&n.push({id:r,location:e})}return n.sort(((e,t)=>e.location[0]-t.location[0]||e.location[1]-t.location[1])),n},t.RotaryBuffer=class{buffer;index=0;constructor(e){this.buffer=new Array(e)}push(e){this.buffer[this.index]=e,this.index=(this.index+1)%this.buffer.length}get(e){return this.buffer.find(e)}}},62806:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RShellExecutor=void 0;const i=n(8238),o=n(22452),s=n(44862),a=r(n(97716)),l=n(19742),u=n(42284),c=n(48060),d=n(72814),f=l.log.getSubLogger({name:"RShellExecutor"});t.RShellExecutor=class{name="r-shell";options;prerequisites;constructor(e){this.options=(0,o.deepMergeObject)((0,i.getDefaultRShellOptions)(),e),this.prerequisites=[(0,u.initCommand)(this.options.eol)]}addPrerequisites(e){return this.prerequisites.push(..."string"==typeof e?[e]:e),this}rVersion(){return Promise.resolve(this.usedRVersion()?.format()??"unknown")}usedRVersion(){const e=this.run(`cat(paste0(R.version$major,".",R.version$minor), ${(0,c.ts2r)(this.options.eol)})`);return(0,l.expensiveTrace)(f,(()=>`raw version: ${JSON.stringify(e)}`)),a.default.coerce(e)}run(e,t=!1){e+=";base::quit()",(0,l.expensiveTrace)(f,(()=>`> ${JSON.stringify(e)}`));const n=(0,s.spawnSync)(this.options.pathToRExecutable,this.options.commandLineOptions,{env:this.options.env,cwd:this.options.cwd,windowsHide:!0,encoding:"utf8",input:[...this.prerequisites,e].join(this.options.eol)});return(t?n.stderr:n.stdout).trim()}parse(e){return(0,d.retrieveParseDataFromRCode)(e,this)}close(){}}},62853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeLocationMapQuery=function({ast:e},t){1!==t.length&&r.log.warn("Id-Map query expects only up to one query, but got",t.length);const n=Date.now(),i={};for(const[t,n]of e.idMap.entries())i[t]=n.location;return{".meta":{timing:Date.now()-n},map:i}};const r=n(19742)},62948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.define=function(e,t,n){const s=e.name;let l;if((0,r.guard)(void 0!==s,(()=>`Name must be defined, but isn't for ${JSON.stringify(e)}`)),t){l=(0,o.cloneEnvironmentInformation)(n,!0);let t,a=l.current,u=!1;do{if(a.memory.has(s)){a.memory.set(s,[e]),u=!0;break}t=a,a=a.parent}while(a.id!==i.BuiltInEnvironment.id);u||((0,r.guard)(void 0!==t,(()=>`Could not find global scope for ${s}`)),t.memory.set(s,[e]))}else l=(0,o.cloneEnvironmentInformation)(n,!1),function(e,t,n){const r=e.memory.get(t),i=n;void 0===r||void 0===i.indicesCollection||void 0!==i.controlDependencies?void 0===r||void 0===n.controlDependencies?e.memory.set(t,[n]):r.push(n):e.memory.set(t,function(e,t){if(t.indicesCollection?.some((e=>e.isContainer)))return[t];const n=e.map((e=>e)).filter((e=>void 0!==e)),r=t.indicesCollection?.flatMap((e=>e.indices))??[],i=[];for(const e of r)for(const t of n){if(void 0===t.indicesCollection)continue;const n=a(t.indicesCollection,e);n.length>0&&i.push({...t,indicesCollection:n})}return[...i,t]}(r,i))}(l.current,s,e);return l};const r=n(57012),i=n(73326),o=n(48434),s=n(18841);function a(e,t){const n=[];for(const r of e){let e;if((0,s.isParentContainerIndex)(t)){e=[];for(const n of r.indices){if(n.lexeme===t.lexeme&&(0,s.isParentContainerIndex)(n)){const r=t.subIndices.flatMap((e=>e.indices));let i=n.subIndices;for(const e of r)i=a(i,e);i.length>0&&e.push({...n,subIndices:i})}n.lexeme===t.lexeme&&(0,s.isParentContainerIndex)(n)||e.push(n)}}else e=r.isContainer?r.indices:r.indices.filter((e=>e.lexeme!==t.lexeme));(r.isContainer||e.length>0)&&n.push({...r,indices:e})}return n}},63549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkReadsForArgument=u,t.processFunctionArgument=function(e,t){const n=void 0===e.name?void 0:(0,r.processDataflowFor)(e.name,t),i=void 0===e.value?void 0:(0,r.processDataflowFor)(e.value,t),c=i?.graph??new o.DataflowGraph(t.completeAst.idMap),d=e.name?.content;let f=i?.entryPoint;d&&(c.addVertex({tag:l.VertexType.Use,id:e.info.id,controlDependencies:t.controlDependencies}),f=e.info.id);const p=[...i?.unknownReferences??[],...i?.in??[],...void 0===n?[]:[...n.in]];return f&&e.value?.type===s.RType.FunctionDefinition?c.addEdge(f,e.value.info.id,a.EdgeType.Reads):d&&u(e,[...p,...i?.out??[]],c),{unknownReferences:[],in:p.filter((e=>void 0!==e.name)),out:[...i?.out??[],...n?.out??[]],graph:c,environment:i?.environment??t.environment,entryPoint:f??e.info.id,exitPoints:i?.exitPoints??n?.exitPoints??[{nodeId:e.info.id,type:0,controlDependencies:t.controlDependencies}]}};const r=n(22476),i=n(64733),o=n(60347),s=n(49375),a=n(34966),l=n(18841);function u(e,t,n){const r=new Set((0,i.collectAllIds)(e,(t=>t.type===s.RType.Argument&&t.info.id!==e.info.id))),o=t.filter((e=>r.has(e.nodeId)));for(const t of o)n.addEdge(e.info.id,t,a.EdgeType.Reads)}},63779:()=>{},63872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAsNamedCall=function(e,t,n,s){return(0,r.processNamedCall)({type:o.RType.Symbol,info:e.info,content:n,lexeme:e.lexeme,location:e.location,namespace:void 0},(0,i.wrapArgumentsUnnamed)(s,t.completeAst.idMap),e.info.id,t)};const r=n(55087),i=n(62027),o=n(49375)},64039:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(41333);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},64351:()=>{},64641:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.usedPackages=t.initialUsedPackageInfos=void 0;const a=s(n(84661)),l=n(82172),u=n(6737);t.initialUsedPackageInfos={library:0,require:0,loadNamespace:0,requireNamespace:0,attachNamespace:0,withinApply:0,"::":0,":::":0,"<loadedByVariable>":0};const c=a.parse("\n  //SYMBOL_FUNCTION_CALL[contains(.,\"apply\")]/../..\n    //SYMBOL[text()='require' or text()='library' or text()='loadNamespace' or text()='requireNamespace' or text()='attachNamespace']\n    /../..\n"),d=a.parse("\n  //SYMBOL_FUNCTION_CALL[text() = $variable]\n    /parent::expr\n    /parent::expr[\n      expr[2][STR_CONST]\n      or (\n        expr[2][SYMBOL]\n        and not(\n          SYMBOL_SUB[text() = 'character.only']\n          /following-sibling::expr[1]\n          /NUM_CONST[text() = 'TRUE' or text() = 'T']\n        )\n      )\n    ]/OP-LEFT-PAREN[1]/following-sibling::expr[1][SYMBOL | STR_CONST]\n"),f=a.parse("\n    //SYMBOL_FUNCTION_CALL[text() = 'library' or text() = 'require']\n    /parent::expr\n    /parent::expr[\n        expr[2][SYMBOL]\n        and (\n          SYMBOL_SUB[text() = 'character.only']\n          /following-sibling::expr[1]\n          /NUM_CONST[text() = 'TRUE' or text() = 'T']\n        )\n    ]/OP-LEFT-PAREN[1]/following-sibling::expr[1][SYMBOL | STR_CONST]\n"),p=a.parse("\n  //SYMBOL_FUNCTION_CALL[text() = 'loadNamespace' or text() = 'requireNamespace' or text() = 'attachNamespace']/../following-sibling::expr[1][SYMBOL]\n"),h=[{types:["library","require"],query:d},{types:["loadNamespace","requireNamespace","attachNamespace"],query:a.parse("\n  //SYMBOL_FUNCTION_CALL[text() = $variable]/../following-sibling::expr[1][STR_CONST]\n")},{types:["::",":::"],query:a.parse("\n  //NS_GET[text() = $variable]/../SYMBOL_PACKAGE[1]\n  |\n  //NS_GET_INT[text() = $variable]/../SYMBOL_PACKAGE[1]\n")}];t.usedPackages={name:"Used Packages",description:"All the packages used in the code",process(e,t){for(const n of h)for(const r of n.types){const i=n.query.select({node:t.parsedRAst,variables:{variable:r}});e[r]+=i.length,(0,u.appendStatisticsFile)(this.name,r,i,t.filepath,!0)}const n=[...f.select({node:t.parsedRAst}),...p.select({node:t.parsedRAst})];e["<loadedByVariable>"]+=n.length,(0,u.appendStatisticsFile)(this.name,"<loadedByVariable>",n,t.filepath);const r=c.select({node:t.parsedRAst});return e.withinApply+=r.length,(0,u.appendStatisticsFile)(this.name,"withinApply",r,t.filepath),e},initialValue:t.initialUsedPackageInfos,postProcess:l.postProcess}},64733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectAllIds=function(e,t=()=>!1){const n=new Set;return(0,r.visitAst)(e,(e=>!!t(e)||(n.add(e.info.id),!1))),n};const r=n(6945)},65034:(e,t,n)=>{"use strict";var r,i=n(65606);function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(14257),a=Symbol("lastResolve"),l=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var n=e[p].read();null!==n&&(e[d]=null,e[a]=null,e[l]=null,t(h(n,!1)))}}function g(e){i.nextTick(m,e)}var _=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(r={get stream(){return this[p]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[u]?n(e[u]):t(h(void 0,!0))}))}));var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(h(void 0,!0)):t[f](n,r)}),r)}}(r,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(h(o,!1));n=new Promise(this[f])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[p].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),r),_);e.exports=function(e){var t,n=Object.create(y,(o(t={},p,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var r=n[p].read();r?(n[d]=null,n[a]=null,n[l]=null,e(h(r,!1))):(n[a]=e,n[l]=t)},writable:!0}),t));return n[d]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[l];return null!==t&&(n[d]=null,n[a]=null,n[l]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[d]=null,n[a]=null,n[l]=null,r(h(void 0,!0))),n[c]=!0})),e.on("readable",g.bind(null,n)),n}},65299:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.values=void 0;const a=s(n(84661)),l=n(67787),u=n(57012),c=n(48060),d=n(6737),f=a.parse("//NUM_CONST"),p=a.parse("//STR_CONST"),h=a.parse("//NULL_CONST"),m=a.parse("//SYMBOL[text() = 'T' or text() = 'F']");function g(e,t){return e===c.RTrue||e===c.RFalse?"logical":e===c.RNa||"NaN"===e||e===c.RNull||"Inf"===e||"-Inf"===e?"special-constants":(e.includes("i")?t.imaginaryNumbers++:e.endsWith("L")?t.integers++:c.RNumHexFloatRegex.test(e)&&t.floatHex++,"allNumerics")}t.values={name:"Values",description:"All values used (as constants etc.)",process(e,t){const n=p.select({node:t.parsedRAst}),r=f.select({node:t.parsedRAst}),i=h.select({node:t.parsedRAst}),o=m.select({node:t.parsedRAst}),s=[];return r.map((t=>[t,g(t.textContent??"<unknown>",e)])).forEach((([e,t])=>{switch(t){case"allNumerics":s.push(e);break;case"logical":o.push(e);break;case"special-constants":i.push(e);break;default:(0,u.assertUnreachable)(t)}})),e.strings+=n.length,e.allNumerics+=r.length,e.specialConstants+=i.length,e.logical+=o.length,(0,d.appendStatisticsFile)(this.name,"numeric",s,t.filepath),(0,d.appendStatisticsFile)(this.name,"string",n,t.filepath),(0,d.appendStatisticsFile)(this.name,"specialConstant",i,t.filepath),(0,d.appendStatisticsFile)(this.name,"logical",o,t.filepath),e},initialValue:{allNumerics:0,imaginaryNumbers:0,integers:0,floatHex:0,logical:0,specialConstants:0,strings:0},postProcess:l.postProcess}},65440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Functions=void 0;const r=n(53133),i=n(8448),o=n(40318),s=n(54630),a=n(52950);function l(e,t,n){if("number"==typeof e&&(e=[e]),!e.includes(t.length))throw new Error(`Function ${n} expects ${e.join(" or ")} arguments instead of ${t.length}`)}t.Functions=class{static last(e,...t){return l(0,t,"last"),new a.XNumber(e.contextSize)}static position(e,...t){return l(0,t,"position"),new a.XNumber(e.contextPosition)}static count(e,...t){l(1,t,"count");const n=t[0].evaluate(e);if(!(n instanceof a.XNodeSet))throw new Error("Function count expects (node-set)");return new a.XNumber(n.size)}static id(e,...t){l(1,t,"id");const n=t[0].evaluate(e);let r;r=n instanceof a.XNodeSet?n.toArray().map((e=>a.XNodeSet.prototype.stringForNode(e))):n.stringValue.split(/[\x0d\x0a\x09\x20]+/);const i=new a.XNodeSet,u=(0,o.isDocument)(e.contextNode)?e.contextNode:e.contextNode.ownerDocument;for(let e=0;e<r.length;e++){let t;t=u.getElementById?u.getElementById(r[e]):(0,s.getElementById)(u,r[e]),null!=t&&i.add(t)}return i}static localName(e,...t){let n;if(l([0,1],t,"local-name"),0===t.length)n=e.contextNode;else{const r=t[0].evaluate(e);if(!(r instanceof a.XNodeSet))throw new Error("Function local-name expects (node-set?)");n=r.first()}return null==n?new a.XString(""):((0,o.isElement)(n)||(0,o.isAttribute)(n))&&null!=n.localName?new a.XString(n.localName):(0,o.isProcessingInstruction)(n)?new a.XString(n.target):new a.XString(null!=n.nodeName?n.nodeName:"")}static namespaceURI(e,...t){let n;if(l([0,1],t,"namespace-uri"),0===t.length)n=e.contextNode;else{const r=t[0].evaluate(e);if(!(r instanceof a.XNodeSet))throw new Error("Function namspace-uri expects (node-set?)");n=r.first()}return null==n?new a.XString(""):(0,o.isElement)(n)||(0,o.isAttribute)(n)?new a.XString(n.namespaceURI):new a.XString("")}static name_(e,...t){let n;if(l([0,1],t,"name"),0===t.length)n=e.contextNode;else{const r=t[0].evaluate(e);if(!(r instanceof a.XNodeSet))throw new Error("Function name expects (node-set?)");n=r.first()}return null==n?new a.XString(""):(0,o.isElement)(n)?new a.XString(n.nodeName):(0,o.isAttribute)(n)?new a.XString(n.name||n.nodeName):(0,o.isProcessingInstruction)(n)?new a.XString(n.target||n.nodeName):null==n.localName?new a.XString(""):new a.XString(n.localName)}static string(e,...t){return l([0,1],t,"string"),0===t.length?new a.XString(a.XNodeSet.prototype.stringForNode(e.contextNode)):t[0].evaluate(e).string}static concat(e,...t){if(t.length<2)throw new Error("Function concat expects (string, string[, string]*)");let n="";for(let r=0;r<t.length;r++)n+=t[r].evaluate(e).stringValue;return new a.XString(n)}static startsWith(e,...t){l(2,t,"starts-with");const n=t[0].evaluate(e).stringValue,r=t[1].evaluate(e).stringValue;return new a.XBoolean(n.substring(0,r.length)===r)}static contains(e,...t){l(2,t,"contains");const n=t[0].evaluate(e).stringValue,r=t[1].evaluate(e).stringValue;return new a.XBoolean(-1!==n.indexOf(r))}static substringBefore(e,...t){l(2,t,"substring-before");const n=t[0].evaluate(e).stringValue,r=t[1].evaluate(e).stringValue;return new a.XString(n.substring(0,n.indexOf(r)))}static substringAfter(e,...t){l(2,t,"substring-after");const n=t[0].evaluate(e).stringValue,r=t[1].evaluate(e).stringValue;if(0===r.length)return new a.XString(n);const i=n.indexOf(r);return-1===i?new a.XString(""):new a.XString(n.substring(i+r.length))}static substring(e,...t){l([2,3],t,"substring");const n=t[0].evaluate(e).stringValue,r=Math.round(t[1].evaluate(e).numberValue)-1,i=3===t.length?r+Math.round(t[2].evaluate(e).numberValue):void 0;return new a.XString(n.substring(r,i))}static stringLength(e,...t){let n;return l([0,1],t,"string-length"),n=0===t.length?a.XNodeSet.prototype.stringForNode(e.contextNode)||"":t[0].evaluate(e).stringValue,new a.XNumber(n.length)}static normalizeSpace(e,...t){let n;l([0,1],t,"normalize-space"),n=0===t.length?a.XNodeSet.prototype.stringForNode(e.contextNode):t[0].evaluate(e).stringValue;let r=0,o=n.length-1;for(;(0,i.isSpace)(n.charCodeAt(o));)o--;let s="";for(;r<=o&&(0,i.isSpace)(n.charCodeAt(r));)r++;for(;r<=o;)if((0,i.isSpace)(n.charCodeAt(r)))for(s+=" ";r<=o&&(0,i.isSpace)(n.charCodeAt(r));)r++;else s+=n.charAt(r),r++;return new a.XString(s)}static translate(e,...t){l(3,t,"translate");const n=t[0].evaluate(e).stringValue,r=t[1].evaluate(e).stringValue,i=t[2].evaluate(e).stringValue,o=[...r].reduce(((e,t,n)=>(t in e||(e[t]=n>i.length?"":i[n]),e)),{}),s=[...n].map((e=>e in o?o[e]:e)).join("");return new a.XString(s)}static boolean_(e,...t){return l(1,t,"boolean"),t[0].evaluate(e).bool}static not(e,...t){return l(1,t,"not"),t[0].evaluate(e).bool.not()}static true_(e,...t){return l(0,t,"true"),a.XBoolean.TRUE}static false_(e,...t){return l(0,t,"false"),a.XBoolean.FALSE}static lang(e,...t){l(1,t,"lang");let n=null;for(let t=e.contextNode;null!=t&&!(0,o.isDocument)(t);t=t.parentNode)if((0,o.isElement)(t)){const e=t.getAttributeNS(r.XML_NAMESPACE_URI,"lang");if(null!=e){n=String(e);break}}if(null==n)return a.XBoolean.FALSE;const i=t[0].evaluate(e).stringValue;return new a.XBoolean(n.substring(0,i.length)===i&&(n.length===i.length||"-"===n.charAt(i.length)))}static number(e,...t){return l([0,1],t,"number"),0===t.length?new a.XNumber(a.XNodeSet.prototype.stringForNode(e.contextNode)):t[0].evaluate(e).number}static sum(e,...t){l(1,t,"sum");const n=t[0].evaluate(e);if(!(n instanceof a.XNodeSet))throw new Error("Function sum expects (node-set)");const r=n.toUnsortedArray();let i=0;for(let e=0;e<r.length;e++)i+=new a.XNumber(a.XNodeSet.prototype.stringForNode(r[e])).numberValue;return new a.XNumber(i)}static floor(e,...t){return l(1,t,"floor"),new a.XNumber(Math.floor(t[0].evaluate(e).numberValue))}static ceiling(e,...t){return l(1,t,"ceiling"),new a.XNumber(Math.ceil(t[0].evaluate(e).numberValue))}static round(e,...t){return l(1,t,"round"),new a.XNumber(Math.round(t[0].evaluate(e).numberValue))}}},65606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,l=[],u=!1,c=-1;function d(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},65677:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){const t=this.lhs.evaluate(e).bool;return t.booleanValue?this.rhs.evaluate(e).bool:t}toString(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"}}t.AndOperation=i},65869:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expressionList=void 0;const r=n(35852),i=n(6945),o=n(49375);t.expressionList={name:"Expression Lists",description:"Counts expression list nestings",process:(e,t)=>(function(e,t){let n=-1,r=0;(0,i.visitAst)(t.normalizedRAst.ast,(t=>{t.type===o.RType.ExpressionList&&(n++,r++,e.deepestNesting=Math.max(e.deepestNesting,n))}),(e=>{e.type===o.RType.ExpressionList&&n--})),e.allExpressionLists+=r}(e,t),e),initialValue:{allExpressionLists:0,deepestNesting:0},postProcess:r.postProcess}},66197:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseError=void 0;class n extends Error{constructor(e){super(e),this.name="ParseError"}}t.ParseError=n},66600:(e,t,n)=>{"use strict";var r=n(92861).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},66644:(e,t,n)=>{"use strict";var r=n(12463).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},66743:(e,t,n)=>{"use strict";var r=n(89353);e.exports=Function.prototype.bind||r},67102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyCommonSyntaxTypeCounts=function(e=()=>0n){return{total:e(),multiple:e(),empty:e(),withArgument:e(),noValue:e(),singleVar:{},number:{},integer:{},complex:{},string:{},logical:{},call:{},unnamedCall:e(),binOp:{},unaryOp:{},other:{}}},t.updateCommonSyntaxTypeCounts=function(e,...t){if(e.total++,0===t.length)return e.empty++,e;if(t.length>1)return e.multiple++,e;let n=t[0];if(n.type===s.RType.Argument){if(void 0!==n.name&&e.withArgument++,void 0===n.value)return e.noValue++,e;n=n.value}switch(n.type){case s.RType.String:a(e.string,n.content.str);break;case s.RType.Symbol:a(e.singleVar,n.content);break;case s.RType.Logical:a(e.logical,n.content?o.RTrue:o.RFalse);break;case s.RType.Number:n.content.complexNumber?a(e.complex,n.content.num):n.content.markedAsInt?a(e.integer,n.content.num):a(e.number,n.content.num);break;case s.RType.FunctionCall:n.named?a(e.call,n.functionName.content):e.unnamedCall++;break;case s.RType.BinaryOp:a(e.binOp,n.operator);break;case s.RType.UnaryOp:a(e.unaryOp,n.operator);break;default:n.lexeme&&a(e.other,n.lexeme)}return e},t.appendCommonSyntaxTypeCounter=function(e,t){e.total.push([(0,r.bigint2number)(t.total)]),e.empty.push([(0,r.bigint2number)(t.empty)]),e.multiple.push([(0,r.bigint2number)(t.multiple)]),e.withArgument.push([(0,r.bigint2number)(t.withArgument)]),e.noValue.push([(0,r.bigint2number)(t.noValue)]),e.unnamedCall.push([(0,r.bigint2number)(t.unnamedCall)]),l(e.singleVar,t.singleVar),l(e.number,t.number),l(e.integer,t.integer),l(e.complex,t.complex),l(e.string,t.string),l(e.logical,t.logical),l(e.call,t.call),l(e.binOp,t.binOp),l(e.unaryOp,t.unaryOp),l(e.other,t.other)},t.summarizeCommonSyntaxTypeCounter=function(e){return{total:(0,i.summarizeMeasurement)(e.total.flat(),e.total.length),empty:(0,i.summarizeMeasurement)(e.empty.flat(),e.empty.length),multiple:(0,i.summarizeMeasurement)(e.multiple.flat(),e.multiple.length),withArgument:(0,i.summarizeMeasurement)(e.withArgument.flat(),e.withArgument.length),noValue:(0,i.summarizeMeasurement)(e.noValue.flat(),e.noValue.length),unnamedCall:(0,i.summarizeMeasurement)(e.unnamedCall.flat(),e.unnamedCall.length),singleVar:u(e.singleVar),number:u(e.number),integer:u(e.integer),complex:u(e.complex),string:u(e.string),logical:u(e.logical),call:u(e.call),binOp:u(e.binOp),unaryOp:u(e.unaryOp),other:u(e.other)}};const r=n(13078),i=n(71339),o=n(48060),s=n(49375);function a(e,t){e[t]=(e[t]??0n)+1n}function l(e,t){for(const[n,i]of Object.entries(t)){const t=e[n];t&&Array.isArray(t)?t.push([(0,r.bigint2number)(i)]):e[n]=[[(0,r.bigint2number)(i)]]}}function u(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(0,i.summarizeMeasurement)(t.flat(),t.length)])))}},67341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeNormalizedAstQuery=function({ast:e},t){return 1!==t.length&&r.log.warn("Normalized-Ast query expects only up to one query, but got",t.length),{".meta":{timing:0},normalized:e}};const r=n(19742)},67481:function(e,t,n){"use strict";var r=n(65606),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.flowrConfigFileSchema=t.defaultConfigOptions=t.VariableResolve=void 0,t.setConfigFile=function(e,t=r.cwd(),n=!1){p=e,m=t,h=void 0,n&&y()},t.parseConfig=g,t.setConfig=_,t.amendConfig=function(e){_((0,o.deepMergeObject)(y(),e)),l.log.trace(`Amending config with ${JSON.stringify(e)}, resulting in ${JSON.stringify(y())}}`)},t.getConfig=y,t.getEngineConfig=function(e){const t=y().engines;return t.length?t.find((t=>t.type==e)):f[e]};const o=n(22452),s=i(n(57975)),a=i(n(24860)),l=n(19742),u=n(33267),c=i(n(16075));var d;!function(e){e.Disabled="disabled",e.Alias="alias",e.Builtin="builtin"}(d||(t.VariableResolve=d={}));const f={"tree-sitter":{type:"tree-sitter"},"r-shell":{type:"r-shell"}};let p;t.defaultConfigOptions={ignoreSourceCalls:!1,semantics:{environment:{overwriteBuiltIns:{loadDefaults:!0,definitions:[]}}},engines:[],defaultEngine:"r-shell",solver:{variables:d.Alias,pointerTracking:!0}},t.flowrConfigFileSchema=c.default.object({ignoreSourceCalls:c.default.boolean().optional().description("Whether source calls should be ignored, causing {@link processSourceCall}'s behavior to be skipped."),semantics:c.default.object({environment:c.default.object({overwriteBuiltIns:c.default.object({loadDefaults:c.default.boolean().optional().description("Should the default configuration still be loaded?"),definitions:c.default.array().items(c.default.object()).optional().description("The definitions to load/overwrite.")}).optional().description("Do you want to overwrite (parts) of the builtin definition?")}).optional().description("Semantics regarding the handlings of the environment.")}).description("Configure language semantics and how flowR handles them."),engines:c.default.array().items(c.default.alternatives(c.default.object({type:c.default.string().required().valid("tree-sitter").description("Use the tree sitter engine."),wasmPath:c.default.string().optional().description("The path to the tree-sitter-r WASM binary to use. If this is undefined, this uses the default path."),treeSitterWasmPath:c.default.string().optional().description("The path to the tree-sitter WASM binary to use. If this is undefined, this uses the default path.")}).description("The configuration for the tree sitter engine."),c.default.object({type:c.default.string().required().valid("r-shell").description("Use the R shell engine."),rPath:c.default.string().optional().description("The path to the R executable to use. If this is undefined, this uses the default path.")}).description("The configuration for the R shell engine."))).min(1).description("The engine or set of engines to use for interacting with R code. An empty array means all available engines will be used."),defaultEngine:c.default.string().optional().valid("tree-sitter","r-shell").description("The default engine to use for interacting with R code. If this is undefined, an arbitrary engine from the specified list will be used."),solver:c.default.object({variables:c.default.string().valid(...Object.values(d)).description("How to resolve variables and their values."),pointerTracking:c.default.boolean().description("Whether to track pointers in the dataflow graph, if not, the graph will be over-approximated wrt. containers and accesses.")}).description("How to resolve constants, constraints, cells, ...")}).description("The configuration file format for flowR.");let h,m=r.cwd();function g(e){try{const n=JSON.parse(e),r=t.flowrConfigFileSchema.validate(n);return r.error?void l.log.error(`Failed to validate config ${e}: ${r.error.message}`):(0,o.deepMergeObject)(t.defaultConfigOptions,n)}catch(t){l.log.error(`Failed to parse config ${e}: ${t.message}`)}}function _(e){h=e}function y(){if(void 0===h)try{_(function(e,n){if(void 0!==e){if(s.default.isAbsolute(e)&&a.default.existsSync(e)){l.log.trace(`Found config at ${e} (absolute)`);const t=g(a.default.readFileSync(e,{encoding:"utf-8"}));if(t)return l.log.info(`Using config ${JSON.stringify(t)}`),t}let t=s.default.resolve(n);do{const n=s.default.join(t,e);if(a.default.existsSync(n)){l.log.trace(`Found config at ${n}`);const e=g(a.default.readFileSync(n,{encoding:"utf-8"}));if(e)return l.log.info(`Using config ${JSON.stringify(e)}`),e}t=(0,u.getParentDirectory)(t)}while(a.default.existsSync(t))}return l.log.info(`Using default config ${JSON.stringify(t.defaultConfigOptions)}`),t.defaultConfigOptions}(p,m))}catch(e){l.log.error(`Failed to load config: ${e.message}`),_(t.defaultConfigOptions)}return h}},67526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],l=o[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),c=0,d=l>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(l(e,a,a+s>u?u:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},67607:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.selectionSlicer=void 0,t.getSelectionSlicer=h,t.showSelectionSliceInEditor=async function(){const e=h();e.hasDoc||await e.sliceSelectionOnce();const t=e.makeUri();return await(0,u.showUri)(t)};const a=s(n(91398)),l=n(74265),u=n(40246),c=n(62288),d=n(86598),f=n(79506),p=n(51451);function h(){return t.selectionSlicer??=new m,t.selectionSlicer}class m{changeListeners=[];hasDoc=!1;decos;decoratedEditors=[];async startFollowSelection(){await this.update(),this.changeListeners.push(a.window.onDidChangeTextEditorSelection((e=>{this.decoratedEditors.includes(e.textEditor)&&this.update()})),a.window.onDidChangeActiveTextEditor((()=>{this.update()}))),(0,l.updateStatusBar)()}async toggleFollowSelection(){this.changeListeners.length?this.stopFollowSelection():await this.startFollowSelection()}stopFollowSelection(){for(;this.changeListeners.length;)this.changeListeners.pop()?.dispose();(0,l.updateStatusBar)()}async sliceSelectionOnce(){return await this.update()}clearSelectionSlice(){this.stopFollowSelection();const e=(0,u.getReconstructionContentProvider)(),t=this.makeUri();e.updateContents(t,""),this.clearSliceDecos(),this.hasDoc=!1}makeUri(){return(0,u.makeUri)("selection-slicer","Selection Slice")}clearSliceDecos(e,t){if(this.decos&&(!e||(e.setDecorations(this.decos.lineSlice,[]),e.setDecorations(this.decos.tokenSlice,[]),t)))if(t)for(const e of a.window.visibleTextEditors)e.document===t&&this.clearSliceDecos(e);else this.decos?.dispose(),this.decos=void 0}async update(){const e=await async function(){const e=a.window.activeTextEditor;if(!e)return;if(e.document.uri.scheme===u.flowrScheme)return;if("r"!==e.document.languageId.toLowerCase())return;if(f.positionSlicers.has(e.document))return;const t=e.selections.map((e=>e.active));if(!t.length)return;const n=await(0,l.getFlowrSession)(),r=await n.retrieveSlice((0,c.makeSlicingCriteria)(t,e.document,(0,l.isVerbose)()),e.document,!1);return r.sliceElements.length?{...r,editor:e}:{code:"# No slice",sliceElements:[],editor:e}}();if(void 0===e)return"";const t=(0,u.getReconstructionContentProvider)(),n=this.makeUri();t.updateContents(n,e.code),this.hasDoc=!0;const r=(0,l.getConfig)().get(p.Settings.StyleOnlyHighlightActiveSelection,!1);for(const t of this.decoratedEditors)t!==e.editor&&(r||f.positionSlicers.has(t.document))&&this.clearSliceDecos(t);return this.decos||=(0,d.makeSliceDecorationTypes)(),(0,d.displaySlice)(e.editor,e.sliceElements,this.decos),this.decoratedEditors.push(e.editor),e.code}}},67608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionResolverImpl=void 0;const r=n(65440),i=n(54630);t.FunctionResolverImpl=class{static getFunctionFromContext(e,t){const n=(0,i.resolveQName)(e,t.namespaceResolver,t.contextNode,!1);if(null===n[0])throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(n[1],n[0])}functions;constructor(){this.functions={},this.addStandardFunctions()}addStandardFunctions(){this.functions["{}last"]=r.Functions.last,this.functions["{}position"]=r.Functions.position,this.functions["{}count"]=r.Functions.count,this.functions["{}id"]=r.Functions.id,this.functions["{}local-name"]=r.Functions.localName,this.functions["{}namespace-uri"]=r.Functions.namespaceURI,this.functions["{}name"]=r.Functions.name_,this.functions["{}string"]=r.Functions.string,this.functions["{}concat"]=r.Functions.concat,this.functions["{}starts-with"]=r.Functions.startsWith,this.functions["{}contains"]=r.Functions.contains,this.functions["{}substring-before"]=r.Functions.substringBefore,this.functions["{}substring-after"]=r.Functions.substringAfter,this.functions["{}substring"]=r.Functions.substring,this.functions["{}string-length"]=r.Functions.stringLength,this.functions["{}normalize-space"]=r.Functions.normalizeSpace,this.functions["{}translate"]=r.Functions.translate,this.functions["{}boolean"]=r.Functions.boolean_,this.functions["{}not"]=r.Functions.not,this.functions["{}true"]=r.Functions.true_,this.functions["{}false"]=r.Functions.false_,this.functions["{}lang"]=r.Functions.lang,this.functions["{}number"]=r.Functions.number,this.functions["{}sum"]=r.Functions.sum,this.functions["{}floor"]=r.Functions.floor,this.functions["{}ceiling"]=r.Functions.ceiling,this.functions["{}round"]=r.Functions.round}addFunction(e,t,n){this.functions["{"+e+"}"+t]=n}getFunction(e,t){return this.functions["{"+t+"}"+e]}}},67787:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const d={};for(const[e,n]of t.entries()){const t=n.values;for(const[n,i]of Object.entries(t)){let t=d[n];t||(t=(0,s.emptySummarizedWithProject)(),d[n]=t),t.count.push(i),i>0&&(0,s.recordFilePath)(t,e,r)}}const f=i.default.createWriteStream(o.default.join(n,"values.csv"));f.write(`kind,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(d)){const n=t,r=(0,a.summarizeMeasurement)(n.count);f.write(`${JSON.stringify(e)},${n.uniqueProjects.size},${n.uniqueFiles.size},${(0,a.summarizedMeasurement2Csv)(r)}\n`)}f.close();const p=new Map;(0,u.readLineByLineSync)(o.default.join(e,"numeric.txt"),((e,t)=>{if(0===e.length)return;t%2500==0&&console.log(`    [${(0,l.date2string)(new Date)}] Collecting numeric values ${t}`);const[n,i]=JSON.parse(String(e)),s=(0,c.array2bag)(n);for(const[e,t]of s.entries()){let n=p.get(e);n||(n={count:[],uniqueFiles:new Set,uniqueProjects:new Set},p.set(e,n)),n.count.push(t),t>0&&(n.uniqueFiles.add(i??""),n.uniqueProjects.add(i?.split(o.default.sep)[r.projectSkip]??""))}}));const h=i.default.createWriteStream(o.default.join(n,"magic-numbers.csv"));h.write(`num,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of p.entries()){const n=(0,a.summarizeMeasurement)(t.count);h.write(`${JSON.stringify(e)},${t.uniqueProjects.size},${t.uniqueFiles.size},${(0,a.summarizedMeasurement2Csv)(n)}\n`)}h.close()};const i=r(n(90222)),o=r(n(57975)),s=n(61685),a=n(71339),l=n(87247),u=n(33267),c=n(83584)},67820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizedAstToMermaid=s,t.normalizedAstToMermaidUrl=function(e,t="flowchart TD\n"){return(0,r.mermaidCodeToUrl)(s(e,t))};const r=n(19339),i=n(6945),o=n(49375);function s(e,t="flowchart TD\n"){let n=t;return(0,i.visitAst)(e,(e=>{const t=`${e.type} (${e.info.id})\\n${e.lexeme??" "}`;if(n+=`    n${e.info.id}(["${(0,r.escapeMarkdown)(t)}"])\n`,void 0!==e.info.parent){const t=e.info,r="expr-list-child"===t.role||"call-argument"===t.role||"function-def-param"===t.role?`-${t.index}`:"";n+=`    n${e.info.parent} --\x3e|"${t.role}${r}"| n${e.info.id}\n`}return e.type===o.RType.ExpressionList&&void 0!==e.grouping&&(n+=`    n${e.info.id} -.-|"group-open"| n${e.grouping[0].info.id}\n`,n+=`    n${e.info.id} -.-|"group-close"| n${e.grouping[1].info.id}\n`),!1})),n}},67909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installXPathSupport=t.evaluate=t.selectWithResolver=t.useNamespaces=t.select=t.select1=void 0;const r=n(1726),i=n(15305),o=new r.XPathEvaluatorImpl({});function s(e,t,n=!1){return a(e,t,null,n)}function a(e,t,n,r=!1){const o=l(e,t,n,i.XPathResultImpl.ANY_TYPE,null);return o.resultType===i.XPathResultImpl.STRING_TYPE?o.stringValue:o.resultType===i.XPathResultImpl.NUMBER_TYPE?o.numberValue:o.resultType===i.XPathResultImpl.BOOLEAN_TYPE?o.booleanValue:r?o.nodes[0]:o.nodes}function l(e,t,n,r=0,i){return o.evaluate(e,t,n||null,r,i||null)}t.select1=function(e,t){return s(e,t,!0)},t.select=s,t.useNamespaces=function(e){const t={mappings:e||{},lookupNamespaceURI(e){return void 0!==this.mappings[e]?this.mappings[e]:null}};return(e,n,r=!1)=>a(e,n,t,r)},t.selectWithResolver=a,t.evaluate=l,t.installXPathSupport=function(e,{fr:t,vr:n,p:i}){const o=new r.XPathEvaluatorImpl({fr:t,vr:n,p:i});return e.createExpression=o.createExpression,e.createNSResolver=o.createNSResolver,e.evaluate=o.evaluate,e}},68002:e=>{"use strict";e.exports=Math.min},68303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fingerPrintOfQuery=l,t.executeStaticSliceQuery=function({dataflow:{graph:e},ast:t},n){const u=Date.now(),c={};for(const u of n){const n=l(u);c[n]&&a.log.warn(`Duplicate Key for slicing-query: ${n}, skipping...`);const{criteria:d,noReconstruction:f,noMagicComments:p}=u,h=Date.now(),m=(0,r.staticSlicing)(e,t,d),g=Date.now();if(f)c[n]={slice:{...m,".meta":{timing:g-h}}};else{const e=Date.now(),r=(0,i.reconstructToCode)(t,m.result,p?o.doNotAutoSelect:(0,s.makeMagicCommentHandler)(o.doNotAutoSelect)),a=Date.now();c[n]={slice:{...m,".meta":{timing:g-h}},reconstruct:{...r,".meta":{timing:a-e}}}}}return{".meta":{timing:Date.now()-u},results:c}};const r=n(18741),i=n(22728),o=n(87752),s=n(36179),a=n(19742);function l(e){return JSON.stringify(e)}},68526:(e,t,n)=>{"use strict";const{format:r,inspect:i}=n(83430),{AggregateError:o}=n(74641),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c={};function d(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function p(e,t,n){n||(n=Error);class i extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${i}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,c[e]=i}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",((e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const o=[],s=[],a=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):u.test(e)?s.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:r+=`of type ${o[0]}`;break;case 2:r+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(r+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(r+="an "),r+=`${a[0]}`;break;case 2:r+=`one of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`one of ${a.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var c;null!==(c=n.constructor)&&void 0!==c&&c.name?r+=`. Received an instance of ${n.constructor.name}`:r+=`. Received ${i(n,{depth:-1})}`}else{let e=i(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r}),TypeError),p("ERR_INVALID_ARG_VALUE",((e,t,n="is invalid")=>{let r=i(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`}),TypeError),p("ERR_INVALID_RETURN_VALUE",((e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`}),TypeError),p("ERR_MISSING_ARGS",((...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`}),TypeError),p("ERR_OUT_OF_RANGE",((e,t,n)=>{let r;if(d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32)r=f(String(n));else if("bigint"==typeof n){r=String(n);const e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(r=f(r)),r+="n"}else r=i(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`}),RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:m,aggregateTwoErrors:h((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new s([t,e],t.message);return n.code=t.code,n}return e||t})),hideStackFrames:h,codes:c}},68613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.describeSchema=function(e,t=r.formatter){const n=e.describe(),o=i(1,t,t.format(".",{effect:r.ColorEffect.Foreground,color:7}),n),s=" ".repeat(4);return o.map((e=>`${s.repeat(e.level-1)}${e.text}`)).join("\n")},t.genericDescription=i,t.headerLine=o,t.describeObject=s;const r=n(77529);function i(e,t,n,r){if(!r)return[];const a=[...o(e,t,n,r.type??"unknown",r.flags)];switch("allow"in r&&a.push({level:e+1,text:`Allows only the values: ${r.allow.map((e=>"'"+e+"'")).join(", ")}`}),r.type){case"object":a.push(...s(e,t,r));break;case"alternatives":"matches"in r&&a.push(...r.matches.flatMap((({schema:n})=>i(e+1,t,".",n))));break;case"array":"items"in r&&(a.push({text:"Valid item types:",level:e}),a.push(...r.items.flatMap((n=>i(e+1,t,".",n)))))}return a}function o(e,t,n,i,o){const s=`- ${(0,r.bold)(n,t)} ${t.format(i,{effect:r.ColorEffect.Foreground,color:7})} ${function(e){if(!e||0===Object.keys(e).length)return"";let t="";return"presence"in e&&(t+=String(e.presence)),t.trim().length>0?"["+t+"]":""}(o)}`,a={level:e,text:s};return o&&"description"in o?[a,{level:e+1,text:(0,r.italic)(o.description,t)}]:[a]}function s(e,t,n){const r=[];if(!("keys"in n))return r;for(const o in n.keys){const s=n.keys[o];r.push(...i(e+1,t,o,s))}return r}},68649:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r,Symbol:i}=n(74641);e.exports=u;const{ERR_METHOD_NOT_IMPLEMENTED:o}=n(68526).codes,s=n(43559),{getHighWaterMark:a}=n(13920);r(u.prototype,s.prototype),r(u,s);const l=i("kCallback");function u(e){if(!(this instanceof u))return new u(e);const t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())}))}function d(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(e,t,n){throw new o("_transform()")},u.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,((e,t)=>{e?n(e):(null!=t&&this.push(t),i.ended||o===r.length||r.length<r.highWaterMark?n():this[l]=n)}))},u.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},68794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},69093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathNSResolverWrapper=void 0;const r=n(40318);t.XPathNSResolverWrapper=class{xpathNSResolver;constructor(e){(0,r.isNSResolver)(e)?this.xpathNSResolver=e:this.xpathNSResolver=null}getNamespace(e,t){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(e)}}},69383:e=>{"use strict";e.exports=Error},69421:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.dataflowStarCommand=t.dataflowCommand=void 0;const a=n(6777),l=n(72814),u=n(82627),c=Promise.resolve().then((()=>s(n(11676)))),d=n(77529);async function f(e,t){return await(0,a.createDataflowPipeline)(e,{request:(0,l.requestFromInput)(t.trim())}).allRemainingSteps()}function p(e){return e.startsWith('"')?JSON.parse(e):e}function h(e,t,n){return e.formatter.format(`Copied ${t} to clipboard (dataflow: ${n}ms).`,{color:7,effect:d.ColorEffect.Foreground,style:3})}t.dataflowCommand={description:`Get mermaid code for the dataflow graph of R code, start with '${l.fileProtocol}' to indicate a file`,usageExample:":dataflow",aliases:["d","df"],script:!1,fn:async(e,t,n)=>{const r=await f(t,p(n)),i=(0,u.graphToMermaid)({graph:r.dataflow.graph,includeEnvironments:!1}).string;e.stdout(i);try{(await c).default.writeSync(i),e.stdout(h(e,"mermaid code",r.dataflow[".meta"].timing))}catch{}}},t.dataflowStarCommand={description:"Returns the URL to mermaid.live",usageExample:":dataflow*",aliases:["d*","df*"],script:!1,fn:async(e,t,n)=>{const r=await f(t,p(n)),i=(0,u.graphToMermaidUrl)(r.dataflow.graph,!1);e.stdout(i);try{(await c).default.writeSync(i),e.stdout(h(e,"mermaid url",r.dataflow[".meta"].timing))}catch{}}}},69600:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},a=function(e){try{return!s(e)&&(r.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),d=function(){return!1};if("object"==typeof document){var f=document.all;l.call(f)===l.call(document.all)&&(d=function(e){if((c||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!s(e)&&a(e)}:function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return a(e);if(s(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}},69675:e=>{"use strict";e.exports=TypeError},69912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryNormalizeRepeat=function(e,[t,n]){if(t.name!==s.RawRType.Repeat)return void r.parseLog.debug("encountered non-repeat token for supposed repeat-loop structure");r.parseLog.debug("trying to parse repeat-loop");const l=(0,a.normalizeSingleNode)(e,n);(0,i.guard)(l.type!==s.RType.Delimiter,(()=>`no body for repeat-loop ${JSON.stringify(t)} (${JSON.stringify(n)})`));const{location:u,content:c}=(0,o.retrieveMetaStructure)(t.content);return{type:s.RType.RepeatLoop,location:u,lexeme:c,body:(0,o.ensureExpressionList)(l),info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(56293),i=n(57012),o=n(36604),s=n(49375),a=n(10570)},70271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotEqualOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"}}t.NotEqualOperation=i},70414:e=>{"use strict";e.exports=Math.round},70445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseToQuads=function(e,t){return(0,r.serialize2quads)((0,i.convertPreparedParsedData)((0,i.prepareParsedData)(e)),t)};const r=n(78936),i=n(76629)},70453:(e,t,n)=>{"use strict";var r,i=n(79612),o=n(69383),s=n(41237),a=n(79290),l=n(79538),u=n(58068),c=n(69675),d=n(35345),f=n(71514),p=n(58968),h=n(6188),m=n(68002),g=n(75880),_=n(70414),y=n(73093),b=Function,v=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},w=n(75795),E=n(30655),S=function(){throw new c},x=w?function(){try{return S}catch(e){try{return w(arguments,"callee").get}catch(e){return S}}}():S,R=n(64039)(),T=n(93628),A=n(71064),O=n(48648),I=n(11002),N=n(10076),P={},$="undefined"!=typeof Uint8Array&&T?T(Uint8Array):r,C={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":R&&T?T([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":P,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R&&T?T(T([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&R&&T?T((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":w,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&R&&T?T((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R&&T?T(""[Symbol.iterator]()):r,"%Symbol%":R?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":x,"%TypedArray%":$,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":d,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet,"%Function.prototype.call%":N,"%Function.prototype.apply%":I,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":A,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":_,"%Math.sign%":y,"%Reflect.getPrototypeOf%":O};if(T)try{null.error}catch(e){var M=T(T(e));C["%Error.prototype%"]=M}var k=function e(t){var n;if("%AsyncFunction%"===t)n=v("async function () {}");else if("%GeneratorFunction%"===t)n=v("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=v("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&T&&(n=T(i.prototype))}return C[t]=n,n},j={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=n(66743),F=n(9957),D=L.call(N,Array.prototype.concat),B=L.call(I,Array.prototype.splice),U=L.call(N,String.prototype.replace),q=L.call(N,String.prototype.slice),V=L.call(N,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,G=function(e,t){var n,r=e;if(F(j,r)&&(r="%"+(n=j[r])[0]+"%"),F(C,r)){var i=C[r];if(i===P&&(i=k(r)),void 0===i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===V(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=q(e,0,1),n=q(e,-1);if("%"===t&&"%"!==n)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return U(e,z,(function(e,t,n,i){r[r.length]=n?U(i,W,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=G("%"+r+"%",t),o=i.name,s=i.value,a=!1,l=i.alias;l&&(r=l[0],B(n,D([0,1],l)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],h=q(p,0,1),m=q(p,-1);if(('"'===h||"'"===h||"`"===h||'"'===m||"'"===m||"`"===m)&&h!==m)throw new u("property names with quotes must have matching quotes");if("constructor"!==p&&f||(a=!0),F(C,o="%"+(r+="."+p)+"%"))s=C[o];else if(null!=s){if(!(p in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(w&&d+1>=n.length){var g=w(s,p);s=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[p]}else f=F(s,p),s=s[p];f&&!a&&(C[o]=s)}}return s}},70475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DivOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).number.div(this.rhs.evaluate(e).number)}toString(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"}}t.DivOperation=i},70728:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionReplString=i,t.printVersionRepl=async function(e){console.log(await i(e))};const r=n(79725);async function i(e){const t=await(0,r.retrieveVersionInformation)(e),n="none"===t.r?"":"unknown"===t.r?", R version unknown":`, R v${t.r}`,i="tree-sitter"===e.name?`, R grammar v${e.treeSitterVersion()}`:"";return`flowR repl using flowR v${t.flowr}${n}${i} (${t.engine} engine)`}},71064:(e,t,n)=>{"use strict";var r=n(79612);e.exports=r.getPrototypeOf||null},71339:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Summarizer=void 0,t.summarizedMeasurement2Csv=function(e){return`${e.min},${e.max},${e.median},${e.mean},${e.std},${e.total}`},t.summarizedMeasurement2CsvHeader=function(e){return i.map((t=>e?`${e}-${t}`:t)).join(",")},t.summarizeMeasurement=function(e,t){const n=[...e].sort(((e,t)=>e-t)),i=n[0],o=n[n.length-1],s=n[Math.floor(n.length/2)],a=(0,r.arraySum)(n),l=t??n.length,u=a/l,c=Math.sqrt((0,r.arraySum)(n.map((e=>(e-u)**2)))/l);return{min:i,max:o,median:s,mean:u,std:c,total:a}};const r=n(83584);t.Summarizer=class{config;log;constructor(e){this.config=e,this.log=this.config.logger}};const i=["min","max","median","mean","std","total"]},71412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NORMALIZE=void 0,t.getCurrentRequestFile=s;const r=n(23644),i=n(833),o=n(56293);function s(e){return void 0===e?void 0:Array.isArray(e)?"file"===e[0].request?e[0].content:void 0:"file"===e.request?e.content:void 0}t.NORMALIZE={name:"normalize",humanReadableName:"normalize",description:"Normalize the AST to flowR's AST",processor:function(e,t){return(0,o.normalize)(e.parse,t.getId,s(t.request))},executed:0,printer:{0:r.internalPrinter,2:i.normalizedAstToJson,5:i.normalizedAstToQuads,3:i.printNormalizedAstToMermaid,4:i.printNormalizedAstToMermaidUrl},dependencies:["parse"],requiredInput:void 0}},71469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.definedFunctions=t.AllDefinitionsFileBase=void 0;const r=n(94612),i=n(44441),o=n(57012),s=n(34966),a=n(49375),l=n(6945),u=n(6737),c=n(18841);function d(e,t,n){const r=e.dataflow.graph.outgoingEdges(t.info.id),o=[];for(const[t,n]of r??[]){if(!(0,s.edgeIncludesType)(n.types,s.EdgeType.Calls))continue;const r=e.normalizedRAst.idMap.get(t)?.location;r&&o.push((0,i.getRangeStart)(r))}for(const e of n){const t=e.location;t&&o.push((0,i.getRangeStart)(t))}return o}t.AllDefinitionsFileBase="all-definitions",t.definedFunctions={name:"Defined Functions",description:"All functions defined within the document",process:(e,n)=>(function(e,n){const r=[],f=[];(0,l.visitAst)(n.normalizedRAst.ast,(p=>{if(p.type!==a.RType.FunctionDefinition)return;const h=n.dataflow.graph,m=h.get(p.info.id,!0);if(void 0===m)return void(0,u.appendStatisticsFile)(t.definedFunctions.name,"no-dataflow-node-found",[p],n.filepath);const[g]=m;(0,o.guard)(g.tag===c.VertexType.FunctionDefinition,(()=>`Dataflow node is not a function definition (${JSON.stringify(g)}))})`));const _=g.exitPoints.map((e=>h.get(e,!0))).filter(o.isNotUndefined).map((([e])=>{const t=h.idMap?.get(e.id)?.location;return{location:t?(0,i.getRangeStart)(t):[-1,-1]}}));r.length>0&&(e.nestedFunctions++,e.deepestNesting=Math.max(e.deepestNesting,r.length),(0,u.appendStatisticsFile)(t.definedFunctions.name,"nested-definitions",[p.info.fullLexeme??p.lexeme],n.filepath));const y=p.parameters.map((e=>e.info.fullLexeme??e.lexeme));(0,u.appendStatisticsFile)(t.definedFunctions.name,"usedParameterNames",y,n.filepath),p.lexeme.startsWith("\\")&&(e.lambdasOnly++,(0,u.appendStatisticsFile)(t.definedFunctions.name,"allLambdas",[p.info.fullLexeme??p.lexeme],n.filepath)),r.push(p);const b=new Set,v=n.dataflow.graph.ingoingEdges(p.info.id);if(void 0!==v)for(const[r,i]of v){if((0,s.edgeIncludesType)(i.types,s.EdgeType.DefinedBy)){const i=n.normalizedRAst.idMap.get(r);(0,o.guard)(void 0!==i,"Dataflow edge points to unknown node");const s=i.info.fullLexeme??i.lexeme;s&&b.add(s),e.assignedFunctions++,(0,u.appendStatisticsFile)(t.definedFunctions.name,"assignedFunctions",[s??"<unknown>"],n.filepath)}if((0,s.edgeIncludesType)(i.types,s.EdgeType.Calls)){const e=n.normalizedRAst.idMap.get(r);(0,o.guard)(void 0!==e,"Dataflow edge points to unknown node")}}const w=[];(0,l.visitAst)(p.body,(e=>{e.type===a.RType.FunctionCall&&e.named&&b.has(e.functionName.lexeme)&&w.push(e)})),e.recursive+=w.length>0?1:0,(0,u.appendStatisticsFile)(t.definedFunctions.name,"recursive",w.map((e=>e.info.fullLexeme??e.lexeme??"unknown")),n.filepath);const E=p.info.fullLexeme,S=E?.split("\n");f.push({location:(0,i.getRangeStart)(p.location),callsites:d(n,p,w),numberOfParameters:p.parameters.length,returns:_,length:{lines:S?.length??-1,characters:E?.length??-1,nonWhitespaceCharacters:E?.replaceAll(/\s/g,"").length??0}})}),(e=>{e.type===a.RType.FunctionDefinition&&r.pop()})),e.total+=f.length,(0,u.appendStatisticsFile)(t.definedFunctions.name,t.AllDefinitionsFileBase,f,n.filepath)}(e,n),e),initialValue:{total:0,lambdasOnly:0,assignedFunctions:0,nestedFunctions:0,recursive:0,deepestNesting:0},postProcess:r.postProcess}},71514:e=>{"use strict";e.exports=Math.abs},71916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEquals=function(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},t.setMinus=function(e,t){const n=new Set;for(const r of e)t.has(r)||n.add(r);return n}},72111:(e,t,n)=>{const r=n(94641),i=n(13999),o=n(35580),s=n(54089),a=n(7059),l=n(25200);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return o(e,n,u);case">=":return s(e,n,u);case"<":return a(e,n,u);case"<=":return l(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},72419:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LineageQueryDefinition=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(52817),l=n(5350);t.LineageQueryDefinition={executor:a.executeLineageQuery,asciiSummarizer:(e,t,n,r)=>{const s=n;r.push(`Query: ${(0,i.bold)("lineage",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`);for(const[t,n]of Object.entries(s.lineages))r.push(`   ╰ ${t}: {${(0,l.summarizeIdsIfTooLong)(e,[...n])}}`);return!0},schema:s.default.object({type:s.default.string().valid("lineage").required().description("The type of the query."),criterion:s.default.string().required().description("The slicing criterion of the node to get the lineage of.")}).description("Lineage query used to find the lineage of a node in the dataflow graph")}},72525:(e,t,n)=>{const r=n(97638),i=n(50560);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const l=e.sort(((e,t)=>i(e,t,n)));for(const e of l)r(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},72658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnnamedFunctionCallPrefix=void 0,t.processUnnamedFunctionCall=function(e,n){const f=(0,r.processDataflowFor)(e.calledFunction,n),p=new a.DataflowGraph(n.completeAst.idMap),h=e.info.id,m=e.calledFunction.info.id,g=`${t.UnnamedFunctionCallPrefix}${h}`;c.dataflowLogger.debug(`Using ${h} as root for the unnamed function call`),p.addEdge(h,m,s.EdgeType.Calls),p.addEdge(h,m,s.EdgeType.Reads),p.mergeWith(f.graph);const{finalEnv:_,callArgs:y,remainingReadInArgs:b}=(0,i.processAllArguments)({functionName:f,args:e.arguments,data:n,finalGraph:p,functionRootId:h});p.addVertex({tag:l.VertexType.FunctionCall,id:h,environment:n.environment,name:g,onlyBuiltin:!1,controlDependencies:n.controlDependencies,args:y});const v=b;return v.push({nodeId:h,name:g,controlDependencies:n.controlDependencies,type:d.ReferenceType.Function}),e.calledFunction.type===u.RType.FunctionDefinition&&(0,o.linkArgumentsOnCall)(y,e.calledFunction.parameters,p),v.push(...f.in,...f.unknownReferences),{unknownReferences:[],in:v,out:f.out,graph:p,environment:_,entryPoint:e.info.id,exitPoints:f.exitPoints}};const r=n(22476),i=n(80876),o=n(56533),s=n(34966),a=n(60347),l=n(18841),u=n(49375),c=n(22438),d=n(46044);t.UnnamedFunctionCallPrefix="unnamed-function-call-"},72814:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fileProtocol=void 0,t.requestFromInput=function e(n){if(Array.isArray(n))return n.flatMap(e);const r=n,i=r.startsWith(t.fileProtocol);return{request:i?"file":"text",content:i?r.slice(7):r}},t.requestProviderFromFile=function(){return{createRequest:e=>({request:"file",content:e})}},t.requestProviderFromText=function(e){return{createRequest:t=>({request:"text",content:e[t]})}},t.requestFingerprint=function(e){return(0,a.default)(e)},t.isEmptyRequest=p,t.retrieveParseDataFromRCode=h,t.retrieveNormalizedAstFromRCode=async function(e,t){const n=await h(e,t);return(0,l.normalize)({parsed:n},(0,d.deterministicCountingIdGenerator)(0),"file"===e.request?e.content:void 0)},t.removeRQuotes=function(e){return e.length>1&&((0,i.startAndEndsWith)(e,"'")||(0,i.startAndEndsWith)(e,'"'))?e.slice(1,-1):e},t.retrieveNumberOfRTokensOfLastParse=async function(e,t=!1){const n=t?`flowr_output[flowr_output$token != "${f.RawRType.Comment}", ]`:"flowr_output",r=await e.sendCommandWithOutput(`cat(nrow(${n}),${(0,c.ts2r)(e.options.eol)})`);return(0,o.guard)(1===r.length,(()=>`expected exactly one line to obtain the number of R tokens, but got: ${JSON.stringify(r)}`)),Number(r[0])};const i=n(27454),o=n(57012),s=n(62806),a=r(n(74802)),l=n(56293),u=n(42284),c=n(48060),d=n(57608),f=n(49375);function p(e){return 0===e.content.trim().length}function h(e,t){if(p(e))return Promise.resolve("");const n="file"===e.request?', encoding="utf-8"':"",r=`flowr_get_ast(${e.request}=${JSON.stringify(e.content)}${n})`;return t instanceof s.RShellExecutor?m(t.run(r),e):t.sendCommandWithOutput(r).then((n=>m(n.join(t.options.eol),e)))}function m(e,t){return(0,o.guard)(e!==u.ErrorMarker,(()=>`unable to parse R code (see the log for more information) for request ${JSON.stringify(t)}}`)),e}t.fileProtocol="file://"},73093:(e,t,n)=>{"use strict";var r=n(94459);e.exports=function(e){return r(e)||0===e?e:e<0?-1:1}},73126:(e,t,n)=>{"use strict";var r=n(66743),i=n(69675),o=n(10076),s=n(13144);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return s(r,o,e)}},73326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyBuiltInEnvironment=t.BuiltInEnvironment=t.Environment=void 0,t.makeReferenceMaybe=a,t.makeAllMaybe=function(e,t,n,r,i=void 0){return void 0===e?[]:e.map((e=>a(e,t,n,r,i)))},t.initializeCleanEnvironments=function(e=!0){return t.BuiltInEnvironment.memory??=i.BuiltInMemory,t.EmptyBuiltInEnvironment.memory??=i.EmptyBuiltInMemory,{current:new u(e?t.BuiltInEnvironment:t.EmptyBuiltInEnvironment),level:0}},t.builtInEnvJsonReplacer=function(e,n){return n===t.BuiltInEnvironment?"<BuiltInEnvironment>":n===t.EmptyBuiltInEnvironment?"<EmptyBuiltInEnvironment>":(0,s.jsonReplacer)(e,n)};const r=n(46044),i=n(39767),o=n(85193),s=n(91884);function a(e,t,n,i,s=void 0){const a=t.get(e.nodeId,!0);if(i){const t=e.name?(0,o.resolveByName)(e.name,n,e.type):void 0;for(const e of t??[])e.type!==r.ReferenceType.BuiltInFunction&&e.type!==r.ReferenceType.BuiltInConstant&&(e.controlDependencies&&s&&!e.controlDependencies.find((e=>e.id===s.id))?e.controlDependencies.push(s):e.controlDependencies=s?[s]:[])}if(a){const[e]=a;e.controlDependencies&&s&&!e.controlDependencies.includes(s)?e.controlDependencies.push(s):e.controlDependencies=s?[s]:[]}return{...e,controlDependencies:[...e.controlDependencies??[],...s?[s]:[]]}}let l=0;class u{id=l++;parent;memory;constructor(e){this.parent=e,this.memory=new Map}}t.Environment=u,t.BuiltInEnvironment=new u(void 0),t.BuiltInEnvironment.memory=void 0,t.EmptyBuiltInEnvironment={id:t.BuiltInEnvironment.id,memory:void 0,parent:void 0}},73403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processFunctionParameter=function(e,t){const n=(0,r.processDataflowFor)(e.name,t),u=void 0===e.defaultValue?void 0:(0,r.processDataflowFor)(e.defaultValue,t),c=void 0!==u?n.graph.mergeWith(u.graph):n.graph,d=n.unknownReferences.map((t=>({...t,type:o.ReferenceType.Parameter,definedAt:e.info.id})));let f=n.environment;for(const t of d)if(i.log.trace(`parameter ${t.name} (${t.nodeId}) is defined at id ${t.definedAt} with ${void 0===u?"no default value":" no default value"}`),c.setDefinitionOfVertex(t),f=(0,s.define)(t,!1,f),void 0!==u)if(e.defaultValue?.type===a.RType.FunctionDefinition)c.addEdge(t,e.defaultValue.info.id,l.EdgeType.DefinedBy);else{const e=[...u.in,...u.unknownReferences];for(const n of e)c.addEdge(t,n,l.EdgeType.DefinedBy)}return{unknownReferences:[],in:void 0===u?[]:[...u.in,...u.unknownReferences,...n.in],out:[...u?.out??[],...n.out,...n.unknownReferences],graph:c,environment:f,entryPoint:e.info.id,exitPoints:[{nodeId:e.info.id,type:0,controlDependencies:t.controlDependencies}]}};const r=n(22476),i=n(19742),o=n(46044),s=n(62948),a=n(49375),l=n(34966)},73670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeExpression=function(e,t){const{content:n,location:d}=(0,r.retrieveMetaStructure)(t),f=t.children,p=(0,r.getWithTokenType)(f),{others:h,comments:m}=(0,s.splitComments)(p),g={...e,currentRange:d,currentLexeme:n},_=(0,a.tryNormalizeFunctionCall)(g,h);if(void 0!==_)return _.info.additionalTokens=[..._.info.additionalTokens??[],...m.map((t=>(0,c.normalizeComment)(e,t.content)))],_;const y=(0,i.tryNormalizeAccess)(g,h);if(void 0!==y)return y.info.additionalTokens=[...y.info.additionalTokens??[],...m.map((t=>(0,c.normalizeComment)(e,t.content)))],y;const b=(0,l.tryNormalizeFunctionDefinition)(g,h);if(void 0!==b)return b.info.additionalTokens=[...b.info.additionalTokens??[],...m.map((t=>(0,c.normalizeComment)(e,t.content)))],b;const v=(0,s.normalizeExpressions)(g,f),[w,E]=(0,o.partition)(v,(e=>e.type===u.RType.Delimiter||e.type===u.RType.Comment));if(1===E.length){const e=E[0];return e.info.additionalTokens=[...e.info.additionalTokens??[],...w],e}return{type:u.RType.ExpressionList,grouping:void 0,location:d,children:E,lexeme:n,info:{fullRange:g.currentRange,additionalTokens:w,fullLexeme:g.currentLexeme}}};const r=n(36604),i=n(3345),o=n(83584),s=n(93086),a=n(36049),l=n(17568),u=n(49375),c=n(31315)},73921:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StaticSliceQueryDefinition=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(68303),l=n(5350);t.StaticSliceQueryDefinition={executor:a.executeStaticSliceQuery,asciiSummarizer:(e,t,n,r)=>{const s=n;r.push(`Query: ${(0,i.bold)("static-slice",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`);for(const[t,n]of Object.entries(s.results)){const{criteria:i,noMagicComments:o,noReconstruction:s}=JSON.parse(t),a=[];s&&a.push("no reconstruction"),o&&a.push("no magic comments"),r.push(`   ╰ Slice for {${i.join(", ")}} ${a.join(", ")}`),"reconstruct"in n?r.push("     ╰ Code (newline as <code>&#92;n</code>): <code>"+n.reconstruct.code.split("\n").join("\\n")+"</code>"):r.push(`     ╰ Id List: {${(0,l.summarizeIdsIfTooLong)(e,[...n.slice.result])}}`)}return!0},schema:s.default.object({type:s.default.string().valid("static-slice").required().description("The type of the query."),criteria:s.default.array().items(s.default.string()).min(0).required().description("The slicing criteria to use."),noReconstruction:s.default.boolean().optional().description("Do not reconstruct the slice into readable code."),noMagicComments:s.default.boolean().optional().description("Should the magic comments (force-including lines within the slice) be ignored?")}).description("Slice query used to slice the dataflow graph")}},74015:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CallContextQueryDefinition=void 0;const i=n(87093),o=n(77529),s=n(87247),a=r(n(16075)),l=n(5350),u=n(82178);t.CallContextQueryDefinition={executor:i.executeCallContextQueries,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("call-context",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push((0,l.asciiCallContext)(e,i,t)),!0},schema:a.default.object({type:a.default.string().valid("call-context").required().description("The type of the query."),callName:a.default.string().required().description("Regex regarding the function name!"),callNameExact:a.default.boolean().optional().description("Should we automatically add the `^` and `$` anchors to the regex to make it an exact match?"),kind:a.default.string().optional().description("The kind of the call, this can be used to group calls together (e.g., linking `plot` to `visualize`). Defaults to `.`"),subkind:a.default.string().optional().description("The subkind of the call, this can be used to uniquely identify the respective call type when grouping the output (e.g., the normalized name, linking `ggplot` to `plot`). Defaults to `.`"),callTargets:a.default.string().valid(...Object.values(u.CallTargets)).optional().description("Call targets the function may have. This defaults to `any`. Request this specifically to gain all call targets we can resolve."),includeAliases:a.default.boolean().optional().description("Consider a case like `f <- function_of_interest`, do you want uses of `f` to be included in the results?"),fileFilter:a.default.object({fileFilter:a.default.string().required().description("Regex that a node's file attribute must match to be considered"),includeUndefinedFiles:a.default.boolean().optional().description("If `fileFilter` is set, but a nodes `file` attribute is `undefined`, should we include it in the results? Defaults to `true`.")}).optional().description("Filter that, when set, a node's file attribute must match to be considered"),linkTo:a.default.object({type:a.default.string().valid("link-to-last-call").required().description("The type of the linkTo sub-query."),callName:a.default.string().required().description("Regex regarding the function name of the last call. Similar to `callName`, strings are interpreted as a regular expression."),ignoreIf:a.default.function().optional().description("Should we ignore this (source) call? Currently, there is no well working serialization for this."),cascadeIf:a.default.function().optional().description("Should we continue searching after the link was created? Currently, there is no well working serialization for this.")}).optional().description("Links the current call to the last call of the given kind. This way, you can link a call like `points` to the latest graphics plot etc.")}).description("Call context query used to find calls in the dataflow graph")}},74205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processQuote=function(e,t,n,o,s){const{information:a,processedArguments:l,fnRef:u}=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:o,forceArgs:s.forceArgs}),c=[u],d=[],f=[];for(let e=0;e<t.length;e++){const t=l[e];if(t&&e!==s?.quoteArgumentsWithIndex)c.push(...t.in),d.push(...t.out),f.push(...t.unknownReferences);else if(t){a.graph.addEdge(n,t.entryPoint,i.EdgeType.NonStandardEvaluation);for(const[e]of t.graph.vertices(!0))a.graph.addEdge(n,e,i.EdgeType.NonStandardEvaluation)}}return{...a,in:c,out:d,unknownReferences:f}};const r=n(92397),i=n(34966)},74265:function(e,t,n){"use strict";var r,i=n(65606),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),i=0;i<n.length;i++)"default"!==n[i]&&o(t,e,n[i]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.BEST_R_MAJOR=t.MINIMUM_R_MAJOR=void 0,t.activate=async function(e){b=e,v=l.window.createOutputChannel("flowR"),v.appendLine(`flowR extension activated (ships with flowR v${(0,g.flowrVersion)().toString()})`),(0,p.registerDiagramCommands)(e,v),(0,f.registerSliceCommands)(e,v),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.session.internal",(async()=>(await x(),E)))),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.session.connect",(async()=>(await T(),E)))),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.session.disconnect",(()=>{E instanceof c.FlowrServerSession&&A()}))),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.repl",(async()=>{(0,y.showRepl)(e,await R())}))),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.settings.open",(async()=>{await l.commands.executeCommand("workbench.action.openSettings",d.Settings.Category)}))),e.subscriptions.push(l.commands.registerCommand("vscode-flowr.report",(()=>{l.env.openExternal(l.Uri.parse("https://github.com/flowr-analysis/flowr/issues/new/choose"))}))),w=l.window.createStatusBarItem(l.StatusBarAlignment.Right,100),e.subscriptions.push(w),O(),e.subscriptions.push(new l.Disposable((()=>A())));const t=(0,_.registerDependencyView)(v);e.subscriptions.push(new l.Disposable((()=>t()))),i.on("SIGINT",(()=>A())),S().get(d.Settings.ServerAutoConnect)&&await T()},t.getConfig=S,t.isVerbose=function(){return S().get(d.Settings.VerboseLog,!1)},t.establishInternalSession=x,t.getFlowrSession=R,t.establishServerSession=T,t.destroySession=A,t.updateStatusBar=O,t.isWeb=I,t.getWasmRootPath=function(){if(I()){const e=l.Uri.joinPath(b.extensionUri,"/dist/web");return"file"!==e.scheme?e.toString():`vscode-file://vscode-app/${e.fsPath}`}return"//flowr/tree-sitter"};const l=a(n(91398)),u=n(40245),c=n(86547),d=n(51451),f=n(86598),p=n(77469),h=n(67607),m=n(79506),g=n(87800),_=n(12273),y=n(27787);let b,v,w,E;function S(){return l.workspace.getConfiguration(d.Settings.Category)}async function x(e){return A(),E=new u.FlowrInternalSession(v,e),await E.initialize(),E}async function R(){return E||await x(I()?"tree-sitter":void 0)}async function T(){return A(),E=new c.FlowrServerSession(v),await E.initialize(),E}function A(){E?.destroy(),E=void 0}function O(){const e=[],t=[];E instanceof c.FlowrServerSession?(e.push(`$(cloud) flowR ${E.state}`),"connected"===E.state&&t.push(`R version ${E.rVersion}  \nflowR version ${E.flowrVersion}`),E.working&&e.push("$(loading~spin) Analyzing")):E instanceof u.FlowrInternalSession&&(e.push(`$(console) flowR ${E.state}`),"active"===E.state&&t.push(`R version ${E.rVersion}  \nflowR version ${(0,g.flowrVersion)().toString()}  \nEngine ${E.parser?.name}`),E.working&&e.push("$(loading~spin) Analyzing"));const n=[],r=[];if(h.selectionSlicer?.changeListeners.length&&n.push("cursor"),m.positionSlicers.size){const e=[...m.positionSlicers].reduce(((e,[,t])=>e+t.offsets.length),0);if(e>0){n.push(`${e} position${1===e?"":"s"}`);for(const[e,t]of m.positionSlicers)r.push(`${l.workspace.asRelativePath(e.fileName)} (${t.offsets.length} position${1===t.offsets.length?"":"s"})`)}}n.length&&(e.push(`$(lightbulb) Slicing ${n.join(", ")}`),r.length&&t.push(`Slicing in\n${r.map((e=>`- ${e}`)).join("\n")}`)),e.length?(w.show(),w.text=e.join(" "),w.tooltip=t.length?t.reduce(((e,t)=>e.appendMarkdown("\n\n").appendMarkdown(t)),new l.MarkdownString):void 0):w.hide()}function I(){return"undefined"!=typeof WebSocket}t.MINIMUM_R_MAJOR=3,t.BEST_R_MAJOR=4},74272:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathParser=void 0;const r=n(46714),i=n(23196),o=n(45550),s=n(65677),a=n(9705),l=n(70475),u=n(90479),c=n(12544),d=n(47453),f=n(22251),p=n(676),h=n(10336),m=n(96764),g=n(51378),_=n(70271),y=n(59999),b=n(47146),v=n(1786),w=n(22140),E=n(35459),S=n(8448),x=n(91277),R=n(40394),T=n(20518),A=n(52950);class O{static actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "];static actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "];static gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "];static productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]];static DOUBLEDOT=2;static DOUBLECOLON=3;static DOUBLESLASH=4;static NOTEQUAL=5;static LESSTHANOREQUAL=6;static GREATERTHANOREQUAL=7;static AND=8;static OR=9;static MOD=10;static DIV=11;static MULTIPLYOPERATOR=12;static FUNCTIONNAME=13;static AXISNAME=14;static LITERAL=15;static NUMBER=16;static ASTERISKNAMETEST=17;static QNAME=18;static NCNAMECOLONASTERISK=19;static NODETYPE=20;static PROCESSINGINSTRUCTIONWITHLITERAL=21;static EQUALS=22;static LESSTHAN=23;static GREATERTHAN=24;static PLUS=25;static MINUS=26;static BAR=27;static SLASH=28;static LEFTPARENTHESIS=29;static RIGHTPARENTHESIS=30;static COMMA=31;static AT=32;static LEFTBRACKET=33;static RIGHTBRACKET=34;static DOT=35;static DOLLAR=36;static SHIFT="s";static REDUCE="r";static ACCEPT="a";reduceActions;constructor(){this.reduceActions=[],this.reduceActions[3]=e=>new y.OrOperation(e[0],e[2]),this.reduceActions[5]=e=>new s.AndOperation(e[0],e[2]),this.reduceActions[7]=e=>new u.EqualsOperation(e[0],e[2]),this.reduceActions[8]=e=>new _.NotEqualOperation(e[0],e[2]),this.reduceActions[10]=e=>new f.LessThanOperation(e[0],e[2]),this.reduceActions[11]=e=>new c.GreaterThanOperation(e[0],e[2]),this.reduceActions[12]=e=>new p.LessThanOrEqualOperation(e[0],e[2]),this.reduceActions[13]=e=>new d.GreaterThanOrEqualOperation(e[0],e[2]),this.reduceActions[15]=e=>new b.PlusOperation(e[0],e[2]),this.reduceActions[16]=e=>new h.MinusOperation(e[0],e[2]),this.reduceActions[18]=e=>new g.MultiplyOperation(e[0],e[2]),this.reduceActions[19]=e=>new l.DivOperation(e[0],e[2]),this.reduceActions[20]=e=>new m.ModOperation(e[0],e[2]),this.reduceActions[22]=e=>new v.UnaryMinusOperation(e[1]),this.reduceActions[24]=e=>new a.BarOperation(e[0],e[2]),this.reduceActions[25]=e=>new w.PathExpr(void 0,void 0,e[0]),this.reduceActions[27]=e=>(e[0].locationPath=e[2],e[0]),this.reduceActions[28]=e=>(e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new E.Step(E.Step.DESCENDANTORSELF,o.NodeTest.nodeTest,[])),e[0]),this.reduceActions[29]=e=>new w.PathExpr(e[0],[],void 0),this.reduceActions[30]=e=>e[0]instanceof w.PathExpr?(void 0===e[0].filterPredicates&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new w.PathExpr(e[0],[e[1]],void 0),this.reduceActions[32]=e=>e[1],this.reduceActions[33]=e=>new A.XString(e[0]),this.reduceActions[34]=e=>new A.XNumber(e[0]),this.reduceActions[36]=e=>new r.FunctionCall(e[0],[]),this.reduceActions[37]=e=>new r.FunctionCall(e[0],e[2]),this.reduceActions[38]=e=>[e[0]],this.reduceActions[39]=e=>(e[2].unshift(e[0]),e[2]),this.reduceActions[43]=e=>new i.LocationPath(!0,[]),this.reduceActions[44]=e=>(e[1].absolute=!0,e[1]),this.reduceActions[46]=e=>new i.LocationPath(!1,[e[0]]),this.reduceActions[47]=e=>(e[0].steps.push(e[2]),e[0]),this.reduceActions[49]=e=>new E.Step(e[0],e[1],[]),this.reduceActions[50]=e=>new E.Step(E.Step.CHILD,e[0],[]),this.reduceActions[51]=e=>new E.Step(e[0],e[1],e[2]),this.reduceActions[52]=e=>new E.Step(E.Step.CHILD,e[0],e[1]),this.reduceActions[54]=e=>[e[0]],this.reduceActions[55]=e=>(e[1].unshift(e[0]),e[1]),this.reduceActions[56]=e=>"ancestor"===e[0]?E.Step.ANCESTOR:"ancestor-or-self"===e[0]?E.Step.ANCESTORORSELF:"attribute"===e[0]?E.Step.ATTRIBUTE:"child"===e[0]?E.Step.CHILD:"descendant"===e[0]?E.Step.DESCENDANT:"descendant-or-self"===e[0]?E.Step.DESCENDANTORSELF:"following"===e[0]?E.Step.FOLLOWING:"following-sibling"===e[0]?E.Step.FOLLOWINGSIBLING:"namespace"===e[0]?E.Step.NAMESPACE:"parent"===e[0]?E.Step.PARENT:"preceding"===e[0]?E.Step.PRECEDING:"preceding-sibling"===e[0]?E.Step.PRECEDINGSIBLING:"self"===e[0]?E.Step.SELF:-1,this.reduceActions[57]=e=>E.Step.ATTRIBUTE,this.reduceActions[59]=e=>"comment"===e[0]?o.NodeTest.commentTest:"text"===e[0]?o.NodeTest.textTest:"processing-instruction"===e[0]?o.NodeTest.anyPiTest:"node"===e[0]?o.NodeTest.nodeTest:new o.NodeTest(-1),this.reduceActions[60]=e=>new o.NodeTest.PITest(e[2]),this.reduceActions[61]=e=>e[1],this.reduceActions[63]=e=>(e[1].absolute=!0,e[1].steps.unshift(new E.Step(E.Step.DESCENDANTORSELF,o.NodeTest.nodeTest,[])),e[1]),this.reduceActions[64]=e=>(e[0].steps.push(new E.Step(E.Step.DESCENDANTORSELF,o.NodeTest.nodeTest,[])),e[0].steps.push(e[2]),e[0]),this.reduceActions[65]=e=>new E.Step(E.Step.SELF,o.NodeTest.nodeTest,[]),this.reduceActions[66]=e=>new E.Step(E.Step.PARENT,o.NodeTest.nodeTest,[]),this.reduceActions[67]=e=>new x.VariableReference(e[1]),this.reduceActions[68]=e=>o.NodeTest.nameTestAny,this.reduceActions[69]=e=>new o.NodeTest.NameTestPrefixAny(e[0].split(":")[0]),this.reduceActions[70]=e=>new o.NodeTest.NameTestQName(e[0])}tokenize(e){const t=e+"\0",n=[],r=[];let i=0,o=t.charAt(i++);for(;;){for(;" "===o||"\t"===o||"\r"===o||"\n"===o;)o=t.charAt(i++);if("\0"===o||i>=t.length)break;if("("!==o)if(")"!==o)if("["!==o)if("]"!==o)if("@"!==o)if(","!==o)if("|"!==o)if("+"!==o)if("-"!==o)if("="!==o)if("$"!==o)if("."!==o)if("'"!==o&&'"'!==o)if(o>="0"&&o<="9"){let e=o;for(o=t.charAt(i++);o>="0"&&o<="9";)e+=o,o=t.charAt(i++);if("."===o&&t.charAt(i)>="0"&&t.charAt(i)<="9")for(e+=o,e+=t.charAt(i++),o=t.charAt(i++);o>="0"&&o<="9";)e+=o,o=t.charAt(i++);n.push(O.NUMBER),r.push(e)}else if("*"!==o)if(":"!==o||":"!==t.charAt(i))if("/"!==o)if("!"!==o||"="!==t.charAt(i))if("<"!==o)if(">"!==o){if("_"!==o&&!(0,S.isLetter)(o.charCodeAt(0)))throw new Error("Unexpected character "+o);{let e=o;for(o=t.charAt(i++);(0,S.isNCNameChar)(o.charCodeAt(0));)e+=o,o=t.charAt(i++);if(n.length>0){const t=n[n.length-1];if(t!==O.AT&&t!==O.DOUBLECOLON&&t!==O.LEFTPARENTHESIS&&t!==O.LEFTBRACKET&&t!==O.AND&&t!==O.OR&&t!==O.MOD&&t!==O.DIV&&t!==O.MULTIPLYOPERATOR&&t!==O.SLASH&&t!==O.DOUBLESLASH&&t!==O.BAR&&t!==O.PLUS&&t!==O.MINUS&&t!==O.EQUALS&&t!==O.NOTEQUAL&&t!==O.LESSTHAN&&t!==O.LESSTHANOREQUAL&&t!==O.GREATERTHAN&&t!==O.GREATERTHANOREQUAL){if("and"===e){n.push(O.AND),r.push(e);continue}if("or"===e){n.push(O.OR),r.push(e);continue}if("mod"===e){n.push(O.MOD),r.push(e);continue}if("div"===e){n.push(O.DIV),r.push(e);continue}}}if(":"===o){if("*"===t.charAt(i)){n.push(O.NCNAMECOLONASTERISK),r.push(e+":*"),i++,o=t.charAt(i++);continue}if("_"===t.charAt(i)||(0,S.isLetter)(t.charCodeAt(i))){for(e+=":",o=t.charAt(i++);(0,S.isNCNameChar)(o.charCodeAt(0));)e+=o,o=t.charAt(i++);if("("===o){n.push(O.FUNCTIONNAME),r.push(e);continue}n.push(O.QNAME),r.push(e);continue}if(":"===t.charAt(i)){n.push(O.AXISNAME),r.push(e);continue}}if("("===o){if("comment"===e||"text"===e||"node"===e){n.push(O.NODETYPE),r.push(e);continue}if("processing-instruction"===e){")"===t.charAt(i)?n.push(O.NODETYPE):n.push(O.PROCESSINGINSTRUCTIONWITHLITERAL),r.push(e);continue}n.push(O.FUNCTIONNAME),r.push(e);continue}n.push(O.QNAME),r.push(e)}}else{if("="===t.charAt(i)){n.push(O.GREATERTHANOREQUAL),r.push(">="),i++,o=t.charAt(i++);continue}n.push(O.GREATERTHAN),r.push(">"),o=t.charAt(i++)}else{if("="===t.charAt(i)){n.push(O.LESSTHANOREQUAL),r.push("<="),i++,o=t.charAt(i++);continue}n.push(O.LESSTHAN),r.push("<"),o=t.charAt(i++)}else n.push(O.NOTEQUAL),r.push("!="),i++,o=t.charAt(i++);else{if(o=t.charAt(i++),"/"===o){n.push(O.DOUBLESLASH),r.push("//"),o=t.charAt(i++);continue}n.push(O.SLASH),r.push("/")}else n.push(O.DOUBLECOLON),r.push("::"),i++,o=t.charAt(i++);else{if(n.length>0){const e=n[n.length-1];if(e!==O.AT&&e!==O.DOUBLECOLON&&e!==O.LEFTPARENTHESIS&&e!==O.LEFTBRACKET&&e!==O.AND&&e!==O.OR&&e!==O.MOD&&e!==O.DIV&&e!==O.MULTIPLYOPERATOR&&e!==O.SLASH&&e!==O.DOUBLESLASH&&e!==O.BAR&&e!==O.PLUS&&e!==O.MINUS&&e!==O.EQUALS&&e!==O.NOTEQUAL&&e!==O.LESSTHAN&&e!==O.LESSTHANOREQUAL&&e!==O.GREATERTHAN&&e!==O.GREATERTHANOREQUAL){n.push(O.MULTIPLYOPERATOR),r.push(o),o=t.charAt(i++);continue}}n.push(O.ASTERISKNAMETEST),r.push(o),o=t.charAt(i++)}else{const e=o;let s="";for(;i<t.length&&(o=t.charAt(i))!==e;)s+=o,i+=1;if(o!==e)throw T.XPathException.fromMessage("Unterminated string literal: "+e+s);i+=1,n.push(O.LITERAL),r.push(s),o=t.charAt(i++)}else{if(o=t.charAt(i++),"."===o){n.push(O.DOUBLEDOT),r.push(".."),o=t.charAt(i++);continue}if(o>="0"&&o<="9"){let e="."+o;for(o=t.charAt(i++);o>="0"&&o<="9";)e+=o,o=t.charAt(i++);n.push(O.NUMBER),r.push(e);continue}n.push(O.DOT),r.push(".")}else n.push(O.DOLLAR),r.push(o),o=t.charAt(i++);else n.push(O.EQUALS),r.push(o),o=t.charAt(i++);else n.push(O.MINUS),r.push(o),o=t.charAt(i++);else n.push(O.PLUS),r.push(o),o=t.charAt(i++);else n.push(O.BAR),r.push(o),o=t.charAt(i++);else n.push(O.COMMA),r.push(o),o=t.charAt(i++);else n.push(O.AT),r.push(o),o=t.charAt(i++);else n.push(O.RIGHTBRACKET),r.push(o),o=t.charAt(i++);else n.push(O.LEFTBRACKET),r.push(o),o=t.charAt(i++);else n.push(O.RIGHTPARENTHESIS),r.push(o),o=t.charAt(i++);else n.push(O.LEFTPARENTHESIS),r.push(o),o=t.charAt(i++)}return n.push(1),r.push("[EOF]"),[n,r]}parse(e){const t=this.tokenize(e),n=t[0],r=t[1];let i=0;const o=[],s=[],a=[];let l,u,c;for(o.push(0),s.push(1),a.push("_S"),u=n[i],c=r[i++];;)switch(l=o[o.length-1],O.actionTable[l].charAt(u-1)){case O.SHIFT:s.push(-u),a.push(c),o.push(O.actionTableNumber[l].charCodeAt(u-1)-32),u=n[i],c=r[i++];break;case O.REDUCE:const e=O.productions[O.actionTableNumber[l].charCodeAt(u-1)-32][1],t=[];for(let n=0;n<e;n++)s.pop(),t.unshift(a.pop()),o.pop();const d=o[o.length-1];s.push(O.productions[O.actionTableNumber[l].charCodeAt(u-1)-32][0]),void 0===this.reduceActions[O.actionTableNumber[l].charCodeAt(u-1)-32]?a.push(t[0]):a.push(this.reduceActions[O.actionTableNumber[l].charCodeAt(u-1)-32](t)),o.push(O.gotoTable[d].charCodeAt(O.productions[O.actionTableNumber[l].charCodeAt(u-1)-32][0]-2)-33);break;case O.ACCEPT:const f=a.pop();if(!(f instanceof A.Expression))throw new Error("XPath parse error. Wrong result type.");return new R.XPath(f);default:throw new Error("XPath parse error")}throw new Error("XPath parse error")}}t.XPathParser=O},74277:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},74641:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Boolean,Uint8Array}},74802:e=>{e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}a=n[s]={exports:{}},t[s][0].call(a.exports,(function(e){return i(t[s][1][e]||e)}),a,a.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){(function(r,i,o,s,a,l,u,c,d){"use strict";var f=e("crypto");function p(e,t){var n;return void 0===(n="passthrough"!==(t=g(e,t)).algorithm?f.createHash(t.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(t,n).dispatch(e),n.update||n.end(""),n.digest?n.digest("buffer"===t.encoding?void 0:t.encoding):(e=n.read(),"buffer"!==t.encoding?e.toString(t.encoding):e)}(n=t.exports=p).sha1=function(e){return p(e)},n.keys=function(e){return p(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return p(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return p(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var h=f.getHashes?f.getHashes().slice():["sha1","md5"],m=(h.push("passthrough"),["buffer","hex","binary","base64"]);function g(e,t){var n={};if(n.algorithm=(t=t||{}).algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var r=0;r<h.length;++r)h[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=h[r]);if(-1===h.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+h.join(", "));if(-1===m.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+m.join(", "));return n}function _(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function y(e,t,n){function r(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return this["_"+(null===(t=e.replacer?e.replacer(t):t)?"null":typeof t)](t)},_object:function(t){var i,s=Object.prototype.toString.call(t),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+s+"]");if(n.push(t),void 0!==o&&o.isBuffer&&o.isBuffer(t))return r("buffer:"),r(t);if("object"===a||"function"===a||"asyncfunction"===a)return s=Object.keys(t),e.unorderedObjects&&(s=s.sort()),!1===e.respectType||_(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter((function(t){return!e.excludeKeys(t)}))),r("object:"+s.length+":"),i=this,s.forEach((function(n){i.dispatch(n),r(":"),e.excludeValues||i.dispatch(t[n]),r(",")}));if(!this["_"+a]){if(e.ignoreUnknown)return r("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](t)},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var o=this;if(r("array:"+t.length+":"),!i||t.length<=1)return t.forEach((function(e){return o.dispatch(e)}));var s=[];return i=t.map((function(t){var r=new b,i=n.slice();return y(e,r,i).dispatch(t),s=s.concat(i.slice(n.length)),r.read().toString()})),n=n.concat(s),i.sort(),this._array(i,!1)},_date:function(e){return r("date:"+e.toJSON())},_symbol:function(e){return r("symbol:"+e.toString())},_error:function(e){return r("error:"+e.toString())},_boolean:function(e){return r("bool:"+e.toString())},_string:function(e){r("string:"+e.length+":"),r(e.toString())},_function:function(t){r("fn:"),_(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return r("number:"+e.toString())},_xml:function(e){return r("xml:"+e.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(e){return r("regex:"+e.toString())},_uint8array:function(e){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return r("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return r("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return r("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return r("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return r("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return r("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return r("url:"+e.toString())},_map:function(t){return r("map:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_set:function(t){return r("set:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_file:function(e){return r("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(e){return r("bigint:"+e.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function b(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),y(t=g(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,n){(function(e,t,r,i,o,s,a,l,u){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),l="_".charCodeAt(0);function u(e){return(e=e.charCodeAt(0))===n||e===a?62:e===r||e===l?63:e<i?-1:e<i+10?e-i+26+26:e<s+26?e-s:e<o+26?e-o+26:void 0}e.toByteArray=function(e){var n,r;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.length,o=(i="="===e.charAt(i-2)?2:"="===e.charAt(i-1)?1:0,new t(3*e.length/4-i)),s=0<i?e.length-4:e.length,a=0;function l(e){o[a++]=e}for(n=0;n<s;n+=4,0)l((16711680&(r=u(e.charAt(n))<<18|u(e.charAt(n+1))<<12|u(e.charAt(n+2))<<6|u(e.charAt(n+3))))>>16),l((65280&r)>>8),l(255&r);return 2==i?l(255&(r=u(e.charAt(n))<<2|u(e.charAt(n+1))>>4)):1==i&&(l((r=u(e.charAt(n))<<10|u(e.charAt(n+1))<<4|u(e.charAt(n+2))>>2)>>8&255),l(255&r)),o},e.fromByteArray=function(e){var t,n,r,i,o=e.length%3,s="";function a(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,r=e.length-o;t<r;t+=3)s+=a((i=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+a(i>>12&63)+a(i>>6&63)+a(63&i);switch(o){case 1:s=(s+=a((n=e[e.length-1])>>2))+a(n<<4&63)+"==";break;case 2:s=(s=(s+=a((n=(e[e.length-2]<<8)+e[e.length-1])>>10))+a(n>>4&63))+a(n<<2&63)+"="}return s}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,n){(function(t,r,i,o,s,a,l,u,c){var d=e("base64-js"),f=e("ieee754");function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var r,o,s,a,l=typeof e;if("base64"===t&&"string"==l)for(e=(a=e).trim?a.trim():a.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==l)r=A(e);else if("string"==l)r=i.byteLength(e,t);else{if("object"!=l)throw new Error("First argument needs to be a number, array or string.");r=A(e.length)}if(i._useTypedArrays?o=i._augment(new Uint8Array(r)):((o=this).length=r,o._isBuffer=!0),i._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(O(a=e)||i.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)for(s=0;s<r;s++)i.isBuffer(e)?o[s]=e.readUInt8(s):o[s]=e[s];else if("string"==l)o.write(e,0,t);else if("number"==l&&!i._useTypedArrays&&!n)for(s=0;s<r;s++)o[s]=0;return o}function p(e,t,n,r){var i;if(r||(L("boolean"==typeof n,"missing or invalid endian"),L(null!=t,"missing offset"),L(t+1<e.length,"Trying to read beyond buffer length")),!((r=e.length)<=t))return n?(i=e[t],t+1<r&&(i|=e[t+1]<<8)):(i=e[t]<<8,t+1<r&&(i|=e[t+1])),i}function h(e,t,n,r){var i;if(r||(L("boolean"==typeof n,"missing or invalid endian"),L(null!=t,"missing offset"),L(t+3<e.length,"Trying to read beyond buffer length")),!((r=e.length)<=t))return n?(t+2<r&&(i=e[t+2]<<16),t+1<r&&(i|=e[t+1]<<8),i|=e[t],t+3<r&&(i+=e[t+3]<<24>>>0)):(t+1<r&&(i=e[t+1]<<16),t+2<r&&(i|=e[t+2]<<8),t+3<r&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}function m(e,t,n,r){if(r||(L("boolean"==typeof n,"missing or invalid endian"),L(null!=t,"missing offset"),L(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 32768&(r=p(e,t,n,!0))?-1*(65535-r+1):r}function g(e,t,n,r){if(r||(L("boolean"==typeof n,"missing or invalid endian"),L(null!=t,"missing offset"),L(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 2147483648&(r=h(e,t,n,!0))?-1*(4294967295-r+1):r}function _(e,t,n,r){return r||(L("boolean"==typeof n,"missing or invalid endian"),L(t+3<e.length,"Trying to read beyond buffer length")),f.read(e,t,n,23,4)}function y(e,t,n,r){return r||(L("boolean"==typeof n,"missing or invalid endian"),L(t+7<e.length,"Trying to read beyond buffer length")),f.read(e,t,n,52,8)}function b(e,t,n,r,i){if(i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+1<e.length,"trying to write beyond buffer length"),M(t,65535)),!((i=e.length)<=n))for(var o=0,s=Math.min(i-n,2);o<s;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function v(e,t,n,r,i){if(i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+3<e.length,"trying to write beyond buffer length"),M(t,4294967295)),!((i=e.length)<=n))for(var o=0,s=Math.min(i-n,4);o<s;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function w(e,t,n,r,i){i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+1<e.length,"Trying to write beyond buffer length"),k(t,32767,-32768)),e.length<=n||b(e,0<=t?t:65535+t+1,n,r,i)}function E(e,t,n,r,i){i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+3<e.length,"Trying to write beyond buffer length"),k(t,2147483647,-2147483648)),e.length<=n||v(e,0<=t?t:4294967295+t+1,n,r,i)}function S(e,t,n,r,i){i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+3<e.length,"Trying to write beyond buffer length"),j(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||f.write(e,t,n,r,23,4)}function x(e,t,n,r,i){i||(L(null!=t,"missing value"),L("boolean"==typeof r,"missing or invalid endian"),L(null!=n,"missing offset"),L(n+7<e.length,"Trying to write beyond buffer length"),j(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||f.write(e,t,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=N(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=P(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(e,t){if(L(O(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new i(0);if(1===e.length)return e[0];if("number"!=typeof t)for(o=t=0;o<e.length;o++)t+=e[o].length;for(var n=new i(t),r=0,o=0;o<e.length;o++){var s=e[o];s.copy(n,r),r+=s.length}return n},i.prototype.write=function(e,t,n,r){isFinite(t)?isFinite(n)||(r=n,n=void 0):(u=r,r=t,t=n,n=u),t=Number(t)||0;var o,s,a,l,u=this.length-t;switch((!n||u<(n=Number(n)))&&(n=u),r=String(r||"utf8").toLowerCase()){case"hex":o=function(e,t,n,r){n=Number(n)||0;var o=e.length-n;(!r||o<(r=Number(r)))&&(r=o),L((o=t.length)%2==0,"Invalid hex string"),o/2<r&&(r=o/2);for(var s=0;s<r;s++){var a=parseInt(t.substr(2*s,2),16);L(!isNaN(a),"Invalid hex string"),e[n+s]=a}return i._charsWritten=2*s,s}(this,e,t,n);break;case"utf8":case"utf-8":s=this,a=t,l=n,o=i._charsWritten=$(N(e),s,a,l);break;case"ascii":case"binary":o=function(e,t,n,r){return i._charsWritten=$(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}(this,e,t,n);break;case"base64":s=this,a=t,l=n,o=i._charsWritten=$(P(e),s,a,l);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(e,t,n,r){return i._charsWritten=$(function(e){for(var t,n,r=[],i=0;i<e.length;i++)t=(n=e.charCodeAt(i))>>8,n%=256,r.push(n),r.push(t);return r}(t),e,n,r)}(this,e,t,n);break;default:throw new Error("Unknown encoding")}return o},i.prototype.toString=function(e,t,n){var r,i,o,s,a=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):a.length)===t)return"";switch(e){case"hex":r=function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;o++)i+=I(e[o]);return i}(a,t,n);break;case"utf8":case"utf-8":r=function(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(r+=C(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+C(i)}(a,t,n);break;case"ascii":case"binary":r=function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}(a,t,n);break;case"base64":i=a,s=n,r=0===(o=t)&&s===i.length?d.fromByteArray(i):d.fromByteArray(i.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(a,t,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(e,t,n,r){if(t=t||0,(r=r||0===r?r:this.length)!==(n=n||0)&&0!==e.length&&0!==this.length){L(n<=r,"sourceEnd < sourceStart"),L(0<=t&&t<e.length,"targetStart out of bounds"),L(0<=n&&n<this.length,"sourceStart out of bounds"),L(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length);var o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(o<100||!i._useTypedArrays)for(var s=0;s<o;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t)}},i.prototype.slice=function(e,t){var n=this.length;if(e=T(e,n,0),t=T(t,n,n),i._useTypedArrays)return i._augment(this.subarray(e,t));for(var r=t-e,o=new i(r,void 0,!0),s=0;s<r;s++)o[s]=this[s+e];return o},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.readUInt8=function(e,t){if(t||(L(null!=e,"missing offset"),L(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},i.prototype.readUInt16LE=function(e,t){return p(this,e,!0,t)},i.prototype.readUInt16BE=function(e,t){return p(this,e,!1,t)},i.prototype.readUInt32LE=function(e,t){return h(this,e,!0,t)},i.prototype.readUInt32BE=function(e,t){return h(this,e,!1,t)},i.prototype.readInt8=function(e,t){if(t||(L(null!=e,"missing offset"),L(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},i.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},i.prototype.readInt32LE=function(e,t){return g(this,e,!0,t)},i.prototype.readInt32BE=function(e,t){return g(this,e,!1,t)},i.prototype.readFloatLE=function(e,t){return _(this,e,!0,t)},i.prototype.readFloatBE=function(e,t){return _(this,e,!1,t)},i.prototype.readDoubleLE=function(e,t){return y(this,e,!0,t)},i.prototype.readDoubleBE=function(e,t){return y(this,e,!1,t)},i.prototype.writeUInt8=function(e,t,n){n||(L(null!=e,"missing value"),L(null!=t,"missing offset"),L(t<this.length,"trying to write beyond buffer length"),M(e,255)),t>=this.length||(this[t]=e)},i.prototype.writeUInt16LE=function(e,t,n){b(this,e,t,!0,n)},i.prototype.writeUInt16BE=function(e,t,n){b(this,e,t,!1,n)},i.prototype.writeUInt32LE=function(e,t,n){v(this,e,t,!0,n)},i.prototype.writeUInt32BE=function(e,t,n){v(this,e,t,!1,n)},i.prototype.writeInt8=function(e,t,n){n||(L(null!=e,"missing value"),L(null!=t,"missing offset"),L(t<this.length,"Trying to write beyond buffer length"),k(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},i.prototype.writeInt16LE=function(e,t,n){w(this,e,t,!0,n)},i.prototype.writeInt16BE=function(e,t,n){w(this,e,t,!1,n)},i.prototype.writeInt32LE=function(e,t,n){E(this,e,t,!0,n)},i.prototype.writeInt32BE=function(e,t,n){E(this,e,t,!1,n)},i.prototype.writeFloatLE=function(e,t,n){S(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){S(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){x(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){x(this,e,t,!1,n)},i.prototype.fill=function(e,t,n){if(t=t||0,n=n||this.length,L("number"==typeof(e="string"==typeof(e=e||0)?e.charCodeAt(0):e)&&!isNaN(e),"value is not a number"),L(t<=n,"end < start"),n!==t&&0!==this.length){L(0<=t&&t<this.length,"start out of bounds"),L(0<=n&&n<=this.length,"end out of bounds");for(var r=t;r<n;r++)this[r]=e}},i.prototype.inspect=function(){for(var e=[],t=this.length,r=0;r<t;r++)if(e[r]=I(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var R=i.prototype;function T(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function A(e){return(e=~~Math.ceil(+e))<0?0:e}function O(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(e.charCodeAt(n));else for(var i=n,o=(55296<=r&&r<=57343&&n++,encodeURIComponent(e.slice(i,n+1)).substr(1).split("%")),s=0;s<o.length;s++)t.push(parseInt(o[s],16))}return t}function P(e){return d.toByteArray(e)}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function C(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function M(e,t){L("number"==typeof e,"cannot write a non-number as a number"),L(0<=e,"specified a negative value for writing an unsigned value"),L(e<=t,"value is larger than maximum value for type"),L(Math.floor(e)===e,"value has a fractional component")}function k(e,t,n){L("number"==typeof e,"cannot write a non-number as a number"),L(e<=t,"value larger than maximum allowed value"),L(n<=e,"value smaller than minimum allowed value"),L(Math.floor(e)===e,"value has a fractional component")}function j(e,t,n){L("number"==typeof e,"cannot write a non-number as a number"),L(e<=t,"value larger than maximum allowed value"),L(n<=e,"value smaller than minimum allowed value")}function L(e,t){if(!e)throw new Error(t||"Failed assertion")}i._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=R.get,e.set=R.set,e.write=R.write,e.toString=R.toString,e.toLocaleString=R.toString,e.toJSON=R.toJSON,e.copy=R.copy,e.slice=R.slice,e.readUInt8=R.readUInt8,e.readUInt16LE=R.readUInt16LE,e.readUInt16BE=R.readUInt16BE,e.readUInt32LE=R.readUInt32LE,e.readUInt32BE=R.readUInt32BE,e.readInt8=R.readInt8,e.readInt16LE=R.readInt16LE,e.readInt16BE=R.readInt16BE,e.readInt32LE=R.readInt32LE,e.readInt32BE=R.readInt32BE,e.readFloatLE=R.readFloatLE,e.readFloatBE=R.readFloatBE,e.readDoubleLE=R.readDoubleLE,e.readDoubleBE=R.readDoubleBE,e.writeUInt8=R.writeUInt8,e.writeUInt16LE=R.writeUInt16LE,e.writeUInt16BE=R.writeUInt16BE,e.writeUInt32LE=R.writeUInt32LE,e.writeUInt32BE=R.writeUInt32BE,e.writeInt8=R.writeInt8,e.writeInt16LE=R.writeInt16LE,e.writeInt16BE=R.writeInt16BE,e.writeInt32LE=R.writeInt32LE,e.writeInt32BE=R.writeInt32BE,e.writeFloatLE=R.writeFloatLE,e.writeFloatBE=R.writeFloatBE,e.writeDoubleLE=R.writeDoubleLE,e.writeDoubleBE=R.writeDoubleBE,e.fill=R.fill,e.inspect=R.inspect,e.toArrayBuffer=R.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,n){(function(n,r,i,o,s,a,l,u,c){i=e("buffer").Buffer;var d=new i(4);d.fill(0),t.exports={hash:function(e,t,n,r){for(var o=t(function(e,t){e.length%4!=0&&(n=e.length+(4-e.length%4),e=i.concat([e,d],n));for(var n,r=[],o=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=4)r.push(o.call(e,s));return r}(e=i.isBuffer(e)?e:new i(e),r),8*e.length),s=(t=r,new i(n)),a=t?s.writeInt32BE:s.writeInt32LE,l=0;l<o.length;l++)a.call(s,o[l],4*l,!0);return s}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,n){(function(t,r,i,o,s,a,l,u,c){i=e("buffer").Buffer;var d=e("./sha"),f=e("./sha256"),p=e("./rng"),h={sha1:d,sha256:f,md5:e("./md5")},m=64,g=new i(m);function _(e,t){var n=h[e=e||"sha1"],r=[];return n||y("algorithm:",e,"is not yet supported"),{update:function(e){return i.isBuffer(e)||(e=new i(e)),r.push(e),e.length,this},digest:function(e){var o=i.concat(r);return o=t?function(e,t,n){i.isBuffer(t)||(t=new i(t)),i.isBuffer(n)||(n=new i(n)),t.length>m?t=e(t):t.length<m&&(t=i.concat([t,g],m));for(var r=new i(m),o=new i(m),s=0;s<m;s++)r[s]=54^t[s],o[s]=92^t[s];return n=e(i.concat([r,n])),e(i.concat([o,n]))}(n,t,o):n(o),r=null,e?o.toString(e):o}}}function y(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(e){return _(e)},n.createHmac=_,n.randomBytes=function(e,t){if(!t||!t.call)return new i(p(e));try{t.call(this,void 0,new i(p(e)))}catch(e){t(e)}};var b,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],w=function(e){n[e]=function(){y("sorry,",e,"is not implemented yet")}};for(b in v)w(v[b])}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,n){(function(n,r,i,o,s,a,l,u,c){var d=e("./helpers");function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,l=r,u=i,c=o;n=h(n,r,i,o,e[s+0],7,-680876936),o=h(o,n,r,i,e[s+1],12,-389564586),i=h(i,o,n,r,e[s+2],17,606105819),r=h(r,i,o,n,e[s+3],22,-1044525330),n=h(n,r,i,o,e[s+4],7,-176418897),o=h(o,n,r,i,e[s+5],12,1200080426),i=h(i,o,n,r,e[s+6],17,-1473231341),r=h(r,i,o,n,e[s+7],22,-45705983),n=h(n,r,i,o,e[s+8],7,1770035416),o=h(o,n,r,i,e[s+9],12,-1958414417),i=h(i,o,n,r,e[s+10],17,-42063),r=h(r,i,o,n,e[s+11],22,-1990404162),n=h(n,r,i,o,e[s+12],7,1804603682),o=h(o,n,r,i,e[s+13],12,-40341101),i=h(i,o,n,r,e[s+14],17,-1502002290),n=m(n,r=h(r,i,o,n,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=m(o,n,r,i,e[s+6],9,-1069501632),i=m(i,o,n,r,e[s+11],14,643717713),r=m(r,i,o,n,e[s+0],20,-373897302),n=m(n,r,i,o,e[s+5],5,-701558691),o=m(o,n,r,i,e[s+10],9,38016083),i=m(i,o,n,r,e[s+15],14,-660478335),r=m(r,i,o,n,e[s+4],20,-405537848),n=m(n,r,i,o,e[s+9],5,568446438),o=m(o,n,r,i,e[s+14],9,-1019803690),i=m(i,o,n,r,e[s+3],14,-187363961),r=m(r,i,o,n,e[s+8],20,1163531501),n=m(n,r,i,o,e[s+13],5,-1444681467),o=m(o,n,r,i,e[s+2],9,-51403784),i=m(i,o,n,r,e[s+7],14,1735328473),n=g(n,r=m(r,i,o,n,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=g(o,n,r,i,e[s+8],11,-2022574463),i=g(i,o,n,r,e[s+11],16,1839030562),r=g(r,i,o,n,e[s+14],23,-35309556),n=g(n,r,i,o,e[s+1],4,-1530992060),o=g(o,n,r,i,e[s+4],11,1272893353),i=g(i,o,n,r,e[s+7],16,-155497632),r=g(r,i,o,n,e[s+10],23,-1094730640),n=g(n,r,i,o,e[s+13],4,681279174),o=g(o,n,r,i,e[s+0],11,-358537222),i=g(i,o,n,r,e[s+3],16,-722521979),r=g(r,i,o,n,e[s+6],23,76029189),n=g(n,r,i,o,e[s+9],4,-640364487),o=g(o,n,r,i,e[s+12],11,-421815835),i=g(i,o,n,r,e[s+15],16,530742520),n=_(n,r=g(r,i,o,n,e[s+2],23,-995338651),i,o,e[s+0],6,-198630844),o=_(o,n,r,i,e[s+7],10,1126891415),i=_(i,o,n,r,e[s+14],15,-1416354905),r=_(r,i,o,n,e[s+5],21,-57434055),n=_(n,r,i,o,e[s+12],6,1700485571),o=_(o,n,r,i,e[s+3],10,-1894986606),i=_(i,o,n,r,e[s+10],15,-1051523),r=_(r,i,o,n,e[s+1],21,-2054922799),n=_(n,r,i,o,e[s+8],6,1873313359),o=_(o,n,r,i,e[s+15],10,-30611744),i=_(i,o,n,r,e[s+6],15,-1560198380),r=_(r,i,o,n,e[s+13],21,1309151649),n=_(n,r,i,o,e[s+4],6,-145523070),o=_(o,n,r,i,e[s+11],10,-1120210379),i=_(i,o,n,r,e[s+2],15,718787259),r=_(r,i,o,n,e[s+9],21,-343485551),n=y(n,a),r=y(r,l),i=y(i,u),o=y(o,c)}return Array(n,r,i,o)}function p(e,t,n,r,i,o){return y((t=y(y(t,e),y(r,o)))<<i|t>>>32-i,n)}function h(e,t,n,r,i,o,s){return p(t&n|~t&r,e,t,i,o,s)}function m(e,t,n,r,i,o,s){return p(t&r|n&~r,e,t,i,o,s)}function g(e,t,n,r,i,o,s){return p(t^n^r,e,t,i,o,s)}function _(e,t,n,r,i,o,s){return p(n^(t|~r),e,t,i,o,s)}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return d.hash(e,f,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,n){(function(e,n,r,i,o,s,a,l,u){t.exports=function(e){for(var t,n=new Array(e),r=0;r<e;r++)!(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,n){(function(n,r,i,o,s,a,l,u,c){var d=e("./helpers");function f(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,r,i,o=Array(80),s=1732584193,a=-271733879,l=-1732584194,u=271733878,c=-1009589776,d=0;d<e.length;d+=16){for(var f=s,m=a,g=l,_=u,y=c,b=0;b<80;b++){o[b]=b<16?e[d+b]:h(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);var v=p(p(h(s,5),(v=a,r=l,i=u,(n=b)<20?v&r|~v&i:!(n<40)&&n<60?v&r|v&i|r&i:v^r^i)),p(p(c,o[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));c=u,u=l,l=h(a,30),a=s,s=v}s=p(s,f),a=p(a,m),l=p(l,g),u=p(u,_),c=p(c,y)}return Array(s,a,l,u,c)}function p(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function h(e,t){return e<<t|e>>>32-t}t.exports=function(e){return d.hash(e,f,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,n){(function(n,r,i,o,s,a,l,u,c){function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function f(e,t){var n,r=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),o=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var s,a,l=0;l<e.length;l+=16){for(var u=i[0],c=i[1],f=i[2],p=i[3],g=i[4],_=i[5],y=i[6],b=i[7],v=0;v<64;v++)o[v]=v<16?e[v+l]:d(d(d((a=o[v-2],h(a,17)^h(a,19)^m(a,10)),o[v-7]),(a=o[v-15],h(a,7)^h(a,18)^m(a,3))),o[v-16]),n=d(d(d(d(b,h(a=g,6)^h(a,11)^h(a,25)),g&_^~g&y),r[v]),o[v]),s=d(h(s=u,2)^h(s,13)^h(s,22),u&c^u&f^c&f),b=y,y=_,_=g,g=d(p,n),p=f,f=c,c=u,u=d(n,s);i[0]=d(u,i[0]),i[1]=d(c,i[1]),i[2]=d(f,i[2]),i[3]=d(p,i[3]),i[4]=d(g,i[4]),i[5]=d(_,i[5]),i[6]=d(y,i[6]),i[7]=d(b,i[7])}return i}var p=e("./helpers"),h=function(e,t){return e>>>t|e<<32-t},m=function(e,t){return e>>>t};t.exports=function(e){return p.hash(e,f,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,n){(function(e,t,r,i,o,s,a,l,u){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1;for(i=e[t+d],d+=f,o=i&(1<<-c)-1,i>>=-c,c+=a;0<c;o=256*o+e[t+d],d+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=u}return(i?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,l=8*o-i-1,u=(1<<l)-1,c=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+c?d/r:d*Math.pow(2,1-c))*r&&(s++,r/=2),u<=s+c?(a=0,s=u):1<=s+c?(a=(t*r-1)*Math.pow(2,i),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;0<l;e[n+f]=255&s,f+=p,s/=256,l-=8);e[n+f-p]|=128*o}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,n){(function(e,n,r,i,o,s,a,l,u){var c,d,f;function p(){}(e=t.exports={}).nextTick=(d="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener,d?function(e){return window.setImmediate(e)}:f?(c=[],window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<c.length&&c.shift()())}),!0),function(e){c.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},74935:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const l=function(e,t){const n={};for(const[r,i]of Object.entries(e))n[r]=t(i);return n}(i.initialCommentInfo,c);for(const[e,n]of t.entries())u(l,n.comments,n.stats.lines[0].length,e,r.projectSkip);const d=o.default.createWriteStream(s.default.join(n,"comments.csv"));d.write(`kind,unique-projects,unique-files,${(0,a.summarizedMeasurement2CsvHeader)("count")},${(0,a.summarizedMeasurement2CsvHeader)("frac-of-lines")}\n`);for(const[e,t]of Object.entries(l)){const{count:n,uniqueProjects:r,uniqueFiles:i,fracOfLines:o}=t,s=(0,a.summarizeMeasurement)(n),l=(0,a.summarizeMeasurement)(o);d.write(`${JSON.stringify(e)},${r.size},${i.size},${(0,a.summarizedMeasurement2Csv)(s)},${(0,a.summarizedMeasurement2Csv)(l)}\n`)}};const i=n(78699),o=r(n(99690)),s=r(n(57975)),a=n(71339),l=n(57012);function u(e,t,n,r,i){for(const[o,a]of Object.entries(t)){const t=e[o];(0,l.guard)(void 0!==t,`key ${o} is not present in the comments post processing`),t.count.push(a),t.fracOfLines.push(a/n),a>0&&(t.uniqueFiles.add(r),t.uniqueProjects.add(r.split(s.default.sep)[i]??""))}}const c=()=>({count:[],uniqueProjects:new Set,uniqueFiles:new Set,fracOfLines:[]})},75032:(e,t,n)=>{const r=n(78311),i=n(93904),{ANY:o}=i,s=n(97638),a=n(50560),l=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],c=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?l:u}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=u}const r=new Set;let i,c,p,h,m,g,_;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,n):"<"===t.operator||"<="===t.operator?c=f(c,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&c){if(p=a(i.semver,c.semver,n),p>0)return null;if(0===p&&(">="!==i.operator||"<="!==c.operator))return null}for(const e of r){if(i&&!s(e,String(i),n))return null;if(c&&!s(e,String(c),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let y=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver,b=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(_=_||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,i)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(h=d(i,e,n),h===e&&h!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),n))return!1;if(c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(m=f(c,e,n),m===e&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),n))return!1;if(!e.operator&&(c||i)&&0!==p)return!1}return!(i&&g&&!c&&0!==p||c&&_&&!i&&0!==p||b||y)},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},f=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},75203:()=>{},75571:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,">",n)},75786:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCommand=void 0;const r=n(76629),i=n(36604),o=n(6777),s=n(72814);function a(e){return{token:e.type,children:[],text:e.text,id:e.id,parent:e.parent?.id??-1,terminal:e.isNamed,line1:e.startPosition.row+1,col1:e.startPosition.column+1,line2:e.endPosition.row+1,col2:e.endPosition.column+1}}function l(e,t,n,r,i,o){let s=`${0===e?"":"\n"}${o.getFormatString({style:2})}`;for(let e=1;e<t;e++)s+=n.has(e)?"  ":"│ ";if(r<t)s+="╰ ";else if(e>0){const r=function(e,t,n){for(let r=e+1;r<t.length;r++){if(t[r].depth<n)return!0;if(t[r].depth===n)return!1}return!0}(e,i,t);s+=r?"╰ ":"├ ",r&&n.add(t)}return s}function u(e){const t=(0,i.extractLocation)(e);return t[0]===t[2]&&t[1]===t[3]?` (${t[0]}:${t[1]})`:t[0]===t[2]?` (${t[0]}:${t[1]}─${t[3]})`:` (${t[0]}:${t[1]}─${t[2]}:${t[3]})`}function c(e,t){let n="";const r=new Set;let o=0;for(const{depth:s,node:a,leaf:c}of e){if(s>10){n+="...";break}const d=o+1<e.length?e[o+1].depth:0;r.delete(s),n+=l(o,s,r,d,e,t),n+=t.reset();const f=a.text,p=u(a),h=(0,i.getTokenType)(a);n+=c?`${h} ${t.format(f?JSON.stringify(f):"",{style:1})}${t.format(p,{style:3})}`:t.format(h,{style:1}),o++}return n}t.parseCommand={description:`Prints ASCII Art of the parsed, unmodified AST, start with '${s.fileProtocol}' to indicate a file`,usageExample:":parse",aliases:["p"],script:!1,fn:async(e,t,n)=>{const i=await(0,o.createParsePipeline)(t,{request:(0,s.requestFromInput)((0,s.removeRQuotes)(n.trim()))}).allRemainingSteps();if("r-shell"===t.name){const t=(0,r.convertPreparedParsedData)((0,r.prepareParsedData)(i.parse.parsed));e.stdout(c(function(e){const t=[{depth:0,node:e}],n=[];for(;t.length>0;){const e=t.pop();if(void 0===e)continue;const r=e.node.children;n.push({...e,leaf:0===r.length}),r.reverse();const i=e.depth+1;for(const e of r)t.push({depth:i,node:e})}return n}(t),e.formatter))}else e.stdout(c(function(e){const t=[{depth:0,node:e}],n=[];for(;t.length>0;){const e=t.pop();if(void 0===e)continue;const r=e.node.children;n.push({depth:e.depth,node:a(e.node),leaf:0===r.length}),r.reverse();const i=e.depth+1;for(const e of r)t.push({depth:i,node:e})}return n}(i.parse.parsed.rootNode),e.formatter))}}},75795:(e,t,n)=>{"use strict";var r=n(6549);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},75880:e=>{"use strict";e.exports=Math.pow},75885:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allFeatureNames=t.ALL_FEATURES=void 0;const r=n(64641),i=n(78699),o=n(71469),s=n(49525),a=n(65299),l=n(85697),u=n(35813),c=n(62243),d=n(13989),f=n(65869),p=n(59205);t.ALL_FEATURES={usedPackages:r.usedPackages,comments:i.comments,definedFunctions:o.definedFunctions,usedFunctions:s.usedFunctions,values:a.values,assignments:l.assignments,loops:u.loops,controlflow:c.controlflow,dataAccess:d.dataAccess,expressionList:f.expressionList,variables:p.variables},t.allFeatureNames=new Set(Object.keys(t.ALL_FEATURES))},76005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeIdMapQuery=function({ast:e},t){return 1!==t.length&&r.log.warn("Id-Map query expects only up to one query, but got",t.length),{".meta":{timing:0},idMap:e.idMap}};const r=n(19742)},76578:e=>{"use strict";e.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},76629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootId=void 0,t.prepareParsedData=function(e){let n;try{n=JSON.parse(`[${e.trim()}]`)}catch(t){throw new Error(`Failed to parse data [${e}]: ${t?.message}`)}(0,i.guard)(Array.isArray(n),(()=>`Expected ${e} to be an array but was not`));const o=new Map(n.map((([e,t,n,i,o,s,a,l,u])=>[o,{line1:e,col1:t,line2:n,col2:i,id:o,parent:s,token:(0,r.removeRQuotes)(a),terminal:l,text:u}]))),s=[];for(const e of o.values())if(e.parent!=t.RootId){const t=o.get(Math.abs(e.parent));t&&(t.children??=[],t.children.push(e))}else s.push(e);return s},t.convertPreparedParsedData=function(e){const n={token:o.RawRType.ExpressionList,text:"",id:t.RootId,parent:t.RootId};if(e.length<=0)return{...n,line1:1,col1:1,line2:1,col2:1,children:[]};const r=[...e].sort(a),i=r[0],l=r[r.length-1];return s({...n,line1:i?.line1??1,col1:i?.col1??1,line2:l?.line2??1,col2:l?.col2??1,children:r,terminal:!1})};const r=n(72814),i=n(57012),o=n(49375);function s(e){return{...e,children:e.children?.sort(a).map(s)??[]}}function a(e,t){return e.line1-t.line1||e.col1-t.col1||t.line2-e.line2||t.col2-e.col2||Number(e.terminal)-Number(t.terminal)||l(e)-l(t)}function l({line1:e,col1:t,col2:n}){return e*(Math.max(t,n)+1)+t}t.RootId=0},76780:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},77199:()=>{},77221:(e,t,n)=>{"use strict";const r=n(65606),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:l,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:d,SymbolHasInstance:f}=n(74641);e.exports=M,M.WritableState=$;const{EventEmitter:p}=n(37007),h=n(80334).Stream,{Buffer:m}=n(48287),g=n(57647),{addAbortSignal:_}=n(30810),{getHighWaterMark:y,getDefaultHighWaterMark:b}=n(13920),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:x,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:O}=n(68526).codes,{errorOrDestroy:I}=g;function N(){}u(M.prototype,h.prototype),u(M,h);const P=d("kOnFinished");function $(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(43559)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function C(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function M(e){const t=this instanceof n(43559);if(!t&&!s(M,this))return new M(e);this._writableState=new $(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&_(e.signal,this)),h.call(this,e),g.construct(this,(()=>{const e=this._writableState;e.writing||q(this,e),z(this,e)}))}function k(e,t,n,i){const o=e._writableState;if("function"==typeof n)i=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new O(n)}else n=o.defaultEncoding;"function"!=typeof i&&(i=N)}if(null===t)throw new T;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!h._isUint8Array(t))throw new v("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let s;return o.ending?s=new A:o.destroyed&&(s=new x("write")),s?(r.nextTick(i,s),I(e,s,!0),s):(o.pendingcb++,function(e,t,n,r,i){const o=t.objectMode?1:n.length;t.length+=o;const s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&i!==N&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(e,o,t,n,i))}function j(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new x("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function L(e,t,n,r){--t.pendingcb,r(n),U(t),I(e,n)}function F(e,t){const n=e._writableState,i=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(L,e,n,t,o):L(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&q(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(D,n.afterWriteTickInfo)):B(e,n,1,o))):I(e,new E)}function D({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,B(e,t,n,r)}function B(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&U(t),z(e,t)}function U(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:i}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new x("write"))}const n=e[P].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new x("end"))}C(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:o}=t,s=n.length-r;if(!s)return;let a=r;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;const r=t.allNoop?N:e=>{for(let t=a;t<n.length;++t)n[t].callback(e)},o=t.allNoop&&0===a?n:i(n,a);o.allBuffers=t.allBuffers,j(e,t,!0,t.length,o,"",r),C(t)}else{do{const{chunk:r,encoding:i,callback:s}=n[a];n[a++]=null,j(e,t,!1,o?1:r.length,r,i,s)}while(a<n.length&&!t.writing);a===n.length?C(t):a>256?(n.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(e,t,n){V(t)&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)I(e,null!=i?i:E());else if(n=!0,t.pendingcb--,i){const n=t[P].splice(0);for(let e=0;e<n.length;e++)n[e](i);I(e,i,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(W,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick(((e,t)=>{V(t)?W(e,t):t.pendingcb--}),e,t)):V(t)&&(t.pendingcb++,W(e,t))))}function W(e,t){t.pendingcb--,t.finished=!0;const n=t[P].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}$.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},a($.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(M,f,{__proto__:null,value:function(e){return!!s(this,e)||this===M&&e&&e._writableState instanceof $}}),M.prototype.pipe=function(){I(this,new S)},M.prototype.write=function(e,t,n){return!0===k(this,e,t,n)},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},M.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!m.isEncoding(e))throw new O(e);return this._writableState.defaultEncoding=e,this},M.prototype._write=function(e,t,n){if(!this._writev)throw new w("_write()");this._writev([{chunk:e,encoding:t}],n)},M.prototype._writev=null,M.prototype.end=function(e,t,n){const i=this._writableState;let s;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=k(this,e,t);n instanceof o&&(s=n)}return i.corked&&(i.corked=1,this.uncork()),s||(i.errored||i.ending?i.finished?s=new R("end"):i.destroyed&&(s=new x("end")):(i.ending=!0,z(this,i,!0),i.ended=!0)),"function"==typeof n&&(s||i.finished?r.nextTick(n,s):i[P].push(n)),this},l(M.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=g.destroy;let H;function J(){return void 0===H&&(H={}),H}M.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[P].length)&&r.nextTick(U,n),G.call(this,e,t),this},M.prototype._undestroy=g.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},M.fromWeb=function(e,t){return J().newStreamWritableFromWritableStream(e,t)},M.toWeb=function(e){return J().newWritableStreamFromStreamWritable(e)}},77469:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerDiagramCommands=function(e,t){e.subscriptions.push(a.commands.registerCommand("vscode-flowr.dataflow",(async()=>{const e=a.window.activeTextEditor;if(e){const n=await(await(0,l.getFlowrSession)()).retrieveDataflowMermaid(e.document);if(n)return{mermaid:n,webview:c("flowr-dataflow","Dataflow Graph",n,t)}}}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.ast",(async()=>{const e=a.window.activeTextEditor;if(e){const n=await(await(0,l.getFlowrSession)()).retrieveAstMermaid(e.document);n&&c("flowr-ast","AST",n,t)}}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.cfg",(async()=>{const e=a.window.activeTextEditor;if(e){const n=await(await(0,l.getFlowrSession)()).retrieveCfgMermaid(e.document);n&&c("flowr-cfg","Control Flow Graph",n,t)}})))};const a=s(n(91398)),l=n(74265),u=n(51451);function c(e,t,n,r){if(n.length>d())return a.window.showErrorMessage("The diagram is too large to be displayed by Mermaid. You can find its code in the flowR output panel instead. Additionally, you can change the maximum diagram length in the extension settings."),void r.appendLine(n);const i=a.window.createWebviewPanel(e,t,a.ViewColumn.Beside,{enableScripts:!0});return i.webview.html=function(e){return`\n<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\n\t<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"><\/script>\n\t<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"><\/script>\n\t<script>\n\t\tmermaid.initialize({\n\t\t\tstartOnLoad: false,\n\t\t\tsecurityLevel: 'loose',\n\t\t\ttheme: '${a.window.activeColorTheme.kind==a.ColorThemeKind.Light?"default":"dark"}',\n\t\t\tmaxTextSize: ${d()},\n\t\t\t// we set maxEdges so that it's never able to trigger, since we only safeguard against maxTextSize\n\t\t\tmaxEdges: Number.MAX_SAFE_INTEGER\n\t\t})\n\t<\/script>\n\n\t<style>\n\t\t.mermaid svg {\n\t\t\tposition: absolute;\n\t\t\tmax-width: 100% !important;\n\t\t\tmax-height: 100% !important;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<pre class="mermaid">\n\t\t${e}\n\t</pre>\n\t<script>\n\t\tmermaid.run().then(() => {\n\t\t\tconst panZoom = svgPanZoom('.mermaid svg', { controlIconsEnabled: true })\n\t\t\taddEventListener("resize", () => panZoom.resize())\n\t\t})\n\t<\/script>\n</body>\n</html>`}(n),i}function d(){return(0,l.getConfig)().get(u.Settings.StyleMermaidMaxTextLength,5e5)}},77529:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.formatter=t.ansiFormatter=t.escape=t.markdownFormatter=t.voidFormatter=t.ColorEffect=void 0,t.italic=function(e,n=t.formatter,r){return n.format(e,{style:3,...r})},t.bold=function(e,n=t.formatter,r){return n.format(e,{style:1,...r})},t.setFormatter=function(e){t.formatter=e},function(e){e[e.Foreground=30]="Foreground",e[e.Background=40]="Background"}(n||(t.ColorEffect=n={})),t.voidFormatter=new class{format(e){return e}getFormatString(e){return""}reset(){return""}},t.markdownFormatter=new class{format(e,t){if(t&&"style"in t)if(1===t.style)e=`**${e}**`;else{if(3!==t.style)throw new Error(`Unsupported font style: ${t.style}`);e=`_${e}_`}let n=e.replaceAll(/\\"/g,"'").replaceAll(/\\/g,"\\\\").replaceAll(/\n/g,"\\\n"),r=n;do{n=r,r=n.replace(/^(?<leading>(&nbsp;)*) /m,"$<leading>&nbsp;")}while(r!==n);return r}getFormatString(e){return""}reset(){return""}},t.escape="[",t.ansiFormatter={reset:()=>`${t.escape}0m`,format(e,t){return`${this.getFormatString(t)}${e}${this.reset()}`},getFormatString(e){if(void 0===e)return"";const n="color"in e?`${e.effect+e.color}`:"",r="style"in e?`${e.style}`:"";return`${t.escape}${n}${""!==r?";":""}${r}m`}},t.formatter=t.ansiFormatter},77631:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},78311:(e,t,n)=>{const r=/\s+/g;class i{constructor(e,t){if(t=s(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!_(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,n=o.get(t);if(n)return n;const r=this.options.loose,i=r?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(i,N(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],f),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],p),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],h),l("caret trim",e);let s=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options)));r&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,y=s.map((e=>new a(e,this.options)));for(const e of y){if(_(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const b=[...u.values()];return o.set(t,b),b}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some((n=>b(n,t)&&e.set.some((e=>b(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1}}e.exports=i;const o=new(n(68794)),s=n(98587),a=n(93904),l=n(57272),u=n(53908),{safeRe:c,t:d,comparatorTrimReplace:f,tildeTrimReplace:p,caretTrimReplace:h}=n(99718),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=n(16874),_=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,b=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},v=(e,t)=>(l("comp",e,t),e=x(e,t),l("caret",e),e=E(e,t),l("tildes",e),e=T(e,t),l("xrange",e),e=O(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const n=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(n,((t,n,r,i,o)=>{let s;return l("tilde",e,t,n,r,i,o),w(n)?s="":w(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:w(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(l("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,l("tilde return",s),s}))},x=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{l("caret",e,t);const n=t.loose?c[d.CARETLOOSE]:c[d.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,s)=>{let a;return l("caret",e,t,n,i,o,s),w(n)?a="":w(i)?a=`>=${n}.0.0${r} <${+n+1}.0.0-0`:w(o)?a="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(l("replaceCaret pr",s),a="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(l("no pr"),a="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),l("caret return",a),a}))},T=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>A(e,t))).join(" ")),A=(e,t)=>{e=e.trim();const n=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(n,((n,r,i,o,s,a)=>{l("xRange",e,n,r,i,o,s,a);const u=w(i),c=u||w(o),d=c||w(s),f=d;return"="===r&&f&&(r=""),a=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(c&&(o=0),s=0,">"===r?(r=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),"<"===r&&(a="-0"),n=`${r+i}.${o}.${s}${a}`):c?n=`>=${i}.0.0${a} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),l("xRange return",n),n}))},O=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),I=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),N=e=>(t,n,r,i,o,s,a,l,u,c,d,f)=>`${n=w(r)?"":w(i)?`>=${r}.0.0${e?"-0":""}`:w(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(d)?`<${u}.${+c+1}.0-0`:f?`<=${u}.${c}.${d}-${f}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),P=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(l(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},78623:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClusterQueryDefinition=void 0;const i=n(77529),o=r(n(16075)),s=n(20757),a=n(82627),l=n(5350);t.ClusterQueryDefinition={executor:s.executeDataflowClusterQuery,asciiSummarizer:(e,t,n,r)=>{const o=n;r.push(`Query: ${(0,i.bold)("dataflow-cluster",e)} (${o[".meta"].timing.toFixed(0)}ms)`),r.push(`   ╰ Found ${o.clusters.length} cluster${1===o.clusters.length?"":"s"}`);for(const n of o.clusters){const o=n.hasUnknownSideEffects?"(has unknown side effect)":"";let s="";e===i.markdownFormatter&&(s=`([marked](${(0,a.graphToMermaidUrl)(t.dataflow.graph,!1,new Set(n.members))}))`),r.push(`      ╰ ${o} {${(0,l.summarizeIdsIfTooLong)(e,n.members)}} ${s}`)}return!0},schema:o.default.object({type:o.default.string().valid("dataflow-cluster").required().description("The type of the query.")}).description("The cluster query calculates and returns all clusters in the dataflow graph.")}},78699:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.comments=t.initialCommentInfo=void 0;const a=s(n(84661)),l=n(74935),u=n(57012),c=n(6737);t.initialCommentInfo={totalAmount:0,roxygenComments:0,import:0,importFrom:0,importMethodsFrom:0,importClassesFrom:0,useDynLib:0,export:0,exportClass:0,exportMethod:0,exportS3Method:0,exportPattern:0};const d=a.parse("//COMMENT"),f=/^'\s*@import\s+(?<package>\S+)/,p=/^'\s*@importFrom\s+(?<package>\S+)(?<fn>( +\S+)+)$/,h=/^'\s*@useDynLib\s+(?<package>\S+)(?<fn>( +\S+)+)?$/,m=/^'\s*@importClassesFrom\s+(?<package>\S+)(?<fn>( +\S+)+)$/,g=/^'\s*@importMethodsFrom\s+(?<package>\S+)(?<fn>( +\S+)+)$/,_=/^'\s*@export/,y=/^'\s*@exportS3Method/,b=/^'\s*@exportClass/,v=/^'\s*@exportMethod/,w=/^'\s*@exportPattern/;function E(e,t,n){return e.map((e=>n.exec(e))).filter(u.isNotNull).flatMap((e=>{const t=e.groups?.package??"<unknown>";return(e.groups?.fn.trim().split(/\s+/)??[]).map((e=>`${JSON.stringify(t)},${e}`))}))}function S(e){const t=e.groups?.package??"<unknown>",n=e.groups?.fn?.trim().split(/\s+/)??[];return 0===n.length?[t]:n.map((e=>`${JSON.stringify(t)},${e}`))}t.comments={name:"Comments",description:"All comments that appear within the document",process(e,n){const r=d.select({node:n.parsedRAst}).map((e=>e.textContent??"#")).map((e=>((0,u.guard)(e.startsWith("#"),`unexpected comment ${e}`),e.slice(1)))).map((e=>e.trim()));e.totalAmount+=r.length;const i=r.filter((e=>e.startsWith("'")));return e.roxygenComments+=i.length,function(e,n,r){const i=n.map((e=>f.exec(e)?.groups?.package)).filter(u.isNotUndefined);e.import+=i.length,(0,c.appendStatisticsFile)(t.comments.name,"import",i,r,!0)}(e,i,n.filepath),function(e,n,r){const i=E(n,0,p);e.importFrom+=i.length,(0,c.appendStatisticsFile)(t.comments.name,"importFrom",i,r,!0)}(e,i,n.filepath),function(e,n,r){const i=n.map((e=>h.exec(e))).filter(u.isNotNull).flatMap(S);e.useDynLib+=i.length,(0,c.appendStatisticsFile)(t.comments.name,"useDynLib",i,r,!0)}(e,i,n.filepath),function(e,n,r){const i=E(n,0,m);e.importClassesFrom+=i.length,(0,c.appendStatisticsFile)(t.comments.name,"importClassesFrom",i,r,!0)}(e,i,n.filepath),function(e,n,r){const i=E(n,0,g);e.importMethodsFrom+=i.length,(0,c.appendStatisticsFile)(t.comments.name,"importMethodsFrom",i,r,!0)}(e,i,n.filepath),function(e,t){e.export+=t.filter((e=>_.test(e))).length,e.exportClass+=t.filter((e=>b.test(e))).length,e.exportMethod+=t.filter((e=>v.test(e))).length,e.exportS3Method+=t.filter((e=>y.test(e))).length,e.exportPattern+=t.filter((e=>w.test(e))).length}(e,i),e},initialValue:t.initialCommentInfo,postProcess:l.postProcess}},78904:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getCriteriaSlicer=function(){return p??=new h,p};const a=s(n(91398)),l=n(74265),u=n(40246),c=n(86598),d=n(79506),f=n(51451);let p;class h{hasDoc=!1;decos;decoratedEditors=[];async sliceFor(e){return await this.update(e)}makeUri(){return(0,u.makeUri)("criteria-slicer","Dependency Slice")}async showReconstruction(){const e=this.makeUri();return(0,u.showUri)(e)}clearSliceDecos(e,t){if(this.decos&&(!e||(e.setDecorations(this.decos.lineSlice,[]),e.setDecorations(this.decos.tokenSlice,[]),t)))if(t)for(const e of a.window.visibleTextEditors)e.document===t&&this.clearSliceDecos(e);else this.decos?.dispose(),this.decos=void 0}async update(e){const t=await async function(e){const t=a.window.activeTextEditor;if(!t)return;const n=await(0,l.getFlowrSession)();if(!n)return;const r=await n.retrieveSlice(e,t.document,!1);return r.sliceElements.length?{...r,editor:t}:{code:"# No slice",sliceElements:[],editor:t}}(e);if(void 0===t)return"";const n=(0,u.getReconstructionContentProvider)(),r=this.makeUri();n.updateContents(r,t.code),this.hasDoc=!0;const i=(0,l.getConfig)().get(f.Settings.StyleOnlyHighlightActiveSelection,!1);for(const e of this.decoratedEditors)e!==t.editor&&(i||d.positionSlicers.has(e.document))&&this.clearSliceDecos(e);return this.decos??=(0,c.makeSliceDecorationTypes)(),(0,c.displaySlice)(t.editor,t.sliceElements,this.decos),this.decoratedEditors.push(t.editor),t.code}}},78921:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DependenciesQueryDefinition=t.WriteFunctions=t.ReadFunctions=t.SourceFunctions=t.LibraryFunctions=t.Unknown=void 0;const i=n(77529),o=n(87247),s=r(n(16075)),a=n(93591);function l(e,t,n,r){if(t.length<=0)return;n.push(`   ╰ ${e}`);const i=t.reduce((function(e,t){const n=e.get(t.functionName);return n?n.push(t):e.set(t.functionName,[t]),e}),new Map);for(const[e,t]of i)n.push(`       ╰ \`${e}\``),n.push(t.map((e=>`           ╰ Node Id: ${e.nodeId}, ${r(e)}`)).join("\n"))}t.Unknown="unknown",t.LibraryFunctions=[{name:"library",argIdx:0,argName:"package"},{name:"require",argIdx:0,argName:"package"},{name:"loadNamespace",argIdx:0,argName:"package"},{name:"attachNamespace",argIdx:0,argName:"ns"},{name:"attach",argIdx:0,argName:"what"},{name:"groundhog.library",argIdx:0,argName:"pkg"},{name:"p_load",argIdx:"unnamed"},{name:"p_load_gh",argIdx:"unnamed"},{name:"from_import",argIdx:0,argName:"package"},{name:"libraries",argIdx:"unnamed"},{name:"shelf",argIdx:"unnamed"}],t.SourceFunctions=[{name:"source",argIdx:0,argName:"file"},{name:"sys.source",argIdx:0,argName:"file"}],t.ReadFunctions=[{name:"read.table",argIdx:0,argName:"file"},{name:"read.csv",argIdx:0,argName:"file"},{name:"read.csv2",argIdx:0,argName:"file"},{name:"read.delim",argIdx:0,argName:"file"},{name:"read.dcf",argIdx:0,argName:"file"},{name:"scan",argIdx:0,argName:"file"},{name:"read.fwf",argIdx:0,argName:"file"},{name:"file",argIdx:1,argName:"open"},{name:"url",argIdx:1,argName:"open"},{name:"load",argIdx:0,argName:"file"},{name:"gzfile",argIdx:1,argName:"open"},{name:"bzfile",argIdx:1,argName:"open"},{name:"download.file",argIdx:0,argName:"url"},{name:"pipe",argIdx:1,argName:"open"},{name:"fifo",argIdx:1,argName:"open"},{name:"unz",argIdx:1,argName:"open"},{name:"matrix",argIdx:0,argName:"data"},{name:"readRDS",argIdx:0,argName:"file"},{name:"readLines",argIdx:0,argName:"con"},{name:"readRenviron",argIdx:0,argName:"path"},{name:"read_csv",argIdx:0,argName:"file"},{name:"read_csv2",argIdx:0,argName:"file"},{name:"read_lines",argIdx:0,argName:"file"},{name:"read_delim",argIdx:0,argName:"file"},{name:"read_dsv",argIdx:0,argName:"file"},{name:"read_fwf",argIdx:0,argName:"file"},{name:"read_tsv",argIdx:0,argName:"file"},{name:"read_table",argIdx:0,argName:"file"},{name:"read_log",argIdx:0,argName:"file"},{name:"read_lines",argIdx:0,argName:"file"},{name:"read_lines_chunked",argIdx:0,argName:"file"},{name:"read.xlsx",argIdx:0,argName:"file"},{name:"read.xlsx2",argIdx:0,argName:"file"},{name:"fread",argIdx:0,argName:"file"},{name:"read_sas",argIdx:0,argName:"file"},{name:"read_sav",argIdx:0,argName:"file"},{name:"read_por",argIdx:0,argName:"file"},{name:"read_dta",argIdx:0,argName:"file"},{name:"read_xpt",argIdx:0,argName:"file"},{name:"read_feather",argIdx:0,argName:"file"},{name:"read.arff",argIdx:0,argName:"file"},{name:"read.dbf",argIdx:0,argName:"file"},{name:"read.dta",argIdx:0,argName:"file"},{name:"read.epiinfo",argIdx:0,argName:"file"},{name:"read.mtp",argIdx:0,argName:"file"},{name:"read.octave",argIdx:0,argName:"file"},{name:"read.spss",argIdx:0,argName:"file"},{name:"read.ssd",argIdx:0,argName:"file"},{name:"read.systat",argIdx:0,argName:"file"},{name:"read.xport",argIdx:0,argName:"file"},{name:"Import",argIdx:0,argName:"file"}],t.WriteFunctions=[{name:"save",argIdx:2,argName:"file"},{name:"save.image",argIdx:0,argName:"file"},{name:"write",argIdx:1,argName:"file"},{name:"dput",argIdx:1,argName:"file"},{name:"dump",argIdx:1,argName:"file"},{name:"write.table",argIdx:1,argName:"file"},{name:"write.csv",argIdx:1,argName:"file"},{name:"saveRDS",argIdx:1,argName:"file"},{name:"print",linkTo:"sink"},{name:"cat",linkTo:"sink",argIdx:1,argName:"file"},{name:"message",linkTo:"sink"},{name:"warning",linkTo:"sink"},{name:"write_csv",argIdx:1,argName:"file"},{name:"write_csv2",argIdx:1,argName:"file"},{name:"write_delim",argIdx:1,argName:"file"},{name:"write_dsv",argIdx:1,argName:"file"},{name:"write_fwf",argIdx:1,argName:"file"},{name:"write_tsv",argIdx:1,argName:"file"},{name:"write_table",argIdx:1,argName:"file"},{name:"write_log",argIdx:1,argName:"file"},{name:"write_sas",argIdx:1,argName:"file"},{name:"write_sav",argIdx:1,argName:"file"},{name:"write_por",argIdx:1,argName:"file"},{name:"write_dta",argIdx:1,argName:"file"},{name:"write_xpt",argIdx:1,argName:"file"},{name:"write_feather",argIdx:1,argName:"file"},{name:"write.arff",argIdx:1,argName:"file"},{name:"write.dbf",argIdx:1,argName:"file"},{name:"write.dta",argIdx:1,argName:"file"},{name:"write.foreign",argIdx:1,argName:"file"},{name:"write.xlsx",argIdx:1,argName:"file"},{name:"write.xlsx2",argIdx:1,argName:"file"},{name:"pdf",argIdx:0,argName:"file"},{name:"jpeg",argIdx:0,argName:"file"},{name:"png",argIdx:0,argName:"file"},{name:"windows",argIdx:0,argName:"file"},{name:"postscript",argIdx:0,argName:"file"},{name:"xfix",argIdx:0,argName:"file"},{name:"bitmap",argIdx:0,argName:"file"},{name:"pictex",argIdx:0,argName:"file"},{name:"cairo_pdf",argIdx:0,argName:"file"},{name:"svg",argIdx:0,argName:"file"},{name:"bmp",argIdx:0,argName:"file"},{name:"tiff",argIdx:0,argName:"file"},{name:"X11",argIdx:0,argName:"file"},{name:"quartz",argIdx:0,argName:"file"},{name:"Export",argIdx:0,argName:"file"}];const u=s.default.array().items(s.default.object({name:s.default.string().required().description("The name of the library function."),argIdx:s.default.number().optional().description("The index of the argument that contains the library name."),argName:s.default.string().optional().description("The name of the argument that contains the library name.")})).optional();t.DependenciesQueryDefinition={executor:a.executeDependenciesQuery,asciiSummarizer:(e,t,n,r)=>{const s=n;return r.push(`Query: ${(0,i.bold)("dependencies",e)} (${(0,o.printAsMs)(s[".meta"].timing,0)})`),l("Libraries",s.libraries,r,(e=>`\`${e.libraryName}\``)),l("Sourced Files",s.sourcedFiles,r,(e=>`\`${e.file}\``)),l("Read Data",s.readData,r,(e=>`\`${e.source}\``)),l("Written Data",s.writtenData,r,(e=>`\`${e.destination}\``)),!0},schema:s.default.object({type:s.default.string().valid("dependencies").required().description("The type of the query."),ignoreDefaultFunctions:s.default.boolean().optional().description("Should the set of functions that are detected by default be ignored/skipped?"),libraryFunctions:u.description("The set of library functions to search for."),sourceFunctions:u.description("The set of source functions to search for."),readFunctions:u.description("The set of data reading functions to search for."),writeFunctions:u.description("The set of data writing functions to search for.")}).description("The dependencies query retrieves and returns the set of all dependencies in the dataflow graph, which includes libraries, sourced files, read data, and written data.")}},78936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultQuadSerializationConfiguration=void 0,t.defaultQuadIdGenerator=f,t.defaultQuadIgnoreIf=h,t.serialize2quads=_,t.graph2quads=function(e,t){return _(e,t)};const r=n(8518),i=e=>r.DataFactory.namedNode(e),o=(e,t,n,i)=>r.DataFactory.quad(e,t,n,i),s=n(22452),a=n(57012),l=n(49995),u=(e,t)=>r.DataFactory.literal(e,t),c=n(19742),d="https://uni-ulm.de/r-ast/";function f(){let e=0;const t=new l.DefaultMap((()=>e++));return(e,n)=>`${n}/${t.get(e)}`}const p=["complexNumber","markedAsInt","info"];function h(){return(e,t)=>void 0===t||p.includes(e)}function m(e,t){return"string"==typeof e?e:e(t)}t.DefaultQuadSerializationConfiguration={ignore:h(),context:"unknown-context",getId:f(),domain:"https://uni-ulm.de/r-ast/"};const g=new r.Writer({format:"N-Quads"});function _(e,n){const r=(0,s.deepMergeObject)(t.DefaultQuadSerializationConfiguration,n);(0,a.guard)((0,s.isObjectOrArray)(e),"cannot serialize non-object to rdf!"),(0,a.guard)(!Array.isArray(e),"cannot serialize arrays (must wrap in object)!"),w=new Set;const i=[];return S(e,i,r),g.quadsToString(i)}function y(e){let t;switch(typeof e){case"string":t="string";break;case"number":t=Number.isInteger(e)?"integer":"decimal";break;case"boolean":t="boolean";break;case"bigint":t="integer";break;default:c.log.warn(`unknown ${typeof e} with ${JSON.stringify(e)}`)}return t?i(`http://www.w3.org/2001/XMLSchema#${t}`):void 0}function b(e,t,n,r,s,a){const l=m(s.context,n);if(void 0!==a){const c=`${t}-${a}`;r.push(o(i(d+s.getId(n,l)),i(d+t),i(d+s.getId(c,l)),i(l))),r.push(o(i(d+s.getId(c,l)),i(d+"value"),u(String(e),y(e)),i(l))),r.push(o(i(d+c),i(d+"order"),u(String(a),i("http://www.w3.org/2001/XMLSchema#integer")),i(l)))}else r.push(o(i(d+s.getId(n,l)),i(d+t),u(String(e),y(e)),i(l)))}function v(e,t,n,r,a){a.ignore(e,t)||E(t)||((0,s.isObjectOrArray)(t)?Array.isArray(t)?function(e,t,n,r,a){for(const[l,u]of t.entries())if(null!=u&&(0,s.isObjectOrArray)(u)){const s=m(a.context,n);r.push(o(i(d+a.getId(n,s)),i(d+e),i(d+a.getId(u,s)),i(s)));const c=t[l+1];if(void 0!==c){const e=a.getId(c,s);r.push(o(i(d+a.getId(u,s)),i(d+"next"),i(d+e),i(s)))}S(u,r,a)}else b(u,e,n,r,a,void 0)}(e,t,n,r,a):function(e,t,n,r,s){const a=m(s.context,n);r.push(o(i(d+s.getId(n,a)),i(d+e),i(d+s.getId(t,a)),i(a))),S(t,r,s)}(e,t,n,r,a):b(t,e,n,r,a,void 0))}let w=new Set;function E(e){if((0,s.isObjectOrArray)(e)&&"id"in e){if(w.has(e.id))return!0;w.add(e.id)}return!1}function S(e,t,n){if(null!=e&&!E(e))if(e instanceof Map)for(const[r,i]of e.entries())v("key-"+String(r),i,e,t,n);else if(e instanceof Set){let r=0;for(const i of e.values())v("idx-"+String(r++),i,e,t,n)}else for(const[r,i]of Object.entries(e))v(r,i,e,t,n)}},79133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processGet=function(e,t,n,c){if(1!==t.length)return s.dataflowLogger.warn(`symbol access with ${e.content} has not 1 argument, skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:c}).information;const d=(0,i.unpackArgument)(t[0]);if(void 0===d||d.type!==l.RType.String)return s.dataflowLogger.warn(`symbol access with ${e.content} has not 1 argument, skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:c}).information;const f={type:l.RType.Symbol,info:d.info,content:(0,a.removeRQuotes)(d.lexeme),lexeme:d.lexeme,location:d.location,namespace:void 0},{information:p,processedArguments:h}=(0,r.processKnownFunctionCall)({name:e,args:(0,o.wrapArgumentsUnnamed)([f],c.completeAst.idMap),rootId:n,data:c}),m=h[0];return m&&p.graph.addEdge(n,m.entryPoint,u.EdgeType.Reads),p};const r=n(92397),i=n(55143),o=n(62027),s=n(22438),a=n(72814),l=n(49375),u=n(34966)},79290:e=>{"use strict";e.exports=RangeError},79506:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PositionSlicer=t.positionSlicers=void 0,t.addCurrentPositions=async function(){const e=a.window.activeTextEditor;if(!e)return;const t=e.selections.map((e=>e.start));await _(t,e.document)},t.getActivePositionSlicer=g,t.disposeActivePositionSlicer=function(){const e=g();return!!e&&(e.dispose(),t.positionSlicers.delete(e.doc),(0,l.updateStatusBar)(),!0)},t.addPositions=_;const a=s(n(91398)),l=n(74265),u=n(40246),c=n(62288),d=n(86598),f=n(67607),p=n(51451),h="doc-slicer",m="Slice";function g(){const e=a.window.activeTextEditor;if(!e)return;const n=e.document;return t.positionSlicers.get(n)}async function _(e,n){const r=t.positionSlicers.get(n)||new y(n);return t.positionSlicers.has(n)||t.positionSlicers.set(n,r),r.togglePositions(e)&&await r.updateOutput(),0===r.offsets.length?(r.dispose(),t.positionSlicers.delete(n),void(0,l.updateStatusBar)()):((0,f.getSelectionSlicer)().clearSliceDecos(void 0,n),r)}t.positionSlicers=new Map;class y{listeners=[];doc;offsets=[];sliceDecos=void 0;positionDeco;disposables=[];constructor(e){this.doc=e,this.positionDeco=(0,d.makeSliceDecorationTypes)().slicedPos,this.disposables.push(a.workspace.onDidChangeTextDocument((async e=>{await this.onDocChange(e)}))),this.disposables.push(a.window.onDidChangeVisibleTextEditors((e=>{e.some((e=>e.document===this.doc))&&this.updateOutput()})))}dispose(){const e=(0,u.getReconstructionContentProvider)(),t=(0,u.makeUri)(h,m);for(e.updateContents(t,void 0),this.positionDeco?.dispose(),this.sliceDecos?.dispose();this.disposables.length>0;)this.disposables.pop()?.dispose();this.offsets=[]}togglePositions(e){let t=e.map((e=>this.normalizeOffset(e)));if(t=t.filter((e=>e>=0)),0===t.length)return!1;let n=!0;for(const e of t)this.offsets.indexOf(e)<0&&(this.offsets.push(e),n=!1);return n&&(this.offsets=this.offsets.filter((e=>!t.includes(e)))),!0}async showReconstruction(){const e=this.makeUri();return(0,u.showUri)(e)}async updateOutput(e=!1){e&&(this.clearSliceDecos(),this.positionDeco.dispose(),this.positionDeco=(0,d.makeSliceDecorationTypes)().slicedPos);const t=(0,u.getReconstructionContentProvider)();this.updateTargetDecos();const n=await this.updateSlices()||"# No slice",r=this.makeUri();t.updateContents(r,n),(0,l.updateStatusBar)()}makeUri(){const e=this.doc.uri.path+` - ${m}`;return(0,u.makeUri)(h,e)}async onDocChange(e){if(e.document!==this.doc)return;if(0==e.contentChanges.length)return;const t=[];for(let n of this.offsets){for(const t of e.contentChanges)if(n=b(n,t),n<0)break;n=this.normalizeOffset(n),n>=0&&!t.includes(n)&&t.push(n)}this.offsets=t,await this.updateOutput()}normalizeOffset(e){if("number"==typeof e){if(e<0)return-1;e=this.doc.positionAt(e)}const t=(0,c.getPositionAt)(e,this.doc);return t?this.doc.offsetAt(t.start):-1}updateTargetDecos(){const e=[];for(const t of this.offsets){const n=this.doc.positionAt(t),r=(0,c.getPositionAt)(n,this.doc);r&&e.push(r)}for(const t of a.window.visibleTextEditors)t.document===this.doc&&(this.sliceDecos||=(0,d.makeSliceDecorationTypes)(),t.setDecorations(this.positionDeco,e))}showErrors=!0;async updateSlices(){const e=await(0,l.getFlowrSession)(),t=this.offsets.map((e=>this.doc.positionAt(e)));if(0===t.length)return void this.clearSliceDecos();const{code:n,sliceElements:r}=await e.retrieveSlice((0,c.makeSlicingCriteria)(t,this.doc,(0,l.isVerbose)()),this.doc,this.showErrors);if(0===r.length)return this.clearSliceDecos(),this.showErrors&&setTimeout((()=>this.setShowErrors()),(0,l.getConfig)().get(p.Settings.ErrorMessageTimer)),void(this.showErrors=!1);for(const e of a.window.visibleTextEditors)e.document===this.doc&&(this.sliceDecos||=(0,d.makeSliceDecorationTypes)(),(0,d.displaySlice)(e,r,this.sliceDecos));return n}clearSliceDecos(){this.sliceDecos?.dispose(),this.sliceDecos=void 0}setShowErrors(){this.showErrors=!0}}function b(e,t){return t.rangeOffset>e?e:t.rangeLength+t.rangeOffset>e?-1:e+(t.text.length-t.rangeLength)}t.PositionSlicer=y},79538:e=>{"use strict";e.exports=ReferenceError},79596:(e,t,n)=>{let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},79612:e=>{"use strict";e.exports=Object},79725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionCommand=void 0,t.retrieveVersionInformation=s,t.printVersionInformation=a;const r=n(87800),i=n(57012),o=/^\d+\.\d+\.\d+/m;async function s(e){const t=(0,r.flowrVersion)().toString(),n=await e.rVersion();return(0,i.guard)(o.test(t),`flowR version ${t} does not match the expected format!`),(0,i.guard)("unknown"===n||"none"===n||o.test(n),`R version ${n} does not match the expected format!`),{flowr:t,r:n,engine:e.name}}async function a(e,t){const{flowr:n,r,engine:i}=await s(t);e.stdout(`Engine: ${i}`),e.stdout(` flowR: ${n}`),e.stdout(` R: ${r}`)}t.versionCommand={description:"Prints the version of flowR as well as the current version of R",aliases:[],usageExample:":version",script:!1,fn:(e,t)=>a(e,t)}},80065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=function(e,t){const{location:n,content:a}=(0,r.retrieveMetaStructure)(t);let l=a;return l.startsWith("[")&&((0,i.guard)(void 0!==e.currentLexeme,"need current lexeme wrapper for too long strings as they are not stored by the R parser post-processor"),l=e.currentLexeme),{type:s.RType.String,location:n,content:(0,o.string2ts)(l),lexeme:l,info:{fullRange:e.currentRange,additionalTokens:[],fullLexeme:e.currentLexeme}}};const r=n(36604),i=n(57012),o=n(48060),s=n(49375)},80334:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:i}=n(74641),{EventEmitter:o}=n(37007);function s(e){o.call(this,e)}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}i(s.prototype,o.prototype),i(s,o),s.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",u));let s=!1;function l(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",l),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return a(n,"error",c),a(e,"error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:s,prependListener:a}},80876:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAllArguments=function({functionName:e,args:t,data:n,finalGraph:c,functionRootId:h,forceArgs:m=[],patchData:g=e=>e}){let _=e.environment,y=e.environment;const b=[],v=[],w=[];let E=-1;for(const e of t){if(E++,n=g(n,E),e===o.EmptyArgument){b.push(o.EmptyArgument),v.push(void 0);continue}const t=(0,i.processDataflowFor)(e,{...n,environment:y});e.type===u.RType.Argument&&e.value&&("all"===m||m[E])&&e.value.type!==u.RType.Number&&e.value.type!==u.RType.String&&e.value.type!==u.RType.Logical&&f(h,t,t.graph,y),v.push(t),_=(0,a.overwriteEnvironment)(_,t.environment);for(const e of[...t.in,...t.unknownReferences]){const t=e.name?(0,l.resolveByName)(e.name,y,s.ReferenceType.Unknown):void 0;if(void 0===t)w.push(e);else{let n=!0;for(const i of t){(0,r.happensInEveryBranch)(i.controlDependencies)&&(n=!1);const t=i,o=p(t?.indicesCollection);(o||void 0===o)&&c.addEdge(e.nodeId,i.nodeId,d.EdgeType.Reads)}n&&w.push(e)}}y=(0,a.overwriteEnvironment)(y,t.environment),c.mergeWith(t.graph),e.type===u.RType.Argument&&e.name?b.push({nodeId:t.entryPoint,name:e.name.content,controlDependencies:void 0,type:s.ReferenceType.Argument}):b.push({nodeId:t.entryPoint,controlDependencies:void 0,type:s.ReferenceType.Argument}),c.addEdge(h,t.entryPoint,d.EdgeType.Argument)}return{finalEnv:_,callArgs:b,remainingReadInArgs:w,processedArguments:v}},t.patchFunctionCall=function({nextGraph:e,rootId:t,name:n,data:r,argumentProcessResult:i}){e.addVertex({tag:c.VertexType.FunctionCall,id:t,name:n.content,environment:r.environment,onlyBuiltin:!1,controlDependencies:r.controlDependencies,args:i.map((e=>void 0===e?o.EmptyArgument:{nodeId:e.entryPoint,controlDependencies:void 0,call:void 0,type:s.ReferenceType.Argument}))});for(const n of i)n&&e.addEdge(t,n.entryPoint,d.EdgeType.Argument)};const r=n(47318),i=n(22476),o=n(25377),s=n(46044),a=n(10682),l=n(85193),u=n(49375),c=n(18841),d=n(34966);function f(e,t,n,r){const i=n.getVertex(t.entryPoint);if(!i)return;if(i.tag!==c.VertexType.Value)if(i.tag===c.VertexType.FunctionDefinition)for(const t of i.exitPoints)n.addEdge(e,t,d.EdgeType.Reads);else for(const r of t.exitPoints)n.addEdge(e,r.nodeId,d.EdgeType.Reads);const o=[...n.vertices(!0)].filter((([,e])=>(0,c.isFunctionDefinitionVertex)(e))).flatMap((([,e])=>e));for(const e of[...t.in,...o.flatMap((e=>e.subflow.in))])if(e.name){const t=e.name?(0,l.resolveByName)(e.name,r,e.type)??[]:[];for(const r of t)n.addEdge(e.nodeId,r.nodeId,d.EdgeType.Reads)}}function p(e){return e?.every((e=>{const t=e.indices.every((e=>"subIndices"in e&&p(e.subIndices)));return e.isContainer||t}))}},81135:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},81325:(e,t)=>{"use strict";function n(e){return JSON.stringify(e)}function r(e,t){return(e=function(e){const t=[];let n;for(const r of e)void 0!==n&&n.name===r.name&&i.has(r.name)||t.push(r),n=r;return t}(e)).map((e=>"select"===e.name&&1===e.args.select.length?{...e,name:"index",args:{index:e.args.select[0]}}:e))}Object.defineProperty(t,"__esModule",{value:!0}),t.optimize=function(e,t){let i=t.slice(),o=n(i);e=function(e){return function(e){return"get"===e.name&&e.args.filter.nameIsRegex&&".*"===e.args.filter.name?{...e,args:{...e.args,filter:{...e.args.filter,name:void 0,nameIsRegex:void 0}}}:e}(e)}(e);let s="{}";for(;o!==s;)s=o,i=r(i),o=n(i);return{generator:e,search:i}};const i=new Set(["first","last"])},81766:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var l=n(48287).Buffer,u=n(63779).inspect,c=u&&u.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,n,r,i=l.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,l.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},81827:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigQueryDefinition=void 0;const i=n(42097),o=n(77529),s=n(87247),a=r(n(16075)),l=n(91884);t.ConfigQueryDefinition={executor:i.executeConfigQuery,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("config",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push(`   ╰ Config:\n${JSON.stringify(i.config,l.jsonReplacer,4)}`),!0},schema:a.default.object({type:a.default.string().valid("config").required().description("The type of the query.")}).description("The config query retrieves the current configuration of the flowR instance.")}},81999:(e,t,n)=>{"use strict";var r,i=n(65606);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=R,R.WritableState=x;var s,a={deprecate:n(94643)},l=n(41396),u=n(48287).Buffer,c=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=n(54347),f=n(66644).getHighWaterMark,p=n(12463).F,h=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,v=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,E=d.errorOrDestroy;function S(){}function x(e,t,s){r=r||n(88101),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(P,e,t),e._writableState.errorEmitted=!0,E(e,r)):(o(r),e._writableState.errorEmitted=!0,E(e,r),P(e,t))}(e,n,r,t,o);else{var s=I(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||O(e,n),r?i.nextTick(A,e,n,s,o):A(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function R(e){var t=this instanceof(r=r||n(88101));if(!t&&!s.call(R,this))return new R(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function T(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function A(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),P(e,t)}function O(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)i[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;i.allBuffers=l,T(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(T(e,t,!1,t.objectMode?1:u.length,u,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(N,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(56698)(R,l),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===R&&e&&e._writableState instanceof x}})):s=function(e){return e instanceof this},R.prototype.pipe=function(){E(this,new _)},R.prototype.write=function(e,t,n){var r,o=this._writableState,s=!1,a=!o.objectMode&&(r=e,u.isBuffer(r)||r instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(e,t){var n=new v;E(e,n),i.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(E(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,r,i,o);return l}(this,o,a,e,t,n)),s},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||O(this,e))},R.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(e,t,n){n(new m("_write()"))},R.prototype._writev=null,R.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),R.prototype.destroy=d.destroy,R.prototype._undestroy=d.undestroy,R.prototype._destroy=function(e,t){t(e)}},82172:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const u={};for(const[e,n]of t.entries()){const t=n.usedPackages;for(const[n,o]of Object.entries(t)){let t=u[n];t||(t=(0,i.emptySummarizedWithProject)(),u[n]=t),t.count.push(o),o>0&&(0,i.recordFilePath)(t,e,r)}}const c=s.default.createWriteStream(a.default.join(n,"loading-functions.csv"));c.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(u)){const n=t,r=(0,l.summarizeMeasurement)(n.count);c.write(`${JSON.stringify(e)},${n.uniqueProjects.size},${n.uniqueFiles.size},${(0,l.summarizedMeasurement2Csv)(r)}\n`)}c.close();const d=new Map;for(const t of Object.keys(o.initialUsedPackageInfos)){const o=f(t,e,n,r);for(const[e,t]of o.entries()){let n=d.get(e);n||(n=(0,i.emptySummarizedWithProject)(),d.set(e,n)),n.count.push(...t.count);for(const e of t.uniqueFiles)n.uniqueFiles.add(e);for(const e of t.uniqueProjects)n.uniqueProjects.add(e)}}const p=a.default.join(n,"all-operators.csv"),h=s.default.createWriteStream(p);h.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of d.entries()){const{count:n,uniqueProjects:r,uniqueFiles:i}=t,o=(0,l.summarizeMeasurement)(n);h.write(`${JSON.stringify(e)},${r.size},${i.size},${(0,l.summarizedMeasurement2Csv)(o)}\n`)}h.close()};const i=n(61685),o=n(64641),s=r(n(40771)),a=r(n(57975)),l=n(71339),u=n(33267),c=n(27454),d=n(83584);function f(e,t,n,r){const o=a.default.join(t,`${e}.txt`);if(!s.default.existsSync(o))return new Map;const f=new Map;(0,u.readLineByLineSync)(o,((e,t)=>{if(0===e.length)return;t%2500==0&&console.log(`    Processing line ${t} from ${o}`);const[n,s]=JSON.parse(e.toString()),a=(0,d.array2bag)(n.map((e=>(0,c.startAndEndsWith)(e,'"')||(0,c.startAndEndsWith)(e,"'")||(0,c.startAndEndsWith)(e,"`")?e.slice(1,-1):e)));for(const[e,t]of a.entries()){let n=f.get(e);n||(n=(0,i.emptySummarizedWithProject)(),f.set(e,n)),n.count.push(t),t>0&&(0,i.recordFilePath)(n,s,r)}}));const p=a.default.join(n,`${e}.csv`),h=s.default.createWriteStream(p);h.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of f.entries()){const{count:n,uniqueProjects:r,uniqueFiles:i}=t,o=(0,l.summarizeMeasurement)(n);h.write(`${JSON.stringify(e)},${r.size},${i.size},${(0,l.summarizedMeasurement2Csv)(o)}\n`)}return h.close(),f}},82175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipelineExecutor=void 0;const r=n(57012),i=n(67481),o=n(39767),s=n(60766);t.PipelineExecutor=class{pipeline;length;input;output={};currentExecutionStage=0;stepCounter=0;constructor(e,t){this.pipeline=e,this.length=e.order.length,this.input=t;const n=(0,i.getConfig)().semantics.environment.overwriteBuiltIns;n.loadDefaults||(o.BuiltInMemory.clear(),o.EmptyBuiltInMemory.clear()),(0,s.registerBuiltInDefinitions)(n.definitions)}getPipeline(){return this.pipeline}getCurrentStage(){return this.currentExecutionStage}switchToRequestStage(){(0,r.guard)(this.stepCounter===this.pipeline.firstStepPerRequest,"First need to complete all steps before switching"),(0,r.guard)(0===this.currentExecutionStage,"Cannot switch to next stage, already in per-request stage."),this.currentExecutionStage=1}getResults(e=!1){return(0,r.guard)(e||this.stepCounter>=this.length,"Without the intermediate flag, the pipeline must be completed before providing access to the results."),this.output}hasNextStep(){return this.stepCounter<this.length&&0!==this.currentExecutionStage||this.stepCounter<this.pipeline.firstStepPerRequest}async nextStep(e){const t=Date.now(),[n,r]=this._doNextStep(e),i=await r;return this.output[n]={...i,".meta":{timing:Date.now()-t}},this.stepCounter++,{name:n,result:i}}_doNextStep(e){const t=this.pipeline.steps.get(this.pipeline.order[this.stepCounter]);return(0,r.guard)(void 0!==t,(()=>`Cannot execute next step, step ${this.pipeline.order[this.stepCounter]} does not exist.`)),void 0!==e&&(0,r.guard)(t.name===e,(()=>`Cannot execute next step, expected step ${JSON.stringify(e)} but got ${t.name}.`)),[t.name,t.processor(this.output,this.input)]}updateRequest(e){const t=this.pipeline.firstStepPerRequest;(0,r.guard)(this.stepCounter>=t,"Cannot reset request prior to once-per-request stage"),this.input={...this.input,...e},this.stepCounter=t;for(let e=t;e<this.length;e++)this.output[this.pipeline.order[e]]=void 0}async allRemainingSteps(e=!0){for(;this.hasNextStep();)await this.nextStep();if(e&&this.stepCounter<this.length&&0===this.currentExecutionStage)for(this.switchToRequestStage();this.hasNextStep();)await this.nextStep();return this.stepCounter<this.length?this.getResults(!0):this.getResults()}}},82178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallTargets=void 0,t.satisfiesCallTargets=m,t.getValueOfArgument=function(e,t,n,i){if(!t)return;const o=n.name?t.args.findIndex((e=>e!==f.EmptyArgument&&e.name===n.name)):-1;let s;if(o<0)s=t.args.filter((e=>e!==f.EmptyArgument&&!e.name)).map(r.getReferenceOfArgument)[n.index];else{const e=t.args[o];s=(0,r.getReferenceOfArgument)(e)}if(void 0===s)return;let a=e.idMap?.get(s);return a?.type===d.RType.Argument&&(a=a.value),a&&(!i||i.includes(a.type))?a:void 0},t.identifyLinkToLastCallRelation=function(e,t,n,{callName:r,ignoreIf:s,cascadeIf:a}){const l=[];return s&&s(e,n)||(0,i.visitInReverseOrder)(t,e,(t=>{if(t===e)return;const i=n.get(t);if(void 0!==i&&i[0].tag===o.VertexType.FunctionCall&&r.test(i[0].name)){const r=a?a(i[0],e,n):p.CascadeAction.Stop;if(r===p.CascadeAction.Skip)return;return"no"===m(i[0].id,n,h.MustIncludeGlobal)||l.push(t),r===p.CascadeAction.Stop}})),l};const r=n(60347),i=n(87371),o=n(18841),s=n(34966),a=n(85193),l=n(46044),u=n(39767),c=n(57012),d=n(49375),f=n(25377),p=n(32787);var h;function m(e,t,n){const r=t.get(e);if(void 0===r||r[0].tag!==o.VertexType.FunctionCall)return"no";const[i,d]=r,f=[...d].filter((([,e])=>(0,s.edgeIncludesType)(e.types,s.EdgeType.Calls))).map((([e])=>e));let p=!1;if(void 0===i.environment)p=!0;else{const e=(0,a.resolveByName)(i.name,i.environment,l.ReferenceType.Unknown);e?.some((e=>e.definedAt===u.BuiltIn))&&(p=!0)}switch(n){case h.Any:return f;case h.OnlyGlobal:return 0===f.length?p?[u.BuiltIn]:[]:"no";case h.MustIncludeGlobal:return p||0===f.length?[...f,u.BuiltIn]:"no";case h.OnlyLocal:return!p&&f.length>0?f:"no";case h.MustIncludeLocal:return f.length>0?p?[...f,u.BuiltIn]:f:"no";default:(0,c.assertUnreachable)(n)}}!function(e){e.OnlyGlobal="global",e.MustIncludeGlobal="must-include-global",e.OnlyLocal="local",e.MustIncludeLocal="must-include-local",e.Any="any"}(h||(t.CallTargets=h={}))},82429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processList=function(e,t,n,l){if(!(0,a.getConfig)().solver.pointerTracking)return(0,s.processKnownFunctionCall)({name:e,args:t,rootId:n,data:l}).information;const u=[];for(const e of t){if(e===r.EmptyArgument||e.type!==i.RType.Argument||void 0===e.name)continue;let t={lexeme:e.name.content,nodeId:e.info.id};if(e.value?.type===i.RType.Symbol){const n=(0,o.resolveByName)(e.value.lexeme,l.environment),r=n?.flatMap((e=>e.indicesCollection??[]));r&&(t={...t,subIndices:r})}u.push(t)}const c={indices:u,isContainer:!0};return(0,s.processKnownFunctionCall)({name:e,args:t,rootId:n,data:l},[c]).information};const r=n(25377),i=n(49375),o=n(85193),s=n(92397),a=n(67481)},82627:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRange=f,t.printIdentifier=m,t.graphToMermaid=b,t.graphToMermaidUrl=function(e,t,n){return(0,i.mermaidCodeToUrl)(b({graph:e,includeEnvironments:t,mark:n}).string)},t.diffGraphsToMermaid=v,t.diffGraphsToMermaidUrl=function(e,t,n){return(0,i.mermaidCodeToUrl)(v(e,t,n))};const r=n(57012),i=n(19339),o=n(60347),s=n(46044),a=n(25377),l=n(34966),u=n(18841),c=n(73326),d=n(49375);function f(e){return void 0===e?"??-??":e[0]===e[2]?e[1]===e[3]?`${e[0]}.${e[1]}`:`${e[0]}.${e[1]}-${e[3]}`:`${e[0]}.${e[1]}-${e[2]}.${e[3]}`}function p(e){if(void 0===e)return"??";if(e===a.EmptyArgument)return"[empty]";if((0,o.isNamedArgument)(e)){const t=e.controlDependencies?", :may:"+e.controlDependencies.map((e=>e.id+(e.when?"+":"-"))).join(","):"";return`${e.name} (${e.nodeId}${t})`}if((0,o.isPositionalArgument)(e)){const t=e.controlDependencies?" (:may:"+e.controlDependencies.map((e=>e.id+(e.when?"+":"-"))).join(",")+")":"";return`${e.nodeId}${t}`}return"??"}function h(e,t,n){return`${e}->${t}["${[...n].join(":")}"]`}function m(e){return`**${e.name}** (id: ${e.nodeId}, type: ${s.ReferenceTypeReverseMapping.get(e.type)},${e.controlDependencies?" cds: {"+e.controlDependencies.map((e=>e.id+(e.when?"+":"-"))).join(",")+"},":""} def. @${e.definedAt})`}function g(e){if(void 0===e)return["??"];if(e.id===c.BuiltInEnvironment.id)return["Built-in"];const t=[...g(e.parent),`${e.id}${"-".repeat(40)}`],n=Math.max(...[...e.memory.keys()].map((e=>e.length)));for(const[r,i]of e.memory.entries()){const e=`${r}:`;t.push(`  ${e.padEnd(n+1," ")} {${i.map(m).join(", ")}}`)}return t}function _(e,t,n,o,s){const a=e.tag===u.VertexType.FunctionCall,{open:c,close:m}=function(e){let t,n;return"function-definition"===e||"variable-definition"===e?(t="[",n="]"):e===u.VertexType.FunctionCall?(t="[[",n="]]"):"value"===e?(t="{{",n="}}"):(t="([",n="])"),{open:t,close:n}}(e.tag);e.environment&&t.includeEnvironments&&(e.environment.level>0||0!==e.environment.current.memory.size)&&t.nodeLines.push(`    %% Environment of ${n} [level: ${e.environment.level}]:`,g(e.environment.current).map((e=>`    %% ${e}`)).join("\n"));const _=t.rootGraph.idMap?.get(e.id),b=_?.lexeme??(_?.type===d.RType.ExpressionList?_?.grouping?.[0]?.lexeme:"")??"??";if(t.simplified){const e="**"+(0,i.escapeMarkdown)(_?`${b}`:"??")+"**"+(_?`\n*${_.type}*`:"");t.nodeLines.push(`    ${o}${n}${c}"\`${e}\`"${m}`)}else{const r=(0,i.escapeMarkdown)(_?`[${_.type}] ${b}`:"??"),s=e.controlDependencies?", :may:"+e.controlDependencies.map((e=>e.id+(e.when?"+":"-"))).join(","):"",l=_?.info.fullRange??_?.location??(_?.type===d.RType.ExpressionList?_?.grouping?.[0].location:void 0);t.nodeLines.push(`    ${o}${n}${c}"\`${r}${r.length>10?"\n      ":" "}(${n}${s})\n      *${f(l)}*${a?function(e){const t=[];for(const n of e)t.push(p(n));return 0===t.length?"":`\n    (${t.join(", ")})`}(e.args):""}\`"${m}`)}s?.has(n)&&t.nodeLines.push(`    style ${o}${n} ${t.markStyle.vertex} `),t.rootGraph.unknownSideEffects.has(n)&&t.nodeLines.push(`    style ${o}${n} stroke:red,stroke-width:5px; `);const v=t.rootGraph.get(n,!0);(0,r.guard)(void 0!==v,`node ${n} must be found`);const w=(e.controlDependencies??[]).map((e=>[e.id,{types:new Set([e.when?"CD-True":"CD-False"])}]));for(const[e,r]of[...v[1],...w]){const i="number"==typeof r.types?new Set((0,l.splitEdgeTypes)(r.types)):r.types,s=h(o+n,o+e,i);t.presentEdges.has(s)||(t.presentEdges.add(s),t.edgeLines.push(`    ${o}${n} --\x3e|"${[...i].map((e=>"number"==typeof e?(0,l.edgeTypeToName)(e):e)).join(", ")}"| ${o}${e}`),t.mark?.has(n+"->"+e)&&t.edgeLines.push(`    linkStyle ${t.presentEdges.size-1} ${t.markStyle.edge}`),(i.has("CD-True")||i.has("CD-False"))&&t.edgeLines.push(`    linkStyle ${t.presentEdges.size-1} stroke:gray,color:gray;`))}"function-definition"===e.tag&&function(e,t,n,r,o=""){if(void 0===n)return;const s=`${o}flow-${e}`;if(r.simplified){const t=r.rootGraph.idMap,n=t?.get(e),o=n?.info.fullLexeme??n?.lexeme??"??";r.nodeLines.push(`\nsubgraph "${s}" ["${(0,i.escapeMarkdown)(o??"function")}"]`)}else r.nodeLines.push(`\nsubgraph "${s}" [function ${e}]`);const a=y(n.graph,{graph:r.rootGraph,rootGraph:r.rootGraph,idPrefix:o,includeEnvironments:r.includeEnvironments,mark:r.mark,prefix:null,simplified:r.simplified});r.nodeLines.push(...a.nodeLines),r.edgeLines.push(...a.edgeLines);for(const e of a.presentEdges)r.presentEdges.add(e);for(const[e,t]of[["purple",n.in],["green",n.out],["orange",n.unknownReferences]])for(const n of t)r.mark?.has(n.nodeId)||r.nodeLines.push(`    style ${o}${n.nodeId} stroke:${e},stroke-width:4px; `);r.nodeLines.push("end"),r.edgeLines.push(`${o}${e} -.-|function| ${s}\n`);const l=h(o+e,s,new Set(["function"]));r.presentEdges.add(l)}(n,e.exitPoints,e.subflow,t,o)}function y(e,{simplified:t,graph:n,prefix:r="flowchart TD",idPrefix:i="",includeEnvironments:o=!t,mark:s,rootGraph:a,presentEdges:l=new Set,markStyle:u={vertex:"stroke:teal,stroke-width:7px,stroke-opacity:.8;",edge:"stroke:teal,stroke-width:4.2px,stroke-opacity:.8"}}){const c={nodeLines:null===r?[]:[r],edgeLines:[],presentEdges:l,mark:s,rootGraph:a??n,includeEnvironments:o,markStyle:u,simplified:t};for(const[t,r]of n.vertices(!0))e.has(t)&&_(r,c,t,i,s);return c}function b(e){const t=y(e.graph.rootIds(),e);return{string:`${t.nodeLines.join("\n")}\n${t.edgeLines.join("\n")}`,mermaid:t}}function v(e,t,n){const{string:r,mermaid:i}=b({graph:e.graph,prefix:"",idPrefix:`l-${e.label}`,includeEnvironments:!0,mark:e.mark}),{string:o}=b({graph:t.graph,prefix:"",idPrefix:`r-${t.label}`,includeEnvironments:!0,mark:t.mark,presentEdges:i.presentEdges});return`${n}flowchart TD\nsubgraph "${e.label}"\n${r}\nend\nsubgraph "${t.label}"\n${o}\nend`}},82682:(e,t,n)=>{"use strict";var r=n(69600),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var s,a;arguments.length>=3&&(s=n),a=e,"[object Array]"===i.call(a)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,s):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,s):function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,s)}},82856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processors=void 0,t.produceDataFlowGraph=function(e,n,i){const o=Array.isArray(n);let s;s=o?n[0]:n;const a={parser:e,completeAst:i,environment:(0,g.initializeCleanEnvironments)(),processors:t.processors,currentRequest:s,controlDependencies:void 0,referenceChain:[(0,m.requestFingerprint)(s)]};let l=(0,r.processDataflowFor)(i.ast,a);if(o)for(let e=1;e<n.length;e++)l=(0,_.standaloneSourceFile)(n[e],a,`root-${e}`,l);return(0,w.updateNestedFunctionCalls)(l.graph,l.environment),function(e,t){let n;for(const r of t.unknownSideEffects){if("object"!=typeof r)continue;n??=(0,y.extractCFG)(e,t).graph;const i=(0,v.identifyLinkToLastCallRelation)(r.id,n,t,r.linkTo);for(const e of i)t.addEdge(r.id,e,b.EdgeType.Reads);i.length>0&&t.unknownSideEffects.delete(r)}}(i,l.graph),l};const r=n(22476),i=n(97366),o=n(24088),s=n(98327),a=n(73403),l=n(63549),u=n(63872),c=n(27999),d=n(55087),f=n(62027),p=n(44441),h=n(49375),m=n(72814),g=n(73326),_=n(19744),y=n(15459),b=n(34966),v=n(82178),w=n(90271);t.processors={[h.RType.Number]:c.processValue,[h.RType.String]:c.processValue,[h.RType.Logical]:c.processValue,[h.RType.Comment]:i.processUninterestingLeaf,[h.RType.LineDirective]:i.processUninterestingLeaf,[h.RType.Symbol]:o.processSymbol,[h.RType.Access]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.operator,[e.accessed,...e.access]),[h.RType.BinaryOp]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.operator,[e.lhs,e.rhs]),[h.RType.Pipe]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[e.lhs,e.rhs]),[h.RType.UnaryOp]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.operator,[e.operand]),[h.RType.ForLoop]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[e.variable,e.vector,e.body]),[h.RType.WhileLoop]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[e.condition,e.body]),[h.RType.RepeatLoop]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[e.body]),[h.RType.IfThenElse]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[e.condition,e.then,e.otherwise]),[h.RType.Break]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[]),[h.RType.Next]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[]),[h.RType.FunctionCall]:s.processFunctionCall,[h.RType.FunctionDefinition]:(e,t)=>(0,u.processAsNamedCall)(e,t,e.lexeme,[...e.parameters,e.body]),[h.RType.Parameter]:a.processFunctionParameter,[h.RType.Argument]:l.processFunctionArgument,[h.RType.ExpressionList]:(e,t)=>(0,d.processNamedCall)({type:h.RType.Symbol,info:e.info,content:e.grouping?.[0].content??"{",lexeme:e.grouping?.[0].lexeme??"{",location:e.location??(0,p.rangeFrom)(-1,-1,-1,-1),namespace:e.grouping?.[0].content?void 0:"base"},(0,f.wrapArgumentsUnnamed)(e.children,t.completeAst.idMap),e.info.id,t)}},83141:(e,t,n)=>{"use strict";var r=n(15003).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},83430:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,n]){const r=t.shift();return"f"===n?r.toFixed(6):"j"===n?JSON.stringify(r):"s"===n&&"object"==typeof r?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},83584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitArrayOn=function(e,t){const n=[];let r=[],i=!1;for(const o of e)t(o)?(n.push(r),r=[],i=!0):r.push(o);return(i||r.length>0)&&n.push(r),n},t.partitionArray=function(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return[n,r]},t.allPermutations=function*(e){yield e.slice();const t=new Array(e.length).fill(0);let n=1;for(;n<e.length;)if(t[n]>=n)t[n]=0,++n;else{const r=n%2&&t[n],i=e[n];e[n]=e[r],e[r]=i,++t[n],n=1,yield e.slice()}},t.partition=function(e,t){const n=[],r=[];for(const i of e)t(i)?n.push(i):r.push(i);return[n,r]},t.getUniqueCombinationsOfSize=function*(e,t=0,n=e.length){if((0,r.guard)(t>=0&&t<=n,"minSize must be at least 0 and at most maxSize"),(0,r.guard)(n>=t&&n<=e.length,"maxSize must be at least minSize and at most the length of the array"),t!==n||1!==t)yield*function*r(i,o,s){i.length>=t&&(s&&(yield i),i.length>=n)||o>=e.length||(yield*r(i.concat(e[o]),o+1,!0),yield*r(i,o+1,!1))}([],0,!0);else for(const t of e)yield[t]},t.arraySum=function(e){let t=0;for(const n of e)t+=n;return t},t.array2bag=function(e){const t=new Map;for(const n of e)t.set(n,(t.get(n)??0)+1);return t},t.arrayEqual=function(e,t){if(void 0===e||void 0===t)return e===t;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};const r=n(57012)},84407:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataflowQueryDefinition=void 0;const i=n(4429),o=n(77529),s=n(87247),a=n(82627),l=r(n(16075));t.DataflowQueryDefinition={executor:i.executeDataflowQuery,asciiSummarizer:(e,t,n,r)=>{const i=n;return r.push(`Query: ${(0,o.bold)("dataflow",e)} (${(0,s.printAsMs)(i[".meta"].timing,0)})`),r.push(`   ╰ [Dataflow Graph](${(0,a.graphToMermaidUrl)(i.graph)})`),!0},schema:l.default.object({type:l.default.string().valid("dataflow").required().description("The type of the query.")}).description("The dataflow query simply returns the dataflow graph, there is no need to pass it multiple times!")}},84661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.makeVariableResolver=t.makeNSResolver=t.makeFunctionResolver=t.convertValue=t.installXPathSupport=t.select1=t.selectWithResolver=t.useNamespaces=t.select=t.evaluate=t.XPathContext=t.XNumber=t.XString=t.XBoolean=t.XNodeSet=t.Expression=t.XPathEvaluator=t.VariableResolver=t.FunctionResolver=t.NamespaceResolver=t.BarOperation=t.NodeTest=t.Step=t.XPathResult=t.XPathParser=t.XPath=void 0;var r=n(40394);Object.defineProperty(t,"XPath",{enumerable:!0,get:function(){return r.XPath}});var i=n(74272);Object.defineProperty(t,"XPathParser",{enumerable:!0,get:function(){return i.XPathParser}});var o=n(15305);Object.defineProperty(t,"XPathResult",{enumerable:!0,get:function(){return o.XPathResultImpl}});var s=n(35459);Object.defineProperty(t,"Step",{enumerable:!0,get:function(){return s.Step}});var a=n(45550);Object.defineProperty(t,"NodeTest",{enumerable:!0,get:function(){return a.NodeTest}});var l=n(9705);Object.defineProperty(t,"BarOperation",{enumerable:!0,get:function(){return l.BarOperation}});var u=n(3629);Object.defineProperty(t,"NamespaceResolver",{enumerable:!0,get:function(){return u.NamespaceResolverImpl}});var c=n(67608);Object.defineProperty(t,"FunctionResolver",{enumerable:!0,get:function(){return c.FunctionResolverImpl}});var d=n(19592);Object.defineProperty(t,"VariableResolver",{enumerable:!0,get:function(){return d.VariableResolverImpl}});var f=n(1726);Object.defineProperty(t,"XPathEvaluator",{enumerable:!0,get:function(){return f.XPathEvaluatorImpl}});var p=n(52950);Object.defineProperty(t,"Expression",{enumerable:!0,get:function(){return p.Expression}}),Object.defineProperty(t,"XNodeSet",{enumerable:!0,get:function(){return p.XNodeSet}}),Object.defineProperty(t,"XBoolean",{enumerable:!0,get:function(){return p.XBoolean}}),Object.defineProperty(t,"XString",{enumerable:!0,get:function(){return p.XString}}),Object.defineProperty(t,"XNumber",{enumerable:!0,get:function(){return p.XNumber}}),Object.defineProperty(t,"XPathContext",{enumerable:!0,get:function(){return p.XPathContext}});var h=n(67909);Object.defineProperty(t,"evaluate",{enumerable:!0,get:function(){return h.evaluate}}),Object.defineProperty(t,"select",{enumerable:!0,get:function(){return h.select}}),Object.defineProperty(t,"useNamespaces",{enumerable:!0,get:function(){return h.useNamespaces}}),Object.defineProperty(t,"selectWithResolver",{enumerable:!0,get:function(){return h.selectWithResolver}}),Object.defineProperty(t,"select1",{enumerable:!0,get:function(){return h.select1}}),Object.defineProperty(t,"installXPathSupport",{enumerable:!0,get:function(){return h.installXPathSupport}});var m=n(16827);Object.defineProperty(t,"convertValue",{enumerable:!0,get:function(){return m.convertValue}}),Object.defineProperty(t,"makeFunctionResolver",{enumerable:!0,get:function(){return m.makeFunctionResolver}}),Object.defineProperty(t,"makeNSResolver",{enumerable:!0,get:function(){return m.makeNSResolver}}),Object.defineProperty(t,"makeVariableResolver",{enumerable:!0,get:function(){return m.makeVariableResolver}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return m.parse}})},85178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processLibrary=function(e,t,n,l){if(1!==t.length)return i.dataflowLogger.warn(`Currently only one-arg library-likes are allows (for ${e.content}), skipping`),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:l,hasUnknownSideEffect:!0}).information;const u=(0,o.unpackArgument)(t[0]);if(void 0===u||u.type!==s.RType.Symbol)return i.dataflowLogger.warn("No library name provided, skipping"),(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:l,hasUnknownSideEffect:!0}).information;const c={type:s.RType.String,info:u.info,lexeme:u.lexeme,location:u.location,content:{quotes:"none",str:u.content}};return(0,r.processKnownFunctionCall)({name:e,args:(0,a.wrapArgumentsUnnamed)([c],l.completeAst.idMap),rootId:n,data:l,hasUnknownSideEffect:!0}).information};const r=n(92397),i=n(22438),o=n(55143),s=n(49375),a=n(62027)},85193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveByName=_,t.resolvesToBuiltInConstant=function(e,t,n){if(void 0===e)return i.Ternary.Never;const r=_(e,t,o.ReferenceType.Constant);if(void 0===r)return i.Ternary.Never;let s=!0,a=!1;for(const e of r)e.type===o.ReferenceType.BuiltInConstant&&e.value===n?a=!0:s=!1;return s?i.Ternary.Always:a?i.Ternary.Maybe:i.Ternary.Never},t.resolveToConstants=y,t.getAliases=function(e,t,n){const r=new Set;for(const i of e){const e=t.getVertex(i);if(void 0===e)return;const o=b[e.tag](i,t,n);for(const e of o??[])r.add(e)}return[...r]},t.resolveToValues=v,t.resolveValueOfVariable=function(e,t,n){const r=(0,u.getConfig)().solver.variables;switch(r){case u.VariableResolve.Alias:return v(e,t,n);case u.VariableResolve.Builtin:return y(e,t);case u.VariableResolve.Disabled:return[];default:(0,c.assertUnreachable)(r)}};const r=n(73326),i=n(95758),o=n(46044),s=n(47318),a=n(17949),l=n(18841),u=n(67481),c=n(57012),d=o.ReferenceType.Function|o.ReferenceType.BuiltInFunction|o.ReferenceType.Unknown|o.ReferenceType.Argument|o.ReferenceType.Parameter,f=o.ReferenceType.Variable|o.ReferenceType.Parameter|o.ReferenceType.Argument|o.ReferenceType.Unknown,p=o.ReferenceType.Constant|o.ReferenceType.BuiltInConstant|o.ReferenceType.Unknown,h=o.ReferenceType.BuiltInConstant|o.ReferenceType.Unknown,m=o.ReferenceType.BuiltInFunction|o.ReferenceType.Unknown,g={[o.ReferenceType.Unknown]:()=>!0,[o.ReferenceType.Function]:({type:e})=>(0,o.isReferenceType)(e,d),[o.ReferenceType.Variable]:({type:e})=>(0,o.isReferenceType)(e,f),[o.ReferenceType.Constant]:({type:e})=>(0,o.isReferenceType)(e,p),[o.ReferenceType.Parameter]:()=>!0,[o.ReferenceType.Argument]:()=>!0,[o.ReferenceType.BuiltInConstant]:({type:e})=>(0,o.isReferenceType)(e,h),[o.ReferenceType.BuiltInFunction]:({type:e})=>(0,o.isReferenceType)(e,m)};function _(e,t,n=o.ReferenceType.Unknown){let i,a=t.current;const l=g[n];do{const t=a.memory.get(e);if(void 0!==t){const e=t.filter(l);if(e.length===t.length&&t.every((e=>(0,s.happensInEveryBranch)(e.controlDependencies))))return t;e.length>0&&(i??=[],i.push(...e))}a=a.parent}while(a.id!==r.BuiltInEnvironment.id);const u=a.memory.get(e);return i?void 0===u?i:[...i,...u]:u}function y(e,t){if(void 0===e)return;const n=_(e,t,o.ReferenceType.Constant);return n?.map((e=>e.value))}const b={[l.VertexType.Value]:e=>[e],[l.VertexType.Use]:function(e,t,n){const r=[],i=(0,a.recoverName)(e,t.idMap);if(void 0===i)return;const s=_(i,n);if(void 0!==s){for(const e of s)if(e.type===o.ReferenceType.Variable){if(void 0===e.value)return;r.push(...e.value)}else{if(e.type!==o.ReferenceType.Constant&&e.type!==o.ReferenceType.BuiltInConstant)return;r.push(e.nodeId)}return r}},[l.VertexType.FunctionCall]:()=>{},[l.VertexType.FunctionDefinition]:()=>{},[l.VertexType.VariableDefinition]:()=>{}};function v(e,t,n){if(void 0===e)return;const r=_(e,t);if(void 0===r)return;const i=[];for(const e of r)if(e.type===o.ReferenceType.BuiltInConstant)i.push(e.value);else if(e.type===o.ReferenceType.BuiltInFunction);else if(void 0!==e.value){if(0===e.value.length)return;for(const t of e.value){const e=n?.get(t)?.content;void 0!==e&&i.push(e)}}return 0!=i.length?i:void 0}},85586:(e,t,n)=>{"use strict";const{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:s}=n(74641),{Buffer:a}=n(48287),{inspect:l}=n(56017);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return a.alloc(0);const t=a.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)o(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){const t=a.allocUnsafe(e),n=e;let r=this.head,i=0;do{const a=r.data;if(!(e>a.length)){e===a.length?(o(t,a,n-e),++i,r.next?this.head=r.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),n-e),this.head=r,r.data=a.slice(e));break}o(t,a,n-e),e-=a.length,++i}while(null!==(r=r.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},85697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignments=t.AssignmentOperators=void 0;const r=n(67102),i=n(99637),o=n(6945),s=n(49375),a=n(19154),l={assignmentOperator:{},assigned:(0,r.emptyCommonSyntaxTypeCounts)(),deepestNesting:0,nestedOperatorAssignment:0};t.AssignmentOperators=new Set(a.Operators.filter((e=>"assignment"===a.OperatorDatabase[e].usedAs))),t.assignments={name:"Assignments",description:"all ways to assign something in R",process:(e,n)=>(function(e,n){const i=[];(0,o.visitAst)(n.normalizedRAst.ast,(n=>{if(n.type===s.RType.BinaryOp&&t.AssignmentOperators.has(n.operator))switch(i.length>0&&(e.nestedOperatorAssignment++,e.deepestNesting=Math.max(e.deepestNesting,i.length)),i.push(n),e.assignmentOperator[n.operator]=(e.assignmentOperator[n.operator]??0n)+1n,n.operator){case"->":case"->>":e.assigned=(0,r.updateCommonSyntaxTypeCounts)(e.assigned,n.lhs);break;default:e.assigned=(0,r.updateCommonSyntaxTypeCounts)(e.assigned,n.rhs)}}),(e=>{e.type===s.RType.BinaryOp&&"assignment"===e.flavor&&i.pop()}))}(e,n),e),initialValue:l,postProcess:i.postProcess}},85721:(e,t,n)=>{"use strict";const r=n(42825),i=n(25018),o=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=o,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=r.Stream,e.exports.default=e.exports},86136:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathExpressionImpl=void 0;const r=n(67608),i=n(3629),o=n(40318),s=n(19592),a=n(74272),l=n(15305),u=n(52950);class c{static getOwnerDocument(e){return(0,o.isDocument)(e)?e:e.ownerDocument}static detectHtmlDom(e){if(!e)return!1;const t=c.getOwnerDocument(e);try{return null==t||t.implementation.hasFeature("HTML","2.0")}catch(e){return!0}}xpath;context;constructor(e,{vr:t=new s.VariableResolverImpl,nr:n=new i.NamespaceResolverImpl,fr:o=new r.FunctionResolverImpl,p:l=new a.XPathParser}){this.xpath=l.parse(e),this.context=new u.XPathContext(t,n,o)}evaluate(e,t,n){this.context.expressionContextNode=e,this.context.caseInsensitive=c.detectHtmlDom(e);const r=this.xpath.evaluate(this.context);return new l.XPathResultImpl(r,t)}}t.XPathExpressionImpl=c},86547:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.FlowrServerSession=void 0;const a=s(n(7300)),l=s(n(91398)),u=s(n(51591)),c=n(74265),d=n(51451),f=n(32066),p=n(15459),h=n(67820),m=n(29942),g=n(62288),_=n(6945),y=n(60347),b=n(12865);t.FlowrServerSession=class{state;flowrVersion;rVersion;working=!1;outputChannel;connection;idCounter=0;constructor(e){this.outputChannel=e,this.state="inactive",(0,c.updateStatusBar)()}async initialize(){this.state="connecting",(0,c.updateStatusBar)();const e=(0,c.getConfig)().get(d.Settings.ServerConnectionType,"auto");return this.connect(e,e),this.awaitResponse().then((e=>{const t=JSON.parse(e);this.rVersion=t.versions.r,this.flowrVersion=t.versions.flowr,(0,c.updateStatusBar)()}))}setWorking(e){this.working=e,(0,c.updateStatusBar)()}destroy(){this.connection?.destroy()}connect(e,t){let n=(0,c.getConfig)().get(d.Settings.ServerHost,"localhost");const r=(0,c.getConfig)().get(d.Settings.ServerPort,1042);n.startsWith("ws://")?(n=n.substring(5),e=t="websocket"):n.startsWith("wss://")&&(n=n.substring(6),e=t="websocket-secure");const[i,o]=w(n);this.outputChannel.appendLine(`Connecting to flowR server using ${t} at ${i}:${r}/${o}/`),this.connection=(0,c.isWeb)()?new S("websocket"!==t):"tcp"==t?new v:new E("websocket"!==t),this.connection.connect(n,r,(()=>{this.state="connected",(0,c.updateStatusBar)(),this.outputChannel.appendLine("Connected to flowR server")})),this.connection.on("error",(t=>{if(this.outputChannel.appendLine(`flowR server error: ${t.message}`),"auto"==e&&this.connection instanceof E)this.connect(e,this.connection.secure?"websocket":"tcp");else{this.state="inactive",(0,c.updateStatusBar)();const e="Use local shell instead",n="Open connection settings";l.window.showErrorMessage(`The flowR server connection reported an error: ${t.message}`,n,e).then((t=>{t===e?(0,c.establishInternalSession)((0,c.isWeb)()?"tree-sitter":void 0):t===n&&l.commands.executeCommand("workbench.action.openSettings","vscode-flowr.server")}))}})),this.connection.on("close",(()=>{this.outputChannel.appendLine("flowR server connection closed"),this.state="not connected",(0,c.updateStatusBar)()})),this.connection.on("data",(e=>this.handleResponse(String(e))))}currentMessageBuffer="";handleResponse(e){e.endsWith("\n")?(e=this.currentMessageBuffer+e,this.currentMessageBuffer="",(0,c.isVerbose)()&&this.outputChannel.appendLine("Received: "+e),this.onceOnLineReceived?.(e),this.onceOnLineReceived=void 0,this.setWorking(!1),(0,c.updateStatusBar)()):this.currentMessageBuffer+=e}onceOnLineReceived;sendCommand(e){return!!this.connection&&((0,c.isVerbose)()&&this.outputChannel.appendLine("Sending: "+JSON.stringify(e)),this.connection.write(JSON.stringify(e)+"\n"),!0)}async sendCommandWithResponse(e){this.setWorking(!0),(0,c.updateStatusBar)();const t=this.awaitResponse();return this.sendCommand(e),JSON.parse(await t)}awaitResponse(){return new Promise((e=>{this.onceOnLineReceived=e}))}async retrieveDataflowMermaid(e){const t=await this.requestFileAnalysis(e);return(0,f.dataflowGraphToMermaid)({...t.results.dataflow,graph:y.DataflowGraph.fromJson(t.results.dataflow.graph)})}async retrieveAstMermaid(e){const t=await this.requestFileAnalysis(e);return(0,h.normalizedAstToMermaid)(t.results.normalize.ast)}async retrieveCfgMermaid(e){const t={...(await this.requestFileAnalysis(e)).results.normalize,idMap:new b.BiMap};return(0,m.cfgToMermaid)((0,p.extractCFG)(t),t)}async retrieveSlice(e,t){const n=await this.requestFileAnalysis(t),r=new Map;(0,_.visitAst)(n.results.normalize.ast,(e=>{"named"===e.flavor&&(e.named=!0),e.location&&r.set(e.info.id,e.location)}));const i=await this.sendCommandWithResponse({type:"request-slice",id:String(this.idCounter++),filetoken:"@tmp",criterion:e}),o=(0,g.makeSliceElements)(i.results.slice.result,(e=>r.get(e)));return(0,c.isVerbose)()&&this.outputChannel.appendLine("slice: "+JSON.stringify([...i.results.slice.result])),{code:i.results.reconstruct.code,sliceElements:o}}async requestFileAnalysis(e,t="@tmp"){return await this.sendCommandWithResponse({type:"request-file-analysis",id:String(this.idCounter++),filename:e.fileName,filetoken:t,format:"json",content:(0,g.consolidateNewlines)(e.getText())})}async retrieveQuery(e,t){return await this.requestFileAnalysis(e,"@query"),[await this.sendCommandWithResponse({type:"request-query",id:String(this.idCounter++),filetoken:"@query",query:t}),!1]}runRepl(e){return l.window.showErrorMessage("The flowR server session does not support REPLs at the moment"),Promise.resolve()}};class v{socket;connect(e,t,n){this.socket=a.createConnection(t,e,n)}on(e,t){this.socket?.on(e,t)}write(e){this.socket?.write(e)}destroy(){this.socket?.destroy()}}function w(e){const t=e.split("/");return[t[0],t.slice(1).join("/")]}class E{secure;socket;constructor(e){this.secure=e}connect(e,t,n){const[r,i]=w(e);this.socket=new u.WebSocket(`${this.secure?"wss":"ws"}://${r}:${t}/${i}`),this.socket.on("open",n)}on(e,t){this.socket?.on("data"==e?"message":e,t)}write(e){this.socket?.send(e)}destroy(){this.socket?.close()}}class S{secure;socket;constructor(e){this.secure=e}connect(e,t,n){const[r,i]=w(e);this.socket=new WebSocket(`${this.secure?"wss":"ws"}://${r}:${t}/${i}/`),this.socket.addEventListener("open",n)}on(e,t){this.socket?.addEventListener("data"==e?"message":e,(e=>t(e?.data??e)))}write(e){this.socket?.send(e)}destroy(){this.socket?.close()}}},86598:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerSliceCommands=function(e,t){e.subscriptions.push(a.commands.registerCommand("vscode-flowr.slice.cursor",(async()=>await(0,c.getSelectionSlicer)().sliceSelectionOnce()))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.internal.slice.dependency",(async e=>{const n=e.getNodeId(),r=e.getLocation();if(n){const e=a.window.activeTextEditor,i=(0,p.getCriteriaSlicer)();t.appendLine(`Slicing for ${n}`);const o=await i.sliceFor(r&&e?(0,h.makeSlicingCriteria)([new a.Position(r[0]-1,r[1]-1)],e?.document,(0,l.isVerbose)()):[`$${n}`]);return setTimeout((()=>{i.showReconstruction()}),20),e&&r&&setTimeout((()=>{e.revealRange(new a.Range(r[0]-1,r[1]-1,r[2]-1,r[3]),a.TextEditorRevealType.InCenter)}),50),o}}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.internal.goto.dependency",(e=>{const t=e.getNodeId(),n=e.getLocation();if(t){const e=a.window.activeTextEditor;e&&n&&setTimeout((()=>{e.revealRange(new a.Range(n[0]-1,n[1]-1,n[2]-1,n[3]),a.TextEditorRevealType.InCenter)}),50)}}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.slice.clear",(()=>{!function(){if(!a.window.activeTextEditor)return;if((0,d.disposeActivePositionSlicer)())return;(0,c.getSelectionSlicer)().clearSelectionSlice();const e=(0,p.getCriteriaSlicer)();e.hasDoc=!1,e.clearSliceDecos()}()}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.slice.follow.cursor",(async()=>{await(0,c.getSelectionSlicer)().toggleFollowSelection()}))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.slice.show.in.editor",(async()=>await async function(){const e=(0,d.getActivePositionSlicer)();return e?await e.showReconstruction():await(0,c.showSelectionSliceInEditor)()}()))),e.subscriptions.push(a.commands.registerCommand("vscode-flowr.slice.position",(async()=>{await(0,d.addCurrentPositions)()}))),a.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration(`${u.Settings.Category}`)){(0,c.getSelectionSlicer)().clearSliceDecos();for(const[,e]of d.positionSlicers)e.updateOutput(!0)}}))},t.displaySlice=function(e,t,n){const r=new Set(t.map((e=>e.location[0]-1)));switch((0,l.getConfig)().get(u.Settings.StyleSliceDisplay)){case"tokens":{const r=[];for(const e of t){const t=new a.Range(e.location[0]-1,e.location[1]-1,e.location[2]-1,e.location[3]);r.push(t)}e.setDecorations(n.tokenSlice,r);break}case"text":{if(0===r.size)return;const t=[];for(let n=0;n<e.document.lineCount;n++)r.has(n)||t.push({range:new a.Range(n,0,n,e.document.lineAt(n).text.length)});e.setDecorations(n.lineSlice,t);break}case"diff":{const t=[];for(let n=0;n<e.document.lineCount;n++)r.has(n)||t.push(e.document.lineAt(n).text);const n=(0,f.makeUri)("slice-diff-view","Slice Diff View");(0,f.getReconstructionContentProvider)().updateContents(n,t.join("\n")),a.commands.executeCommand("vscode.diff",n,e.document.uri,"Slice Diff View",{viewColumn:a.ViewColumn.Beside,preserveFocus:!0});break}}},t.makeSliceDecorationTypes=function(){const e=(0,l.getConfig)(),t=e.get("style.tokenBackgroundColor","green");return{lineSlice:a.window.createTextEditorDecorationType({opacity:e.get(u.Settings.StyleSliceOpacity)?.toString()}),tokenSlice:a.window.createTextEditorDecorationType({backgroundColor:`${t}`}),slicedPos:a.window.createTextEditorDecorationType({before:{contentText:"→",backgroundColor:`${t}`,border:`2px solid ${t}`},border:`2px solid ${t}`}),dispose(){this.lineSlice.dispose(),this.tokenSlice.dispose(),this.slicedPos.dispose()}}};const a=s(n(91398)),l=n(74265),u=n(51451),c=n(67607),d=n(79506),f=n(40246),p=n(78904),h=n(62288)},86675:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSitterExecutor=t.DEFAULT_TREE_SITTER_WASM_PATH=t.DEFAULT_TREE_SITTER_R_WASM_PATH=void 0;const i=r(n(12812)),o=r(n(36158)),s=n(67481);t.DEFAULT_TREE_SITTER_R_WASM_PATH="//tree-sitter-r.wasm",t.DEFAULT_TREE_SITTER_WASM_PATH="//tree-sitter.wasm";class a{name="tree-sitter";parser;static language;static async initTreeSitter(){const e=(0,s.getEngineConfig)("tree-sitter"),n=e?.treeSitterWasmPath??t.DEFAULT_TREE_SITTER_WASM_PATH;await i.default.init({locateFile:(e,t)=>e.endsWith("tree-sitter.wasm")?n:t+e});const r=e?.wasmPath??t.DEFAULT_TREE_SITTER_R_WASM_PATH;a.language=await i.default.Language.load(r)}constructor(){this.parser=new i.default,this.parser.setLanguage(a.language)}rVersion(){return Promise.resolve("none")}treeSitterVersion(){return this.parser.getLanguage().version}parse(e){let t;return t="file"===e.request?o.default.readFileSync(e.content,"utf8"):e.content,this.parser.parse(t)}close(){this.parser.delete()}}t.TreeSitterExecutor=a},87093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeCallContextQueries=function({dataflow:{graph:e},ast:t},n){const r=Date.now(),o=new a.TwoLayerCollector,{promotedQueries:g,requiresCfg:_}=function(e){let t=!1;return{promotedQueries:e.map((e=>f(e)?(t=!0,{...e,callName:e.callNameExact?p(e.callName):new RegExp(e.callName),fileFilter:e.fileFilter&&{...e.fileFilter,filter:new RegExp(e.fileFilter.filter)},linkTo:{...e.linkTo,callName:new RegExp(e.linkTo.callName)}}):{...e,callName:e.callNameExact?p(e.callName):new RegExp(e.callName),fileFilter:e.fileFilter&&{...e.fileFilter,filter:new RegExp(e.fileFilter.filter)}})),requiresCfg:t}}(n);let y;_&&(y=(0,s.extractCFG)(t,e));const b=g.filter((e=>e.includeAliases));for(const[n,r]of e.vertices(!0))if(r.tag===i.VertexType.FunctionCall){if(b.length>0){const t=h(n,e);for(const[e,i]of t.entries())for(const t of b)t.callName.test(e)&&o.add(t.kind??".",t.subkind??".",(0,l.compactRecord)({id:n,name:r.name,aliasRoots:i}))}for(const i of g.filter((e=>e.callName.test(r.name)))){const s=t.idMap.get(n)?.info.file;if(!m(s,i.fileFilter))continue;let a,d;if(!(i.callTargets&&(a=(0,u.satisfiesCallTargets)(n,e,i.callTargets),"no"===a)||c(n,e))){if(y&&f(i)){const t=(0,u.identifyLinkToLastCallRelation)(n,y.graph,e,i.linkTo);t&&(d=t)}o.add(i.kind??".",i.subkind??".",(0,l.compactRecord)({id:n,name:r.name,calls:a,linkedIds:d}))}}}return function(e){for(const[,t]of e.store)for(const[e,n]of t){const r=new Set,i=n.filter((e=>{const t=JSON.stringify(e);return!r.has(t)&&(r.add(t),!0)}));t.set(e,i)}}(o),{".meta":{timing:Date.now()-r},kinds:d(o)}};const r=n(17949),i=n(18841),o=n(34966),s=n(15459),a=n(15616),l=n(22452),u=n(82178);function c(e,t){const n=t.ingoingEdges(e);return void 0!==n&&[...n.values()].some((({types:e})=>(0,o.edgeIncludesType)(e,o.EdgeType.NonStandardEvaluation)))}function d(e){const t={};for(const[n,r]of e.store){const e={};for(const[t,n]of r){Array.isArray(e[t])||(e[t]=[]),e[t]??=[];const r=e[t];for(const e of n)r.push(e)}t[n]={subkinds:e}}return t}function f(e){return"linkTo"in e&&void 0!==e.linkTo}function p(e){return new RegExp(`^(${e})$`)}function h(e,t){const n=new Map,s=new Set,a=[[(0,r.recoverContent)(e,t)??"",e]];for(;a.length>0;){const[l,u]=a.shift();if(s.has(u))continue;if(s.add(u),u!==e){const e=n.get(l);e?e.push(u):n.set(l,[u])}const c=t.get(u);if(void 0===c)continue;const[d,f]=c;if(d.tag!==i.VertexType.FunctionCall){const e=[...f].filter((([,{types:e}])=>(0,o.edgeIncludesType)(e,o.EdgeType.Reads|o.EdgeType.DefinedBy|o.EdgeType.DefinedByOnCall))).map((([e])=>[(0,r.recoverContent)(e,t)??"",e]));a.push(...e);continue}let p=o.EdgeType.Calls|o.EdgeType.Reads|o.EdgeType.DefinedBy|o.EdgeType.DefinedByOnCall;u!==e&&(p|=o.EdgeType.Returns);const h=[...f].filter((([,t])=>(0,o.edgeIncludesType)(t.types,p)&&(e!==u||!(0,o.edgeIncludesType)(t.types,o.EdgeType.Argument)))).map((([e])=>e));for(const e of h)a.push([(0,r.recoverContent)(e,t)??(0,r.recoverContent)(u,t)??"",e])}return n}function m(e,t){return void 0===t||(void 0===e?t.includeUndefinedFiles??!0:t.filter.test(e))}},87247:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.date2string=function(e=new Date){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}-${e.getMilliseconds()}`},t.printAsMs=function(e,t=2){return`${e.toFixed(t)} ms`}},87371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visitInReverseOrder=function(e,t,n){const r=new Set,i=[t];for(;i.length>0;){const t=i.pop();if(r.has(t))continue;if(r.add(t),n(t))continue;const o=e.outgoing(t)??[];for(const[e]of o)i.push(e)}}},87584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processExpressionList=function(e,t,n,f){const h=t.map((e=>(0,a.unpackArgument)(e)));y.dataflowLogger.trace((()=>`[expr list] with ${h.length} expressions`));let{environment:m}=f;const g=new Set,b=new Map,v=new c.DataflowGraph(f.completeAst.idMap),S=[],x=[];let R=0;const T=[];let A;for(const e of h){if(y.dataflowLogger.trace(`processing expression ${++R} of ${h.length}`),void 0===e){T.push(void 0);continue}f={...f,environment:m};const t=(0,i.processDataflowFor)(e,f);T.push(t),v.mergeWith(t.graph),A=t,x.length>0&&(t.out=(0,u.makeAllMaybe)(t.out,v,t.environment,!0),t.in=(0,u.makeAllMaybe)(t.in,v,t.environment,!1),t.unknownReferences=(0,u.makeAllMaybe)(t.unknownReferences,v,t.environment,!1)),(0,r.addNonDefaultExitPoints)(x,t.exitPoints),S.push(...t.out),y.dataflowLogger.trace(`expression ${R} of ${h.length} has ${t.unknownReferences.length} unknown nodes`),w(t,m,g,b,v),m=x.length>0?(0,_.overwriteEnvironment)(m,t.environment):t.environment,m=E((0,o.linkFunctionCalls)(v,f.completeAst.idMap,t.graph),m,v);for(const{nodeId:e}of t.out)g.add(e);if((0,r.alwaysExits)(t)){A=void 0;break}}y.dataflowLogger.trace(`expression list exits with ${b.size} remaining read names`),A&&x.push({type:0,nodeId:A.entryPoint,controlDependencies:f.controlDependencies});const O=[...b.values()].flat(),I=f.completeAst.idMap.get(n),N=I?.grouping;if(N){O.push({nodeId:n,name:e.content,controlDependencies:f.controlDependencies,type:d.ReferenceType.Function}),(0,l.patchFunctionCall)({nextGraph:v,rootId:n,name:e,data:f,argumentProcessResult:T});for(const e of x)1!==e.type&&0!==e.type||v.addEdge(n,e.nodeId,p.EdgeType.Returns)}return{unknownReferences:[],in:O,out:S,environment:m,graph:v,entryPoint:N?n:T.find(s.isNotUndefined)?.entryPoint??n,exitPoints:N?[{nodeId:n,type:0,controlDependencies:f.controlDependencies}]:x}};const r=n(47318),i=n(22476),o=n(56533),s=n(57012),a=n(55143),l=n(80876),u=n(73326),c=n(60347),d=n(46044),f=n(85193),p=n(34966),h=n(18841),m=n(54856),g=n(39767),_=n(10682),y=n(22438),b=/^\.\.\d+$/;function v(e,t,n,i,o){const s=e.name&&b.test(e.name)?"...":e.name,a=s?(0,f.resolveByName)(s,t,e.type):void 0;if(void 0===a||a.some((e=>!n.has(e.nodeId)||!(0,r.happensInEveryBranch)(e.controlDependencies)))){const t=i.get(s);t?t?.some((t=>t.nodeId===e.nodeId&&t.name===e.name&&t.controlDependencies===e.controlDependencies))||t.push(e):i.set(s,[e])}if(void 0!==a)for(const t of a)o.addEdge(e,t,p.EdgeType.Reads)}function w(e,t,n,r,i){for(const o of[...e.in,...e.unknownReferences])v(o,t,n,r,i)}function E(e,t,n){for(const{functionCall:r,called:i}of e){const e=n.getVertex(r,!0)?.controlDependencies;for(const o of i){(0,s.guard)(o.tag===h.VertexType.FunctionDefinition,"called function must be a function definition");let i=o.environment;for(;i.level>t.level;)i=(0,m.popLocalEnvironment)(i);let a=i.current,l=!1;for(;void 0!==a&&a.id!==u.BuiltInEnvironment.id;){for(const e of a.memory.values())for(const t of e)t.definedAt!==g.BuiltIn&&(l=!0,n.addEdge(t.nodeId,r,p.EdgeType.SideEffectOnCall));a=a.parent}l&&(t=(0,_.overwriteEnvironment)(t,i,e))}}return t}},87752:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doNotAutoSelect=function(e){return!1}},87800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flowrVersion=function(){return new r.SemVer(i)};const r=n(99589),i="2.2.5"},87927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryOperation=void 0;const r=n(52950);class i extends r.Expression{lhs;rhs;constructor(e,t){super(),this.lhs=e,this.rhs=t}}t.BinaryOperation=i},88101:(e,t,n)=>{"use strict";var r=n(65606),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var o=n(46891),s=n(81999);n(56698)(c,o);for(var a=i(s.prototype),l=0;l<a.length;l++){var u=a[l];c.prototype[u]||(c.prototype[u]=s.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},88310:(e,t,n)=>{e.exports=i;var r=n(37007).EventEmitter;function i(){r.call(this)}n(56698)(i,r),i.Readable=n(46891),i.Writable=n(81999),i.Duplex=n(88101),i.Transform=n(59083),i.PassThrough=n(3681),i.finished=n(14257),i.pipeline=n(5267),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},88595:()=>{},89353:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(e){for(var t=[],n=1,r=0;n<e.length;n+=1,r+=1)t[r]=e[n];return t}(arguments),a=n(0,i.length-s.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(o=Function("binder","return function ("+function(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var t=i.apply(this,r(s,arguments));return Object(t)===t?t:this}return i.apply(e,r(s,arguments))})),i.prototype){var c=function(){};c.prototype=i.prototype,o.prototype=new c,c.prototype=null}return o}},89365:(e,t,n)=>{"use strict";const r=n(65606),{AbortError:i,codes:o}=n(68526),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=o,{kEmptyObject:l,once:u}=n(56017),{validateAbortSignal:c,validateFunction:d,validateObject:f,validateBoolean:p}=n(2224),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=n(74641),{isClosed:_,isReadable:y,isReadableNodeStream:b,isReadableStream:v,isReadableFinished:w,isReadableErrored:E,isWritable:S,isWritableNodeStream:x,isWritableStream:R,isWritableFinished:T,isWritableErrored:A,isNodeStream:O,willEmitClose:I,kIsClosedPromise:N}=n(136);let P;const $=()=>{};function C(e,t,o){var p,h;if(2===arguments.length?(o=t,t=l):null==t?t=l:f(t,"options"),d(o,"callback"),c(t.signal,"options.signal"),o=u(o),v(e)||R(e))return function(e,t,o){let s=!1,a=$;if(t.signal)if(a=()=>{s=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(a);else{P=P||n(56017).addAbortListener;const r=P(t.signal,a),i=o;o=u(((...t)=>{r[g](),i.apply(e,t)}))}const l=(...t)=>{s||r.nextTick((()=>o.apply(e,t)))};return m(e[N].promise,l,l),$}(e,t,o);if(!O(e))throw new s("stream",["ReadableStream","WritableStream","Stream"],e);const C=null!==(p=t.readable)&&void 0!==p?p:b(e),M=null!==(h=t.writable)&&void 0!==h?h:x(e),k=e._writableState,j=e._readableState,L=()=>{e.writable||B()};let F=I(e)&&b(e)===C&&x(e)===M,D=T(e,!1);const B=()=>{D=!0,e.destroyed&&(F=!1),(!F||e.readable&&!C)&&(C&&!U||o.call(e))};let U=w(e,!1);const q=()=>{U=!0,e.destroyed&&(F=!1),(!F||e.writable&&!M)&&(M&&!D||o.call(e))},V=t=>{o.call(e,t)};let z=_(e);const W=()=>{z=!0;const t=A(e)||E(e);return t&&"boolean"!=typeof t?o.call(e,t):C&&!U&&b(e,!0)&&!w(e,!1)?o.call(e,new a):!M||D||T(e,!1)?void o.call(e):o.call(e,new a)},G=()=>{z=!0;const t=A(e)||E(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},H=()=>{e.req.on("finish",B)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?M&&!k&&(e.on("end",L),e.on("close",L)):(e.on("complete",B),F||e.on("abort",W),e.req?H():e.on("request",H)),F||"boolean"!=typeof e.aborted||e.on("aborted",W),e.on("end",q),e.on("finish",B),!1!==t.error&&e.on("error",V),e.on("close",W),z?r.nextTick(W):null!=k&&k.errorEmitted||null!=j&&j.errorEmitted?F||r.nextTick(G):(C||F&&!y(e)||!D&&!1!==S(e))&&(M||F&&!S(e)||!U&&!1!==y(e))?j&&e.req&&e.aborted&&r.nextTick(G):r.nextTick(G);const J=()=>{o=$,e.removeListener("aborted",W),e.removeListener("complete",B),e.removeListener("abort",W),e.removeListener("request",H),e.req&&e.req.removeListener("finish",B),e.removeListener("end",L),e.removeListener("close",L),e.removeListener("finish",B),e.removeListener("end",q),e.removeListener("error",V),e.removeListener("close",W)};if(t.signal&&!z){const s=()=>{const n=o;J(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(s);else{P=P||n(56017).addAbortListener;const r=P(t.signal,s),i=o;o=u(((...t)=>{r[g](),i.apply(e,t)}))}}return J}e.exports=C,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=l),null!==(n=t)&&void 0!==n&&n.cleanup&&(p(t.cleanup,"cleanup"),r=t.cleanup),new h(((n,i)=>{const o=C(e,t,(e=>{r&&o(),e?i(e):n()}))}))}},89801:()=>{},89962:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){(function(e,t,n,r){const i=new Map,d=new Map(["parse","eval","deparse","quote","body","formals","body","environment","new.env","assign","get","setGeneric","R6Class"].map((e=>[e,s.default.createWriteStream(o.default.join(r,`${e}.csv`))])));for(const[,e]of d)e.write("filepath,location,namespace,inspected by,classification,notes\n");(0,u.readLineByLineSync)(o.default.join(e,`${a.AllCallsFileBase}.txt`),((e,r)=>function(e,t,n,r,i,s){t%2500==0&&console.log(`    [${(0,c.date2string)(new Date)}] Used functions processed ${t} lines`);const[a,l]=r,u=new Map;for(const[e,t,r,c,d]of a){const a=e&&s.get(e);a&&a.write(`${JSON.stringify(l)},${t?.[0]??"?"}:${t?.[1]??"?"},${c??'""'},,,\n`);const f=((c&&""!==c?`${c}::${e??""}`:e)??"")+(1===d?"-"+(l??""):""),p=n.get(l??"")?.stats.lines[0].length;let h=u.get(f);h||(h=[new Set,new Set,[],[],[]],u.set(f,h));const m=l?.split(o.default.sep)[i.projectSkip];h[0].add(m??""),h[1].add(l??""),h[2].push(1),h[3].push(r),t&&p&&h[4].push(1===p?1:(t[0]-1)/(p-1))}for(const[t,n]of u.entries()){let r=e.get(t);r||(r=[new Set,new Set,[],[],[]],e.set(t,r));for(const e of n[0])r[0].add(e);for(const e of n[1])r[1].add(e);r[2].push([n[2].length]),r[3].push(n[3]),r[4].push(n[4])}}(i,r,t,JSON.parse(String(e)),n,d)));for(const[,e]of d)e.close();d.clear(),console.log(`    [${(0,c.date2string)(new Date)}] Used functions process completed, start to write out function info`);const f=s.default.createWriteStream(o.default.join(r,"function-calls.csv")),p=["total","args","line-frac"].flatMap(l.summarizedMeasurement2CsvHeader).join(",");f.write(`function,unique-projects,unique-files,${p}\n`);for(const[e,[n,r,o,s,a]]of i.entries()){const i=(0,l.summarizeMeasurement)(o.flat(),t.size),u=(0,l.summarizeMeasurement)(s.flat(),t.size),c=(0,l.summarizeMeasurement)(a.flat());f.write(`${JSON.stringify(e??"unknown")},${n.size},${r.size},${(0,l.summarizedMeasurement2Csv)(i)},${(0,l.summarizedMeasurement2Csv)(u)},${(0,l.summarizedMeasurement2Csv)(c)}\n`)}f.close()})(e,t,r,n),console.log(`    [${(0,c.date2string)(new Date)}] Used functions reading completed, summarizing info...`),function(e,t){const n={averageCall:[],nestedCalls:[],deepestNesting:[],emptyArgs:[],unnamedCalls:[],args:[]};for(const t of e.values()){const e=t.usedFunctions;n.averageCall.push([e.allFunctionCalls]),n.nestedCalls.push([e.nestedFunctionCalls]),n.deepestNesting.push([e.deepestNesting]),n.emptyArgs.push([(0,d.bigint2number)(e.args[0])]),n.unnamedCalls.push([e.unnamedCalls]);for(const[t,r]of Object.entries(e.args))if(0!==Number(t)){let e=n.args[Number(t)];e||(e=(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),n.args[Number(t)]=e),(0,i.appendCommonSyntaxTypeCounter)(e,r)}}console.log(`    [${(0,c.date2string)(new Date)}] Used functions metadata reading completed, summarizing and writing to file`),function(e,t){const n=s.default.createWriteStream(o.default.join(e,"function-calls-meta.csv"));n.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`),n.write(`average-call,${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.averageCall.flat()))}\n`),n.write(`nested-calls,${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.nestedCalls.flat()))}\n`),n.write(`deepest-nesting,${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.deepestNesting.flat()))}\n`),n.write(`empty-args,${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.emptyArgs.flat()))}\n`),n.write(`unnamed-calls,${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.unnamedCalls.flat()))}\n`),n.close()}(t,n);for(const[e,r]of n.args.entries()){if(!r)continue;const n=s.default.createWriteStream(o.default.join(t,`function-calls-arg-${e}.csv`));n.write(`kind,name,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(r))if(Array.isArray(t))n.write(`${JSON.stringify(e)},"",${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.flat()))}\n`);else for(const[r,i]of Object.entries(t))n.write(`${JSON.stringify(e)},${JSON.stringify(r)},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(i.flat()))}\n`);n.close()}}(t,n)};const i=n(67102),o=r(n(57975)),s=r(n(28333)),a=n(49525),l=n(71339),u=n(33267),c=n(87247),d=n(13078)},90103:()=>{},90222:()=>{},90271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processFunctionDefinition=function(e,t,n,_){if(t.length<1)return l.dataflowLogger.warn(`Function Definition ${e.content} does not have an argument, skipping`),(0,o.processKnownFunctionCall)({name:e,args:t,rootId:n,data:_}).information;const b=t.slice(0,-1),v=(0,s.unpackArgument)(t[t.length-1]);(0,a.guard)(void 0!==v,(()=>`Function Definition ${JSON.stringify(t)} has missing body! This is bad!`));const w=_.environment;_=function(e){let t=(0,h.initializeCleanEnvironments)();for(let n=0;n<e.environment.level+1;n++)t=(0,p.pushLocalEnvironment)(t);return{...e,environment:t}}(_);const E=new c.DataflowGraph(_.completeAst.idMap);let S=[];for(const n of b){(0,a.guard)(n!==u.EmptyArgument,(()=>`Empty argument in function definition ${e.content}, ${JSON.stringify(t)}`));const o=(0,r.processDataflowFor)(n,_);E.mergeWith(o.graph);const s=[...o.in,...o.unknownReferences];(0,i.linkInputs)(s,_.environment,S,E,!1),_={..._,environment:(0,d.overwriteEnvironment)(_.environment,o.environment)}}const x=_.environment,R=(0,r.processDataflowFor)(v,_),T=R.environment;S=function(e,t,n,r){const i=[];for(const o of t){const t=o.name?(0,m.resolveByName)(o.name,n,o.type):void 0;if(void 0!==t){for(const n of t)e.addEdge(o,n,g.EdgeType.Reads);continue}const s=r.out.filter((e=>e.name===o.name)).sort(((e,t)=>String(e.nodeId)<String(t.nodeId)?1:-1));if(0!==s.length)if(void 0!==s[0].controlDependencies)for(const t of s)e.addEdge(o,t,g.EdgeType.Reads);else e.addEdge(o,s[0],g.EdgeType.Reads);else i.push(o)}return i}(E,S,x,R);const A=[...R.in,...R.unknownReferences],O=(0,i.linkInputs)(A,x,S.slice(),R.graph,!0);if(O.length>0){const e=(0,i.produceNameSharedIdMap)(O),t=new Set([...T.current.memory.values()].flat().map((e=>e.nodeId))),n=R.out.filter((e=>!t.has(e.nodeId)));(0,i.linkCircularRedefinitionsWithinALoop)(R.graph,e,n)}E.mergeWith(R.graph);const I=(0,d.overwriteEnvironment)(x,T);for(const e of O)e.name&&E.addVertex({tag:f.VertexType.Use,id:e.nodeId,environment:void 0,controlDependencies:void 0});const N={unknownReferences:[],in:O,out:[],entryPoint:R.entryPoint,graph:new Set(E.rootIds()),environment:I};y(E,I,e.info.id);const P=R.exitPoints,$=new c.DataflowGraph(_.completeAst.idMap).mergeWith(E,!1);return $.addVertex({tag:f.VertexType.FunctionDefinition,id:e.info.id,environment:(0,p.popLocalEnvironment)(I),controlDependencies:_.controlDependencies,subflow:N,exitPoints:P?.filter((e=>1===e.type||0===e.type)).map((e=>e.nodeId))??[]}),{unknownReferences:[],in:[],out:[],exitPoints:[],entryPoint:e.info.id,graph:$,environment:w}},t.retrieveActiveEnvironment=function(e,t){e??=(0,h.initializeCleanEnvironments)(!0);let n=e.level??0;if(t.level!==n){for(;t.level<n;)t=(0,p.pushLocalEnvironment)(t);for(;t.level>n;)n=(e=(0,p.pushLocalEnvironment)(e)).level}return(0,d.overwriteEnvironment)(t,e)},t.updateNestedFunctionClosures=y,t.updateNestedFunctionCalls=function(e,t){for(const[n,{onlyBuiltin:r,tag:o,environment:s,name:a}]of e.vertices(!0)){if(o!==f.VertexType.FunctionCall||!a||r)continue;if(s){for(;t.level>s.level;)t=(0,p.popLocalEnvironment)(t);for(;t.level<s.level;)t=(0,p.pushLocalEnvironment)(t)}const u=s?(0,d.overwriteEnvironment)(t,s):t,c=(0,i.getAllFunctionCallTargets)(n,e,u);for(const t of c){const r=e.getVertex(t);if(r?.tag!==f.VertexType.FunctionDefinition){r?.tag===f.VertexType.Use&&e.addEdge(n,t,g.EdgeType.Reads);continue}e.addEdge(n,t,g.EdgeType.Calls);const i=r.subflow.in,o=[];for(const t of i){const r=t.name?(0,m.resolveByName)(t.name,u,t.type):void 0;if(void 0!==r){(0,_.expensiveTrace)(l.dataflowLogger,(()=>`Found ${r.length} references to open ref ${n} in closure of function definition ${n}`));for(const i of r)e.addEdge(t,i,g.EdgeType.DefinedByOnCall),e.addEdge(n,i,g.EdgeType.DefinesOnCall)}else o.push(t)}(0,_.expensiveTrace)(l.dataflowLogger,(()=>`Keeping ${o.length} references to open ref ${n} in closure of function definition ${n}`)),r.subflow.in=o}}};const r=n(22476),i=n(56533),o=n(92397),s=n(55143),a=n(57012),l=n(22438),u=n(25377),c=n(60347),d=n(10682),f=n(18841),p=n(54856),h=n(73326),m=n(85193),g=n(34966),_=n(19742);function y(e,t,n){for(const[r,{subflow:i,tag:o}]of e.vertices(!0)){if(o!==f.VertexType.FunctionDefinition)continue;const s=i.in,a=[];for(const i of s){const o=i.name?(0,m.resolveByName)(i.name,t,i.type):void 0;if(void 0!==o){(0,_.expensiveTrace)(l.dataflowLogger,(()=>`Found ${o.length} references to open ref ${r} in closure of function definition ${n}`));for(const t of o)e.addEdge(i,t,g.EdgeType.Reads)}else a.push(i)}(0,_.expensiveTrace)(l.dataflowLogger,(()=>`Keeping ${a.length} references to open ref ${r} in closure of function definition ${n}`)),i.in=a}}},90479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EqualsOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))}toString(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"}}t.EqualsOperation=i},90663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllFunctionCallTargets=p,t.sliceForCall=function(e,t,n,r){e.baseEnvironment;const[o,s]=p(n,t,e.baseEnvironment),a=(0,i.envFingerprint)(s);if(0!==o.size)m(e.onlyForSideEffects,o,s,a,r);else for(const e of t.args)h(e,0,s,r,n)},t.handleReturns=function(e,t,n,r,i){const o=[...n.entries()],s=o.filter((([e,t])=>(0,u.edgeIncludesType)(t.types,u.EdgeType.Returns)));if(0===s.length)return!1;for(const[e]of s)t.add(e,i,r,!1);for(const[n,s]of o)(0,u.edgeIncludesType)(s.types,u.EdgeType.Reads)?t.add(n,i,r,!1):(0,u.edgeIncludesType)(s.types,u.EdgeType.DefinesOnCall|u.EdgeType.DefinedByOnCall|u.EdgeType.Argument)&&(0,f.updatePotentialAddition)(t,e,n,i);return!0};const r=n(57012),i=n(10972),o=n(56533),s=n(60347),a=n(39767),l=n(85193),u=n(34966),c=n(46044),d=n(90271),f=n(18741);function p(e,t,n){const i=e.get(t.id,!0);(0,r.guard)(void 0!==i,(()=>`outgoing edges of id: ${t.id} must be in graph but can not be found, keep in slice to be sure`));const s=(0,d.retrieveActiveEnvironment)(t.environment,n),f=t.name;(0,r.guard)(void 0!==f,(()=>`name of id: ${t.id} can not be found in id map`));const p=(0,l.resolveByName)(f,s,c.ReferenceType.Unknown)?.filter((e=>e.definedAt!==a.BuiltIn))?.map((e=>e.nodeId))??[];for(const[e,t]of i[1].entries())(0,u.edgeIncludesType)(t.types,u.EdgeType.Calls)&&p.push(e);return[(0,o.getAllLinkedFunctionDefinitions)(new Set(p),e),s]}function h(e,t,n,r,a){const l=(0,s.getReferenceOfArgument)(e);l&&m(!1,(0,o.getAllLinkedFunctionDefinitions)(new Set([l]),a),n,(0,i.envFingerprint)(n),r)}function m(e,t,n,r,i){for(const o of t)for(const t of o.exitPoints)i.add(t,n,r,e)}},90774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prompt=t.rawPrompt=void 0;const r=n(77529);t.rawPrompt="R>",t.prompt=()=>`${r.formatter.format(t.rawPrompt,{color:6,effect:r.ColorEffect.Foreground})} `},90968:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},91142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseFlowrSearchBuilderType=function(e,t,n){const i=(0,r.getFlowrSearch)(e);return i.search.reduce(n,t(i.generator))};const r=n(5521)},91277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableReference=void 0;const r=n(54630),i=n(20518),o=n(52950);class s extends o.Expression{variable;constructor(e){super(),this.variable=e}toString(){return"$"+this.variable}evaluate(e){const t=(0,r.resolveQName)(this.variable,e.namespaceResolver,e.contextNode,!1);if(null==t[0])throw new Error("Cannot resolve QName "+this.variable);const n=e.variableResolver.getVariable(t[1],t[0]);if(!n)throw i.XPathException.fromMessage("Undeclared variable: "+this.toString());return n}}t.VariableReference=s},91398:e=>{"use strict";e.exports=require("vscode")},91884:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonReplacer=i,t.jsonBigIntRetriever=function(e,t){return"string"==typeof t&&t.endsWith("n")?BigInt(t.slice(0,-1)):t},t.superBigJsonStringify=function(e,t,n){try{n(JSON.stringify(e,i)+t)}catch{n(o(e,"",n)+t)}};const r=n(73326);function i(e,t){return"fullLexeme"===e?void 0:t instanceof Map||t instanceof Set?[...t]:"bigint"==typeof t?`${t.toString()}n`:t}function o(e,t,n){if(t.length>2e4&&(n(t),t=""),null==e)return t+"null";if(e===r.BuiltInEnvironment)return t+"<BuiltInEnvironment>";if(e===r.EmptyBuiltInEnvironment)return t+"<EmptyBuiltInEnvironment>";if(Array.isArray(e)){let r=t+"[";for(let t=0;t<e.length;t++)t>0&&(r+=","),r=o(e[t],r,n),r.length>2e4&&(n(r),r="");return r+"]"}if(e instanceof Map||e instanceof Set){let r=t+"[",i=0;for(const t of e)i++>0&&(r+=","),r=o(t,r,n),r.length>2e4&&(n(r),r="");return r+"]"}if("bigint"==typeof e)return t+`${e.toString()}n`;if(e instanceof Date)return t+`"${e.toISOString()}"`;if(e instanceof RegExp)return t+`"${e.toString()}"`;if("object"==typeof e){let r=t+"{",i=0;for(const t in e)if(Object.hasOwn(e,t)){const s=e[t];if(void 0===s||"function"==typeof s||"symbol"==typeof s||"info"===t)continue;i++>0&&(r+=","),r+=`"${t}":`,r=o(s,r,n),r.length>2e4&&(n(r),r="")}return r+"}"}return"function"==typeof e||"symbol"==typeof e?t+"null":t+JSON.stringify(e,r.builtInEnvJsonReplacer)}},92397:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNonStandardEvaluationEdges=d,t.processKnownFunctionCall=function({name:e,args:t,rootId:n,data:a,reverseOrder:f=!1,markAsNSE:p,forceArgs:h,patchData:m=e=>e,hasUnknownSideEffect:g},_=void 0){const y=(0,r.processDataflowFor)(e,a),b=new s.DataflowGraph(a.completeAst.idMap),v=e.content;(0,c.expensiveTrace)(l.dataflowLogger,(()=>`Processing known function call ${v} with ${t.length} arguments`));const w=f?[...t].reverse():t,{finalEnv:E,callArgs:S,remainingReadInArgs:x,processedArguments:R}=(0,i.processAllArguments)({functionName:y,args:w,data:a,finalGraph:b,functionRootId:n,patchData:m,forceArgs:h});p&&d(p,R,b,n),b.addVertex({tag:u.VertexType.FunctionCall,id:n,environment:a.environment,name:v,onlyBuiltin:!1,controlDependencies:a.controlDependencies,args:f?[...S].reverse():S,indicesCollection:_}),g&&b.markIdForUnknownSideEffects(n);const T=x,A={nodeId:n,name:v,controlDependencies:a.controlDependencies,type:o.ReferenceType.Function};return T.push(A),{information:{unknownReferences:[],in:T,out:y.out,graph:b,environment:E,entryPoint:n,exitPoints:[{nodeId:n,type:0,controlDependencies:a.controlDependencies}]},processedArguments:f?[...R].reverse():R,fnRef:A}};const r=n(22476),i=n(80876),o=n(46044),s=n(60347),a=n(34966),l=n(22438),u=n(18841),c=n(19742);function d(e,t,n,r){for(const i of e)if(i<t.length){const e=t[i];void 0!==e&&n.addEdge(r,e.entryPoint,a.EdgeType.NonStandardEvaluation)}else l.dataflowLogger.warn(`Trying to mark argument ${i} as non-standard-evaluation, but only ${t.length} arguments are available`)}},92721:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},92861:(e,t,n)=>{var r=n(48287),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},93007:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n,i,o)=>{"string"==typeof n&&(o=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,o).version}catch(e){return null}}},93086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitComments=v,t.normalizeExpressions=function e(t,n){if(0===n.length)return i.parseLog.warn("no children received, skipping"),[];let r=n[0].name?n:(0,o.getWithTokenType)(n);(0,s.expensiveTrace)(s.log,(()=>`[parseBasedOnType] names: [${r.map((({name:e})=>e)).join(", ")}]`));let u=[];if(r.length>1){const{segments:n,braces:i,comments:o}=function(e){if(0===e.length)return{segments:[],comments:[],braces:void 0};const{comments:t,others:n}=v(e),r=n[0]?.name;if(r===_.RawRType.BraceLeft){const e=n[n.length-1].name;return(0,a.guard)(e===_.RawRType.BraceRight,(()=>`expected a brace at the end of the expression list as well, but ${e} :: ${JSON.stringify(n[n.length-1],l.jsonReplacer)}`)),{segments:[n.slice(1,n.length-1)],comments:t,braces:[n[0],n[n.length-1]]}}if(r===_.RawRType.ParenLeft){const e=n[n.length-1].name;return(0,a.guard)(e===_.RawRType.ParenRight,(()=>`expected a parenthesis at the end of the expression list as well, but ${e} :: ${JSON.stringify(n[n.length-1],l.jsonReplacer)}`)),{segments:[n.slice(1,n.length-1)],comments:t,braces:[n[0],n[n.length-1]]}}return{segments:w(n),comments:t,braces:void 0}}(r);if(u=o.map((e=>(0,y.normalizeComment)(t,e.content))),n.length>1||i){const r=n.flatMap((n=>e(t,n)));return(0,a.guard)(!r.some((e=>e.type===_.RType.Delimiter)),(()=>`expected no delimiter tokens in ${JSON.stringify(r)}`)),i?[E(i,r,u,t)]:r.length>0?(u&&(r[0].info.additionalTokens??=[],r[0].info.additionalTokens.push(...u)),r):u}r=n[0]}return[...u,...b(r,t)]},t.parseNodesWithUnknownType=S;const r=n(10570),i=n(56293),o=n(36604),s=n(19742),a=n(57012),l=n(91884),u=n(26954),c=n(69912),d=n(49428),f=n(9400),p=n(6056),h=n(22660),m=n(14530),g=n(60440),_=n(49375),y=n(31315);function b(e,t){let n;switch(e?.length){case 1:n=(0,r.normalizeSingleNode)(t,e[0]);break;case 2:n=(0,u.tryNormalizeUnary)(t,e)??(0,c.tryNormalizeRepeat)(t,e);break;case 3:n=(0,d.tryNormalizeBinary)(t,e)??(0,f.tryNormalizeFor)(t,e)??(0,p.tryNormalizeSymbol)(t,e);break;case 5:n=(0,h.tryNormalizeIfThen)(t,e)??(0,m.tryNormalizeWhile)(t,e);break;case 7:n=(0,g.tryNormalizeIfThenElse)(t,e)}return void 0!==n?[n]:S(t,e)}function v(e){const t=[],n=[];for(const r of e)r.name===_.RawRType.Comment?t.push(r):n.push(r);return{comments:t,others:n}}function w(e){let t=0,n=0,r=!1;const i=[];for(const o of e){if(o.name===_.RawRType.Semicolon)i.push(e.slice(t,n)),r=!1,t=n+1;else{const s=o.name===_.RawRType.Expression||o.name===_.RawRType.ExprOfAssignOrHelp||o.name===_.RawRType.LegacyEqualAssign;s&&r&&(n>t&&i.push(e.slice(t,n)),i.push([e[n]]),t=n+1),r=s}n++}return t<e.length&&i.push(e.slice(t,e.length)),i}function E([e,t],n,r,i){const[o,s]=[(0,p.tryNormalizeSymbol)(i,[e]),(0,p.tryNormalizeSymbol)(i,[t])];return(0,a.guard)(void 0!==o&&void 0!==s,(()=>`expected both start and end to be symbols, but ${JSON.stringify(e,l.jsonReplacer)} :: ${JSON.stringify(t,l.jsonReplacer)}`)),{type:_.RType.ExpressionList,children:n,grouping:[o,s],lexeme:void 0,location:void 0,info:{additionalTokens:r}}}function S(e,t){const n=[];for(const i of t??[]){const t=(0,r.normalizeSingleNode)(e,i);n.push(t)}return n}},93591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeDependenciesQuery=function(e,t){1!==t.length&&s.log.warn("Dependencies query expects only up to one query, but got ",t.length,"only using the first query");const n=Date.now(),[o]=t,l=o.ignoreDefaultFunctions??!1,u=g(o.libraryFunctions,l,i.LibraryFunctions),d=g(o.sourceFunctions,l,i.SourceFunctions),f=g(o.readFunctions,l,i.ReadFunctions),p=g(o.writeFunctions,l,i.WriteFunctions),_=u.length+d.length+f.length+p.length===0?{kinds:{},".meta":{timing:0}}:(0,r.executeQueriesOfSameType)(e,...h(u,"library"),...h(d,"source"),...h(f,"read"),...h(p,"write")),y=(t,n)=>{if(t&&t!==i.Unknown||!n)return;let r=e.ast.idMap.get(n);return r?(r.type===a.RType.Argument&&(r=r.value),r?.info.fullLexeme??r?.lexeme):void 0},b=m(e,_,"library",u,((e,t,n,r)=>({nodeId:e,functionName:t.name,lexemeOfArgument:y(r,n),libraryName:r??i.Unknown})),[a.RType.Symbol]);l||(0,c.visitAst)(e.ast.ast,(e=>{e.type===a.RType.Symbol&&e.namespace&&b.push({nodeId:e.info.id,functionName:(e.info.fullLexeme??e.lexeme).includes(":::")?":::":"::",libraryName:e.namespace})}));const v=m(e,_,"source",d,((e,t,n,r,o)=>({nodeId:e,functionName:t.name,file:r??i.Unknown,lexemeOfArgument:y(r,n),linkedIds:o?.length?o:void 0}))),w=m(e,_,"read",f,((e,t,n,r,o)=>({nodeId:e,functionName:t.name,source:r??i.Unknown,lexemeOfArgument:y(r,n),linkedIds:o?.length?o:void 0}))),E=m(e,_,"write",p,((e,t,n,r,o)=>({nodeId:e,functionName:t.name,destination:r??(o?.length?i.Unknown:"stdout"),lexemeOfArgument:y(r,n),linkedIds:o?.length?o:void 0})));return{".meta":{timing:Date.now()-n},libraries:b,sourcedFiles:v,readData:w,writtenData:E}};const r=n(49144),i=n(78921),o=n(60347),s=n(19742),a=n(49375),l=n(72814),u=n(25377),c=n(6945),d=n(57012),f=n(22452),p=[a.RType.String,a.RType.Logical,a.RType.Number];function h(e,t){return e.map((e=>({type:"call-context",callName:e.name,includeAliases:!1,callNameExact:!0,subkind:e.name,linkTo:e.linkTo?{type:"link-to-last-call",callName:e.linkTo}:void 0,kind:t})))}function m(e,t,n,r,s,c){return Object.entries(t?.kinds[n]?.subkinds??{}).flatMap((([t,n])=>n.flatMap((({id:n,linkedIds:h})=>{const m=e.dataflow.graph.getVertex(n),g=r.find((e=>e.name===t));let _=g.argIdx;if(g.argName){const e=m?.args.findIndex((e=>e!==u.EmptyArgument&&e.name===g.argName));e>=0&&(_=e)}const y=void 0!==_?function({dataflow:{graph:e}},t,n,r){if(t){if("unnamed"===n){const n=t.args.filter((e=>e!==u.EmptyArgument&&!e.name)).map(o.getReferenceOfArgument).filter(d.isNotUndefined),s=new Map;for(const t of n){let n=e.idMap?.get(t);if(n?.type===a.RType.Argument&&(n=n.value),n){const e=[...p,...r??[]].includes(n.type)?(0,l.removeRQuotes)(n.lexeme):i.Unknown;s.set(t,new Set([e]))}}return s}if(t.args.length>n){const s=(0,o.getReferenceOfArgument)(t.args[n]);if(!s)return;let u=e.idMap?.get(s);if(u?.type===a.RType.Argument&&(u=u.value),u){const e=[...p,...r??[]];return new Map([[s,new Set([e.includes(u.type)?(0,l.removeRQuotes)(u.lexeme):i.Unknown])]])}}}}(e,m,_,c):void 0;if(!y){const e=(0,f.compactRecord)(s(n,m,void 0,void 0,h));return e?[e]:[]}const b=[];for(const[e,t]of y.entries())for(const r of t){const t=(0,f.compactRecord)(s(n,m,e,r,h));t&&b.push(t)}return b}))))??[]}function g(e,t,n){const r=t?[]:[...n];return e&&r.push(...e),r}},93628:(e,t,n)=>{"use strict";var r=n(48648),i=n(71064),o=n(7176);e.exports=r?function(e){return r(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return i(e)}:o?function(e){return o(e)}:null},93672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathNamespace=void 0;class n{static XPATH_NAMESPACE_NODE=13;isXPathNamespace=!0;ownerDocument;nodeName="#namespace";prefix;localName;namespaceURI;nodeValue;ownerElement;nodeType;constructor(e,t,r){this.isXPathNamespace=!0,this.ownerDocument=r.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=r,this.nodeType=n.XPATH_NAMESPACE_NODE}toString(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'}baseURI=void 0;childNodes=void 0;firstChild=void 0;isConnected=void 0;lastChild=void 0;nextSibling=void 0;parentElement=void 0;parentNode=void 0;previousSibling=void 0;textContent=void 0;appendChild=r;cloneNode=r;compareDocumentPosition=r;contains=r;getRootNode=r;hasChildNodes=r;insertBefore=r;isDefaultNamespace=r;isEqualNode=r;isSameNode=r;lookupNamespaceURI=r;lookupPrefix=r;normalize=r;removeChild=r;replaceChild=r;ATTRIBUTE_NODE=2;CDATA_SECTION_NODE=4;COMMENT_NODE=8;DOCUMENT_FRAGMENT_NODE=11;DOCUMENT_NODE=9;DOCUMENT_POSITION_CONTAINED_BY=16;DOCUMENT_POSITION_CONTAINS=8;DOCUMENT_POSITION_DISCONNECTED=1;DOCUMENT_POSITION_FOLLOWING=4;DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;DOCUMENT_POSITION_PRECEDING=2;DOCUMENT_TYPE_NODE=10;ELEMENT_NODE=1;ENTITY_NODE=6;ENTITY_REFERENCE_NODE=5;NOTATION_NODE=12;PROCESSING_INSTRUCTION_NODE=7;TEXT_NODE=3;addEventListener=r;dispatchEvent=r;removeEventListener=r}function r(){throw new Error("Unsupported")}t.XPathNamespace=n},93904:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=n(98587),{safeRe:s,t:a}=n(99718),l=n(72111),u=n(57272),c=n(53908),d=n(78311)},94459:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},94473:()=>{},94612:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){(function(e,t,n,r){const a=[],d={total:[],parameters:[],length:{lines:[],chars:[],nonWhitespaceChars:[]},returns:{explicit:[],implicit:[],onlyExplicit:[],onlyImplicit:[]},exitPointsLinePercentageInDef:[],linePercentageInFile:[],callsites:[]};(0,u.readLineByLineSync)(i.default.join(e,`${s.AllDefinitionsFileBase}.txt`),((e,n)=>function(e,t,n,r){t%2500==0&&console.log(`    [${(0,c.date2string)(new Date)}] Defined functions processed ${t} lines`);const[i,o]=r,s={total:[],parameters:[],length:{lines:[],chars:[],nonWhitespaceChars:[]},returns:{explicit:[],implicit:[],onlyExplicit:[],onlyImplicit:[]},exitPointsLinePercentageInDef:[],linePercentageInFile:[],callsites:[]};for(const{location:e,length:t,returns:r,numberOfParameters:a,callsites:l}of i){const i=n.get(o??"")?.stats.lines[0].length;s.total.push(1),s.parameters.push(a),s.length.lines.push(t.lines),s.length.chars.push(t.characters),s.length.nonWhitespaceChars.push(t.nonWhitespaceCharacters),s.exitPointsLinePercentageInDef.push(r.map((e=>e.location[0])).map((e=>e/t.lines))),s.callsites.push(l.length),i&&s.linePercentageInFile.push(e[0]/i)}s.total=[s.total.length],e.push(s)}(a,n,t,JSON.parse(String(e))))),console.log(`    [${(0,c.date2string)(new Date)}] Defined functions process completed, start to write out function info`);const p=o.default.createWriteStream(i.default.join(r,"function-definitions.csv")),h=["total","params","length-lines","length-chars","length-non-ws-chars","return-explicit","return-implicit","return-only-explicit","return-only-implicit","exit-points-line-crac","def-line-frac"].flatMap(l.summarizedMeasurement2CsvHeader).join(",");p.write(`counter,${h}\n`);for(const[e,t]of a.entries())p.write(f(e,t)),d.total.push(...t.total),d.parameters.push(...t.parameters),d.length.lines.push(...t.length.lines),d.length.chars.push(...t.length.chars),d.length.nonWhitespaceChars.push(...t.length.nonWhitespaceChars),d.returns.onlyExplicit.push(...t.returns.onlyExplicit),d.returns.onlyImplicit.push(...t.returns.onlyImplicit),d.exitPointsLinePercentageInDef.push(...t.exitPointsLinePercentageInDef),d.linePercentageInFile.push(...t.linePercentageInFile),d.callsites.push(...t.callsites);p.write(f("all",d)),p.close()})(e,t,0,n),console.log(`    [${(0,c.date2string)(new Date)}] Defined functions reading completed, summarizing info...`),function(e,t,n){const r={total:(0,a.emptySummarizedWithProject)(),lambdasOnly:(0,a.emptySummarizedWithProject)(),assignedFunctions:(0,a.emptySummarizedWithProject)(),nestedFunctions:(0,a.emptySummarizedWithProject)(),recursive:(0,a.emptySummarizedWithProject)(),deepestNesting:(0,a.emptySummarizedWithProject)()};for(const[n,i]of e.entries()){const e=i.definedFunctions;p(r.total,e.total,n,t),p(r.lambdasOnly,e.lambdasOnly,n,t),p(r.assignedFunctions,e.assignedFunctions,n,t),p(r.nestedFunctions,e.nestedFunctions,n,t),p(r.recursive,e.recursive,n,t),p(r.deepestNesting,e.deepestNesting,n,t)}console.log(`    [${(0,c.date2string)(new Date)}] Defined functions metadata reading completed, summarizing and writing to file`);const s=o.default.createWriteStream(i.default.join(n,"function-definitions-meta.csv"));s.write(`kind,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of Object.entries(r)){const n=t;s.write(`${JSON.stringify(e)},${n.uniqueProjects.size},${n.uniqueFiles.size},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(n.count))}\n`)}s.close()}(t,r,n),function(e,t,n){const r=new Map;(0,u.readLineByLineSync)(i.default.join(e,"assignedFunctions.txt"),(e=>{const n=JSON.parse(String(e)),[i,o]=n,s=(0,d.array2bag)(i);for(const[e,n]of s.entries()){let i=r.get(e);i||(i=(0,a.emptySummarizedWithProject)(),r.set(e,i)),p(i,n,o??"",t)}}));const s=o.default.createWriteStream(i.default.join(n,"function-definitions-var-names.csv"));s.write(`name,unique-projects,unique-files,${(0,l.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,t]of r.entries())s.write(`${JSON.stringify(e)},${t.uniqueProjects.size},${t.uniqueFiles.size},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.count))}\n`);s.close()}(e,r,n)};const i=r(n(57975)),o=r(n(29591)),s=n(71469),a=n(61685),l=n(71339),u=n(33267),c=n(87247),d=n(83584);function f(e,t){return`${JSON.stringify(e)},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.total.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.parameters.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.length.lines.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.length.chars.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.length.nonWhitespaceChars.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)([0]))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)([0]))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.returns.onlyExplicit.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.returns.onlyImplicit.flat()))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.exitPointsLinePercentageInDef.flat(2)))},${(0,l.summarizedMeasurement2Csv)((0,l.summarizeMeasurement)(t.linePercentageInFile.flat()))}\n`}function p(e,t,n,r){e.count.push(t),t>0&&(0,a.recordFilePath)(e,n,r)}},94641:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0===r(e,t,n)},94643:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},94692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generators=void 0,t.getGenerator=function(e){if(!t.generators[e])throw new Error(`Unknown generator: ${e}`);return t.generators[e]};const r=n(96047),i=n(21578),o=n(57012);function s(e){return[...new Map([...e.normalize.idMap.values()].map((e=>[e.info.id,e]))).values()]}t.generators={all:function(e){return new r.FlowrSearchElements(s(e).map((e=>({node:e}))))},get:function(e,{filter:{line:t,column:n,id:i,name:a,nameIsRegex:l}}){let u=i?[e.normalize.idMap.get(i)].filter(o.isNotUndefined):s(e);if(t&&t<0){const n=e.normalize.ast.info.fullRange?.[2]??(i?s(e):u).reduce(((e,{location:t})=>t&&t[2]>e?t[2]:e),0);t=n+t+1}if(t&&n?u=u.filter((({location:e})=>e?.[0]===t&&e?.[1]===n)):t?u=u.filter((({location:e})=>e?.[0]===t)):n&&(u=u.filter((({location:e})=>e?.[1]===n))),l&&a){const e=new RegExp(a);u=u.filter((({lexeme:t})=>t&&e.test(t)))}else a&&(u=u.filter((({lexeme:e})=>e===a)));return new r.FlowrSearchElements(u.map((e=>({node:e}))))},criterion:function(e,t){return new r.FlowrSearchElements(t.criterion.map((t=>({node:e.normalize.idMap.get((0,i.slicingCriterionToId)(t,e.normalize.idMap))}))))},from:function(e,t){return new r.FlowrSearchElements(Array.isArray(t.from)?t.from:[t.from])}}},94739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnaryOperation=void 0;const r=n(52950);class i extends r.Expression{rhs;constructor(e){super(),this.rhs=e}}t.UnaryOperation=i},95758:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Ternary=void 0,function(e){e.Always="always",e.Maybe="maybe",e.Never="never"}(n||(t.Ternary=n={}))},96047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowrSearchElements=void 0,t.FlowrSearchElements=class{elements=[];constructor(e){e&&(this.elements=e)}add(e){return this.elements.push(e),this}addAll(e){return this.elements.push(...e),this}getElements(){return this.elements}mutate(e){return this.elements=e(this.elements),this}}},96117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processPipe=function(e,t,n,d){const{information:f}=(0,r.processKnownFunctionCall)({name:e,args:t,rootId:n,data:d});if(2!==t.length)return s.dataflowLogger.warn(`Pipe ${e.content} has something else than 2 arguments, skipping`),f;const[p,h]=t.map((e=>(0,o.unpackArgument)(e)));if((0,i.guard)(void 0!==p&&void 0!==h,(()=>`lhs and rhs must be present, but ${JSON.stringify(p)} and ${JSON.stringify(h)} were found instead.`)),h.type!==a.RType.FunctionCall)s.dataflowLogger.warn(`Expected rhs of pipe to be a function call, but got ${h.type} instead.`);else{const e=f.graph.getVertex(h.info.id,!0);(0,i.guard)(e?.tag===l.VertexType.FunctionCall,(()=>`Expected function call node with id ${h.info.id} to be a function call node, but got ${e?.tag} instead.`));const t=p.info.id;s.dataflowLogger.trace(`Linking pipe arg ${t} as first argument of ${h.info.id}`),e.args.unshift({name:void 0,nodeId:t,controlDependencies:d.controlDependencies,type:c.ReferenceType.Function}),f.graph.addEdge(e.id,t,u.EdgeType.Argument)}return f};const r=n(92397),i=n(57012),o=n(55143),s=n(22438),a=n(49375),l=n(18841),u=n(34966),c=n(46044)},96238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAllClusters=function(e){const t=[],n=new Set([...e.vertices(!0)].map((([e])=>e)).reverse());for(;n.size>0;){const[r]=n;n.delete(r),t.push({startNode:r,members:[...s(e,r,n)],hasUnknownSideEffects:e.unknownSideEffects.has(r)})}return t};const r=n(34966),i=n(18841),o=n(57012);function s(e,t,n){const a=e.getVertex(t);(0,o.guard)(void 0!==a,(()=>`Vertex ${t} not found in graph`));const l=new Set([t]);if(a.tag===i.VertexType.FunctionDefinition)for(const t of a.exitPoints)n.delete(t)&&s(e,t,n).forEach((e=>l.add(e)));for(const[i,{types:o}]of[...e.outgoingEdges(t)??[],...e.ingoingEdges(t)??[]])(0,r.edgeDoesNotIncludeType)(o,r.EdgeType.Returns)&&a.onlyBuiltin&&"{"==a.name||n.delete(i)&&s(e,i,n).forEach((e=>l.add(e)));return l}},96764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModOperation=void 0;const r=n(87927);class i extends r.BinaryOperation{evaluate(e){return this.lhs.evaluate(e).number.mod(this.rhs.evaluate(e).number)}toString(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"}}t.ModOperation=i},96897:(e,t,n)=>{"use strict";var r=n(70453),i=n(30041),o=n(30592)(),s=n(75795),a=n(69675),l=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in e&&s){var c=s(e,"length");c&&!c.configurable&&(r=!1),c&&!c.writable&&(u=!1)}return(r||u||!n)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},97075:(e,t,n)=>{const r=n(53908),i=n(93904),{ANY:o}=i,s=n(78311),a=n(97638),l=n(35580),u=n(7059),c=n(25200),d=n(54089);e.exports=(e,t,n,f)=>{let p,h,m,g,_;switch(e=new r(e,f),t=new s(t,f),n){case">":p=l,h=c,m=u,g=">",_=">=";break;case"<":p=u,h=d,m=l,g="<",_="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,f))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,p(e.semver,s.semver,f)?s=e:m(e.semver,a.semver,f)&&(a=e)})),s.operator===g||s.operator===_)return!1;if((!a.operator||a.operator===g)&&h(e,a.semver))return!1;if(a.operator===_&&m(e,a.semver))return!1}return!0}},97366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processUninterestingLeaf=function(e,t){return(0,r.initializeCleanDataflowInformation)(e.info.id,t)};const r=n(47318)},97613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeSearch=function({ast:e,dataflow:t},n){const i=Date.now(),o=[];for(const i of n){const{search:n}=i;o.push({ids:(0,r.runSearch)(n,{normalize:e,dataflow:t}).map((({node:e})=>e.info.id)),search:n})}return{".meta":{timing:Date.now()-i},results:o}};const r=n(4853)},97638:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},97716:(e,t,n)=>{e.exports=n(99589)},98327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processFunctionCall=function(e,t){return e.named?(0,r.processNamedCall)(e.functionName,e.arguments,e.info.id,t):(0,i.processUnnamedFunctionCall)(e,t)};const r=n(55087),i=n(72658)},98587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},99299:()=>{},99489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyLogStyles=void 0,t.prettyLogStyles={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},99589:(e,t,n)=>{const r=n(99718),i=n(16874),o=n(53908),s=n(61123),a=n(30144),l=n(56953),u=n(57414),c=n(93007),d=n(51832),f=n(32938),p=n(46254),h=n(24493),m=n(31729),g=n(50560),_=n(9970),y=n(11763),b=n(40909),v=n(43927),w=n(74277),E=n(35580),S=n(7059),x=n(94641),R=n(13999),T=n(54089),A=n(25200),O=n(72111),I=n(46170),N=n(93904),P=n(78311),$=n(97638),C=n(77631),M=n(19628),k=n(270),j=n(41261),L=n(13874),F=n(97075),D=n(75571),B=n(5342),U=n(76780),q=n(72525),V=n(75032);e.exports={parse:a,valid:l,clean:u,inc:c,diff:d,major:f,minor:p,patch:h,prerelease:m,compare:g,rcompare:_,compareLoose:y,compareBuild:b,sort:v,rsort:w,gt:E,lt:S,eq:x,neq:R,gte:T,lte:A,cmp:O,coerce:I,Comparator:N,Range:P,satisfies:$,toComparators:C,maxSatisfying:M,minSatisfying:k,minVersion:j,validRange:L,outside:F,gtr:D,ltr:B,intersects:U,simplifyRange:q,subset:V,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},99602:()=>{},99637:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postProcess=function(e,t,n,r){const u={assignmentOperator:{},assigned:(0,i.emptyCommonSyntaxTypeCounts)((()=>[])),deepestNesting:[],nestedOperatorAssignment:[]};for(const[e,n]of t.entries()){const t=n.assignments;u.deepestNesting.push([t.deepestNesting]),u.nestedOperatorAssignment.push([t.nestedOperatorAssignment]),(0,i.appendCommonSyntaxTypeCounter)(u.assigned,t.assigned),d(u,t.assignmentOperator,e,r)}(function(e,t){const n=o.default.createWriteStream(s.default.join(e,"assignments-assignment-operators.csv"));n.write(`assignment,unique-projects,unique-files,${(0,c.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,r]of Object.entries(t.assignmentOperator)){const{uniqueProjects:t,uniqueFiles:i,counts:o}=r,s=(0,c.summarizedMeasurement2Csv)((0,c.summarizeMeasurement)(o.flat()));n.write(`${JSON.stringify(e)},${t.size},${i.size},${s}\n`)}n.close()})(n,u),function(e,t){const n=function(e){const t=Object.keys(e.assignmentOperator);if(t.length<1)return new Map;const n=[...(0,a.getUniqueCombinationsOfSize)(t,1)],r=new Map;for(const t of n){if(1===t.length){const{uniqueProjects:n,uniqueFiles:i}=e.assignmentOperator[t[0]];r.set(t[0],{uniqueProjects:n,uniqueFiles:i});continue}const n=t.slice(0,-1).join(","),i=r.get(n);(0,l.guard)(void 0!==i,`Unable to retrieve cache for ${n}`);const o=t.join(","),{uniqueProjects:s,uniqueFiles:a}=e.assignmentOperator[t[t.length-1]],u=new Set([...i.uniqueProjects].filter((e=>s.has(e)))),c=new Set([...i.uniqueFiles].filter((e=>a.has(e))));r.set(o,{uniqueProjects:u,uniqueFiles:c})}const i=new Map;for(const[e,t]of r.entries())i.set(e,{uniqueProjects:t.uniqueProjects.size,uniqueFiles:t.uniqueFiles.size});return i}(e),r=o.default.createWriteStream(s.default.join(t,"assignments-assigned-combinations.csv"));r.write("assignment,unique-projects,unique-files\n");for(const[e,t]of n.entries())r.write(`${JSON.stringify(e)},${t.uniqueProjects},${t.uniqueFiles}\n`);r.close()}(u,n),function(e,t){const n=o.default.createWriteStream(s.default.join(e,"assignments-meta.csv"));n.write(`kind,${(0,c.summarizedMeasurement2CsvHeader)()}\n`);const r=(0,c.summarizeMeasurement)(t.deepestNesting.flat());n.write(`deepest-nesting,${(0,c.summarizedMeasurement2Csv)(r)}\n`);const i=(0,c.summarizeMeasurement)(t.nestedOperatorAssignment.flat());n.write(`nested-operator-assignment,${(0,c.summarizedMeasurement2Csv)(i)}\n`),n.close()}(n,u),function(e,t){const n=o.default.createWriteStream(s.default.join(e,"assignments-assigned.csv"));n.write(`kind,name,${(0,c.summarizedMeasurement2CsvHeader)()}\n`);for(const[e,r]of Object.entries(t.assigned))if(Array.isArray(r))n.write(`${JSON.stringify(e)},"",${(0,c.summarizedMeasurement2Csv)((0,c.summarizeMeasurement)(r.flat()))}\n`);else for(const[t,i]of Object.entries(r))n.write(`${JSON.stringify(e)},${JSON.stringify(t)},${(0,c.summarizedMeasurement2Csv)((0,c.summarizeMeasurement)(i.flat()))}\n`);n.close()}(n,u)};const i=n(67102),o=r(n(31508)),s=r(n(57975)),a=n(83584),l=n(57012),u=n(13078),c=n(71339);function d(e,t,n,r){for(const[i,o]of Object.entries(t)){let t=e.assignmentOperator[i];t||(t={uniqueFiles:new Set,uniqueProjects:new Set,counts:[]},e.assignmentOperator[i]=t);const a=(0,u.bigint2number)(o);t.counts.push([a]),a>0&&(t.uniqueFiles.add(n),t.uniqueProjects.add(n.split(s.default.sep)[r.projectSkip]??""))}}},99690:()=>{},99718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=n(16874),s=n(57272),a=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let f=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",o],[p,i]],m=(e,t,n)=>{const r=(e=>{for(const[t,n]of h)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=f++;s(e,i,t),d[e]=i,u[i]=t,c[i]=r,a[i]=new RegExp(t,n?"g":void 0),l[i]=new RegExp(r,n?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),m("FULL",`^${u[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),m("LOOSE",`^${u[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),m("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),m("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[d.COERCE],!0),m("COERCERTLFULL",u[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},99721:(e,t,n)=>{"use strict";var r=n(36556),i=n(14035),o=r("RegExp.prototype.exec"),s=n(69675);e.exports=function(e){if(!i(e))throw new s("`regex` must be a RegExp");return function(t){return null!==o(e,t)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(74265),__webpack_export_target__=exports;for(var __webpack_i__ in __webpack_exports__)__webpack_export_target__[__webpack_i__]=__webpack_exports__[__webpack_i__];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();