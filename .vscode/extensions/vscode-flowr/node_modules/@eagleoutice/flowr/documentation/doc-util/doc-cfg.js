"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCfg = getCfg;
const cfg_1 = require("../../util/cfg/cfg");
const pipeline_executor_1 = require("../../core/pipeline-executor");
const default_pipelines_1 = require("../../core/steps/pipeline/default-pipelines");
const retriever_1 = require("../../r-bridge/retriever");
async function getCfg(shell, code) {
    const steps = await new pipeline_executor_1.PipelineExecutor(default_pipelines_1.DEFAULT_DATAFLOW_PIPELINE, {
        parser: shell,
        request: (0, retriever_1.requestFromInput)(code)
    }).allRemainingSteps();
    return {
        info: (0, cfg_1.extractCFG)(steps.normalize, steps.dataflow?.graph),
        ast: steps.normalize
    };
}
//# sourceMappingURL=doc-cfg.js.map